//@name risu-ebooklike-viewer
//@display-name risu-ebooklike-viewer_v0.0.2
//@version 0.0.2
//@description EBook like viewer for RISU AI
//@arg arg1 string
//@arg arg2 int
//@dev-server-port 13131
//@link https://unpkg.com/risu-ebooklike-viewer@0.0.2/dist/risu-ebooklike-viewer.js
!function(){"use strict";try{if("undefined"!=typeof document){var e=document.createElement("style");e.appendChild(document.createTextNode("@import\"https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css\";@import\"//fonts.googleapis.com/earlyaccess/notosanskr.css\";.burger-menu{z-index:10}.update-dialog-module__udRoot--bWc9J{position:fixed;top:0;right:0;bottom:0;left:0;z-index:2147483646;display:grid;place-items:center;background:#0006;padding:16px}.update-dialog-module__udCard---wy8T{width:min(520px,100%);max-height:90vh;border-radius:16px;padding:20px;background:var(--bg, #111);color:var(--fg, #eaeaea);box-shadow:0 10px 30px #00000059;transform:scale(.97);animation:update-dialog-module__udPop--0Vb0B .16s ease-out forwards;overflow-y:auto}.update-dialog-module__udTitle--5imsi{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}.update-dialog-module__udTitle--5imsi h3{margin:0;font-size:18px;font-weight:700;word-break:break-word;flex:1 1 auto;min-width:0}.update-dialog-module__udPill--leinK{font:12px/1.8 system-ui;padding:0 8px;border-radius:999px;background:#2a2a2a;color:#cfcfcf;white-space:nowrap;flex-shrink:0}.update-dialog-module__udSub--zfs1y{margin:8px 0 12px;color:#9aa0a6;font:13px/1.5 system-ui;word-break:break-word}.update-dialog-module__udList--jnFg8{margin:10px 0 16px;padding-left:18px;max-height:180px;overflow-y:auto;overflow-x:hidden}.update-dialog-module__udList--jnFg8 li{margin:6px 0;word-break:break-word;overflow-wrap:break-word}.update-dialog-module__udFeat--MSXJY::marker{content:\"âœ¨ \"}.update-dialog-module__udFix--18UZ3::marker{content:\"ðŸ”§ \"}.update-dialog-module__udPerf--bRifN::marker{content:\"âš¡ \"}.update-dialog-module__udBreak--jl-Bf::marker{content:\"âš ï¸ \"}.update-dialog-module__udActions--5tqy2{display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}.update-dialog-module__udBtn--IHB-y{border:0;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:600;font-size:14px;white-space:nowrap;flex:0 1 auto}.update-dialog-module__udBtnPrimary--ZlLFd{border:0;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:600;font-size:14px;background:#4f7cff;color:#fff;white-space:nowrap;flex:0 1 auto}.update-dialog-module__udBtnGhost--Ly-cb{border:0;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:600;font-size:14px;background:transparent;color:#cfcfcf;white-space:nowrap;flex:0 1 auto}.update-dialog-module__udBtn--IHB-y:hover,.update-dialog-module__udBtnPrimary--ZlLFd:hover,.update-dialog-module__udBtnGhost--Ly-cb:hover{filter:brightness(1.05)}@media(max-width:480px){.update-dialog-module__udCard---wy8T{padding:16px;border-radius:12px}.update-dialog-module__udTitle--5imsi{gap:8px}.update-dialog-module__udTitle--5imsi h3{font-size:16px}.update-dialog-module__udPill--leinK{font-size:11px;padding:0 6px}.update-dialog-module__udSub--zfs1y{font-size:12px;margin:6px 0 10px}.update-dialog-module__udList--jnFg8{font-size:14px;max-height:150px;padding-left:16px}.update-dialog-module__udList--jnFg8 li{margin:5px 0;line-height:1.5}.update-dialog-module__udActions--5tqy2{flex-direction:column;gap:8px}.update-dialog-module__udBtn--IHB-y,.update-dialog-module__udBtnPrimary--ZlLFd,.update-dialog-module__udBtnGhost--Ly-cb{width:100%;padding:11px 16px;font-size:14px}}@media(min-width:481px)and (max-width:600px){.update-dialog-module__udCard---wy8T{padding:18px}.update-dialog-module__udActions--5tqy2{gap:6px}.update-dialog-module__udBtn--IHB-y,.update-dialog-module__udBtnPrimary--ZlLFd,.update-dialog-module__udBtnGhost--Ly-cb{padding:9px 11px;font-size:13px}}@media(prefers-color-scheme:light){:root{--bg: #fff;--fg: #111}.update-dialog-module__udCard---wy8T{background:#fff;color:#111}.update-dialog-module__udPill--leinK{background:#eef2ff;color:#1f3fb3}.update-dialog-module__udSub--zfs1y{color:#4b5563}}@media(prefers-reduced-motion:reduce){.update-dialog-module__udCard---wy8T{animation:none;transform:none}}@keyframes update-dialog-module__udPop--0Vb0B{to{transform:scale(1)}}.update-dialog-module__udAlert--GJ6WI{max-width:420px;text-align:center}.update-dialog-module__udAlertMessage--nJfX4{margin:16px 0 20px;font-size:16px;line-height:1.6;color:var(--fg, #eaeaea);white-space:pre-line;word-break:break-word}.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udActions--5tqy2{justify-content:center}.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udBtn--IHB-y,.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udBtnPrimary--ZlLFd,.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udBtnGhost--Ly-cb{min-width:120px}@media(max-width:480px){.update-dialog-module__udAlert--GJ6WI{max-width:100%}.update-dialog-module__udAlertMessage--nJfX4{font-size:15px;margin:12px 0 16px}.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udBtn--IHB-y,.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udBtnPrimary--ZlLFd,.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udBtnGhost--Ly-cb{min-width:100px;padding:11px 16px}}@media(prefers-color-scheme:light){.update-dialog-module__udAlertMessage--nJfX4{color:var(--fg, #111)}}.update-dialog-module__udLoading----KQf{max-width:320px;text-align:center;padding:32px 24px}.update-dialog-module__udLoadingSpinner--0OgBH{display:flex;justify-content:center;align-items:center;margin-bottom:20px}.update-dialog-module__udLoadingSvg--k5e0b{width:50px;height:50px;animation:update-dialog-module__udRotate--gve2C 1.4s linear infinite}.update-dialog-module__udLoadingCircle--Q78XG{stroke:#4f7cff;stroke-linecap:round;animation:update-dialog-module__udDash--TGdW5 1.4s ease-in-out infinite}.update-dialog-module__udLoadingMessage---UM99{font-size:15px;line-height:1.6;color:var(--fg, #eaeaea);font-weight:500;word-break:break-word}@media(max-width:480px){.update-dialog-module__udLoading----KQf{max-width:100%;padding:28px 20px}.update-dialog-module__udLoadingSpinner--0OgBH{margin-bottom:16px}.update-dialog-module__udLoadingSvg--k5e0b{width:44px;height:44px}.update-dialog-module__udLoadingMessage---UM99{font-size:14px}}@keyframes update-dialog-module__udRotate--gve2C{to{transform:rotate(360deg)}}@keyframes update-dialog-module__udDash--TGdW5{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}to{stroke-dasharray:90,150;stroke-dashoffset:-124}}@media(prefers-color-scheme:light){.update-dialog-module__udLoadingMessage---UM99{color:var(--fg, #111)}}@media(prefers-reduced-motion:reduce){.update-dialog-module__udLoadingSvg--k5e0b{animation:none}.update-dialog-module__udLoadingCircle--Q78XG{animation:none;stroke-dasharray:90,150}}.book-viewer-root{--bv-bg-gradient-start: #1a1f35;--bv-bg-gradient-end: #2d3654;--bv-page-color: #fdfbf7;--bv-page-shadow: #f5f0e8;--bv-text-color: #2c2c2c;--bv-text-secondary: #6b6b6b;--bv-accent-color: #c9a66b;--bv-accent-hover: #b8935a;--bv-divider-color: #e8e4dc;--bv-spine-gradient: linear-gradient( 90deg, #d4cfc4 0%, #c9c4b9 50%, #d4cfc4 100% );--bv-shadow-soft: 0 4px 20px rgba(0, 0, 0, .08);--bv-shadow-medium: 0 8px 40px rgba(0, 0, 0, .12);--bv-shadow-strong: 0 20px 60px rgba(0, 0, 0, .2);--bv-shadow-inner: inset 0 0 30px rgba(0, 0, 0, .03);--bv-font-size: 17px;--bv-line-height: 1.9;--bv-font-family: \"Pretendard\", -apple-system, BlinkMacSystemFont, system-ui, sans-serif;--bv-font-serif: \"Noto Serif KR\", \"Crimson Text\", \"Georgia\", serif;--bv-transition-fast: .15s cubic-bezier(.4, 0, .2, 1);--bv-transition-smooth: .3s cubic-bezier(.4, 0, .2, 1);--bv-transition-slow: .5s cubic-bezier(.4, 0, .2, 1);--FontColorStandard: #2c2c2c;--FontColorItalic: #5a5a5a;--FontColorBold: #1a1a1a;--FontColorItalicBold: #5a5a5a;--FontColorQuote1: #0e7490;--FontColorQuote2: #c2410c;--bv-font-color: var(--FontColorStandard);--bv-mark1-color: var(--FontColorQuote1);--bv-mark2-color: var(--FontColorQuote2);--bv-em-color: var(--FontColorItalic)}.book-viewer-root[data-theme=sepia]{--bv-bg-gradient-start: #3d3830;--bv-bg-gradient-end: #4a4238;--bv-page-color: #f7f0e3;--bv-page-shadow: #ebe4d7;--bv-text-color: #3d2e1c;--bv-text-secondary: #7a6b5a;--bv-accent-color: #8b7355;--bv-divider-color: #d4c9b8;--bv-spine-gradient: linear-gradient( 90deg, #c4b9a8 0%, #b8ad9c 50%, #c4b9a8 100% );--FontColorBold: #2a1f10;--FontColorItalicBold: #6b5a48;--FontColorStandard: #3d2e1c;--FontColorQuote1: #1a6b6b;--FontColorQuote2: #a85d20;--FontColorItalic: #6b5a48;--bv-font-color: var(--FontColorStandard);--bv-mark1-color: var(--FontColorQuote1);--bv-mark2-color: var(--FontColorQuote2);--bv-em-color: var(--FontColorItalic)}.book-viewer-root[data-theme=dark]{--bv-bg-gradient-start: #0d1117;--bv-bg-gradient-end: #161b22;--bv-page-color: var(--risu-theme-bgcolor);--bv-page-shadow: #151a20;--bv-text-color: #c9d1d9;--bv-text-secondary: #8b949e;--bv-accent-color: #d4a574;--bv-accent-hover: #e0b584;--bv-divider-color: #30363d;--bv-spine-gradient: linear-gradient( 90deg, #21262d 0%, #30363d 50%, #21262d 100% );--FontColorStandard: #fafafa;--FontColorItalic: #8c8d93;--FontColorBold: #fafafa;--FontColorItalicBold: #8c8d93;--FontColorQuote1: #8be9fd;--FontColorQuote2: #ffb86c;--bv-font-color: var(--FontColorStandard);--bv-mark1-color: var(--FontColorQuote1);--bv-mark2-color: var(--FontColorQuote2);--bv-em-color: var(--FontColorItalic)}.text-content p{margin-top:1em}.text-content h1{font-weight:800;font-size:2.25em;line-height:1.1111111}.text-content h2{font-weight:700;font-size:1.5em;line-height:1.3333333}.text-content h3{font-weight:600;font-size:1.25em;line-height:1.6}.book-viewer-root{position:absolute;top:0;left:0;width:100%;height:93.5%;display:flex;flex-direction:column;overflow:hidden;z-index:5;font-family:var(--bv-font-family);background:linear-gradient(135deg,var(--bv-bg-gradient-start) 0%,var(--bv-bg-gradient-end) 100%);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-bottom:1px solid var(--bv-divider-color)}.book-viewer-root:before{content:\"\";position:absolute;top:0;left:0;right:0;bottom:0;background-image:radial-gradient(circle at 20% 80%,rgba(201,166,107,.05) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(201,166,107,.03) 0%,transparent 50%);pointer-events:none;z-index:0}.book-header{display:flex;align-items:center;justify-content:space-between;padding:12px 24px;background:var(--bv-page-color);border-bottom:1px solid var(--bv-divider-color);flex-shrink:0;z-index:1}.header-left{display:flex;align-items:center;gap:12px;min-width:0;flex:1;margin-left:30px}.header-thumbnail{width:40px;height:40px;min-width:40px;border-radius:8px;background-size:cover;background-position:center;background-color:var(--bv-divider-color);box-shadow:0 2px 8px #0000001a}.header-info{display:flex;align-items:center;gap:12px;min-width:0;flex:1}.header-name{font-size:15px;font-weight:600;color:var(--bv-text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.header-buttons{display:flex;align-items:center;gap:4px}.header-buttons button{background:none;border:none;padding:6px;cursor:pointer;color:var(--bv-text-secondary);border-radius:6px;transition:all var(--bv-transition-fast);display:flex;align-items:center;justify-content:center}.header-buttons button:hover{background:#0000000d;color:var(--bv-accent-color)}.book-viewer-root[data-theme=dark] .header-buttons button:hover{background:#ffffff14}.header-buttons button :global(svg){width:18px;height:18px}.header-right{display:flex;align-items:center;gap:8px;flex-shrink:0}.chat-index-nav{display:flex;align-items:center;gap:4px}.chat-nav-btn{background:none;border:none;padding:4px;cursor:pointer;color:var(--bv-text-secondary);border-radius:4px;transition:all var(--bv-transition-fast);display:flex;align-items:center;justify-content:center}.chat-nav-btn:hover:not(:disabled){background:#0000000d;color:var(--bv-accent-color)}.chat-nav-btn:disabled{opacity:.3;cursor:not-allowed}.book-viewer-root[data-theme=dark] .chat-nav-btn:hover:not(:disabled){background:#ffffff14}.header-chat-index{font-size:13px;font-weight:500;color:var(--bv-text-secondary);background:#0000000a;padding:4px 10px;border-radius:12px;display:flex;align-items:center;gap:4px}.chat-index-total{font-size:11px;opacity:.7}.book-viewer-root[data-theme=dark] .header-chat-index{background:#ffffff14}.close-btn{background:none;border:none;padding:6px;cursor:pointer;color:var(--bv-text-secondary);border-radius:6px;transition:all var(--bv-transition-fast);display:flex;align-items:center;justify-content:center}.close-btn:hover{background:#0000000d;color:var(--bv-accent-color)}.book-pages{position:relative;display:flex;flex:1;min-height:0;z-index:1}.page{flex:1;background:var(--bv-page-color);position:relative;overflow:hidden}.page:before{content:\"\";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(90deg,rgba(0,0,0,.02) 0%,transparent 5%,transparent 95%,rgba(0,0,0,.02) 100%),url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E\");pointer-events:none;z-index:1}.book-viewer-root[data-theme=dark] .page:before{opacity:.5}.page-left{border-radius:4px 0 0 4px;box-shadow:var(--bv-shadow-inner)}.page-left:after{content:\"\";position:absolute;top:0;right:0;width:40px;height:100%;background:linear-gradient(90deg,transparent 0%,rgba(0,0,0,.03) 100%);pointer-events:none}.page-right{border-radius:0 4px 4px 0;box-shadow:var(--bv-shadow-inner)}.page-right:after{content:\"\";position:absolute;top:0;left:0;width:40px;height:100%;background:linear-gradient(90deg,rgba(0,0,0,.03) 0%,transparent 100%);pointer-events:none}.book-spine{width:8px;background:var(--bv-spine-gradient);position:relative;box-shadow:inset 2px 0 4px #0000001a,inset -2px 0 4px #0000001a}.book-spine:before{content:\"\";position:absolute;top:0;left:50%;transform:translate(-50%);width:1px;height:100%;background:#0000001a}.page-content{padding:50px 60px 10px;height:100%;display:flex;flex-direction:column;color:var(--bv-text-color);position:relative;z-index:2}.page-content>.chattext [class*=-image-wrapper]{max-height:100%!important}.page-content>.chattext [class*=-image-container]{max-height:100%!important}.page-content>.x-risu-image-cell{aspect-ratio:auto!important}.text-content{flex:1;overflow-y:auto;font-size:var(--bv-font-size);line-height:var(--bv-line-height);text-align:-webkit-auto;word-break:keep-all;letter-spacing:-.01em;padding-right:10px;-moz-user-select:text;user-select:text;-webkit-user-select:text;cursor:text}.text-content *{-moz-user-select:text;user-select:text;-webkit-user-select:text}.text-content :global(h1),.text-content :global(h2),.text-content :global(h3){margin:2em 0 1em;text-indent:0;font-weight:600;color:#1a1a1a;letter-spacing:-.02em}.text-content :global(h1){font-size:1.8em;border-bottom:2px solid var(--bv-accent-color);padding-bottom:.5em}.text-content :global(h2){font-size:1.4em}.text-content :global(mark),.text-content :global(mark[risu-mark]){display:inline!important;background:linear-gradient(120deg,#c9a66b33,#c9a66b4d)!important;color:inherit!important;padding:.1em .3em!important;border-radius:3px!important;flex-direction:unset!important;align-items:unset!important;gap:unset!important}.text-content:has(img){position:static}.text-content :global(img){position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center;margin:0;z-index:10}.page-content:has(img) .page-number{display:none}.page-number{font-size:13px;color:var(--bv-text-secondary);font-weight:500;letter-spacing:.05em}.left-page-num{text-align:left}.right-page-num{text-align:right}.click-area{position:absolute;top:0;width:5%;height:100%;z-index:10;cursor:pointer}.click-left{left:0;cursor:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='none' stroke='%23c9a66b' stroke-width='2'%3E%3Cpolyline points='15 18 9 12 15 6'%3E%3C/polyline%3E%3C/svg%3E\") 16 16,w-resize}.click-right{right:0;cursor:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='none' stroke='%23c9a66b' stroke-width='2'%3E%3Cpolyline points='9 18 15 12 9 6'%3E%3C/polyline%3E%3C/svg%3E\") 16 16,e-resize}.click-area:after{content:\"\";position:absolute;top:50%;transform:translateY(-50%);width:50px;height:100px;opacity:0;transition:opacity var(--bv-transition-smooth);pointer-events:none}.click-left:after{left:30px;background:radial-gradient(ellipse at left,rgba(201,166,107,.15),transparent 70%)}.click-right:after{right:30px;background:radial-gradient(ellipse at right,rgba(201,166,107,.15),transparent 70%)}.click-area:hover:after{opacity:1}.nav-controls{display:flex;align-items:center;justify-content:center;gap:32px;background:var(--bv-page-color);padding:14px 40px;border-top:1px solid rgba(201,166,107,.12);flex-shrink:0;z-index:1}.nav-btn{background:none;border:none;cursor:pointer;padding:10px;border-radius:50%;transition:all var(--bv-transition-fast);color:var(--bv-accent-color);display:flex;align-items:center;justify-content:center}.nav-btn :global(svg){transition:transform var(--bv-transition-fast)}.nav-btn:hover:not(:disabled){background:#c9a66b1f}.nav-btn:hover:not(:disabled) :global(svg){transform:scale(1.1)}.nav-btn:active:not(:disabled) :global(svg){transform:scale(.95)}.nav-btn:disabled{opacity:.25;cursor:not-allowed}.page-indicator{font-size:14px;color:var(--bv-text-color);min-width:90px;text-align:center;font-weight:600;letter-spacing:.02em}.nav-right-buttons{display:flex;align-items:center;gap:8px;margin-left:auto;padding-left:20px}.nav-icon-btn{background:none;border:2px solid var(--bv-accent-color);color:var(--bv-accent-color);padding:8px 12px;cursor:pointer;border-radius:8px;transition:all var(--bv-transition-fast);font-size:13px;font-weight:600;display:flex;align-items:center;justify-content:center;gap:4px}.nav-icon-btn:hover{background:var(--bv-accent-color);color:#fff}.nav-icon-btn :global(svg){width:18px;height:18px}.dropdown-container{position:relative}.dropdown-menu{display:none;position:absolute;bottom:calc(100% + 40px);right:0;background:#fffffffa;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);padding:16px;border-radius:16px;box-shadow:var(--bv-shadow-strong);min-width:280px;max-width:320px;border:1px solid rgba(201,166,107,.15);z-index:200}.dropdown-menu.active{display:block;animation:dropdownFadeIn .25s cubic-bezier(.4,0,.2,1)}@keyframes dropdownFadeIn{0%{opacity:0;transform:translateY(10px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.book-viewer-root[data-theme=dark] .dropdown-menu{background:#1c2128fa}.dropdown-header{font-size:14px;font-weight:700;color:var(--bv-text-color);padding-bottom:12px;margin-bottom:12px;border-bottom:1px solid var(--bv-divider-color);text-transform:uppercase;letter-spacing:.05em}.setting-item{margin-bottom:16px}.setting-item:last-child{margin-bottom:0}.setting-item label{display:block;margin-bottom:8px;font-size:12px;font-weight:600;color:var(--bv-font-color);text-transform:uppercase;letter-spacing:.06em}.setting-item input[type=range]{width:100%;height:5px;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#e8e4dc;border-radius:3px;outline:none;margin-bottom:6px}.book-viewer-root[data-theme=dark] .setting-item input[type=range]{background:#30363d}.setting-item input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:18px;height:18px;background:var(--bv-accent-color);border-radius:50%;cursor:pointer;box-shadow:0 2px 6px #c9a66b66;-webkit-transition:all var(--bv-transition-fast);transition:all var(--bv-transition-fast)}.setting-item input[type=range]::-webkit-slider-thumb:hover{transform:scale(1.1)}.setting-item input[type=range]::-moz-range-thumb{width:18px;height:18px;background:var(--bv-accent-color);border-radius:50%;cursor:pointer;border:none}.setting-item select{width:100%;padding:10px 14px;border:2px solid #e8e4dc;border-radius:10px;font-size:13px;background:#fff;cursor:pointer;transition:all var(--bv-transition-fast);-webkit-appearance:none;-moz-appearance:none;appearance:none;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23c9a66b' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\");background-repeat:no-repeat;background-position:right 10px center;background-size:16px}.book-viewer-root[data-theme=dark] .setting-item select{background-color:#21262d;border-color:#30363d;color:var(--bv-font-color)}.book-viewer-root[data-theme=light] .setting-item select,.book-viewer-root[data-theme=sepia] .setting-item select{color:var(--bv-font-color)}.setting-item select:hover{border-color:var(--bv-accent-color)}.setting-item select:focus{outline:none;border-color:var(--bv-accent-color);box-shadow:0 0 0 3px #c9a66b26}.setting-item span{font-size:11px;color:var(--bv-text-secondary);font-weight:500}.custom-css-btn{width:100%;padding:10px 16px;background:var(--bv-accent-color);color:#fff;border:none;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;transition:all var(--bv-transition-fast)}.custom-css-btn:hover{background:var(--bv-accent-hover);transform:translateY(-1px)}.lb-modules-list{max-height:300px;overflow-y:auto}.lb-module-item{padding:10px 12px;margin-bottom:6px;background:#c9a66b14;border-radius:8px;cursor:pointer;transition:all var(--bv-transition-fast);font-size:13px;color:var(--bv-text-color)}.lb-module-item:hover{background:#c9a66b33}.lb-module-item:last-child{margin-bottom:0}.book-viewer-root[data-theme=dark] .lb-module-item{background:#d4a5741a}.book-viewer-root[data-theme=dark] .lb-module-item:hover{background:#d4a57433}.modal-overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1100;justify-content:center;align-items:center}.modal-overlay.active{display:flex;animation:modalFadeIn .3s ease}@keyframes modalFadeIn{0%{opacity:0}to{opacity:1}}.modal-content{background:var(--bv-page-color);border-radius:16px;width:90%;max-width:600px;max-height:80vh;display:flex;flex-direction:column;box-shadow:var(--bv-shadow-strong);animation:modalSlideIn .3s cubic-bezier(.4,0,.2,1)}.book-viewer-root[data-theme=dark] .modal-content{background:#1c2128}@keyframes modalSlideIn{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid var(--bv-divider-color)}.modal-header h3{font-size:18px;font-weight:700;color:var(--bv-text-color);margin:0}.modal-close{background:none;border:none;font-size:24px;color:var(--bv-text-secondary);cursor:pointer;padding:4px 8px;border-radius:6px;transition:all var(--bv-transition-fast)}.modal-close:hover{background:#0000000d;color:var(--bv-text-color)}.book-viewer-root[data-theme=dark] .modal-close:hover{background:#ffffff1a}.modal-body{flex:1;padding:20px 24px;overflow:auto}.modal-body textarea{width:100%;height:300px;padding:16px;border:2px solid var(--bv-divider-color);border-radius:12px;font-family:Consolas,Monaco,monospace;font-size:14px;line-height:1.6;resize:vertical;background:#fafafa;color:var(--bv-text-color)}.book-viewer-root[data-theme=dark] .modal-body textarea{background:#0d1117;border-color:#30363d}.modal-body textarea:focus{outline:none;border-color:var(--bv-accent-color);box-shadow:0 0 0 3px #c9a66b26}.modal-footer{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid var(--bv-divider-color)}.modal-btn{padding:10px 20px;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all var(--bv-transition-fast)}.modal-btn.primary{background:var(--bv-accent-color);color:#fff;border:none}.modal-btn.primary:hover{background:var(--bv-accent-hover)}.modal-btn.secondary{background:transparent;color:var(--bv-text-secondary);border:2px solid var(--bv-divider-color)}.modal-btn.secondary:hover{border-color:var(--bv-text-secondary);color:var(--bv-text-color)}@media(max-width:1200px){.page-content{padding:50px 40px 40px}.text-content{font-size:16px}}@media(max-width:900px){.book-header{padding:10px 16px}.header-thumbnail{width:32px;height:32px;min-width:32px;border-radius:6px}.header-name{font-size:14px}.header-buttons button{padding:4px}.header-buttons button :global(svg){width:16px;height:16px}.page-content{padding:40px 30px 35px}.book-spine{width:4px}.nav-controls{padding:12px 20px;gap:20px}}")),document.head.appendChild(e)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}}();
!function(n){"function"==typeof define&&define.amd?define(n):n()}(function(){"use strict";var n,t,e,r,o,i,a,l,s,u,c,f,d,p,h,v,g,b,m,y,_,w,x,C,k,I,A,S,$,N,M,z,E,R,W,B,L,j,T,O,G,P,X=Object.defineProperty,Z=n=>{throw TypeError(n)},H=(n,t,e)=>((n,t,e)=>t in n?X(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e)(n,"symbol"!=typeof t?t+"":t,e),F=(n,t,e)=>t.has(n)||Z("Cannot "+e),D=(n,t,e)=>(F(n,t,"read from private field"),e?e.call(n):t.get(n)),V=(n,t,e)=>t.has(n)?Z("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),U=(n,t,e,r)=>(F(n,t,"write to private field"),r?r.call(n,e):t.set(n,e),e),Y=(n,t,e)=>(F(n,t,"access private method"),e);const J={udRoot:"update-dialog-module__udRoot--bWc9J",udCard:"update-dialog-module__udCard---wy8T",udPop:"update-dialog-module__udPop--0Vb0B",udTitle:"update-dialog-module__udTitle--5imsi",udPill:"update-dialog-module__udPill--leinK",udSub:"update-dialog-module__udSub--zfs1y",udList:"update-dialog-module__udList--jnFg8",udFeat:"update-dialog-module__udFeat--MSXJY",udFix:"update-dialog-module__udFix--18UZ3",udPerf:"update-dialog-module__udPerf--bRifN",udBreak:"update-dialog-module__udBreak--jl-Bf",udActions:"update-dialog-module__udActions--5tqy2",udBtn:"update-dialog-module__udBtn--IHB-y",udBtnPrimary:"update-dialog-module__udBtnPrimary--ZlLFd",udBtnGhost:"update-dialog-module__udBtnGhost--Ly-cb",udAlert:"update-dialog-module__udAlert--GJ6WI",udAlertMessage:"update-dialog-module__udAlertMessage--nJfX4",udLoading:"update-dialog-module__udLoading----KQf",udLoadingSpinner:"update-dialog-module__udLoadingSpinner--0OgBH",udLoadingSvg:"update-dialog-module__udLoadingSvg--k5e0b",udRotate:"update-dialog-module__udRotate--gve2C",udLoadingCircle:"update-dialog-module__udLoadingCircle--Q78XG",udDash:"update-dialog-module__udDash--TGdW5",udLoadingMessage:"update-dialog-module__udLoadingMessage---UM99"};var q=Array.isArray,K=Array.prototype.indexOf,Q=Array.from,nn=Object.defineProperty,tn=Object.getOwnPropertyDescriptor,en=Object.getOwnPropertyDescriptors,rn=Object.prototype,on=Array.prototype,an=Object.getPrototypeOf,ln=Object.isExtensible;function sn(n){return"function"==typeof n}const un=()=>{};function cn(n){return n()}function fn(n){for(var t=0;t<n.length;t++)n[t]()}function dn(){var n,t;return{promise:new Promise((e,r)=>{n=e,t=r}),resolve:n,reject:t}}const pn=1<<24,hn=16,vn=32,gn=64,bn=128,mn=512,yn=1024,_n=2048,wn=4096,xn=8192,Cn=16384,kn=32768,In=65536,An=1<<17,Sn=1<<18,$n=1<<19,Nn=1<<25,Mn=32768,zn=1<<21,En=1<<22,Rn=1<<23,Wn=Symbol("$state"),Bn=Symbol("legacy props"),Ln=Symbol(""),jn=Symbol("proxy path"),Tn=new class extends Error{constructor(){super(...arguments),H(this,"name","StaleReactionError"),H(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function On(n){{const t=new Error(`lifecycle_outside_component\n\`${n}(...)\` can only be used during component initialisation\nhttps://svelte.dev/e/lifecycle_outside_component`);throw t.name="Svelte error",t}}function Gn(){{const n=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw n.name="Svelte error",n}}const Pn=Symbol(),Xn=Symbol("filename");var Zn="font-weight: bold",Hn="font-weight: normal";function Fn(n){console.warn(`%c[svelte] state_proxy_equality_mismatch\n%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${n}\` will produce unexpected results\nhttps://svelte.dev/e/state_proxy_equality_mismatch`,Zn,Hn)}function Dn(n){return n===this.v}function Vn(n){return t=n,e=this.v,!(t!=t?e==e:t!==e||null!==t&&"object"==typeof t||"function"==typeof t);var t,e}let Un=!1;function Yn(n){console.warn(`%c[svelte] state_snapshot_uncloneable\n%c${n?`The following properties cannot be cloned with \`$state.snapshot\` â€” the return value contains the originals:\n\n${n}`:"Value cannot be cloned with `$state.snapshot` â€” the original value was returned"}\nhttps://svelte.dev/e/state_snapshot_uncloneable`,"font-weight: bold","font-weight: normal")}const Jn=[];function qn(n,t=!1,e=!1){if(!t){const t=[],r=Kn(n,new Map,"",t,null,e);if(1===t.length&&""===t[0])Yn();else if(t.length>0){const n=t.length>10?t.slice(0,7):t.slice(0,10),e=t.length-n.length;let r=n.map(n=>`- <value>${n}`).join("\n");e>0&&(r+=`\n- ...and ${e} more`),Yn(r)}return r}return Kn(n,new Map,"",Jn,null,e)}function Kn(n,t,e,r,o=null,i=!1){if("object"==typeof n&&null!==n){var a=t.get(n);if(void 0!==a)return a;if(n instanceof Map)return new Map(n);if(n instanceof Set)return new Set(n);if(q(n)){var l=Array(n.length);t.set(n,l),null!==o&&t.set(o,l);for(var s=0;s<n.length;s+=1){var u=n[s];s in n&&(l[s]=Kn(u,t,`${e}[${s}]`,r,null,i))}return l}if(an(n)===rn){for(var c in l={},t.set(n,l),null!==o&&t.set(o,l),n)l[c]=Kn(n[c],t,`${e}.${c}`,r,null,i);return l}if(n instanceof Date)return structuredClone(n);if("function"==typeof n.toJSON&&!i)return Kn(n.toJSON(),t,`${e}.toJSON()`,r,n)}if(n instanceof EventTarget)return n;try{return structuredClone(n)}catch(f){return r.push(e),n}}function Qn(n,t){return n.label=t,nt(n.v,t),n}function nt(n,t){var e;return null==(e=null==n?void 0:n[jn])||e.call(n,t),n}function tt(n){const t=new Error,e=function(){const n=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const t=(new Error).stack;if(Error.stackTraceLimit=n,!t)return[];const e=t.split("\n"),r=[];for(let o=0;o<e.length;o++){const n=e[o],t=n.replaceAll("\\","/");if("Error"!==n.trim()){if(n.includes("validate_each_keys"))return[];t.includes("svelte/src/internal")||t.includes("node_modules/.vite")||r.push(n)}}return r}();return 0===e.length?null:(e.unshift("\n"),nn(t,"stack",{value:e.join("\n")}),nn(t,"name",{value:n}),t)}let et=null;function rt(n){et=n}let ot=null;function it(n){ot=n}function at(n,t,e,r,o,i){const a=ot;ot={type:t,file:e[Xn],line:r,column:o,parent:a,...i};try{return n()}finally{ot=a}}let lt=null;function st(n){lt=n}function ut(n,t=!1,e){et={p:et,i:!1,c:null,e:null,s:n,x:null,l:Un&&!t?{s:null,u:null,$:[]}:null},et.function=e,lt=e}function ct(n){var t=et,e=t.e;if(null!==e)for(var r of(t.e=null,e))Be(r);return void 0!==n&&(t.x=n),t.i=!0,et=t.p,lt=(null==et?void 0:et.function)??null,n??{}}function ft(){return!Un||null!==et&&null===et.l}let dt=[];function pt(){var n=dt;dt=[],fn(n)}function ht(n){if(0===dt.length&&!St){var t=dt;queueMicrotask(()=>{t===dt&&pt()})}dt.push(n)}function vt(){for(;dt.length>0;)pt()}const gt=new WeakMap;function bt(n){var t=or;if(null===t)return tr.f|=Rn,n;if(n instanceof Error&&!gt.has(n)&&gt.set(n,function(n,t){var e,r,o;const i=tn(n,"message");if(i&&!i.configurable)return;var a=ge?"  ":"\t",l=`\n${a}in ${(null==(e=t.fn)?void 0:e.name)||"<unknown>"}`,s=t.ctx;for(;null!==s;)l+=`\n${a}in ${null==(r=s.function)?void 0:r[Xn].split("/").pop()}`,s=s.p;return{message:n.message+`\n${l}\n`,stack:null==(o=n.stack)?void 0:o.split("\n").filter(n=>!n.includes("svelte/src/internal")).join("\n")}}(n,t)),0===(t.f&kn)){if(0===(t.f&bn))throw!t.parent&&n instanceof Error&&yt(n),n;t.b.error(n)}else mt(n,t)}function mt(n,t){for(;null!==t;){if(0!==(t.f&bn))try{return void t.b.error(n)}catch(e){n=e}t=t.parent}throw n instanceof Error&&yt(n),n}function yt(n){const t=gt.get(n);t&&(nn(n,"message",{value:t.message}),nn(n,"stack",{value:t.stack}))}const _t=new Set;let wt=null,xt=null,Ct=null,kt=[],It=null,At=!1,St=!1;n=new WeakMap,t=new WeakMap,e=new WeakMap,r=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,l=new WeakSet,s=function(n,t){var e;n.f^=yn;for(var r=n.first;null!==r;){var o=r.f,a=!!(96&o),s=a&&0!==(o&yn)||0!==(o&xn)||this.skipped_effects.has(r);if(0!==(r.f&bn)&&(null==(e=r.b)?void 0:e.is_pending())&&(t={parent:t,effect:r,effects:[],render_effects:[]}),!s&&null!==r.fn){a?r.f^=yn:4&o?t.effects.push(r):gr(r)&&(0!==(r.f&hn)&&D(this,i).add(r),wr(r));var c=r.first;if(null!==c){r=c;continue}}var f=r.parent;for(r=r.next;null===r&&null!==f;)f===t.effect&&(Y(this,l,u).call(this,t.effects),Y(this,l,u).call(this,t.render_effects),t=t.parent),r=f.next,f=f.parent}},u=function(n){for(const t of n)0!==(t.f&_n)?D(this,i).add(t):0!==(t.f&wn)&&D(this,a).add(t),Y(this,l,c).call(this,t.deps),$r(t,yn)},c=function(n){if(null!==n)for(const t of n)2&t.f&&0!==(t.f&Mn)&&(t.f^=Mn,Y(this,l,c).call(this,t.deps))},f=function(){if(0===D(this,r)){for(const t of D(this,n))t();D(this,n).clear()}0===D(this,e)&&Y(this,l,d).call(this)},d=function(){var n;if(_t.size>1){this.previous.clear();var t=Ct,e=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const t of _t){if(t===this){e=!1;continue}const i=[];for(const[n,r]of this.current){if(t.current.has(n)){if(!e||r===t.current.get(n))continue;t.current.set(n,r)}i.push(n)}if(0===i.length)continue;const a=[...t.current.keys()].filter(n=>!this.current.has(n));if(a.length>0){var o=kt;kt=[];const e=new Set,u=new Map;for(const n of i)Rt(n,a,e,u);if(kt.length>0){wt=t,t.apply();for(const e of kt)Y(n=t,l,s).call(n,e,r);t.deactivate()}kt=o}}wt=null,Ct=t}this.committed=!0,_t.delete(this)};let $t=class c{constructor(){V(this,l),H(this,"committed",!1),H(this,"current",new Map),H(this,"previous",new Map),V(this,n,new Set),V(this,t,new Set),V(this,e,0),V(this,r,0),V(this,o,null),V(this,i,new Set),V(this,a,new Set),H(this,"skipped_effects",new Set),H(this,"is_fork",!1)}is_deferred(){return this.is_fork||D(this,r)>0}process(n){var t;kt=[],xt=null,this.apply();var e={parent:null,effect:null,effects:[],render_effects:[]};for(const r of n)Y(this,l,s).call(this,r,e);this.is_fork||Y(this,l,f).call(this),this.is_deferred()?(Y(this,l,u).call(this,e.effects),Y(this,l,u).call(this,e.render_effects)):(xt=this,wt=null,Et(e.render_effects),Et(e.effects),xt=null,null==(t=D(this,o))||t.resolve()),Ct=null}capture(n,t){this.previous.has(n)||this.previous.set(n,t),0===(n.f&Rn)&&(this.current.set(n,n.v),null==Ct||Ct.set(n,n.v))}activate(){wt=this,this.apply()}deactivate(){wt===this&&(wt=null,Ct=null)}flush(){if(this.activate(),kt.length>0){if(Nt(),null!==wt&&wt!==this)return}else 0===D(this,e)&&this.process([]);this.deactivate()}discard(){for(const n of D(this,t))n(this);D(this,t).clear()}increment(n){U(this,e,D(this,e)+1),n&&U(this,r,D(this,r)+1)}decrement(n){U(this,e,D(this,e)-1),n&&U(this,r,D(this,r)-1),this.revive()}revive(){for(const n of D(this,i))D(this,a).delete(n),$r(n,_n),Bt(n);for(const n of D(this,a))$r(n,wn),Bt(n);this.flush()}oncommit(t){D(this,n).add(t)}ondiscard(n){D(this,t).add(n)}settled(){return(D(this,o)??U(this,o,dn())).promise}static ensure(){if(null===wt){const n=wt=new c;_t.add(wt),St||c.enqueue(()=>{wt===n&&n.flush()})}return wt}static enqueue(n){ht(n)}apply(){}};function Nt(){var n=qe;At=!0;var t=new Set;try{var e=0;for(Ke(!0);kt.length>0;){var r=$t.ensure();if(e++>1e3){var o=new Map;for(const n of r.current.keys())for(const[t,e]of n.updated??[]){var i=o.get(t);i||(i={error:e.error,count:0},o.set(t,i)),i.count+=e.count}for(const n of o.values())n.error&&console.error(n.error);Mt()}r.process(kt),Jt.clear();for(const n of r.current.keys())t.add(n)}}finally{At=!1,Ke(n),It=null;for(const n of t)n.updated=null}}function Mt(){try{!function(){{const n=new Error("effect_update_depth_exceeded\nMaximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state\nhttps://svelte.dev/e/effect_update_depth_exceeded");throw n.name="Svelte error",n}}()}catch(n){nn(n,"stack",{value:""}),mt(n,It)}}let zt=null;function Et(n){var t=n.length;if(0!==t){for(var e=0;e<t;){var r=n[e++];if(!(24576&r.f)&&gr(r)&&(zt=new Set,wr(r),null===r.deps&&null===r.first&&null===r.nodes&&(null===r.teardown&&null===r.ac?Fe(r):r.fn=null),(null==zt?void 0:zt.size)>0)){Jt.clear();for(const n of zt){if(24576&n.f)continue;const t=[n];let e=n.parent;for(;null!==e;)zt.has(e)&&(zt.delete(e),t.push(e)),e=e.parent;for(let n=t.length-1;n>=0;n--){const e=t[n];24576&e.f||wr(e)}}zt.clear()}}zt=null}}function Rt(n,t,e,r){if(!e.has(n)&&(e.add(n),null!==n.reactions))for(const o of n.reactions){const n=o.f;2&n?Rt(o,t,e,r):4194320&n&&0===(n&_n)&&Wt(o,t,r)&&($r(o,_n),Bt(o))}}function Wt(n,t,e){const r=e.get(n);if(void 0!==r)return r;if(null!==n.deps)for(const o of n.deps){if(t.includes(o))return!0;if(2&o.f&&Wt(o,t,e))return e.set(o,!0),!0}return e.set(n,!1),!1}function Bt(n){for(var t=It=n;null!==t.parent;){var e=(t=t.parent).f;if(At&&t===or&&0!==(e&hn)&&0===(e&Sn))return;if(96&e){if(0===(e&yn))return;t.f^=yn}}kt.push(t)}class Lt{constructor(n,t,e){V(this,N),H(this,"parent"),V(this,p,!1),V(this,h),V(this,v,null),V(this,g),V(this,b),V(this,m),V(this,y,null),V(this,_,null),V(this,w,null),V(this,x,null),V(this,C,null),V(this,k,0),V(this,I,0),V(this,A,!1),V(this,S,null),V(this,$,function(n){let t,e=0,r=Qt(0);return Qn(r,"createSubscriber version"),()=>{Ee()&&(Cr(r),je(()=>(0===e&&(t=Ar(()=>n(()=>ae(r)))),e+=1,()=>{ht(()=>{e-=1,0===e&&(null==t||t(),t=void 0,ae(r))})})))}}(()=>(U(this,S,Qt(D(this,k))),Qn(D(this,S),"$effect.pending()"),()=>{U(this,S,null)}))),U(this,h,n),U(this,g,t),U(this,b,e),this.parent=or.b,U(this,p,!!D(this,g).pending),U(this,m,Oe(()=>{or.b=this;var n=Y(this,N,M).call(this);try{U(this,y,Pe(()=>e(n)))}catch(t){this.error(t)}return D(this,I)>0?Y(this,N,E).call(this):U(this,p,!1),()=>{var n;null==(n=D(this,C))||n.remove()}},589952))}is_pending(){return D(this,p)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!D(this,g).pending}update_pending_count(n){Y(this,N,R).call(this,n),U(this,k,D(this,k)+n),D(this,S)&&re(D(this,S),D(this,k))}get_effect_pending(){return D(this,$).call(this),Cr(D(this,S))}error(n){var t=D(this,g).onerror;let e=D(this,g).failed;if(D(this,A)||!t&&!e)throw n;D(this,y)&&(He(D(this,y)),U(this,y,null)),D(this,_)&&(He(D(this,_)),U(this,_,null)),D(this,w)&&(He(D(this,w)),U(this,w,null));var r=!1,o=!1;const i=()=>{r?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",Zn,Hn):(r=!0,o&&function(){{const n=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw n.name="Svelte error",n}}(),$t.ensure(),U(this,k,0),null!==D(this,w)&&De(D(this,w),()=>{U(this,w,null)}),U(this,p,this.has_pending_snippet()),U(this,y,Y(this,N,z).call(this,()=>(U(this,A,!1),Pe(()=>D(this,b).call(this,D(this,h)))))),D(this,I)>0?Y(this,N,E).call(this):U(this,p,!1))};var a=tr;try{rr(null),o=!0,null==t||t(n,i),o=!1}catch(l){mt(l,D(this,m)&&D(this,m).parent)}finally{rr(a)}e&&ht(()=>{U(this,w,Y(this,N,z).call(this,()=>{$t.ensure(),U(this,A,!0);try{return Pe(()=>{e(D(this,h),()=>n,()=>i)})}catch(l){return mt(l,D(this,m).parent),null}finally{U(this,A,!1)}}))})}}function jt(n,t,e,r){const o=ft()?Pt:Ht;if(0!==e.length||0!==n.length){var i,a,l,s,u,c=wt,f=or,d=(i=or,a=tr,l=et,s=wt,u=ot,function(n=!0){ir(i),rr(a),rt(l),n&&(null==s||s.activate()),it(u)});n.length>0?Promise.all(n).then(()=>{d();try{return p()}finally{null==c||c.deactivate(),Ot()}}):p()}else r(t.map(o));function p(){Promise.all(e.map(n=>Xt(n))).then(n=>{d();try{r([...t.map(o),...n])}catch(e){0===(f.f&Cn)&&mt(e,f)}null==c||c.deactivate(),Ot()}).catch(n=>{mt(n,f)})}}async function Tt(n){var t=await n;return()=>t}function Ot(){ir(null),rr(null),rt(null),it(null)}p=new WeakMap,h=new WeakMap,v=new WeakMap,g=new WeakMap,b=new WeakMap,m=new WeakMap,y=new WeakMap,_=new WeakMap,w=new WeakMap,x=new WeakMap,C=new WeakMap,k=new WeakMap,I=new WeakMap,A=new WeakMap,S=new WeakMap,$=new WeakMap,N=new WeakSet,M=function(){var n=D(this,h);return D(this,p)&&(U(this,C,_e()),D(this,h).before(D(this,C)),n=D(this,C)),n},z=function(n){var t=or,e=tr,r=et;ir(D(this,m)),rr(D(this,m)),rt(D(this,m).ctx);try{return n()}catch(o){return bt(o),null}finally{ir(t),rr(e),rt(r)}},E=function(){const n=D(this,g).pending;null!==D(this,y)&&(U(this,x,document.createDocumentFragment()),D(this,x).append(D(this,C)),Je(D(this,y),D(this,x))),null===D(this,_)&&U(this,_,Pe(()=>n(D(this,h))))},R=function(n){var t;this.has_pending_snippet()?(U(this,I,D(this,I)+n),0===D(this,I)&&(U(this,p,!1),D(this,_)&&De(D(this,_),()=>{U(this,_,null)}),D(this,x)&&(D(this,h).before(D(this,x)),U(this,x,null)))):this.parent&&Y(t=this.parent,N,R).call(t,n)};const Gt=new Set;function Pt(n){var t=null!==tr&&2&tr.f?tr:null;null!==or&&(or.f|=$n);return{ctx:et,deps:null,effects:null,equals:Dn,f:2050,fn:n,reactions:null,rv:0,v:Pn,wv:0,parent:t??or,ac:null}}function Xt(n,t){let e=or;null===e&&function(){{const n=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw n.name="Svelte error",n}}();var r=e.b,o=void 0,i=Qt(Pn),a=!tr,l=new Map;return function(n){ze(4718592,n,!0)}(()=>{var t,e=dn();o=e.promise;try{Promise.resolve(n()).then(e.resolve,e.reject).then(()=>{s===wt&&s.committed&&s.deactivate(),Ot()})}catch(f){e.reject(f),Ot()}var s=wt;if(a){var u=!r.is_pending();r.update_pending_count(1),s.increment(u),null==(t=l.get(s))||t.reject(Tn),l.delete(s),l.set(s,e)}const c=(n,t=void 0)=>{if(s.activate(),t)t!==Tn&&(i.f|=Rn,re(i,t));else{0!==(i.f&Rn)&&(i.f^=Rn),re(i,n);for(const[n,t]of l){if(l.delete(n),n===s)break;t.reject(Tn)}}a&&(r.update_pending_count(-1),s.decrement(u))};e.promise.then(c,n=>c(null,n||"unknown"))}),Re(()=>{for(const n of l.values())n.reject(Tn)}),i.f|=En,new Promise(n=>{!function t(e){function r(){e===o?n(i):t(o)}e.then(r,r)}(o)})}function Zt(n){const t=Pt(n);return lr(t),t}function Ht(n){const t=Pt(n);return t.equals=Vn,t}function Ft(n){var t=n.effects;if(null!==t){n.effects=null;for(var e=0;e<t.length;e+=1)He(t[e])}}let Dt=[];function Vt(n){var t,e=or;ir(function(n){for(var t=n.parent;null!==t;){if(!(2&t.f))return 0===(t.f&Cn)?t:null;t=t.parent}return null}(n));{let r=Yt;qt(new Set);try{Dt.includes(n)&&function(){{const n=new Error("derived_references_self\nA derived value cannot reference itself recursively\nhttps://svelte.dev/e/derived_references_self");throw n.name="Svelte error",n}}(),Dt.push(n),n.f&=-32769,Ft(n),t=mr(n)}finally{ir(e),qt(r),Dt.pop()}}return t}function Ut(n){var t=Vt(n);(n.equals(t)||((null==wt?void 0:wt.is_fork)||(n.v=t),n.wv=vr()),Qe)||(null!==Ct?(Ee()||(null==wt?void 0:wt.is_fork))&&Ct.set(n,t):$r(n,0===(n.f&mn)?wn:yn))}let Yt=new Set;const Jt=new Map;function qt(n){Yt=n}let Kt=!1;function Qt(n,t){return{f:0,v:n,reactions:null,equals:Dn,rv:0,wv:0}}function ne(n,t){const e=Qt(n);return lr(e),e}function te(n,t=!1,e=!0){var r;const o=Qt(n);return t||(o.equals=Vn),Un&&e&&null!==et&&null!==et.l&&((r=et.l).s??(r.s=[])).push(o),o}function ee(n,t,e=!1){null!==tr&&(!er||0!==(tr.f&An))&&ft()&&4325394&tr.f&&!(null==ar?void 0:ar.includes(n))&&function(){{const n=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw n.name="Svelte error",n}}();let r=e?ue(t):t;return nt(r,n.label),re(n,r)}function re(n,t){var e;if(!n.equals(t)){var r=n.v;Qe?Jt.set(n,t):Jt.set(n,r),n.v=t;var o=$t.ensure();if(o.capture(n,r),null!==or){n.updated??(n.updated=new Map);const t=((null==(e=n.updated.get(""))?void 0:e.count)??0)+1;if(n.updated.set("",{error:null,count:t}),t>5){const t=tt("updated at");if(null!==t){let e=n.updated.get(t.stack);e||(e={error:t,count:0},n.updated.set(t.stack,e)),e.count++}}}null!==or&&(n.set_during_effect=!0),2&n.f&&(0!==(n.f&_n)&&Vt(n),$r(n,0!==(n.f&mn)?yn:wn)),n.wv=vr(),le(n,_n),!ft()||null===or||0===(or.f&yn)||96&or.f||(null===cr?function(n){cr=n}([n]):cr.push(n)),!o.is_fork&&Yt.size>0&&!Kt&&oe()}return t}function oe(){Kt=!1;var n=qe;Ke(!0);const t=Array.from(Yt);try{for(const n of t)0!==(n.f&yn)&&$r(n,wn),gr(n)&&wr(n)}finally{Ke(n)}Yt.clear()}function ie(n,t=1){var e=Cr(n),r=1===t?e++:e--;return ee(n,e),r}function ae(n){ee(n,n.v+1)}function le(n,t){var e=n.reactions;if(null!==e)for(var r=ft(),o=e.length,i=0;i<o;i++){var a=e[i],l=a.f;if(r||a!==or)if(0===(l&An)){var s=0===(l&_n);if(s&&$r(a,t),2&l){var u=a;null==Ct||Ct.delete(u),0===(l&Mn)&&(l&mn&&(a.f|=Mn),le(u,wn))}else s&&(0!==(l&hn)&&null!==zt&&zt.add(a),Bt(a))}else Yt.add(a)}}const se=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function ue(n){if("object"!=typeof n||null===n||Wn in n)return n;const t=an(n);if(t!==rn&&t!==on)return n;var e=new Map,r=q(n),o=ne(0),i=pr,a=n=>{if(pr===i)return n();var t=tr,e=pr;rr(null),hr(i);var r=n();return rr(t),hr(e),r};r&&(e.set("length",ne(n.length)),n=new Proxy(n,{get(n,t,e){var r=Reflect.get(n,t,e);return pe.has(t)?function(...n){Kt=!0;var t=r.apply(this,n);return oe(),t}:r}}));var l="";let s=!1;function u(n){if(!s){s=!0,Qn(o,`${l=n} version`);for(const[n,t]of e)Qn(t,ce(l,n));s=!1}}return new Proxy(n,{defineProperty(n,t,r){"value"in r&&!1!==r.configurable&&!1!==r.enumerable&&!1!==r.writable||function(){{const n=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw n.name="Svelte error",n}}();var o=e.get(t);return void 0===o?o=a(()=>{var n=ne(r.value);return e.set(t,n),"string"==typeof t&&Qn(n,ce(l,t)),n}):ee(o,r.value,!0),!0},deleteProperty(n,t){var r=e.get(t);if(void 0===r){if(t in n){const n=a(()=>ne(Pn));e.set(t,n),ae(o),Qn(n,ce(l,t))}}else ee(r,Pn),ae(o);return!0},get(t,r,o){var i;if(r===Wn)return n;if(r===jn)return u;var s=e.get(r),c=r in t;if(void 0!==s||c&&!(null==(i=tn(t,r))?void 0:i.writable)||(s=a(()=>{var n=ne(ue(c?t[r]:Pn));return Qn(n,ce(l,r)),n}),e.set(r,s)),void 0!==s){var f=Cr(s);return f===Pn?void 0:f}return Reflect.get(t,r,o)},getOwnPropertyDescriptor(n,t){var r=Reflect.getOwnPropertyDescriptor(n,t);if(r&&"value"in r){var o=e.get(t);o&&(r.value=Cr(o))}else if(void 0===r){var i=e.get(t),a=null==i?void 0:i.v;if(void 0!==i&&a!==Pn)return{enumerable:!0,configurable:!0,value:a,writable:!0}}return r},has(n,t){var r;if(t===Wn)return!0;var o=e.get(t),i=void 0!==o&&o.v!==Pn||Reflect.has(n,t);if((void 0!==o||null!==or&&(!i||(null==(r=tn(n,t))?void 0:r.writable)))&&(void 0===o&&(o=a(()=>{var e=ne(i?ue(n[t]):Pn);return Qn(e,ce(l,t)),e}),e.set(t,o)),Cr(o)===Pn))return!1;return i},set(n,t,i,s){var u,c=e.get(t),f=t in n;if(r&&"length"===t)for(var d=i;d<c.v;d+=1){var p=e.get(d+"");void 0!==p?ee(p,Pn):d in n&&(p=a(()=>ne(Pn)),e.set(d+"",p),Qn(p,ce(l,d)))}void 0===c?f&&!(null==(u=tn(n,t))?void 0:u.writable)||(Qn(c=a(()=>ne(void 0)),ce(l,t)),ee(c,ue(i)),e.set(t,c)):(f=c.v!==Pn,ee(c,a(()=>ue(i))));var h=Reflect.getOwnPropertyDescriptor(n,t);if((null==h?void 0:h.set)&&h.set.call(s,i),!f){if(r&&"string"==typeof t){var v=e.get("length"),g=Number(t);Number.isInteger(g)&&g>=v.v&&ee(v,g+1)}ae(o)}return!0},ownKeys(n){Cr(o);var t=Reflect.ownKeys(n).filter(n=>{var t=e.get(n);return void 0===t||t.v!==Pn});for(var[r,i]of e)i.v===Pn||r in n||t.push(r);return t},setPrototypeOf(){!function(){{const n=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw n.name="Svelte error",n}}()}})}function ce(n,t){return"symbol"==typeof t?`${n}[Symbol(${t.description??""})]`:se.test(t)?`${n}.${t}`:/^\d+$/.test(t)?`${n}[${t}]`:`${n}['${t}']`}function fe(n){try{if(null!==n&&"object"==typeof n&&Wn in n)return n[Wn]}catch{}return n}function de(n,t){return Object.is(fe(n),fe(t))}const pe=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function he(n,t,e=!0){try{n===t!=(fe(n)===fe(t))&&Fn(e?"===":"!==")}catch{}return n===t===e}var ve,ge,be,me;function ye(){if(void 0===ve){ve=window,ge=/Firefox/.test(navigator.userAgent);var n=Element.prototype,t=Node.prototype,e=Text.prototype;be=tn(t,"firstChild").get,me=tn(t,"nextSibling").get,ln(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),ln(e)&&(e.__t=void 0),n.__svelte_meta=null,function(){const n=Array.prototype,t=Array.__svelte_cleanup;t&&t();const{indexOf:e,lastIndexOf:r,includes:o}=n;n.indexOf=function(n,t){const r=e.call(this,n,t);if(-1===r)for(let e=t??0;e<this.length;e+=1)if(fe(this[e])===n){Fn("array.indexOf(...)");break}return r},n.lastIndexOf=function(n,t){const e=r.call(this,n,t??this.length-1);if(-1===e)for(let r=0;r<=(t??this.length-1);r+=1)if(fe(this[r])===n){Fn("array.lastIndexOf(...)");break}return e},n.includes=function(n,t){const e=o.call(this,n,t);if(!e)for(let r=0;r<this.length;r+=1)if(fe(this[r])===n){Fn("array.includes(...)");break}return e},Array.__svelte_cleanup=()=>{n.indexOf=e,n.lastIndexOf=r,n.includes=o}}()}}function _e(n=""){return document.createTextNode(n)}function we(n){return be.call(n)}function xe(n){return me.call(n)}function Ce(n,t){return we(n)}function ke(n,t=!1){var e=we(n);return e instanceof Comment&&""===e.data?xe(e):e}function Ie(n,t=1,e=!1){let r=n;for(;t--;)r=xe(r);return r}function Ae(n,t){if(t){const t=document.body;n.autofocus=!0,ht(()=>{document.activeElement===t&&n.focus()})}}let Se=!1;function $e(n){var t=tr,e=or;rr(null),ir(null);try{return n()}finally{rr(t),ir(e)}}function Ne(n,t,e,r=e){n.addEventListener(t,()=>$e(e));const o=n.__on_r;n.__on_r=o?()=>{o(),r(!0)}:()=>r(!0),Se||(Se=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var t;if(!n.defaultPrevented)for(const e of n.target.elements)null==(t=e.__on_r)||t.call(e)})},{capture:!0}))}function Me(n){null===or&&(null===tr&&function(n){{const t=new Error(`effect_orphan\n\`${n}\` can only be used inside an effect (e.g. during component initialisation)\nhttps://svelte.dev/e/effect_orphan`);throw t.name="Svelte error",t}}(n),function(){{const n=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw n.name="Svelte error",n}}()),Qe&&function(n){{const t=new Error(`effect_in_teardown\n\`${n}\` cannot be used inside an effect cleanup function\nhttps://svelte.dev/e/effect_in_teardown`);throw t.name="Svelte error",t}}(n)}function ze(n,t,e){for(var r=or;null!==r&&0!==(r.f&An);)r=r.parent;null!==r&&0!==(r.f&xn)&&(n|=xn);var o={ctx:et,deps:null,nodes:null,f:n|_n|mn,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(o.component_function=lt,e)try{wr(o),o.f|=kn}catch(l){throw He(o),l}else null!==t&&Bt(o);var i=o;if(e&&null===i.deps&&null===i.teardown&&null===i.nodes&&i.first===i.last&&0===(i.f&$n)&&(i=i.first,0!==(n&hn)&&0!==(n&In)&&null!==i&&(i.f|=In)),null!==i&&(i.parent=r,null!==r&&function(n,t){var e=t.last;null===e?t.last=t.first=n:(e.next=n,n.prev=e,t.last=n)}(i,r),null!==tr&&2&tr.f&&0===(n&gn))){var a=tr;(a.effects??(a.effects=[])).push(i)}return o}function Ee(){return null!==tr&&!er}function Re(n){const t=ze(8,null,!1);return $r(t,yn),t.teardown=n,t}function We(n){Me("$effect"),nn(n,"name",{value:"$effect"});var t=or.f;if(!(!tr&&0!==(t&vn)&&0===(t&kn)))return Be(n);var e=et;(e.e??(e.e=[])).push(n)}function Be(n){return ze(1048580,n,!1)}function Le(n){return ze(4,n,!1)}function je(n,t=0){return ze(8|t,n,!0)}function Te(n,t=[],e=[],r=[]){jt(r,t,e,t=>{ze(8,()=>n(...t.map(Cr)),!0)})}function Oe(n,t=0){var e=ze(hn|t,n,!0);return e.dev_stack=ot,e}function Ge(n,t=0){var e=ze(pn|t,n,!0);return e.dev_stack=ot,e}function Pe(n){return ze(524320,n,!0)}function Xe(n){var t=n.teardown;if(null!==t){const n=Qe,e=tr;nr(!0),rr(null);try{t.call(null)}finally{nr(n),rr(e)}}}function Ze(n,t=!1){var e=n.first;for(n.first=n.last=null;null!==e;){const n=e.ac;null!==n&&$e(()=>{n.abort(Tn)});var r=e.next;0!==(e.f&gn)?e.parent=null:He(e,t),e=r}}function He(n,t=!0){var e=!1;!t&&0===(n.f&Sn)||null===n.nodes||null===n.nodes.end||(!function(n,t){for(;null!==n;){var e=n===t?null:xe(n);n.remove(),n=e}}(n.nodes.start,n.nodes.end),e=!0),Ze(n,t&&!e),_r(n,0),$r(n,Cn);var r=n.nodes&&n.nodes.t;if(null!==r)for(const i of r)i.stop();Xe(n);var o=n.parent;null!==o&&null!==o.first&&Fe(n),n.component_function=null,n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes=n.ac=null}function Fe(n){var t=n.parent,e=n.prev,r=n.next;null!==e&&(e.next=r),null!==r&&(r.prev=e),null!==t&&(t.first===n&&(t.first=r),t.last===n&&(t.last=e))}function De(n,t,e=!0){var r=[];Ve(n,r,!0);var o=()=>{e&&He(n),t&&t()},i=r.length;if(i>0){var a=()=>--i||o();for(var l of r)l.out(a)}else o()}function Ve(n,t,e){if(0===(n.f&xn)){n.f^=xn;var r=n.nodes&&n.nodes.t;if(null!==r)for(const n of r)(n.is_global||e)&&t.push(n);for(var o=n.first;null!==o;){var i=o.next;Ve(o,t,!!(0!==(o.f&In)||0!==(o.f&vn)&&0!==(n.f&hn))&&e),o=i}}}function Ue(n){Ye(n,!0)}function Ye(n,t){if(0!==(n.f&xn)){n.f^=xn,0===(n.f&yn)&&($r(n,_n),Bt(n));for(var e=n.first;null!==e;){var r=e.next;Ye(e,!!(0!==(e.f&In)||0!==(e.f&vn))&&t),e=r}var o=n.nodes&&n.nodes.t;if(null!==o)for(const n of o)(n.is_global||t)&&n.in()}}function Je(n,t){if(n.nodes)for(var e=n.nodes.start,r=n.nodes.end;null!==e;){var o=e===r?null:xe(e);t.append(e),e=o}}let qe=!1;function Ke(n){qe=n}let Qe=!1;function nr(n){Qe=n}let tr=null,er=!1;function rr(n){tr=n}let or=null;function ir(n){or=n}let ar=null;function lr(n){null!==tr&&(null===ar?ar=[n]:ar.push(n))}let sr=null,ur=0,cr=null;let fr=1,dr=0,pr=dr;function hr(n){pr=n}function vr(){return++fr}function gr(n){var t=n.f;if(0!==(t&_n))return!0;if(2&t&&(n.f&=-32769),0!==(t&wn)){var e=n.deps;if(null!==e)for(var r=e.length,o=0;o<r;o++){var i=e[o];if(gr(i)&&Ut(i),i.wv>n.wv)return!0}0!==(t&mn)&&null===Ct&&$r(n,yn)}return!1}function br(n,t,e=!0){var r=n.reactions;if(null!==r&&!(null==ar?void 0:ar.includes(n)))for(var o=0;o<r.length;o++){var i=r[o];2&i.f?br(i,t,!1):t===i&&(e?$r(i,_n):0!==(i.f&yn)&&$r(i,wn),Bt(i))}}function mr(n){var t,e=sr,r=ur,o=cr,i=tr,a=ar,l=et,s=er,u=pr,c=n.f;sr=null,ur=0,cr=null,tr=96&c?null:n,ar=null,rt(n.ctx),er=!1,pr=++dr,null!==n.ac&&($e(()=>{n.ac.abort(Tn)}),n.ac=null);try{n.f|=zn;var f=(0,n.fn)(),d=n.deps;if(null!==sr){var p;if(_r(n,ur),null!==d&&ur>0)for(d.length=ur+sr.length,p=0;p<sr.length;p++)d[ur+p]=sr[p];else n.deps=d=sr;if(Ee()&&0!==(n.f&mn))for(p=ur;p<d.length;p++)((t=d[p]).reactions??(t.reactions=[])).push(n)}else null!==d&&ur<d.length&&(_r(n,ur),d.length=ur);if(ft()&&null!==cr&&!er&&null!==d&&!(6146&n.f))for(p=0;p<cr.length;p++)br(cr[p],n);return null!==i&&i!==n&&(dr++,null!==cr&&(null===o?o=cr:o.push(...cr))),0!==(n.f&Rn)&&(n.f^=Rn),f}catch(h){return bt(h)}finally{n.f^=zn,sr=e,ur=r,cr=o,tr=i,ar=a,rt(l),er=s,pr=u}}function yr(n,t){let e=t.reactions;if(null!==e){var r=K.call(e,n);if(-1!==r){var o=e.length-1;0===o?e=t.reactions=null:(e[r]=e[o],e.pop())}}null===e&&2&t.f&&(null===sr||!sr.includes(t))&&($r(t,wn),0!==(t.f&mn)&&(t.f^=mn,t.f&=-32769),Ft(t),_r(t,0))}function _r(n,t){var e=n.deps;if(null!==e)for(var r=t;r<e.length;r++)yr(n,e[r])}function wr(n){var t=n.f;if(0===(t&Cn)){$r(n,yn);var e=or,r=qe;or=n,qe=!0;var o=lt;st(n.component_function);var i=ot;it(n.dev_stack??ot);try{16777232&t?function(n){for(var t=n.first;null!==t;){var e=t.next;0===(t.f&vn)&&He(t),t=e}}(n):Ze(n),Xe(n);var a=mr(n);n.teardown="function"==typeof a?a:null,n.wv=fr}finally{qe=r,or=e,st(o),it(i)}}}async function xr(){await Promise.resolve(),function(){var n=St;St=!0;try{for(;;){if(vt(),0===kt.length&&(null==wt||wt.flush(),0===kt.length))return void(It=null);Nt()}}finally{St=n}}()}function Cr(n){var t=!!(2&n.f);if(null!==tr&&!er&&(!(null!==or&&0!==(or.f&Cn))&&!(null==ar?void 0:ar.includes(n)))){var e=tr.deps;if(0!==(tr.f&zn))n.rv<dr&&(n.rv=dr,null===sr&&null!==e&&e[ur]===n?ur++:null===sr?sr=[n]:sr.includes(n)||sr.push(n));else{(tr.deps??(tr.deps=[])).push(n);var r=n.reactions;null===r?n.reactions=[tr]:r.includes(tr)||r.push(tr)}}if(Gt.delete(n),Qe){if(Jt.has(n))return Jt.get(n);if(t){var o=n,i=o.v;return(0===(o.f&yn)&&null!==o.reactions||Ir(o))&&(i=Vt(o)),Jt.set(o,i),i}}else t&&(!(null==Ct?void 0:Ct.has(n))||(null==wt?void 0:wt.is_fork)&&!Ee())&&(gr(o=n)&&Ut(o),qe&&Ee()&&0===(o.f&mn)&&kr(o));if(null==Ct?void 0:Ct.has(n))return Ct.get(n);if(0!==(n.f&Rn))throw n.v;return n.v}function kr(n){if(null!==n.deps){n.f^=mn;for(const t of n.deps)(t.reactions??(t.reactions=[])).push(n),2&t.f&&0===(t.f&mn)&&kr(t)}}function Ir(n){if(n.v===Pn)return!0;if(null===n.deps)return!1;for(const t of n.deps){if(Jt.has(t))return!0;if(2&t.f&&Ir(t))return!0}return!1}function Ar(n){var t=er;try{return er=!0,n()}finally{er=t}}const Sr=-7169;function $r(n,t){n.f=n.f&Sr|t}function Nr(n){if("object"==typeof n&&n&&!(n instanceof EventTarget))if(Wn in n)Mr(n);else if(!Array.isArray(n))for(let t in n){const e=n[t];"object"==typeof e&&e&&Wn in e&&Mr(e)}}function Mr(n,t=new Set){if(!("object"!=typeof n||null===n||n instanceof EventTarget||t.has(n))){t.add(n),n instanceof Date&&n.getTime();for(let o in n)try{Mr(n[o],t)}catch(e){}const r=an(n);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const t=en(r);for(let r in t){const o=t[r].get;if(o)try{o.call(n)}catch(e){}}}}}function zr(n){return n.endsWith("capture")&&"gotpointercapture"!==n&&"lostpointercapture"!==n}const Er=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Rr(n){return Er.includes(n)}const Wr={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Br(n){return n=n.toLowerCase(),Wr[n]??n}const Lr=["touchstart","touchmove"];function jr(n){return Lr.includes(n)}var Tr=new Map;function Or(n,t,e){return(...r)=>{const o=n(...r);return Pr(11===o.nodeType?o.firstChild:o,t,e),o}}function Gr(n,t,e){n.__svelte_meta={parent:ot,loc:{file:t,line:e[0],column:e[1]}},e[2]&&Pr(n.firstChild,t,e[2])}function Pr(n,t,e){for(var r=0;n&&r<e.length;)1===n.nodeType&&Gr(n,t,e[r++]),n=n.nextSibling}const Xr=new Set,Zr=new Set;function Hr(n,t,e,r={}){function o(n){if(r.capture||Ur.call(t,n),!n.cancelBubble)return $e(()=>null==e?void 0:e.call(this,n))}return n.startsWith("pointer")||n.startsWith("touch")||"wheel"===n?ht(()=>{t.addEventListener(n,o,r)}):t.addEventListener(n,o,r),o}function Fr(n,t,e,r,o){var i={capture:r,passive:o},a=Hr(n,t,e,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Re(()=>{t.removeEventListener(n,a,i)})}function Dr(n){for(var t=0;t<n.length;t++)Xr.add(n[t]);for(var e of Zr)e(n)}let Vr=null;function Ur(n){var t,e=this,r=e.ownerDocument,o=n.type,i=(null==(t=n.composedPath)?void 0:t.call(n))||[],a=i[0]||n.target;Vr=n;var l=0,s=Vr===n&&n.__root;if(s){var u=i.indexOf(s);if(-1!==u&&(e===document||e===window))return void(n.__root=e);var c=i.indexOf(e);if(-1===c)return;u<=c&&(l=u)}if((a=i[l]||n.target)!==e){nn(n,"currentTarget",{configurable:!0,get:()=>a||r});var f=tr,d=or;rr(null),ir(null);try{for(var p,h=[];null!==a;){var v=a.assignedSlot||a.parentNode||a.host||null;try{var g=a["__"+o];null==g||a.disabled&&n.target!==a||g.call(a,n)}catch(b){p?h.push(b):p=b}if(n.cancelBubble||v===e||null===v)break;a=v}if(p){for(let n of h)queueMicrotask(()=>{throw n});throw p}}finally{n.__root=e,delete n.currentTarget,rr(f),ir(d)}}}function Yr(n,t,e,r,o,i=!1,a=!1){var l,s;let u,c;try{u=n()}catch(f){c=f}if("function"!=typeof u&&(i||null!=u||c)){const n=null==r?void 0:r[Xn],t=o?` at ${n}:${o[0]}:${o[1]}`:` in ${n}`,i=(null==(l=e[0])?void 0:l.eventPhase)<Event.BUBBLING_PHASE?"capture":"";if(function(n,t){console.warn(`%c[svelte] event_handler_invalid\n%c${n} should be a function. Did you mean to ${t}?\nhttps://svelte.dev/e/event_handler_invalid`,Zn,Hn)}(`\`${(null==(s=e[0])?void 0:s.type)+i}\` handler${t}`,a?"remove the trailing `()`":"add a leading `() =>`"),c)throw c}null==u||u.apply(t,e)}function Jr(n){var t=document.createElement("template");return t.innerHTML=n.replaceAll("<!>","\x3c!----\x3e"),t.content}function qr(n,t){var e=or;null===e.nodes&&(e.nodes={start:n,end:t,a:null,t:null})}function Kr(n,t){var e,r=!!(1&t),o=!!(2&t),i=!n.startsWith("<!>");return()=>{void 0===e&&(e=Jr(i?n:"<!>"+n),r||(e=we(e)));var t=o||ge?document.importNode(e,!0):e.cloneNode(!0);r?qr(we(t),t.lastChild):qr(t,t);return t}}function Qr(n,t,e="svg"){var r,o=`<${e}>${!n.startsWith("<!>")?n:"<!>"+n}</${e}>`;return()=>{if(!r){var n=Jr(o);r=we(we(n))}var t=r.cloneNode(!0);return qr(t,t),t}}function no(n,t){return Qr(n,0,"svg")}function to(){var n=document.createDocumentFragment(),t=document.createComment(""),e=_e();return n.append(t,e),qr(t,e),n}function eo(n,t){null!==n&&n.before(t)}let ro=!0;function oo(n){ro=n}function io(n,t){var e=null==t?"":"object"==typeof t?t+"":t;e!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=e,n.nodeValue=e+"")}function ao(n,t){return function(n,{target:t,anchor:e,props:r={},events:o,context:i,intro:a=!0}){ye();var l=new Set,s=n=>{for(var e=0;e<n.length;e++){var r=n[e];if(!l.has(r)){l.add(r);var o=jr(r);t.addEventListener(r,Ur,{passive:o});var i=lo.get(r);void 0===i?(document.addEventListener(r,Ur,{passive:o}),lo.set(r,1)):lo.set(r,i+1)}}};s(Q(Xr)),Zr.add(s);var u=void 0,c=function(n){$t.ensure();const t=ze(524352,n,!0);return(n={})=>new Promise(e=>{n.outro?De(t,()=>{He(t),e(void 0)}):(He(t),e(void 0))})}(()=>{var c=e??t.appendChild(_e());return function(n,t,e){new Lt(n,t,e)}(c,{pending:()=>{}},t=>{i&&(ut({}),et.c=i);o&&(r.$$events=o),ro=a,u=n(t,r)||{},ro=!0,i&&ct()}),()=>{var n;for(var r of l){t.removeEventListener(r,Ur);var o=lo.get(r);0===--o?(document.removeEventListener(r,Ur),lo.delete(r)):lo.set(r,o)}Zr.delete(s),c!==e&&(null==(n=c.parentNode)||n.removeChild(c))}});return so.set(u,c),u}(n,t)}const lo=new Map;let so=new WeakMap;function uo(n,t){const e=so.get(n);return e?(so.delete(n),e(t)):(Wn in n?console.warn("%c[svelte] state_proxy_unmount\n%cTried to unmount a state proxy, rather than a component\nhttps://svelte.dev/e/state_proxy_unmount",Zn,Hn):console.warn("%c[svelte] lifecycle_double_unmount\n%cTried to unmount a component that was not mounted\nhttps://svelte.dev/e/lifecycle_double_unmount",Zn,Hn),Promise.resolve())}function co(n){n&&function(n,t){{const e=new Error(`component_api_invalid_new\nAttempted to instantiate ${n} with \`new ${t}\`, which is no longer valid in Svelte 5. If this component is not under your control, set the \`compatibility.componentApi\` compiler option to \`4\` to keep it working.\nhttps://svelte.dev/e/component_api_invalid_new`);throw e.name="Svelte error",e}}(n[Xn]??"a component",n.name)}function fo(){const n=null==et?void 0:et.function;function t(t){!function(n,t){{const e=new Error(`component_api_changed\nCalling \`${n}\` on a component instance (of ${t}) is no longer valid in Svelte 5\nhttps://svelte.dev/e/component_api_changed`);throw e.name="Svelte error",e}}(t,n[Xn])}return{$destroy:()=>t("$destroy()"),$on:()=>t("$on(...)"),$set:()=>t("$set(...)")}}class po{constructor(n,t=!0){H(this,"anchor"),V(this,W,new Map),V(this,B,new Map),V(this,L,new Map),V(this,j,new Set),V(this,T,!0),V(this,O,()=>{var n=wt;if(D(this,W).has(n)){var t=D(this,W).get(n),e=D(this,B).get(t);if(e)Ue(e),D(this,j).delete(t);else{var r=D(this,L).get(t);r&&(D(this,B).set(t,r.effect),D(this,L).delete(t),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),e=r.effect)}for(const[t,e]of D(this,W)){if(D(this,W).delete(t),t===n)break;const r=D(this,L).get(e);r&&(He(r.effect),D(this,L).delete(e))}for(const[n,r]of D(this,B)){if(n===t||D(this,j).has(n))continue;const o=()=>{if(Array.from(D(this,W).values()).includes(n)){var t=document.createDocumentFragment();Je(r,t),t.append(_e()),D(this,L).set(n,{effect:r,fragment:t})}else He(r);D(this,j).delete(n),D(this,B).delete(n)};D(this,T)||!e?(D(this,j).add(n),De(r,o,!1)):o()}}}),V(this,G,n=>{D(this,W).delete(n);const t=Array.from(D(this,W).values());for(const[e,r]of D(this,L))t.includes(e)||(He(r.effect),D(this,L).delete(e))}),this.anchor=n,U(this,T,t)}ensure(n,t){var e=wt;!t||D(this,B).has(n)||D(this,L).has(n)||D(this,B).set(n,Pe(()=>t(this.anchor)));D(this,W).set(e,n),D(this,O).call(this)}}function ho(n,t,e=!1){var r=new po(n);function o(n,t){r.ensure(n,t)}Oe(()=>{var n=!1;t((t,e=!0)=>{n=!0,o(e,t)}),n||o(!1,null)},e?In:0)}function vo(n,t){return t}function go(n,t=!0){for(var e=0;e<n.length;e++)He(n[e],t)}var bo;function mo(n,t,e,r,o,i=null){var a=n,l=new Map;!(4&t)||(a=n.appendChild(_e()));var s,u=null,c=Ht(()=>{var n=e();return q(n)?n:null==n?[]:Q(n)}),f=!0;function d(){p.fallback=u,function(n,t,e,r,o){var i,a,l,s,u,c,f,d,p,h,v,g,b,m,y=!!(8&r),_=t.length,w=n.items,x=n.effect.first,C=null,k=[],I=[];if(y)for(m=0;m<_;m+=1)g=o(t[m],m),0===((b=w.get(g).e).f&Nn)&&(null==(a=null==(i=b.nodes)?void 0:i.a)||a.measure(),(v??(v=new Set)).add(b));for(m=0;m<_;m+=1){if(g=o(t[m],m),b=w.get(g).e,null!==n.outrogroups)for(const t of n.outrogroups)t.pending.delete(b),t.done.delete(b);if(0!==(b.f&Nn)){if(b.f^=Nn,b!==x){var A=C?C.next:x;b===n.effect.last&&(n.effect.last=b.prev),b.prev&&(b.prev.next=b.next),b.next&&(b.next.prev=b.prev),wo(n,C,b),wo(n,b,A),_o(b,A,e),k=[],I=[],x=(C=b).next;continue}_o(b,null,e)}if(0!==(b.f&xn)&&(Ue(b),y&&(null==(s=null==(l=b.nodes)?void 0:l.a)||s.unfix(),(v??(v=new Set)).delete(b))),b!==x){if(void 0!==h&&h.has(b)){if(k.length<I.length){var S,$=I[0];C=$.prev;var N=k[0],M=k[k.length-1];for(S=0;S<k.length;S+=1)_o(k[S],$,e);for(S=0;S<I.length;S+=1)h.delete(I[S]);wo(n,N.prev,M.next),wo(n,C,N),wo(n,M,$),x=$,C=M,m-=1,k=[],I=[]}else h.delete(b),_o(b,x,e),wo(n,b.prev,b.next),wo(n,b,null===C?n.effect.first:C.next),wo(n,C,b),C=b;continue}for(k=[],I=[];null!==x&&x!==b;)(h??(h=new Set)).add(x),I.push(x),x=x.next;if(null===x)continue}0===(b.f&Nn)&&k.push(b),C=b,x=b.next}if(null!==n.outrogroups){for(const t of n.outrogroups)0===t.pending.size&&(go(Q(t.done)),null==(u=n.outrogroups)||u.delete(t));0===n.outrogroups.size&&(n.outrogroups=null)}if(null!==x||void 0!==h){var z=[];if(void 0!==h)for(b of h)0===(b.f&xn)&&z.push(b);for(;null!==x;)0===(x.f&xn)&&x!==n.fallback&&z.push(x),x=x.next;var E=z.length;if(E>0){var R=4&r&&0===_?e:null;if(y){for(m=0;m<E;m+=1)null==(f=null==(c=z[m].nodes)?void 0:c.a)||f.measure();for(m=0;m<E;m+=1)null==(p=null==(d=z[m].nodes)?void 0:d.a)||p.fix()}!function(n,t,e){for(var r,o=t.length,i=t.length,a=0;a<o;a++){let e=t[a];De(e,()=>{if(r){if(r.pending.delete(e),r.done.add(e),0===r.pending.size){var t=n.outrogroups;go(Q(r.done)),t.delete(r),0===t.size&&(n.outrogroups=null)}}else i-=1},!1)}if(0===i){var l=null!==e;if(l){var s=e,u=s.parentNode;u.textContent="",u.append(s),n.items.clear()}go(t,!l)}else r={pending:new Set(t),done:new Set},(n.outrogroups??(n.outrogroups=new Set)).add(r)}(n,z,R)}}y&&ht(()=>{var n,t;if(void 0!==v)for(b of v)null==(t=null==(n=b.nodes)?void 0:n.a)||t.apply()})}(p,s,a,t,r),null!==u&&(0===s.length?0===(u.f&Nn)?Ue(u):(u.f^=Nn,_o(u,null,a)):De(u,()=>{u=null}))}var p={effect:Oe(()=>{for(var n=(s=Cr(c)).length,p=new Set,h=0;h<n;h+=1){var v=s[h],g=r(v,h),b=f?null:l.get(g);b?(b.v&&re(b.v,v),b.i&&re(b.i,h)):(b=yo(l,f?a:bo??(bo=_e()),v,g,h,o,t,e),f||(b.e.f|=Nn),l.set(g,b)),p.add(g)}0===n&&i&&!u&&(f?u=Pe(()=>i(a)):(u=Pe(()=>i(bo??(bo=_e())))).f|=Nn),f||d(),Cr(c)}),items:l,outrogroups:null,fallback:u};f=!1}function yo(n,t,e,r,o,i,a,l){var s=1&a?16&a?Qt(e):te(e,!1,!1):null,u=2&a?Qt(o):null;return s&&(s.trace=()=>{l()[(null==u?void 0:u.v)??o]}),{v:s,i:u,e:Pe(()=>(i(t,s??e,u??o,l),()=>{n.delete(r)}))}}function _o(n,t,e){if(n.nodes)for(var r=n.nodes.start,o=n.nodes.end,i=t&&0===(t.f&Nn)?t.nodes.start:e;null!==r;){var a=xe(r);if(i.before(r),r===o)return;r=a}}function wo(n,t,e){null===t?n.effect.first=e:t.next=e,null===e?n.effect.last=t:e.prev=t}function xo(n,t,e,r,o){var i,a=null==(i=t.$$slots)?void 0:i[e],l=!1;!0===a&&(a=t.children,l=!0),void 0===a||a(n,l?()=>r:r)}function Co(n){const t=n();t&&!("string"==typeof t)&&function(){{const n=new Error("svelte_element_invalid_this_value\nThe `this` prop on `<svelte:element>` must be a string, if defined\nhttps://svelte.dev/e/svelte_element_invalid_this_value");throw n.name="Svelte error",n}}()}function ko(n){return n.toString=()=>(function(){{const n=new Error("snippet_without_render_tag\nAttempted to render a snippet without a `{@render}` block. This would cause the snippet code to be stringified instead of its content being rendered to the DOM. To fix this, change `{snippet}` to `{@render snippet()}`.\nhttps://svelte.dev/e/snippet_without_render_tag");throw n.name="Svelte error",n}}(),""),n}function Io(n,t){const e=(e,...r)=>{var o=lt;st(n);try{return t(e,...r)}finally{st(o)}};return ko(e),e}W=new WeakMap,B=new WeakMap,L=new WeakMap,j=new WeakMap,T=new WeakMap,O=new WeakMap,G=new WeakMap;const Ao={tick:n=>requestAnimationFrame(n),now:()=>performance.now(),tasks:new Set};function So(){const n=Ao.now();Ao.tasks.forEach(t=>{t.c(n)||(Ao.tasks.delete(t),t.f())}),0!==Ao.tasks.size&&Ao.tick(So)}function $o(n,t){$e(()=>{n.dispatchEvent(new CustomEvent(t))})}function No(n){if("float"===n)return"cssFloat";if("offset"===n)return"cssOffset";if(n.startsWith("--"))return n;const t=n.split("-");return 1===t.length?t[0]:t[0]+t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("")}function Mo(n){const t={},e=n.split(";");for(const r of e){const[n,e]=r.split(":");if(!n||void 0===e)break;t[No(n.trim())]=e.trim()}return t}const zo=n=>n;function Eo(n,t,e,r){var o,i,a,l,s=!!(1&n),u=!!(2&n),c=!!(4&n),f=s&&u?"both":s?"in":"out",d=t.inert,p=t.style.overflow;function h(){return $e(()=>i??(i=e()(t,(null==r?void 0:r())??{},{direction:f})))}var v={is_global:c,in(){var n;if(t.inert=d,!s)return null==l||l.abort(),void(null==(n=null==l?void 0:l.reset)||n.call(l));u||null==a||a.abort(),$o(t,"introstart"),a=Ro(t,h(),l,1,()=>{$o(t,"introend"),null==a||a.abort(),a=i=void 0,t.style.overflow=p})},out(n){if(!u)return null==n||n(),void(i=void 0);t.inert=!0,$o(t,"outrostart"),l=Ro(t,h(),a,0,()=>{$o(t,"outroend"),null==n||n()})},stop:()=>{null==a||a.abort(),null==l||l.abort()}},g=or;if(((o=g.nodes).t??(o.t=[])).push(v),s&&ro){var b=c;if(!b){for(var m=g.parent;m&&0!==(m.f&In);)for(;(m=m.parent)&&0===(m.f&hn););b=!m||0!==(m.f&kn)}b&&Le(()=>{Ar(()=>v.in())})}}function Ro(n,t,e,r,o){var i=1===r;if(sn(t)){var a,l=!1;return ht(()=>{if(!l){var s=t({direction:i?"in":"out"});a=Ro(n,s,e,r,o)}}),{abort:()=>{l=!0,null==a||a.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(null==e||e.deactivate(),!(null==t?void 0:t.duration))return o(),{abort:un,deactivate:un,reset:un,t:()=>r};const{delay:s=0,css:u,tick:c,easing:f=zo}=t;var d=[];if(i&&void 0===e&&(c&&c(0,1),u)){var p=Mo(u(0,1));d.push(p,p)}var h=()=>1-r,v=n.animate(d,{duration:s,fill:"forwards"});return v.onfinish=()=>{v.cancel();var i=(null==e?void 0:e.t())??1-r;null==e||e.abort();var a=r-i,l=t.duration*Math.abs(a),s=[];if(l>0){var d=!1;if(u)for(var p=Math.ceil(l/(1e3/60)),g=0;g<=p;g+=1){var b=i+a*f(g/p),m=Mo(u(b,1-b));s.push(m),d||(d="hidden"===m.overflow)}d&&(n.style.overflow="hidden"),h=()=>{var n=v.currentTime;return i+a*f(n/l)},c&&function(n){let t;0===Ao.tasks.size&&Ao.tick(So),new Promise(e=>{Ao.tasks.add(t={c:n,f:e})})}(()=>{if("running"!==v.playState)return!1;var n=h();return c(n,1-n),!0})}(v=n.animate(s,{duration:l,fill:"forwards"})).onfinish=()=>{h=()=>r,null==c||c(r,1-r),o()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=un)},deactivate:()=>{o=un},reset:()=>{0===r&&(null==c||c(1,0))},t:()=>h()}}function Wo(n,t){Le(()=>{var e=n.getRootNode(),r=e.host?e:e.head??e.ownerDocument.head;if(!r.querySelector("#"+t.hash)){const n=document.createElement("style");n.id=t.hash,n.textContent=t.code,r.appendChild(n),function(n,t){var e=Tr.get(n);e||(e=new Set,Tr.set(n,e)),e.add(t)}(t.hash,n)}})}function Bo(n,t){var e,r=void 0;Ge(()=>{r!==(r=t())&&(e&&(He(e),e=null),r&&(e=Pe(()=>{Le(()=>r(n))})))})}function Lo(n){var t,e,r="";if("string"==typeof n||"number"==typeof n)r+=n;else if("object"==typeof n)if(Array.isArray(n)){var o=n.length;for(t=0;t<o;t++)n[t]&&(e=Lo(n[t]))&&(r&&(r+=" "),r+=e)}else for(e in n)n[e]&&(r&&(r+=" "),r+=e);return r}function jo(n){return"object"==typeof n?function(){for(var n,t,e=0,r="",o=arguments.length;e<o;e++)(n=arguments[e])&&(t=Lo(n))&&(r&&(r+=" "),r+=t);return r}(n):n??""}const To=[..." \t\n\r\fÂ \v\ufeff"];function Oo(n,t=!1){var e=t?" !important;":";",r="";for(var o in n){var i=n[o];null!=i&&""!==i&&(r+=" "+o+": "+i+e)}return r}function Go(n){return"-"!==n[0]||"-"!==n[1]?n.toLowerCase():n}function Po(n,t,e,r,o,i){var a=n.__className;if(a!==e||void 0===a){var l=function(n,t,e){var r=null==n?"":""+n;if(t&&(r=r?r+" "+t:t),e)for(var o in e)if(e[o])r=r?r+" "+o:o;else if(r.length)for(var i=o.length,a=0;(a=r.indexOf(o,a))>=0;){var l=a+i;0!==a&&!To.includes(r[a-1])||l!==r.length&&!To.includes(r[l])?a=l:r=(0===a?"":r.substring(0,a))+r.substring(l+1)}return""===r?null:r}(e,r,i);null==l?n.removeAttribute("class"):t?n.className=l:n.setAttribute("class",l),n.__className=e}else if(i&&o!==i)for(var s in i){var u=!!i[s];null!=o&&u===!!o[s]||n.classList.toggle(s,u)}return i}function Xo(n,t={},e,r){for(var o in e){var i=e[o];t[o]!==i&&(null==e[o]?n.style.removeProperty(o):n.style.setProperty(o,i,r))}}function Zo(n,t,e,r){if(n.__style!==t){var o=function(n,t){if(t){var e,r,o="";if(Array.isArray(t)?(e=t[0],r=t[1]):e=t,n){n=String(n).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,a=0,l=!1,s=[];e&&s.push(...Object.keys(e).map(Go)),r&&s.push(...Object.keys(r).map(Go));var u=0,c=-1;const t=n.length;for(var f=0;f<t;f++){var d=n[f];if(l?"/"===d&&"*"===n[f-1]&&(l=!1):i?i===d&&(i=!1):"/"===d&&"*"===n[f+1]?l=!0:'"'===d||"'"===d?i=d:"("===d?a++:")"===d&&a--,!l&&!1===i&&0===a)if(":"===d&&-1===c)c=f;else if(";"===d||f===t-1){if(-1!==c){var p=Go(n.substring(u,c).trim());s.includes(p)||(";"!==d&&f++,o+=" "+n.substring(u,f).trim()+";")}u=f+1,c=-1}}}return e&&(o+=Oo(e)),r&&(o+=Oo(r,!0)),""===(o=o.trim())?null:o}return null==n?null:String(n)}(t,r);null==o?n.removeAttribute("style"):n.style.cssText=o,n.__style=t}else r&&(Array.isArray(r)?(Xo(n,null==e?void 0:e[0],r[0]),Xo(n,null==e?void 0:e[1],r[1],"important")):Xo(n,e,r));return r}function Ho(n,t,e=!1){if(n.multiple){if(null==t)return;if(!q(t))return void console.warn("%c[svelte] select_multiple_invalid_value\n%cThe `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\nhttps://svelte.dev/e/select_multiple_invalid_value",Zn,Hn);for(var r of n.options)r.selected=t.includes(Do(r))}else{for(r of n.options){if(de(Do(r),t))return void(r.selected=!0)}e&&void 0===t||(n.selectedIndex=-1)}}function Fo(n){var t=new MutationObserver(()=>{Ho(n,n.__value)});t.observe(n,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Re(()=>{t.disconnect()})}function Do(n){return"__value"in n?n.__value:n.value}const Vo=Symbol("class"),Uo=Symbol("style"),Yo=Symbol("is custom element"),Jo=Symbol("is html");function qo(n,t){var e=ti(n);e.value!==(e.value=t??void 0)&&(n.value!==t||0===t&&"PROGRESS"===n.nodeName)&&(n.value=t??"")}function Ko(n,t){t?n.hasAttribute("selected")||n.setAttribute("selected",""):n.removeAttribute("selected")}function Qo(n,t,e,r){var o=ti(n);o[t]!==(o[t]=e)&&("loading"===t&&(n[Ln]=e),null==e?n.removeAttribute(t):"string"!=typeof e&&ri(n).includes(t)?n[t]=e:n.setAttribute(t,e))}function ni(n,t,e=[],r=[],o=[],i,a=!1,l=!1){jt(o,e,r,e=>{var r=void 0,o={},s="SELECT"===n.nodeName,u=!1;if(Ge(()=>{var c=t(...e.map(Cr)),f=function(n,t,e,r){var o=ti(n),i=o[Yo],a=!o[Jo],l=t||{},s="OPTION"===n.tagName;for(var u in t)u in e||(e[u]=null);e.class?e.class=jo(e.class):e[Vo]&&(e.class=null),e[Uo]&&(e.style??(e.style=null));var c=ri(n);for(const g in e){let u=e[g];if(s&&"value"===g&&null==u)n.value=n.__value="",l[g]=u;else if("class"!==g)if("style"!==g){var f=l[g];if(u!==f||void 0===u&&n.hasAttribute(g)){l[g]=u;var d=g[0]+g[1];if("$$"!==d)if("on"===d){const t={},e="$$"+g;let r=g.slice(2);var p=Rr(r);if(zr(r)&&(r=r.slice(0,-7),t.capture=!0),!p&&f){if(null!=u)continue;n.removeEventListener(r,l[e],t),l[e]=null}if(null!=u)if(p)n[`__${r}`]=u,Dr([r]);else{let o=function(n){l[g].call(this,n)};l[e]=Hr(r,n,o,t)}else p&&(n[`__${r}`]=void 0)}else if("style"===g)Qo(n,g,u);else if("autofocus"===g)Ae(n,Boolean(u));else if(i||"__value"!==g&&("value"!==g||null==u))if("selected"===g&&s)Ko(n,u);else{var h=g;a||(h=Br(h));var v="defaultValue"===h||"defaultChecked"===h;if(null!=u||i||v)v||c.includes(h)&&(i||"string"!=typeof u)?(n[h]=u,h in o&&(o[h]=Pn)):"function"!=typeof u&&Qo(n,h,u);else if(o[g]=null,"value"===h||"checked"===h){let e=n;const r=void 0===t;if("value"===h){let n=e.defaultValue;e.removeAttribute(h),e.defaultValue=n,e.value=e.__value=r?n:null}else{let n=e.defaultChecked;e.removeAttribute(h),e.defaultChecked=n,e.checked=!!r&&n}}else n.removeAttribute(g)}else n.value=n.__value=u}}else Zo(n,u,null==t?void 0:t[Uo],e[Uo]),l[g]=u,l[Uo]=e[Uo];else Po(n,"http://www.w3.org/1999/xhtml"===n.namespaceURI,u,r,null==t?void 0:t[Vo],e[Vo]),l[g]=u,l[Vo]=e[Vo]}return l}(n,r,c,i,a,l);u&&s&&"value"in c&&Ho(n,c.value);for(let n of Object.getOwnPropertySymbols(o))c[n]||He(o[n]);for(let t of Object.getOwnPropertySymbols(c)){var d=c[t];"@attach"!==t.description||r&&d===r[t]||(o[t]&&He(o[t]),o[t]=Pe(()=>Bo(n,()=>d))),f[t]=d}r=f}),s){var c=n;Le(()=>{Ho(c,r.value,!0),Fo(c)})}u=!0})}function ti(n){return n.__attributes??(n.__attributes={[Yo]:n.nodeName.includes("-"),[Jo]:"http://www.w3.org/1999/xhtml"===n.namespaceURI})}var ei=new Map;function ri(n){var t,e=n.getAttribute("is")||n.nodeName,r=ei.get(e);if(r)return r;ei.set(e,r=[]);for(var o=n,i=Element.prototype;i!==o;){for(var a in t=en(o))t[a].set&&r.push(a);o=an(o)}return r}function oi(n){var t=n.type;return"number"===t||"range"===t}function ii(n){return""===n?null:+n}function ai(n,t){return n===t||(null==n?void 0:n[Wn])===t}function li(n={},t,e,r){return Le(()=>{var r,o;return je(()=>{r=o,o=[],Ar(()=>{n!==e(...o)&&(t(n,...o),r&&ai(e(...r),n)&&t(null,...r))})}),()=>{ht(()=>{o&&ai(e(...o),n)&&t(null,...o)})}}),n}function si(n=!1){const t=et,e=t.l.u;if(!e)return;let r=()=>Nr(t.s);if(n){let n=0,e={};const o=Pt(()=>{let r=!1;const o=t.s;for(const n in o)o[n]!==e[n]&&(e[n]=o[n],r=!0);return r&&n++,n});r=()=>Cr(o)}var o;e.b.length&&(o=()=>{ui(t,r),fn(e.b)},Me("$effect.pre"),nn(o,"name",{value:"$effect.pre"}),ze(1048584,o,!0)),We(()=>{const n=Ar(()=>e.m.map(cn));return()=>{for(const t of n)"function"==typeof t&&t()}}),e.a.length&&We(()=>{ui(t,r),fn(e.a)})}function ui(n,t){if(n.l.s)for(const e of n.l.s)Cr(e);t()}let ci=!1;const fi={get(n,t){if(!n.exclude.includes(t))return Cr(n.version),t in n.special?n.special[t]():n.props[t]},set(n,t,e){if(!(t in n.special)){var r=or;try{ir(n.parent_effect),n.special[t]=vi({get[t](){return n.props[t]}},t,4)}finally{ir(r)}}return n.special[t](e),ie(n.version),!0},getOwnPropertyDescriptor(n,t){if(!n.exclude.includes(t))return t in n.props?{enumerable:!0,configurable:!0,value:n.props[t]}:void 0},deleteProperty:(n,t)=>(n.exclude.includes(t)||(n.exclude.push(t),ie(n.version)),!0),has:(n,t)=>!n.exclude.includes(t)&&t in n.props,ownKeys:n=>Reflect.ownKeys(n.props).filter(t=>!n.exclude.includes(t))};function di(n,t){return new Proxy({props:n,exclude:t,special:{},version:Qt(0),parent_effect:or},fi)}const pi={get(n,t){let e=n.props.length;for(;e--;){let r=n.props[e];if(sn(r)&&(r=r()),"object"==typeof r&&null!==r&&t in r)return r[t]}},set(n,t,e){let r=n.props.length;for(;r--;){let o=n.props[r];sn(o)&&(o=o());const i=tn(o,t);if(i&&i.set)return i.set(e),!0}return!1},getOwnPropertyDescriptor(n,t){let e=n.props.length;for(;e--;){let r=n.props[e];if(sn(r)&&(r=r()),"object"==typeof r&&null!==r&&t in r){const n=tn(r,t);return n&&!n.configurable&&(n.configurable=!0),n}}},has(n,t){if(t===Wn||t===Bn)return!1;for(let e of n.props)if(sn(e)&&(e=e()),null!=e&&t in e)return!0;return!1},ownKeys(n){const t=[];for(let e of n.props)if(sn(e)&&(e=e()),e){for(const n in e)t.includes(n)||t.push(n);for(const n of Object.getOwnPropertySymbols(e))t.includes(n)||t.push(n)}return t}};function hi(...n){return new Proxy({props:n},pi)}function vi(n,t,e,r){var o,i,a,l=!Un||!!(2&e),s=!!(8&e),u=!!(16&e),c=r,f=!0,d=()=>(f&&(f=!1,c=u?Ar(r):r),c);if(s){var p=Wn in n||Bn in n;i=(null==(o=tn(n,t))?void 0:o.set)??(p&&t in n?e=>n[t]=e:void 0)}var h,v=!1;if(s?[a,v]=function(n){var t=ci;try{return ci=!1,[n(),ci]}finally{ci=t}}(()=>n[t]):a=n[t],void 0===a&&void 0!==r&&(a=d(),i&&(l&&function(n){{const t=new Error(`props_invalid_value\nCannot do \`bind:${n}={undefined}\` when \`${n}\` has a fallback value\nhttps://svelte.dev/e/props_invalid_value`);throw t.name="Svelte error",t}}(t),i(a))),h=l?()=>{var e=n[t];return void 0===e?d():(f=!0,e)}:()=>{var e=n[t];return void 0!==e&&(c=void 0),void 0===e?c:e},l&&!(4&e))return h;if(i){var g=n.$$legacy;return function(n,t){return arguments.length>0?(l&&t&&!g&&!v||i(t?h():n),n):h()}}var b=!1,m=(1&e?Pt:Ht)(()=>(b=!1,h()));m.label=t,s&&Cr(m);var y=or;return function(n,t){if(arguments.length>0){const e=t?Cr(m):l&&s?ue(n):n;return ee(m,e),b=!0,void 0!==c&&(c=e),n}return Qe&&b||0!==(y.f&Cn)?m.v:Cr(m)}}function gi(n,...t){return Ar(()=>{try{let e=!1;const r=[];for(const n of t)n&&"object"==typeof n&&Wn in n?(r.push(qn(n,!0)),e=!0):r.push(n);e&&(!function(n){console.warn(`%c[svelte] console_log_state\n%cYour \`console.${n}\` contained \`$state\` proxies. Consider using \`$inspect(...)\` or \`$state.snapshot(...)\` instead\nhttps://svelte.dev/e/console_log_state`,Zn,Hn)}(n),console.log("%c[snapshot]","color: grey",...r))}catch{}}),t}{let n=function(n){if(!(n in globalThis)){let t;Object.defineProperty(globalThis,n,{configurable:!0,get:()=>{if(void 0!==t)return t;!function(n){{const t=new Error(`rune_outside_svelte\nThe \`${n}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files\nhttps://svelte.dev/e/rune_outside_svelte`);throw t.name="Svelte error",t}}(n)},set:n=>{t=n}})}};n("$state"),n("$effect"),n("$derived"),n("$inspect"),n("$props"),n("$bindable")}function bi(n){var t,e;null===et&&On("onMount"),Un&&null!==et.l?(t=et,e=t.l,e.u??(e.u={a:[],b:[],m:[]})).m.push(n):We(()=>{const t=Ar(n);if("function"==typeof t)return t})}function mi(n){null===et&&On("onDestroy"),bi(()=>()=>Ar(n))}const yi="risu-ebooklike-viewer",_i="0.0.2",wi=class n{constructor(t){if(n._instance)return console.log(`[${yi}] Returning existing RisuAPI instance`),n._instance;this._risuFetch=t.risuFetch,this._nativeFetch=t.nativeFetch,this._getArg=t.getArg,this._setArg=t.setArg,this._getChar=t.getChar,this._setChar=t.setChar,this._addProvider=t.addProvider,this._addRisuScriptHandler=t.addRisuScriptHandler,this._removeRisuScriptHandler=t.removeRisuScriptHandler,this._addRisuReplacer=t.addRisuReplacer,this._removeRisuReplacer=t.removeRisuReplacer,this._onUnload=t.onUnload,this._getDatabase=null,this._setDatabaseLite=null,this._charWatchers=new Map,this._databaseWatchers=new Map,this._watcherIdCounter=0,n._instance=this}async initialize(){try{return this._getDatabase=getDatabase,this._setDatabaseLite=setDatabaseLite,console.log(`[${yi}] RisuAPI initialized successfully`),!0}catch(n){return console.log(`[${yi}] Failed to initialize RisuAPI:`,n),!1}}static getInstance(t=null){if(!n._instance){if(!t)throw new Error("RisuAPI instance does not exist. Provide pluginApis on first call.");n._instance=new n(t)}return n._instance}static resetInstance(){n._instance=null}risuFetch(n,t={}){return this._risuFetch(n,t)}nativeFetch(n,t={}){return this._nativeFetch(n,t)}getArg(n){return this._getArg(n)}setArg(n,t){return this._setArg(n,t)}getChar(){return this._getChar()}setChar(n){return this._setChar(n)}subscribeToChar(n,t,e=500){const r=++this._watcherIdCounter,o=()=>{try{const t=this._getChar();if(null===t)return null;const e=n?n(t):t;return JSON.stringify(e)}catch(t){return null}};let i=o();const a=setInterval(()=>{const n=o();if(n!==i){i=n;try{const e=n?JSON.parse(n):null;t(e)}catch(e){console.error(`[${yi}] subscribeToChar callback error:`,e)}}},e);return this._charWatchers.set(r,a),()=>{clearInterval(a),this._charWatchers.delete(r)}}addProvider(n,t,e){return this._addProvider(n,t,e)}addRisuScriptHandler(n,t){return this._addRisuScriptHandler(n,t)}removeRisuScriptHandler(n,t){return this._removeRisuScriptHandler(n,t)}addRisuReplacer(n,t){return this._addRisuReplacer(n,t)}removeRisuReplacer(n,t){return this._removeRisuReplacer(n,t)}onUnload(n){return this._onUnload(n)}clearAllSubscriptions(){this._charWatchers.forEach(n=>clearInterval(n)),this._charWatchers.clear(),this._databaseWatchers.forEach(n=>clearInterval(n)),this._databaseWatchers.clear(),console.log(`[${yi}] All subscriptions cleared`)}getDatabase(){if(!this._getDatabase)throw new Error("RisuAPI is not initialized. Call initialize() first.");return this._getDatabase()}setDatabaseLite(n){if(!this._setDatabaseLite)throw new Error("RisuAPI is not initialized. Call initialize() first.");return this._setDatabaseLite(n)}subscribeToDatabase(n,t,e=500){if(!this._getDatabase)throw new Error("RisuAPI is not initialized. Call initialize() first.");const r=++this._watcherIdCounter,o=()=>{try{const t=this._getDatabase();if(null===t)return null;const e=n?n(t):t;return JSON.stringify(e)}catch(t){return null}};let i=o();const a=setInterval(()=>{const n=o();if(n!==i){i=n;try{const e=n?JSON.parse(n):null;t(e)}catch(e){console.error(`[${yi}] subscribeToDatabase callback error:`,e)}}},e);return this._databaseWatchers.set(r,a),()=>{clearInterval(a),this._databaseWatchers.delete(r)}}getChaId(){const n=this._getChar();return null==n?null:n.chaId}getCurrentChatPage(){const n=this._getChar();return null==n?null:n.chatPage}getAllCurrentChatMessages(){const n=this._getChar();return null==n?null:n.chats[this.getCurrentChatPage()].message}getLastChatIndex(){const n=this._getChar();return null==n?null:n.chats[this.getCurrentChatPage()].message.length}getLastChatMessage(){const n=this._getChar();return null==n?null:n.chats[this.getCurrentChatPage()].message[this.getLastChatIndex()]}};H(wi,"_instance",null);let xi=wi;const Ci="data-svelte-helper",ki=new WeakMap,Ii=new Map;function Ai({id:n,component:t,target:e,anchor:r=null,props:o={},wrapperTag:i="div",useContents:a=!0}){if(!n||!t||!e)return console.warn("[safeMount] id, component, targetì€ í•„ìˆ˜ìž…ë‹ˆë‹¤."),null;const l=`data-mounted-${n}`;if(e.hasAttribute(l))return null;try{const s=document.createElement(i);s.setAttribute("data-svelte-wrapper",n),a&&(s.style.display="contents");const u=ao(t,{target:s,props:o}),c=Array.from(s.childNodes);r&&r.parentElement===e?c.forEach(n=>{e.insertBefore(n,r)}):c.forEach(n=>{e.appendChild(n)}),e.setAttribute(l,"true");const f={instance:u,wrapper:s,target:e,cleanup:()=>Si(n),flagKey:l};return Ii.set(n,f),f}catch(s){return console.log(s),console.error(`[safeMount] ${n} ë§ˆìš´íŠ¸ ì‹¤íŒ¨:`,s),null}}function Si(n){const t=Ii.get(n);if(!t)return!1;try{const{instance:e,wrapper:r,target:o,flagKey:i}=t;return e&&uo(e),o&&i&&o.removeAttribute(i),Ii.delete(n),!0}catch(e){return console.error(`[safeUnmount] ${n} ì–¸ë§ˆìš´íŠ¸ ì‹¤íŒ¨:`,e),!1}}function $i(n,t,e="default"){var r;if(!n||!t)return;const o=`${Ci}-style-${e}`;let i=(null==(r=ki.get(n))?void 0:r[o])||{};Object.entries(t).forEach(([t,e])=>{t in i||(i[t]=n.style.getPropertyValue(t)),n.style.setProperty(t,e)});const a=ki.get(n)||{};a[o]=i,ki.set(n,a)}function Ni(n,t="default"){if(!n)return;const e=`${Ci}-style-${t}`,r=ki.get(n),o=null==r?void 0:r[e];o&&(Object.entries(o).forEach(([t,e])=>{e?n.style.setProperty(t,e):n.style.removeProperty(t)}),delete r[e])}function Mi(n){const t=n.split("\n");let e,r="",o={},i={},a=[];for(const l of t){if(l.startsWith("//@risu-name")||l.startsWith("//@risu-display-name"))throw new Error("V1 plugin is not supported. Please use V2 plugin.");if(l.startsWith("//@name")){const n=l.slice(7).trim();if(""===n)throw new Error("Plugin name must be longer than 0");r=n}if(l.startsWith("//@display-name")){const n=l.slice(16).trim();if(""===n)throw new Error("Plugin display name must be longer than 0");e=n}if(l.startsWith("//@link")){const n=l.split(" ")[1];if(!n||""===n)throw new Error("Plugin link is empty");if(!n.startsWith("https"))throw new Error("Plugin link must start with https");const t=l.split(" ").slice(2).join(" ").trim();a.push({link:n,hoverText:t||void 0})}if(l.startsWith("//@risu-arg")||l.startsWith("//@arg")){const n=l.trim().split(" "),t=n[1];if("int"!==n[2]&&"string"!==n[2])throw new Error(`Unknown argument type: ${n[2]}`);"int"===n[2]?(o[t]="int",i[t]=0):"string"===n[2]&&(o[t]="string",i[t]="")}}if(0===r.length)throw new Error("Plugin name not found");return{name:r,script:n,realArg:i,arguments:o,displayName:e,version:2,customLink:a}}function zi(n){const t=xi.getInstance();if(!t)throw new Error("RisuAPI is not initialized. Please ensure the plugin is loaded.");const e=t.getDatabase(),r=e.plugins.findIndex(n=>n.name===yi),o=r>=0?{...e.plugins[r]}:null;console.log("[UpdateManager] Old plugin found:",r>=0,null==o?void 0:o.name);const i=function(n,t){const e={};for(const[r,o]of Object.entries(t))e[r]=n&&r in n?n[r]:"int"===o?0:"";return e}(null==o?void 0:o.realArg,n.arguments),a={...n,realArg:i};console.log("[UpdateManager] New plugin data prepared:",a.name,a.displayName),r>=0?(e.plugins[r]=a,console.log("[UpdateManager] Replaced existing plugin at index",r)):(e.plugins.push(a),console.log("[UpdateManager] Added new plugin"));try{return t.setDatabaseLite(e),console.log("[UpdateManager] Database saved successfully"),{success:!0}}catch(l){return console.error("[UpdateManager] Database save failed:",l),o&&r>=0?(e.plugins[r]=o,console.log("[UpdateManager] Rolled back to previous plugin")):-1===r&&(e.plugins.pop(),console.log("[UpdateManager] Removed newly added plugin")),{success:!1,error:l}}}"undefined"!=typeof window&&((P=window.__svelte??(window.__svelte={})).v??(P.v=new Set)).add("5"),Ri[Xn]="src/ui/components/AlertDialog.svelte";var Ei=Or(Kr('<div role="dialog" aria-modal="true" tabindex="-1"><div><div> </div> <div><button> </button></div></div></div>'),Ri[Xn],[[34,0,[[35,2,[[36,4],[39,4,[[40,6]]]]]]]]);function Ri(n,t){co(new.target),ut(t,!0,Ri);let e=vi(t,"message",3,""),r=vi(t,"confirmText",3,"í™•ì¸"),o=Qn(ne(null),"confirmBtn");function i(n){(he(n.key,"Enter")||he(n.key,"Escape"))&&a()}function a(){var n;null==(n=Cr(o))||n.dispatchEvent(new CustomEvent("confirm",{bubbles:!0,composed:!0}))}bi(()=>{document.addEventListener("keydown",i),setTimeout(()=>{var n;return null==(n=Cr(o))?void 0:n.focus()},0)}),mi(()=>{document.removeEventListener("keydown",i)});var l={...fo()},s=Ei(),u=Ce(s),c=Ce(u),f=Ce(c),d=Ie(c,2),p=Ce(d);p.__click=a;var h=Ce(p);return li(p,n=>ee(o,n),()=>Cr(o)),Te(()=>{Po(s,1,jo(J.udRoot)),Po(u,1,`${J.udCard} ${J.udAlert}`),Po(c,1,jo(J.udAlertMessage)),io(f,e()),Po(d,1,jo(J.udActions)),Po(p,1,jo(J.udBtnPrimary)),io(h,r())}),eo(n,s),ct(l)}Dr(["click"]),Bi[Xn]="src/ui/components/LoadingDialog.svelte";var Wi=Or(Kr('<div role="dialog" aria-modal="true" aria-busy="true" tabindex="-1"><div><div><svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4"></circle></svg></div> <div> </div></div></div>'),Bi[Xn],[[7,0,[[8,2,[[9,4,[[10,6,[[11,8]]]]],[21,4]]]]]]);function Bi(n,t){co(new.target),ut(t,!0,Bi);let e=vi(t,"message",3,"ì—…ë°ì´íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê³  ìžˆìŠµë‹ˆë‹¤...");var r={...fo()},o=Wi(),i=Ce(o),a=Ce(i),l=Ce(a),s=Ce(l),u=Ie(a,2),c=Ce(u);return Te(()=>{Po(o,1,jo(J.udRoot)),Po(i,1,`${J.udCard} ${J.udLoading}`),Po(a,1,jo(J.udLoadingSpinner)),Po(l,0,jo(J.udLoadingSvg)),Po(s,0,jo(J.udLoadingCircle)),Po(u,1,jo(J.udLoadingMessage)),io(c,e())}),eo(n,o),ct(r)}Gi[Xn]="src/ui/components/UpdateDialog.svelte";var Li=Or(Kr("<li> </li>"),Gi[Xn],[[96,10]]),ji=Or(Kr("<li>ì„¸ë¶€ ë³€ê²½ì‚¬í•­ì€ ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”</li>"),Gi[Xn],[[99,8]]),Ti=Or(Kr("<button> </button> <button> </button>",1),Gi[Xn],[[104,8],[107,8]]),Oi=Or(Kr('<div role="dialog" aria-modal="true" tabindex="-1"><div><div><h3> </h3> <span> </span></div> <div> </div> <ul aria-label="ë³€ê²½ì‚¬í•­"><!></ul> <div><!> <button> </button></div></div></div>'),Gi[Xn],[[77,0,[[85,2,[[86,4,[[87,6],[88,6]]],[90,4],[93,4],[102,4,[[111,6]]]]]]]]);function Gi(n,t){co(new.target),ut(t,!0,Gi);let e=vi(t,"name",3,""),r=vi(t,"currentVersion",3,"0.0.0"),o=vi(t,"version",3,"0.0.0"),i=vi(t,"releasedAt",19,()=>(new Date).toISOString()),a=vi(t,"mandatory",3,!1),l=vi(t,"notes",19,()=>[]),s=vi(t,"i18n",19,()=>({title:"í”ŒëŸ¬ê·¸ì¸ ì—…ë°ì´íŠ¸ ì¤€ë¹„ ì™„ë£Œ",primary:"ì§€ê¸ˆ ì—…ë°ì´íŠ¸",later:"ë‚˜ì¤‘ì—",skip:"ì´ë²ˆ ë²„ì „ ê±´ë„ˆë›°ê¸°"})),u=Qn(ne(null),"updateBtn"),c=Qn(Zt(()=>new Date(i()).toLocaleDateString()),"releasedDate"),f=Qn(Zt(()=>a()?"í•„ìˆ˜ ì—…ë°ì´íŠ¸":"ì„ íƒ ì—…ë°ì´íŠ¸"),"updateType");function d(n){he(n.key,"Escape")&&!a()&&p("later"),he(n.key,"Enter")&&p("update")}function p(n){var t;const e={action:n};he(n,"skip")&&(e.skipVersion=o()),null==(t=Cr(u))||t.dispatchEvent(new CustomEvent("update-action",{detail:e,bubbles:!0,composed:!0}))}bi(()=>{document.addEventListener("keydown",d),setTimeout(()=>{var n;return null==(n=Cr(u))?void 0:n.focus()},0)}),mi(()=>{document.removeEventListener("keydown",d)});var h={...fo()},v=Oi();v.__click=function(n){!a()&&he(n.target,n.currentTarget)&&p("later")},v.__keydown=function(n){a()||!he(n.key,"Escape")&&!he(n.key,"Enter")||he(n.target,n.currentTarget)&&p("later")};var g=Ce(v),b=Ce(g),m=Ce(b),y=Ce(m),_=Ie(m,2),w=Ce(_),x=Ie(b,2),C=Ce(x),k=Ie(x,2),I=Ce(k),A=n=>{var t=to(),e=ke(t);at(()=>mo(e,17,()=>l().slice(0,8),vo,(n,t)=>{var e=Li(),r=Ce(e);Te(n=>{Po(e,1,n),io(r,Cr(t).text||"")},[()=>jo(function(n){const t=(n||"").trim(),e=t.charAt(0).toUpperCase()+t.slice(1);return J[`ud${e}`]||""}(Cr(t).type))]),eo(n,e)}),"each",Gi,95,8),eo(n,t)},S=n=>{eo(n,ji())};at(()=>ho(I,n=>{l().length>0?n(A):n(S,!1)}),"if",Gi,94,6);var $=Ie(k,2),N=Ce($),M=n=>{var t=Ti(),e=ke(t);e.__click=()=>p("later");var r=Ce(e),o=Ie(e,2);o.__click=()=>p("skip");var i=Ce(o);Te(()=>{Po(e,1,jo(J.udBtnGhost)),io(r,s().later),Po(o,1,jo(J.udBtnGhost)),io(i,s().skip)}),eo(n,t)};at(()=>ho(N,n=>{a()||n(M)}),"if",Gi,103,6);var z=Ie(N,2);z.__click=()=>p("update");var E=Ce(z);return li(z,n=>ee(u,n),()=>Cr(u)),Te(()=>{Po(v,1,jo(J.udRoot)),Po(g,1,jo(J.udCard)),Po(b,1,jo(J.udTitle)),io(y,`${s().title??""}${e()?` Â· ${e()}`:""}`),Po(_,1,jo(J.udPill)),io(w,`v${r()??""} â†’ v${o()??""}`),Po(x,1,jo(J.udSub)),io(C,`${Cr(c)??""} Â· ${Cr(f)??""}`),Po(k,1,jo(J.udList)),Po($,1,jo(J.udActions)),Po(z,1,jo(J.udBtnPrimary)),io(E,s().primary)}),eo(n,v),ct(h)}function Pi(n,t,e){return function(n,t){const e=n.split(".").map(Number),r=t.split(".").map(Number);for(let o=0;o<Math.max(e.length,r.length);o++){const n=e[o]||0,t=r[o]||0;if(n>t)return 1;if(n<t)return-1}return 0}(n,t)<=0?(e||console.log(`[UpdateManager] Already up to date (${t})`),{available:!1,current:t,latest:n}):null}async function Xi(n,t){var e;console.log("[UpdateManager] Updating to version",t);const r=await async function(n){try{console.log("[UpdateManager] Fetching latest script from unpkg:",n.url);const t=await fetch(n.url).then(n=>n.text());return console.log("[UpdateManager] Parsing plugin script..."),zi(Mi(t))}catch(t){return console.error("[UpdateManager] Plugin update failed:",t),{success:!1,error:t}}}(n);return r.success?(console.log("[UpdateManager] Plugin script updated successfully"),await function(n="ì—…ë°ì´íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê³  ìžˆìŠµë‹ˆë‹¤...",t=3e3){return new Promise(e=>{const r=document.createElement("div");document.body.appendChild(r);const o=ao(Bi,{target:r,props:{message:n}});setTimeout(()=>{uo(o),r.remove(),e()},t)})}("ì—…ë°ì´íŠ¸ë¥¼ ì ìš©í•˜ê³  ìžˆìŠµë‹ˆë‹¤...",4e3),await function(n,t="í™•ì¸"){return new Promise(e=>{const r=document.createElement("div");document.body.appendChild(r);const o=ao(Ri,{target:r,props:{message:n,confirmText:t}});r.addEventListener("confirm",()=>{uo(o),r.remove(),e()})})}("ì—…ë°ì´íŠ¸ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\n\nì—…ë°ì´íŠ¸ëœ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´\níŽ˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•©ë‹ˆë‹¤."),window.location.reload(),{available:!0,action:"updated",version:t}):(console.error("[UpdateManager] Plugin update failed:",r.error),alert(`ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: ${(null==(e=r.error)?void 0:e.message)||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"}\n\níŽ˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì—¬ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.`),{available:!0,action:"update_failed",error:r.error})}async function Zi(n={}){const{silent:t=!1,force:e=!1,i18n:r={}}=n;try{const n=await async function(){var n,t,e;try{const o=`https://unpkg.com/${yi}@latest/dist/${yi}.js`,i=(await fetch(o,{method:"HEAD",redirect:"follow"})).url,a=i.match(/@([\d.]+)\//);if(!a)throw new Error("Version not found in resolved URL");const l=a[1],s=await fetch(i).then(n=>n.text()),u=/\/\/@name (.+?)\n\/\/@display-name (.+?)\n\/\/@version (.+?)\n\/\/@description (.+?)(?:\n|$)/,c=s.match(u),f=`https://unpkg.com/${yi}@${l}/dist/release-notes.json`;let d={};try{const n=await fetch(f);n.ok&&(d=(await n.json())[l]||{})}catch(r){console.warn("[UpdateManager] Failed to fetch release notes:",r)}return{version:l,url:i,name:(null==(n=null==c?void 0:c[1])?void 0:n.trim())||yi,displayName:(null==(t=null==c?void 0:c[2])?void 0:t.trim())||`${yi}_v${l}`,description:(null==(e=null==c?void 0:c[4])?void 0:e.trim())||"",mandatory:d.mandatory||!1,notes:d.notes||[],released_at:d.released_at||(new Date).toISOString()}}catch(r){return console.log(`[${yi}] Update check skipped: Plugin not published to npm yet`),null}}();if(!n)return{available:!1,skipped:!0};const o=_i,i=n.version,a=function(n,t,e){if(t)return null;const r=`${yi}_skip_version`;return localStorage.getItem(r)===n?(e||console.log(`[UpdateManager] Version ${n} is skipped by user`),{available:!1,skipped:!0,version:n}):null}(i,e,t);if(a)return a;const l=Pi(i,o,t);if(l)return l;console.log(`[UpdateManager] New version available: ${o} â†’ ${i}`);const s=await function(n){const{name:t,currentVersion:e,manifest:r,i18n:o={},mandatory:i=!0===r.mandatory}=n,a=Object.assign({title:"í”ŒëŸ¬ê·¸ì¸ ì—…ë°ì´íŠ¸ ì¤€ë¹„ ì™„ë£Œ",primary:"ì§€ê¸ˆ ì—…ë°ì´íŠ¸",later:"ë‚˜ì¤‘ì—",skip:"ì´ë²ˆ ë²„ì „ ê±´ë„ˆë›°ê¸°"},o);return new Promise(n=>{const o=document.createElement("div");document.body.appendChild(o);const l=ao(Gi,{target:o,props:{name:t||"",currentVersion:e,version:r.version,releasedAt:r.released_at||(new Date).toISOString(),mandatory:i,notes:r.notes||[],i18n:a}});o.addEventListener("update-action",t=>{const{action:e,skipVersion:i}=t.detail,a={action:e};"update"===e?a.url=r.url:"skip"===e&&(a.skipVersion=i),uo(l),o.remove(),n(a)})})}({name:yi,currentVersion:o,manifest:n,i18n:r});return await async function(n,t,e){if("update"===n.action)return await Xi(t,e);if("skip"===n.action){const t=`${yi}_skip_version`;return localStorage.setItem(t,n.skipVersion),console.log("[UpdateManager] Skipped version",n.skipVersion),{available:!0,action:"skipped",version:n.skipVersion}}return console.log("[UpdateManager] Update postponed"),{available:!0,action:"later",version:e}}(s,n,i)}catch(o){return console.error("[UpdateManager] Check failed:",o),{available:!1,error:o.message}}}Dr(["click","keydown"]);var Hi,Fi="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Di={exports:{}};var Vi,Ui,Yi=(Hi||(Hi=1,Vi=Di,Ui=Di.exports,function(){var n,t="Expected a function",e="__lodash_hash_undefined__",r="__lodash_placeholder__",o=32,i=128,a=256,l=1/0,s=9007199254740991,u=NaN,c=4294967295,f=[["ary",i],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",o],["partialRight",64],["rearg",a]],d="[object Arguments]",p="[object Array]",h="[object Boolean]",v="[object Date]",g="[object Error]",b="[object Function]",m="[object GeneratorFunction]",y="[object Map]",_="[object Number]",w="[object Object]",x="[object Promise]",C="[object RegExp]",k="[object Set]",I="[object String]",A="[object Symbol]",S="[object WeakMap]",$="[object ArrayBuffer]",N="[object DataView]",M="[object Float32Array]",z="[object Float64Array]",E="[object Int8Array]",R="[object Int16Array]",W="[object Int32Array]",B="[object Uint8Array]",L="[object Uint8ClampedArray]",j="[object Uint16Array]",T="[object Uint32Array]",O=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,P=/(__e\(.*?\)|\b__t\)) \+\n'';/g,X=/&(?:amp|lt|gt|quot|#39);/g,Z=/[&<>"']/g,H=RegExp(X.source),F=RegExp(Z.source),D=/<%-([\s\S]+?)%>/g,V=/<%([\s\S]+?)%>/g,U=/<%=([\s\S]+?)%>/g,Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,K=/[\\^$.*+?()[\]{}|]/g,Q=RegExp(K.source),nn=/^\s+/,tn=/\s/,en=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,rn=/\{\n\/\* \[wrapped with (.+)\] \*/,on=/,? & /,an=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ln=/[()=,{}\[\]\/\s]/,sn=/\\(\\)?/g,un=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,cn=/\w*$/,fn=/^[-+]0x[0-9a-f]+$/i,dn=/^0b[01]+$/i,pn=/^\[object .+?Constructor\]$/,hn=/^0o[0-7]+$/i,vn=/^(?:0|[1-9]\d*)$/,gn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bn=/($^)/,mn=/['\n\r\u2028\u2029\\]/g,yn="\\ud800-\\udfff",_n="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",wn="\\u2700-\\u27bf",xn="a-z\\xdf-\\xf6\\xf8-\\xff",Cn="A-Z\\xc0-\\xd6\\xd8-\\xde",kn="\\ufe0e\\ufe0f",In="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",An="['â€™]",Sn="["+yn+"]",$n="["+In+"]",Nn="["+_n+"]",Mn="\\d+",zn="["+wn+"]",En="["+xn+"]",Rn="[^"+yn+In+Mn+wn+xn+Cn+"]",Wn="\\ud83c[\\udffb-\\udfff]",Bn="[^"+yn+"]",Ln="(?:\\ud83c[\\udde6-\\uddff]){2}",jn="[\\ud800-\\udbff][\\udc00-\\udfff]",Tn="["+Cn+"]",On="\\u200d",Gn="(?:"+En+"|"+Rn+")",Pn="(?:"+Tn+"|"+Rn+")",Xn="(?:['â€™](?:d|ll|m|re|s|t|ve))?",Zn="(?:['â€™](?:D|LL|M|RE|S|T|VE))?",Hn="(?:"+Nn+"|"+Wn+")?",Fn="["+kn+"]?",Dn=Fn+Hn+"(?:"+On+"(?:"+[Bn,Ln,jn].join("|")+")"+Fn+Hn+")*",Vn="(?:"+[zn,Ln,jn].join("|")+")"+Dn,Un="(?:"+[Bn+Nn+"?",Nn,Ln,jn,Sn].join("|")+")",Yn=RegExp(An,"g"),Jn=RegExp(Nn,"g"),qn=RegExp(Wn+"(?="+Wn+")|"+Un+Dn,"g"),Kn=RegExp([Tn+"?"+En+"+"+Xn+"(?="+[$n,Tn,"$"].join("|")+")",Pn+"+"+Zn+"(?="+[$n,Tn+Gn,"$"].join("|")+")",Tn+"?"+Gn+"+"+Xn,Tn+"+"+Zn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mn,Vn].join("|"),"g"),Qn=RegExp("["+On+yn+_n+kn+"]"),nt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],et=-1,rt={};rt[M]=rt[z]=rt[E]=rt[R]=rt[W]=rt[B]=rt[L]=rt[j]=rt[T]=!0,rt[d]=rt[p]=rt[$]=rt[h]=rt[N]=rt[v]=rt[g]=rt[b]=rt[y]=rt[_]=rt[w]=rt[C]=rt[k]=rt[I]=rt[S]=!1;var ot={};ot[d]=ot[p]=ot[$]=ot[N]=ot[h]=ot[v]=ot[M]=ot[z]=ot[E]=ot[R]=ot[W]=ot[y]=ot[_]=ot[w]=ot[C]=ot[k]=ot[I]=ot[A]=ot[B]=ot[L]=ot[j]=ot[T]=!0,ot[g]=ot[b]=ot[S]=!1;var it={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},at=parseFloat,lt=parseInt,st="object"==typeof Fi&&Fi&&Fi.Object===Object&&Fi,ut="object"==typeof self&&self&&self.Object===Object&&self,ct=st||ut||Function("return this")(),ft=Ui&&!Ui.nodeType&&Ui,dt=ft&&Vi&&!Vi.nodeType&&Vi,pt=dt&&dt.exports===ft,ht=pt&&st.process,vt=function(){try{var n=dt&&dt.require&&dt.require("util").types;return n||ht&&ht.binding&&ht.binding("util")}catch(t){}}(),gt=vt&&vt.isArrayBuffer,bt=vt&&vt.isDate,mt=vt&&vt.isMap,yt=vt&&vt.isRegExp,_t=vt&&vt.isSet,wt=vt&&vt.isTypedArray;function xt(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}function Ct(n,t,e,r){for(var o=-1,i=null==n?0:n.length;++o<i;){var a=n[o];t(r,a,e(a),n)}return r}function kt(n,t){for(var e=-1,r=null==n?0:n.length;++e<r&&!1!==t(n[e],e,n););return n}function It(n,t){for(var e=null==n?0:n.length;e--&&!1!==t(n[e],e,n););return n}function At(n,t){for(var e=-1,r=null==n?0:n.length;++e<r;)if(!t(n[e],e,n))return!1;return!0}function St(n,t){for(var e=-1,r=null==n?0:n.length,o=0,i=[];++e<r;){var a=n[e];t(a,e,n)&&(i[o++]=a)}return i}function $t(n,t){return!(null==n||!n.length)&&Tt(n,t,0)>-1}function Nt(n,t,e){for(var r=-1,o=null==n?0:n.length;++r<o;)if(e(t,n[r]))return!0;return!1}function Mt(n,t){for(var e=-1,r=null==n?0:n.length,o=Array(r);++e<r;)o[e]=t(n[e],e,n);return o}function zt(n,t){for(var e=-1,r=t.length,o=n.length;++e<r;)n[o+e]=t[e];return n}function Et(n,t,e,r){var o=-1,i=null==n?0:n.length;for(r&&i&&(e=n[++o]);++o<i;)e=t(e,n[o],o,n);return e}function Rt(n,t,e,r){var o=null==n?0:n.length;for(r&&o&&(e=n[--o]);o--;)e=t(e,n[o],o,n);return e}function Wt(n,t){for(var e=-1,r=null==n?0:n.length;++e<r;)if(t(n[e],e,n))return!0;return!1}var Bt=Xt("length");function Lt(n,t,e){var r;return e(n,function(n,e,o){if(t(n,e,o))return r=e,!1}),r}function jt(n,t,e,r){for(var o=n.length,i=e+(r?1:-1);r?i--:++i<o;)if(t(n[i],i,n))return i;return-1}function Tt(n,t,e){return t==t?function(n,t,e){for(var r=e-1,o=n.length;++r<o;)if(n[r]===t)return r;return-1}(n,t,e):jt(n,Gt,e)}function Ot(n,t,e,r){for(var o=e-1,i=n.length;++o<i;)if(r(n[o],t))return o;return-1}function Gt(n){return n!=n}function Pt(n,t){var e=null==n?0:n.length;return e?Ft(n,t)/e:u}function Xt(t){return function(e){return null==e?n:e[t]}}function Zt(t){return function(e){return null==t?n:t[e]}}function Ht(n,t,e,r,o){return o(n,function(n,o,i){e=r?(r=!1,n):t(e,n,o,i)}),e}function Ft(t,e){for(var r,o=-1,i=t.length;++o<i;){var a=e(t[o]);a!==n&&(r=r===n?a:r+a)}return r}function Dt(n,t){for(var e=-1,r=Array(n);++e<n;)r[e]=t(e);return r}function Vt(n){return n?n.slice(0,ue(n)+1).replace(nn,""):n}function Ut(n){return function(t){return n(t)}}function Yt(n,t){return Mt(t,function(t){return n[t]})}function Jt(n,t){return n.has(t)}function qt(n,t){for(var e=-1,r=n.length;++e<r&&Tt(t,n[e],0)>-1;);return e}function Kt(n,t){for(var e=n.length;e--&&Tt(t,n[e],0)>-1;);return e}var Qt=Zt({"Ã€":"A","Ã":"A","Ã‚":"A","Ãƒ":"A","Ã„":"A","Ã…":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã‡":"C","Ã§":"c","Ã":"D","Ã°":"d","Ãˆ":"E","Ã‰":"E","ÃŠ":"E","Ã‹":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","ÃŒ":"I","Ã":"I","ÃŽ":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã‘":"N","Ã±":"n","Ã’":"O","Ã“":"O","Ã”":"O","Ã•":"O","Ã–":"O","Ã˜":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã™":"U","Ãš":"U","Ã›":"U","Ãœ":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã†":"Ae","Ã¦":"ae","Ãž":"Th","Ã¾":"th","ÃŸ":"ss","Ä€":"A","Ä‚":"A","Ä„":"A","Ä":"a","Äƒ":"a","Ä…":"a","Ä†":"C","Äˆ":"C","ÄŠ":"C","ÄŒ":"C","Ä‡":"c","Ä‰":"c","Ä‹":"c","Ä":"c","ÄŽ":"D","Ä":"D","Ä":"d","Ä‘":"d","Ä’":"E","Ä”":"E","Ä–":"E","Ä˜":"E","Äš":"E","Ä“":"e","Ä•":"e","Ä—":"e","Ä™":"e","Ä›":"e","Äœ":"G","Äž":"G","Ä ":"G","Ä¢":"G","Ä":"g","ÄŸ":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å€":"l","Å‚":"l","Åƒ":"N","Å…":"N","Å‡":"N","ÅŠ":"N","Å„":"n","Å†":"n","Åˆ":"n","Å‹":"n","ÅŒ":"O","ÅŽ":"O","Å":"O","Å":"o","Å":"o","Å‘":"o","Å”":"R","Å–":"R","Å˜":"R","Å•":"r","Å—":"r","Å™":"r","Åš":"S","Åœ":"S","Åž":"S","Å ":"S","Å›":"s","Å":"s","ÅŸ":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å’":"Oe","Å“":"oe","Å‰":"'n","Å¿":"s"}),ne=Zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function te(n){return"\\"+it[n]}function ee(n){return Qn.test(n)}function re(n){var t=-1,e=Array(n.size);return n.forEach(function(n,r){e[++t]=[r,n]}),e}function oe(n,t){return function(e){return n(t(e))}}function ie(n,t){for(var e=-1,o=n.length,i=0,a=[];++e<o;){var l=n[e];l!==t&&l!==r||(n[e]=r,a[i++]=e)}return a}function ae(n){var t=-1,e=Array(n.size);return n.forEach(function(n){e[++t]=n}),e}function le(n){return ee(n)?function(n){for(var t=qn.lastIndex=0;qn.test(n);)++t;return t}(n):Bt(n)}function se(n){return ee(n)?function(n){return n.match(qn)||[]}(n):function(n){return n.split("")}(n)}function ue(n){for(var t=n.length;t--&&tn.test(n.charAt(t)););return t}var ce=Zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),fe=function tn(yn){var _n,wn=(yn=null==yn?ct:fe.defaults(ct.Object(),yn,fe.pick(ct,tt))).Array,xn=yn.Date,Cn=yn.Error,kn=yn.Function,In=yn.Math,An=yn.Object,Sn=yn.RegExp,$n=yn.String,Nn=yn.TypeError,Mn=wn.prototype,zn=kn.prototype,En=An.prototype,Rn=yn["__core-js_shared__"],Wn=zn.toString,Bn=En.hasOwnProperty,Ln=0,jn=(_n=/[^.]+$/.exec(Rn&&Rn.keys&&Rn.keys.IE_PROTO||""))?"Symbol(src)_1."+_n:"",Tn=En.toString,On=Wn.call(An),Gn=ct._,Pn=Sn("^"+Wn.call(Bn).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xn=pt?yn.Buffer:n,Zn=yn.Symbol,Hn=yn.Uint8Array,Fn=Xn?Xn.allocUnsafe:n,Dn=oe(An.getPrototypeOf,An),Vn=An.create,Un=En.propertyIsEnumerable,qn=Mn.splice,Qn=Zn?Zn.isConcatSpreadable:n,it=Zn?Zn.iterator:n,st=Zn?Zn.toStringTag:n,ut=function(){try{var n=ci(An,"defineProperty");return n({},"",{}),n}catch(t){}}(),ft=yn.clearTimeout!==ct.clearTimeout&&yn.clearTimeout,dt=xn&&xn.now!==ct.Date.now&&xn.now,ht=yn.setTimeout!==ct.setTimeout&&yn.setTimeout,vt=In.ceil,Bt=In.floor,Zt=An.getOwnPropertySymbols,de=Xn?Xn.isBuffer:n,pe=yn.isFinite,he=Mn.join,ve=oe(An.keys,An),ge=In.max,be=In.min,me=xn.now,ye=yn.parseInt,_e=In.random,we=Mn.reverse,xe=ci(yn,"DataView"),Ce=ci(yn,"Map"),ke=ci(yn,"Promise"),Ie=ci(yn,"Set"),Ae=ci(yn,"WeakMap"),Se=ci(An,"create"),$e=Ae&&new Ae,Ne={},Me=Oi(xe),ze=Oi(Ce),Ee=Oi(ke),Re=Oi(Ie),We=Oi(Ae),Be=Zn?Zn.prototype:n,Le=Be?Be.valueOf:n,je=Be?Be.toString:n;function Te(n){if(el(n)&&!Fa(n)&&!(n instanceof Xe)){if(n instanceof Pe)return n;if(Bn.call(n,"__wrapped__"))return Gi(n)}return new Pe(n)}var Oe=function(){function t(){}return function(e){if(!tl(e))return{};if(Vn)return Vn(e);t.prototype=e;var r=new t;return t.prototype=n,r}}();function Ge(){}function Pe(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function Xe(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=c,this.__views__=[]}function Ze(n){var t=-1,e=null==n?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function He(n){var t=-1,e=null==n?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function Fe(n){var t=-1,e=null==n?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}function De(n){var t=-1,e=null==n?0:n.length;for(this.__data__=new Fe;++t<e;)this.add(n[t])}function Ve(n){var t=this.__data__=new He(n);this.size=t.size}function Ue(n,t){var e=Fa(n),r=!e&&Ha(n),o=!e&&!r&&Ya(n),i=!e&&!r&&!o&&cl(n),a=e||r||o||i,l=a?Dt(n.length,$n):[],s=l.length;for(var u in n)!t&&!Bn.call(n,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||bi(u,s))||l.push(u);return l}function Ye(t){var e=t.length;return e?t[Dr(0,e-1)]:n}function Je(n,t){return Ri($o(n),ir(t,0,n.length))}function qe(n){return Ri($o(n))}function Ke(t,e,r){(r!==n&&!Pa(t[e],r)||r===n&&!(e in t))&&rr(t,e,r)}function Qe(t,e,r){var o=t[e];Bn.call(t,e)&&Pa(o,r)&&(r!==n||e in t)||rr(t,e,r)}function nr(n,t){for(var e=n.length;e--;)if(Pa(n[e][0],t))return e;return-1}function tr(n,t,e,r){return cr(n,function(n,o,i){t(r,n,e(n),i)}),r}function er(n,t){return n&&No(t,El(t),n)}function rr(n,t,e){"__proto__"==t&&ut?ut(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}function or(t,e){for(var r=-1,o=e.length,i=wn(o),a=null==t;++r<o;)i[r]=a?n:Sl(t,e[r]);return i}function ir(t,e,r){return t==t&&(r!==n&&(t=t<=r?t:r),e!==n&&(t=t>=e?t:e)),t}function ar(t,e,r,o,i,a){var l,s=1&e,u=2&e,c=4&e;if(r&&(l=i?r(t,o,i,a):r(t)),l!==n)return l;if(!tl(t))return t;var f=Fa(t);if(f){if(l=function(n){var t=n.length,e=new n.constructor(t);return t&&"string"==typeof n[0]&&Bn.call(n,"index")&&(e.index=n.index,e.input=n.input),e}(t),!s)return $o(t,l)}else{var p=pi(t),g=p==b||p==m;if(Ya(t))return xo(t,s);if(p==w||p==d||g&&!i){if(l=u||g?{}:vi(t),!s)return u?function(n,t){return No(n,di(n),t)}(t,function(n,t){return n&&No(t,Rl(t),n)}(l,t)):function(n,t){return No(n,fi(n),t)}(t,er(l,t))}else{if(!ot[p])return i?t:{};l=function(n,t,e){var r,o=n.constructor;switch(t){case $:return Co(n);case h:case v:return new o(+n);case N:return function(n,t){var e=t?Co(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.byteLength)}(n,e);case M:case z:case E:case R:case W:case B:case L:case j:case T:return ko(n,e);case y:return new o;case _:case I:return new o(n);case C:return function(n){var t=new n.constructor(n.source,cn.exec(n));return t.lastIndex=n.lastIndex,t}(n);case k:return new o;case A:return r=n,Le?An(Le.call(r)):{}}}(t,p,s)}}a||(a=new Ve);var x=a.get(t);if(x)return x;a.set(t,l),ll(t)?t.forEach(function(n){l.add(ar(n,e,r,n,t,a))}):rl(t)&&t.forEach(function(n,o){l.set(o,ar(n,e,r,o,t,a))});var S=f?n:(c?u?ri:ei:u?Rl:El)(t);return kt(S||t,function(n,o){S&&(n=t[o=n]),Qe(l,o,ar(n,e,r,o,t,a))}),l}function lr(t,e,r){var o=r.length;if(null==t)return!o;for(t=An(t);o--;){var i=r[o],a=e[i],l=t[i];if(l===n&&!(i in t)||!a(l))return!1}return!0}function sr(e,r,o){if("function"!=typeof e)throw new Nn(t);return Ni(function(){e.apply(n,o)},r)}function ur(n,t,e,r){var o=-1,i=$t,a=!0,l=n.length,s=[],u=t.length;if(!l)return s;e&&(t=Mt(t,Ut(e))),r?(i=Nt,a=!1):t.length>=200&&(i=Jt,a=!1,t=new De(t));n:for(;++o<l;){var c=n[o],f=null==e?c:e(c);if(c=r||0!==c?c:0,a&&f==f){for(var d=u;d--;)if(t[d]===f)continue n;s.push(c)}else i(t,f,r)||s.push(c)}return s}Te.templateSettings={escape:D,evaluate:V,interpolate:U,variable:"",imports:{_:Te}},Te.prototype=Ge.prototype,Te.prototype.constructor=Te,Pe.prototype=Oe(Ge.prototype),Pe.prototype.constructor=Pe,Xe.prototype=Oe(Ge.prototype),Xe.prototype.constructor=Xe,Ze.prototype.clear=function(){this.__data__=Se?Se(null):{},this.size=0},Ze.prototype.delete=function(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t},Ze.prototype.get=function(t){var r=this.__data__;if(Se){var o=r[t];return o===e?n:o}return Bn.call(r,t)?r[t]:n},Ze.prototype.has=function(t){var e=this.__data__;return Se?e[t]!==n:Bn.call(e,t)},Ze.prototype.set=function(t,r){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=Se&&r===n?e:r,this},He.prototype.clear=function(){this.__data__=[],this.size=0},He.prototype.delete=function(n){var t=this.__data__,e=nr(t,n);return!(e<0||(e==t.length-1?t.pop():qn.call(t,e,1),--this.size,0))},He.prototype.get=function(t){var e=this.__data__,r=nr(e,t);return r<0?n:e[r][1]},He.prototype.has=function(n){return nr(this.__data__,n)>-1},He.prototype.set=function(n,t){var e=this.__data__,r=nr(e,n);return r<0?(++this.size,e.push([n,t])):e[r][1]=t,this},Fe.prototype.clear=function(){this.size=0,this.__data__={hash:new Ze,map:new(Ce||He),string:new Ze}},Fe.prototype.delete=function(n){var t=si(this,n).delete(n);return this.size-=t?1:0,t},Fe.prototype.get=function(n){return si(this,n).get(n)},Fe.prototype.has=function(n){return si(this,n).has(n)},Fe.prototype.set=function(n,t){var e=si(this,n),r=e.size;return e.set(n,t),this.size+=e.size==r?0:1,this},De.prototype.add=De.prototype.push=function(n){return this.__data__.set(n,e),this},De.prototype.has=function(n){return this.__data__.has(n)},Ve.prototype.clear=function(){this.__data__=new He,this.size=0},Ve.prototype.delete=function(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e},Ve.prototype.get=function(n){return this.__data__.get(n)},Ve.prototype.has=function(n){return this.__data__.has(n)},Ve.prototype.set=function(n,t){var e=this.__data__;if(e instanceof He){var r=e.__data__;if(!Ce||r.length<199)return r.push([n,t]),this.size=++e.size,this;e=this.__data__=new Fe(r)}return e.set(n,t),this.size=e.size,this};var cr=Eo(mr),fr=Eo(yr,!0);function dr(n,t){var e=!0;return cr(n,function(n,r,o){return e=!!t(n,r,o)}),e}function pr(t,e,r){for(var o=-1,i=t.length;++o<i;){var a=t[o],l=e(a);if(null!=l&&(s===n?l==l&&!ul(l):r(l,s)))var s=l,u=a}return u}function hr(n,t){var e=[];return cr(n,function(n,r,o){t(n,r,o)&&e.push(n)}),e}function vr(n,t,e,r,o){var i=-1,a=n.length;for(e||(e=gi),o||(o=[]);++i<a;){var l=n[i];t>0&&e(l)?t>1?vr(l,t-1,e,r,o):zt(o,l):r||(o[o.length]=l)}return o}var gr=Ro(),br=Ro(!0);function mr(n,t){return n&&gr(n,t,El)}function yr(n,t){return n&&br(n,t,El)}function _r(n,t){return St(t,function(t){return Ka(n[t])})}function wr(t,e){for(var r=0,o=(e=mo(e,t)).length;null!=t&&r<o;)t=t[Ti(e[r++])];return r&&r==o?t:n}function xr(n,t,e){var r=t(n);return Fa(n)?r:zt(r,e(n))}function Cr(t){return null==t?t===n?"[object Undefined]":"[object Null]":st&&st in An(t)?function(t){var e=Bn.call(t,st),r=t[st];try{t[st]=n;var o=!0}catch(a){}var i=Tn.call(t);return o&&(e?t[st]=r:delete t[st]),i}(t):function(n){return Tn.call(n)}(t)}function kr(n,t){return n>t}function Ir(n,t){return null!=n&&Bn.call(n,t)}function Ar(n,t){return null!=n&&t in An(n)}function Sr(t,e,r){for(var o=r?Nt:$t,i=t[0].length,a=t.length,l=a,s=wn(a),u=1/0,c=[];l--;){var f=t[l];l&&e&&(f=Mt(f,Ut(e))),u=be(f.length,u),s[l]=!r&&(e||i>=120&&f.length>=120)?new De(l&&f):n}f=t[0];var d=-1,p=s[0];n:for(;++d<i&&c.length<u;){var h=f[d],v=e?e(h):h;if(h=r||0!==h?h:0,!(p?Jt(p,v):o(c,v,r))){for(l=a;--l;){var g=s[l];if(!(g?Jt(g,v):o(t[l],v,r)))continue n}p&&p.push(v),c.push(h)}}return c}function $r(t,e,r){var o=null==(t=Ai(t,e=mo(e,t)))?t:t[Ti(qi(e))];return null==o?n:xt(o,t,r)}function Nr(n){return el(n)&&Cr(n)==d}function Mr(t,e,r,o,i){return t===e||(null==t||null==e||!el(t)&&!el(e)?t!=t&&e!=e:function(t,e,r,o,i,a){var l=Fa(t),s=Fa(e),u=l?p:pi(t),c=s?p:pi(e),f=(u=u==d?w:u)==w,b=(c=c==d?w:c)==w,m=u==c;if(m&&Ya(t)){if(!Ya(e))return!1;l=!0,f=!1}if(m&&!f)return a||(a=new Ve),l||cl(t)?ni(t,e,r,o,i,a):function(n,t,e,r,o,i,a){switch(e){case N:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case $:return!(n.byteLength!=t.byteLength||!i(new Hn(n),new Hn(t)));case h:case v:case _:return Pa(+n,+t);case g:return n.name==t.name&&n.message==t.message;case C:case I:return n==t+"";case y:var l=re;case k:var s=1&r;if(l||(l=ae),n.size!=t.size&&!s)return!1;var u=a.get(n);if(u)return u==t;r|=2,a.set(n,t);var c=ni(l(n),l(t),r,o,i,a);return a.delete(n),c;case A:if(Le)return Le.call(n)==Le.call(t)}return!1}(t,e,u,r,o,i,a);if(!(1&r)){var x=f&&Bn.call(t,"__wrapped__"),S=b&&Bn.call(e,"__wrapped__");if(x||S){var M=x?t.value():t,z=S?e.value():e;return a||(a=new Ve),i(M,z,r,o,a)}}return!!m&&(a||(a=new Ve),function(t,e,r,o,i,a){var l=1&r,s=ei(t),u=s.length,c=ei(e),f=c.length;if(u!=f&&!l)return!1;for(var d=u;d--;){var p=s[d];if(!(l?p in e:Bn.call(e,p)))return!1}var h=a.get(t),v=a.get(e);if(h&&v)return h==e&&v==t;var g=!0;a.set(t,e),a.set(e,t);for(var b=l;++d<u;){var m=t[p=s[d]],y=e[p];if(o)var _=l?o(y,m,p,e,t,a):o(m,y,p,t,e,a);if(!(_===n?m===y||i(m,y,r,o,a):_)){g=!1;break}b||(b="constructor"==p)}if(g&&!b){var w=t.constructor,x=e.constructor;w==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(g=!1)}return a.delete(t),a.delete(e),g}(t,e,r,o,i,a))}(t,e,r,o,Mr,i))}function zr(t,e,r,o){var i=r.length,a=i,l=!o;if(null==t)return!a;for(t=An(t);i--;){var s=r[i];if(l&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){var u=(s=r[i])[0],c=t[u],f=s[1];if(l&&s[2]){if(c===n&&!(u in t))return!1}else{var d=new Ve;if(o)var p=o(c,f,u,t,e,d);if(!(p===n?Mr(f,c,3,o,d):p))return!1}}return!0}function Er(n){return!(!tl(n)||(t=n,jn&&jn in t))&&(Ka(n)?Pn:pn).test(Oi(n));var t}function Rr(n){return"function"==typeof n?n:null==n?os:"object"==typeof n?Fa(n)?Or(n[0],n[1]):Tr(n):ps(n)}function Wr(n){if(!xi(n))return ve(n);var t=[];for(var e in An(n))Bn.call(n,e)&&"constructor"!=e&&t.push(e);return t}function Br(n){if(!tl(n))return function(n){var t=[];if(null!=n)for(var e in An(n))t.push(e);return t}(n);var t=xi(n),e=[];for(var r in n)("constructor"!=r||!t&&Bn.call(n,r))&&e.push(r);return e}function Lr(n,t){return n<t}function jr(n,t){var e=-1,r=Va(n)?wn(n.length):[];return cr(n,function(n,o,i){r[++e]=t(n,o,i)}),r}function Tr(n){var t=ui(n);return 1==t.length&&t[0][2]?ki(t[0][0],t[0][1]):function(e){return e===n||zr(e,n,t)}}function Or(t,e){return yi(t)&&Ci(e)?ki(Ti(t),e):function(r){var o=Sl(r,t);return o===n&&o===e?$l(r,t):Mr(e,o,3)}}function Gr(t,e,r,o,i){t!==e&&gr(e,function(a,l){if(i||(i=new Ve),tl(a))!function(t,e,r,o,i,a,l){var s=Si(t,r),u=Si(e,r),c=l.get(u);if(c)Ke(t,r,c);else{var f=a?a(s,u,r+"",t,e,l):n,d=f===n;if(d){var p=Fa(u),h=!p&&Ya(u),v=!p&&!h&&cl(u);f=u,p||h||v?Fa(s)?f=s:Ua(s)?f=$o(s):h?(d=!1,f=xo(u,!0)):v?(d=!1,f=ko(u,!0)):f=[]:il(u)||Ha(u)?(f=s,Ha(s)?f=ml(s):tl(s)&&!Ka(s)||(f=vi(u))):d=!1}d&&(l.set(u,f),i(f,u,o,a,l),l.delete(u)),Ke(t,r,f)}}(t,e,l,r,Gr,o,i);else{var s=o?o(Si(t,l),a,l+"",t,e,i):n;s===n&&(s=a),Ke(t,l,s)}},Rl)}function Pr(t,e){var r=t.length;if(r)return bi(e+=e<0?r:0,r)?t[e]:n}function Xr(n,t,e){t=t.length?Mt(t,function(n){return Fa(n)?function(t){return wr(t,1===n.length?n[0]:n)}:n}):[os];var r=-1;return t=Mt(t,Ut(li())),function(n,t){var e=n.length;for(n.sort(t);e--;)n[e]=n[e].value;return n}(jr(n,function(n,e,o){return{criteria:Mt(t,function(t){return t(n)}),index:++r,value:n}}),function(n,t){return function(n,t,e){for(var r=-1,o=n.criteria,i=t.criteria,a=o.length,l=e.length;++r<a;){var s=Io(o[r],i[r]);if(s)return r>=l?s:s*("desc"==e[r]?-1:1)}return n.index-t.index}(n,t,e)})}function Zr(n,t,e){for(var r=-1,o=t.length,i={};++r<o;){var a=t[r],l=wr(n,a);e(l,a)&&qr(i,mo(a,n),l)}return i}function Hr(n,t,e,r){var o=r?Ot:Tt,i=-1,a=t.length,l=n;for(n===t&&(t=$o(t)),e&&(l=Mt(n,Ut(e)));++i<a;)for(var s=0,u=t[i],c=e?e(u):u;(s=o(l,c,s,r))>-1;)l!==n&&qn.call(l,s,1),qn.call(n,s,1);return n}function Fr(n,t){for(var e=n?t.length:0,r=e-1;e--;){var o=t[e];if(e==r||o!==i){var i=o;bi(o)?qn.call(n,o,1):uo(n,o)}}return n}function Dr(n,t){return n+Bt(_e()*(t-n+1))}function Vr(n,t){var e="";if(!n||t<1||t>s)return e;do{t%2&&(e+=n),(t=Bt(t/2))&&(n+=n)}while(t);return e}function Ur(n,t){return Mi(Ii(n,t,os),n+"")}function Yr(n){return Ye(Pl(n))}function Jr(n,t){var e=Pl(n);return Ri(e,ir(t,0,e.length))}function qr(t,e,r,o){if(!tl(t))return t;for(var i=-1,a=(e=mo(e,t)).length,l=a-1,s=t;null!=s&&++i<a;){var u=Ti(e[i]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(i!=l){var f=s[u];(c=o?o(f,u,s):n)===n&&(c=tl(f)?f:bi(e[i+1])?[]:{})}Qe(s,u,c),s=s[u]}return t}var Kr=$e?function(n,t){return $e.set(n,t),n}:os,Qr=ut?function(n,t){return ut(n,"toString",{configurable:!0,enumerable:!1,value:ts(t),writable:!0})}:os;function no(n){return Ri(Pl(n))}function to(n,t,e){var r=-1,o=n.length;t<0&&(t=-t>o?0:o+t),(e=e>o?o:e)<0&&(e+=o),o=t>e?0:e-t>>>0,t>>>=0;for(var i=wn(o);++r<o;)i[r]=n[r+t];return i}function eo(n,t){var e;return cr(n,function(n,r,o){return!(e=t(n,r,o))}),!!e}function ro(n,t,e){var r=0,o=null==n?r:n.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;r<o;){var i=r+o>>>1,a=n[i];null!==a&&!ul(a)&&(e?a<=t:a<t)?r=i+1:o=i}return o}return oo(n,t,os,e)}function oo(t,e,r,o){var i=0,a=null==t?0:t.length;if(0===a)return 0;for(var l=(e=r(e))!=e,s=null===e,u=ul(e),c=e===n;i<a;){var f=Bt((i+a)/2),d=r(t[f]),p=d!==n,h=null===d,v=d==d,g=ul(d);if(l)var b=o||v;else b=c?v&&(o||p):s?v&&p&&(o||!h):u?v&&p&&!h&&(o||!g):!h&&!g&&(o?d<=e:d<e);b?i=f+1:a=f}return be(a,4294967294)}function io(n,t){for(var e=-1,r=n.length,o=0,i=[];++e<r;){var a=n[e],l=t?t(a):a;if(!e||!Pa(l,s)){var s=l;i[o++]=0===a?0:a}}return i}function ao(n){return"number"==typeof n?n:ul(n)?u:+n}function lo(n){if("string"==typeof n)return n;if(Fa(n))return Mt(n,lo)+"";if(ul(n))return je?je.call(n):"";var t=n+"";return"0"==t&&1/n==-1/0?"-0":t}function so(n,t,e){var r=-1,o=$t,i=n.length,a=!0,l=[],s=l;if(e)a=!1,o=Nt;else if(i>=200){var u=t?null:Uo(n);if(u)return ae(u);a=!1,o=Jt,s=new De}else s=t?[]:l;n:for(;++r<i;){var c=n[r],f=t?t(c):c;if(c=e||0!==c?c:0,a&&f==f){for(var d=s.length;d--;)if(s[d]===f)continue n;t&&s.push(f),l.push(c)}else o(s,f,e)||(s!==l&&s.push(f),l.push(c))}return l}function uo(n,t){return null==(n=Ai(n,t=mo(t,n)))||delete n[Ti(qi(t))]}function co(n,t,e,r){return qr(n,t,e(wr(n,t)),r)}function fo(n,t,e,r){for(var o=n.length,i=r?o:-1;(r?i--:++i<o)&&t(n[i],i,n););return e?to(n,r?0:i,r?i+1:o):to(n,r?i+1:0,r?o:i)}function po(n,t){var e=n;return e instanceof Xe&&(e=e.value()),Et(t,function(n,t){return t.func.apply(t.thisArg,zt([n],t.args))},e)}function ho(n,t,e){var r=n.length;if(r<2)return r?so(n[0]):[];for(var o=-1,i=wn(r);++o<r;)for(var a=n[o],l=-1;++l<r;)l!=o&&(i[o]=ur(i[o]||a,n[l],t,e));return so(vr(i,1),t,e)}function vo(t,e,r){for(var o=-1,i=t.length,a=e.length,l={};++o<i;){var s=o<a?e[o]:n;r(l,t[o],s)}return l}function go(n){return Ua(n)?n:[]}function bo(n){return"function"==typeof n?n:os}function mo(n,t){return Fa(n)?n:yi(n,t)?[n]:ji(yl(n))}var yo=Ur;function _o(t,e,r){var o=t.length;return r=r===n?o:r,!e&&r>=o?t:to(t,e,r)}var wo=ft||function(n){return ct.clearTimeout(n)};function xo(n,t){if(t)return n.slice();var e=n.length,r=Fn?Fn(e):new n.constructor(e);return n.copy(r),r}function Co(n){var t=new n.constructor(n.byteLength);return new Hn(t).set(new Hn(n)),t}function ko(n,t){var e=t?Co(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}function Io(t,e){if(t!==e){var r=t!==n,o=null===t,i=t==t,a=ul(t),l=e!==n,s=null===e,u=e==e,c=ul(e);if(!s&&!c&&!a&&t>e||a&&l&&u&&!s&&!c||o&&l&&u||!r&&u||!i)return 1;if(!o&&!a&&!c&&t<e||c&&r&&i&&!o&&!a||s&&r&&i||!l&&i||!u)return-1}return 0}function Ao(n,t,e,r){for(var o=-1,i=n.length,a=e.length,l=-1,s=t.length,u=ge(i-a,0),c=wn(s+u),f=!r;++l<s;)c[l]=t[l];for(;++o<a;)(f||o<i)&&(c[e[o]]=n[o]);for(;u--;)c[l++]=n[o++];return c}function So(n,t,e,r){for(var o=-1,i=n.length,a=-1,l=e.length,s=-1,u=t.length,c=ge(i-l,0),f=wn(c+u),d=!r;++o<c;)f[o]=n[o];for(var p=o;++s<u;)f[p+s]=t[s];for(;++a<l;)(d||o<i)&&(f[p+e[a]]=n[o++]);return f}function $o(n,t){var e=-1,r=n.length;for(t||(t=wn(r));++e<r;)t[e]=n[e];return t}function No(t,e,r,o){var i=!r;r||(r={});for(var a=-1,l=e.length;++a<l;){var s=e[a],u=o?o(r[s],t[s],s,r,t):n;u===n&&(u=t[s]),i?rr(r,s,u):Qe(r,s,u)}return r}function Mo(n,t){return function(e,r){var o=Fa(e)?Ct:tr,i=t?t():{};return o(e,n,li(r,2),i)}}function zo(t){return Ur(function(e,r){var o=-1,i=r.length,a=i>1?r[i-1]:n,l=i>2?r[2]:n;for(a=t.length>3&&"function"==typeof a?(i--,a):n,l&&mi(r[0],r[1],l)&&(a=i<3?n:a,i=1),e=An(e);++o<i;){var s=r[o];s&&t(e,s,o,a)}return e})}function Eo(n,t){return function(e,r){if(null==e)return e;if(!Va(e))return n(e,r);for(var o=e.length,i=t?o:-1,a=An(e);(t?i--:++i<o)&&!1!==r(a[i],i,a););return e}}function Ro(n){return function(t,e,r){for(var o=-1,i=An(t),a=r(t),l=a.length;l--;){var s=a[n?l:++o];if(!1===e(i[s],s,i))break}return t}}function Wo(t){return function(e){var r=ee(e=yl(e))?se(e):n,o=r?r[0]:e.charAt(0),i=r?_o(r,1).join(""):e.slice(1);return o[t]()+i}}function Bo(n){return function(t){return Et(Kl(Hl(t).replace(Yn,"")),n,"")}}function Lo(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=Oe(n.prototype),r=n.apply(e,t);return tl(r)?r:e}}function jo(t){return function(e,r,o){var i=An(e);if(!Va(e)){var a=li(r,3);e=El(e),r=function(n){return a(i[n],n,i)}}var l=t(e,r,o);return l>-1?i[a?e[l]:l]:n}}function To(e){return ti(function(r){var o=r.length,i=o,a=Pe.prototype.thru;for(e&&r.reverse();i--;){var l=r[i];if("function"!=typeof l)throw new Nn(t);if(a&&!s&&"wrapper"==ii(l))var s=new Pe([],!0)}for(i=s?i:o;++i<o;){var u=ii(l=r[i]),c="wrapper"==u?oi(l):n;s=c&&_i(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[ii(c[0])].apply(s,c[3]):1==l.length&&_i(l)?s[u]():s.thru(l)}return function(){var n=arguments,t=n[0];if(s&&1==n.length&&Fa(t))return s.plant(t).value();for(var e=0,i=o?r[e].apply(this,n):t;++e<o;)i=r[e].call(this,i);return i}})}function Oo(t,e,r,o,a,l,s,u,c,f){var d=e&i,p=1&e,h=2&e,v=24&e,g=512&e,b=h?n:Lo(t);return function i(){for(var m=arguments.length,y=wn(m),_=m;_--;)y[_]=arguments[_];if(v)var w=ai(i),x=function(n,t){for(var e=n.length,r=0;e--;)n[e]===t&&++r;return r}(y,w);if(o&&(y=Ao(y,o,a,v)),l&&(y=So(y,l,s,v)),m-=x,v&&m<f){var C=ie(y,w);return Do(t,e,Oo,i.placeholder,r,y,C,u,c,f-m)}var k=p?r:this,I=h?k[t]:t;return m=y.length,u?y=function(t,e){for(var r=t.length,o=be(e.length,r),i=$o(t);o--;){var a=e[o];t[o]=bi(a,r)?i[a]:n}return t}(y,u):g&&m>1&&y.reverse(),d&&c<m&&(y.length=c),this&&this!==ct&&this instanceof i&&(I=b||Lo(I)),I.apply(k,y)}}function Go(n,t){return function(e,r){return function(n,t,e,r){return mr(n,function(n,o,i){t(r,e(n),o,i)}),r}(e,n,t(r),{})}}function Po(t,e){return function(r,o){var i;if(r===n&&o===n)return e;if(r!==n&&(i=r),o!==n){if(i===n)return o;"string"==typeof r||"string"==typeof o?(r=lo(r),o=lo(o)):(r=ao(r),o=ao(o)),i=t(r,o)}return i}}function Xo(n){return ti(function(t){return t=Mt(t,Ut(li())),Ur(function(e){var r=this;return n(t,function(n){return xt(n,r,e)})})})}function Zo(t,e){var r=(e=e===n?" ":lo(e)).length;if(r<2)return r?Vr(e,t):e;var o=Vr(e,vt(t/le(e)));return ee(e)?_o(se(o),0,t).join(""):o.slice(0,t)}function Ho(t){return function(e,r,o){return o&&"number"!=typeof o&&mi(e,r,o)&&(r=o=n),e=hl(e),r===n?(r=e,e=0):r=hl(r),function(n,t,e,r){for(var o=-1,i=ge(vt((t-n)/(e||1)),0),a=wn(i);i--;)a[r?i:++o]=n,n+=e;return a}(e,r,o=o===n?e<r?1:-1:hl(o),t)}}function Fo(n){return function(t,e){return"string"==typeof t&&"string"==typeof e||(t=bl(t),e=bl(e)),n(t,e)}}function Do(t,e,r,i,a,l,s,u,c,f){var d=8&e;e|=d?o:64,4&(e&=~(d?64:o))||(e&=-4);var p=[t,e,a,d?l:n,d?s:n,d?n:l,d?n:s,u,c,f],h=r.apply(n,p);return _i(t)&&$i(h,p),h.placeholder=i,zi(h,t,e)}function Vo(n){var t=In[n];return function(n,e){if(n=bl(n),(e=null==e?0:be(vl(e),292))&&pe(n)){var r=(yl(n)+"e").split("e");return+((r=(yl(t(r[0]+"e"+(+r[1]+e)))+"e").split("e"))[0]+"e"+(+r[1]-e))}return t(n)}}var Uo=Ie&&1/ae(new Ie([,-0]))[1]==l?function(n){return new Ie(n)}:us;function Yo(n){return function(t){var e=pi(t);return e==y?re(t):e==k?function(n){var t=-1,e=Array(n.size);return n.forEach(function(n){e[++t]=[n,n]}),e}(t):function(n,t){return Mt(t,function(t){return[t,n[t]]})}(t,n(t))}}function Jo(e,l,s,u,c,f,d,p){var h=2&l;if(!h&&"function"!=typeof e)throw new Nn(t);var v=u?u.length:0;if(v||(l&=-97,u=c=n),d=d===n?d:ge(vl(d),0),p=p===n?p:vl(p),v-=c?c.length:0,64&l){var g=u,b=c;u=c=n}var m=h?n:oi(e),y=[e,l,s,u,c,g,b,f,d,p];if(m&&function(n,t){var e=n[1],o=t[1],l=e|o,s=l<131,u=o==i&&8==e||o==i&&e==a&&n[7].length<=t[8]||384==o&&t[7].length<=t[8]&&8==e;if(!s&&!u)return n;1&o&&(n[2]=t[2],l|=1&e?0:4);var c=t[3];if(c){var f=n[3];n[3]=f?Ao(f,c,t[4]):c,n[4]=f?ie(n[3],r):t[4]}(c=t[5])&&(f=n[5],n[5]=f?So(f,c,t[6]):c,n[6]=f?ie(n[5],r):t[6]),(c=t[7])&&(n[7]=c),o&i&&(n[8]=null==n[8]?t[8]:be(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=l}(y,m),e=y[0],l=y[1],s=y[2],u=y[3],c=y[4],!(p=y[9]=y[9]===n?h?0:e.length:ge(y[9]-v,0))&&24&l&&(l&=-25),l&&1!=l)_=8==l||16==l?function(t,e,r){var o=Lo(t);return function i(){for(var a=arguments.length,l=wn(a),s=a,u=ai(i);s--;)l[s]=arguments[s];var c=a<3&&l[0]!==u&&l[a-1]!==u?[]:ie(l,u);return(a-=c.length)<r?Do(t,e,Oo,i.placeholder,n,l,c,n,n,r-a):xt(this&&this!==ct&&this instanceof i?o:t,this,l)}}(e,l,p):l!=o&&33!=l||c.length?Oo.apply(n,y):function(n,t,e,r){var o=1&t,i=Lo(n);return function t(){for(var a=-1,l=arguments.length,s=-1,u=r.length,c=wn(u+l),f=this&&this!==ct&&this instanceof t?i:n;++s<u;)c[s]=r[s];for(;l--;)c[s++]=arguments[++a];return xt(f,o?e:this,c)}}(e,l,s,u);else var _=function(n,t,e){var r=1&t,o=Lo(n);return function t(){return(this&&this!==ct&&this instanceof t?o:n).apply(r?e:this,arguments)}}(e,l,s);return zi((m?Kr:$i)(_,y),e,l)}function qo(t,e,r,o){return t===n||Pa(t,En[r])&&!Bn.call(o,r)?e:t}function Ko(t,e,r,o,i,a){return tl(t)&&tl(e)&&(a.set(e,t),Gr(t,e,n,Ko,a),a.delete(e)),t}function Qo(t){return il(t)?n:t}function ni(t,e,r,o,i,a){var l=1&r,s=t.length,u=e.length;if(s!=u&&!(l&&u>s))return!1;var c=a.get(t),f=a.get(e);if(c&&f)return c==e&&f==t;var d=-1,p=!0,h=2&r?new De:n;for(a.set(t,e),a.set(e,t);++d<s;){var v=t[d],g=e[d];if(o)var b=l?o(g,v,d,e,t,a):o(v,g,d,t,e,a);if(b!==n){if(b)continue;p=!1;break}if(h){if(!Wt(e,function(n,t){if(!Jt(h,t)&&(v===n||i(v,n,r,o,a)))return h.push(t)})){p=!1;break}}else if(v!==g&&!i(v,g,r,o,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function ti(t){return Mi(Ii(t,n,Di),t+"")}function ei(n){return xr(n,El,fi)}function ri(n){return xr(n,Rl,di)}var oi=$e?function(n){return $e.get(n)}:us;function ii(n){for(var t=n.name+"",e=Ne[t],r=Bn.call(Ne,t)?e.length:0;r--;){var o=e[r],i=o.func;if(null==i||i==n)return o.name}return t}function ai(n){return(Bn.call(Te,"placeholder")?Te:n).placeholder}function li(){var n=Te.iteratee||is;return n=n===is?Rr:n,arguments.length?n(arguments[0],arguments[1]):n}function si(n,t){var e,r,o=n.__data__;return("string"==(r=typeof(e=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e)?o["string"==typeof t?"string":"hash"]:o.map}function ui(n){for(var t=El(n),e=t.length;e--;){var r=t[e],o=n[r];t[e]=[r,o,Ci(o)]}return t}function ci(t,e){var r=function(t,e){return null==t?n:t[e]}(t,e);return Er(r)?r:n}var fi=Zt?function(n){return null==n?[]:(n=An(n),St(Zt(n),function(t){return Un.call(n,t)}))}:gs,di=Zt?function(n){for(var t=[];n;)zt(t,fi(n)),n=Dn(n);return t}:gs,pi=Cr;function hi(n,t,e){for(var r=-1,o=(t=mo(t,n)).length,i=!1;++r<o;){var a=Ti(t[r]);if(!(i=null!=n&&e(n,a)))break;n=n[a]}return i||++r!=o?i:!!(o=null==n?0:n.length)&&nl(o)&&bi(a,o)&&(Fa(n)||Ha(n))}function vi(n){return"function"!=typeof n.constructor||xi(n)?{}:Oe(Dn(n))}function gi(n){return Fa(n)||Ha(n)||!!(Qn&&n&&n[Qn])}function bi(n,t){var e=typeof n;return!!(t=null==t?s:t)&&("number"==e||"symbol"!=e&&vn.test(n))&&n>-1&&n%1==0&&n<t}function mi(n,t,e){if(!tl(e))return!1;var r=typeof t;return!!("number"==r?Va(e)&&bi(t,e.length):"string"==r&&t in e)&&Pa(e[t],n)}function yi(n,t){if(Fa(n))return!1;var e=typeof n;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=n&&!ul(n))||J.test(n)||!Y.test(n)||null!=t&&n in An(t)}function _i(n){var t=ii(n),e=Te[t];if("function"!=typeof e||!(t in Xe.prototype))return!1;if(n===e)return!0;var r=oi(e);return!!r&&n===r[0]}(xe&&pi(new xe(new ArrayBuffer(1)))!=N||Ce&&pi(new Ce)!=y||ke&&pi(ke.resolve())!=x||Ie&&pi(new Ie)!=k||Ae&&pi(new Ae)!=S)&&(pi=function(t){var e=Cr(t),r=e==w?t.constructor:n,o=r?Oi(r):"";if(o)switch(o){case Me:return N;case ze:return y;case Ee:return x;case Re:return k;case We:return S}return e});var wi=Rn?Ka:bs;function xi(n){var t=n&&n.constructor;return n===("function"==typeof t&&t.prototype||En)}function Ci(n){return n==n&&!tl(n)}function ki(t,e){return function(r){return null!=r&&r[t]===e&&(e!==n||t in An(r))}}function Ii(t,e,r){return e=ge(e===n?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=ge(n.length-e,0),a=wn(i);++o<i;)a[o]=n[e+o];o=-1;for(var l=wn(e+1);++o<e;)l[o]=n[o];return l[e]=r(a),xt(t,this,l)}}function Ai(n,t){return t.length<2?n:wr(n,to(t,0,-1))}function Si(n,t){if(("constructor"!==t||"function"!=typeof n[t])&&"__proto__"!=t)return n[t]}var $i=Ei(Kr),Ni=ht||function(n,t){return ct.setTimeout(n,t)},Mi=Ei(Qr);function zi(n,t,e){var r=t+"";return Mi(n,function(n,t){var e=t.length;if(!e)return n;var r=e-1;return t[r]=(e>1?"& ":"")+t[r],t=t.join(e>2?", ":" "),n.replace(en,"{\n/* [wrapped with "+t+"] */\n")}(r,function(n,t){return kt(f,function(e){var r="_."+e[0];t&e[1]&&!$t(n,r)&&n.push(r)}),n.sort()}(function(n){var t=n.match(rn);return t?t[1].split(on):[]}(r),e)))}function Ei(t){var e=0,r=0;return function(){var o=me(),i=16-(o-r);if(r=o,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(n,arguments)}}function Ri(t,e){var r=-1,o=t.length,i=o-1;for(e=e===n?o:e;++r<e;){var a=Dr(r,i),l=t[a];t[a]=t[r],t[r]=l}return t.length=e,t}var Wi,Bi,Li,ji=(Wi=function(n){var t=[];return 46===n.charCodeAt(0)&&t.push(""),n.replace(q,function(n,e,r,o){t.push(r?o.replace(sn,"$1"):e||n)}),t},Bi=Ba(Wi,function(n){return 500===Li.size&&Li.clear(),n}),Li=Bi.cache,Bi);function Ti(n){if("string"==typeof n||ul(n))return n;var t=n+"";return"0"==t&&1/n==-1/0?"-0":t}function Oi(n){if(null!=n){try{return Wn.call(n)}catch(t){}try{return n+""}catch(t){}}return""}function Gi(n){if(n instanceof Xe)return n.clone();var t=new Pe(n.__wrapped__,n.__chain__);return t.__actions__=$o(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}var Pi=Ur(function(n,t){return Ua(n)?ur(n,vr(t,1,Ua,!0)):[]}),Xi=Ur(function(t,e){var r=qi(e);return Ua(r)&&(r=n),Ua(t)?ur(t,vr(e,1,Ua,!0),li(r,2)):[]}),Zi=Ur(function(t,e){var r=qi(e);return Ua(r)&&(r=n),Ua(t)?ur(t,vr(e,1,Ua,!0),n,r):[]});function Hi(n,t,e){var r=null==n?0:n.length;if(!r)return-1;var o=null==e?0:vl(e);return o<0&&(o=ge(r+o,0)),jt(n,li(t,3),o)}function Fi(t,e,r){var o=null==t?0:t.length;if(!o)return-1;var i=o-1;return r!==n&&(i=vl(r),i=r<0?ge(o+i,0):be(i,o-1)),jt(t,li(e,3),i,!0)}function Di(n){return null!=n&&n.length?vr(n,1):[]}function Vi(t){return t&&t.length?t[0]:n}var Ui=Ur(function(n){var t=Mt(n,go);return t.length&&t[0]===n[0]?Sr(t):[]}),Yi=Ur(function(t){var e=qi(t),r=Mt(t,go);return e===qi(r)?e=n:r.pop(),r.length&&r[0]===t[0]?Sr(r,li(e,2)):[]}),Ji=Ur(function(t){var e=qi(t),r=Mt(t,go);return(e="function"==typeof e?e:n)&&r.pop(),r.length&&r[0]===t[0]?Sr(r,n,e):[]});function qi(t){var e=null==t?0:t.length;return e?t[e-1]:n}var Ki=Ur(Qi);function Qi(n,t){return n&&n.length&&t&&t.length?Hr(n,t):n}var na=ti(function(n,t){var e=null==n?0:n.length,r=or(n,t);return Fr(n,Mt(t,function(n){return bi(n,e)?+n:n}).sort(Io)),r});function ta(n){return null==n?n:we.call(n)}var ea=Ur(function(n){return so(vr(n,1,Ua,!0))}),ra=Ur(function(t){var e=qi(t);return Ua(e)&&(e=n),so(vr(t,1,Ua,!0),li(e,2))}),oa=Ur(function(t){var e=qi(t);return e="function"==typeof e?e:n,so(vr(t,1,Ua,!0),n,e)});function ia(n){if(!n||!n.length)return[];var t=0;return n=St(n,function(n){if(Ua(n))return t=ge(n.length,t),!0}),Dt(t,function(t){return Mt(n,Xt(t))})}function aa(t,e){if(!t||!t.length)return[];var r=ia(t);return null==e?r:Mt(r,function(t){return xt(e,n,t)})}var la=Ur(function(n,t){return Ua(n)?ur(n,t):[]}),sa=Ur(function(n){return ho(St(n,Ua))}),ua=Ur(function(t){var e=qi(t);return Ua(e)&&(e=n),ho(St(t,Ua),li(e,2))}),ca=Ur(function(t){var e=qi(t);return e="function"==typeof e?e:n,ho(St(t,Ua),n,e)}),fa=Ur(ia),da=Ur(function(t){var e=t.length,r=e>1?t[e-1]:n;return r="function"==typeof r?(t.pop(),r):n,aa(t,r)});function pa(n){var t=Te(n);return t.__chain__=!0,t}function ha(n,t){return t(n)}var va=ti(function(t){var e=t.length,r=e?t[0]:0,o=this.__wrapped__,i=function(n){return or(n,t)};return!(e>1||this.__actions__.length)&&o instanceof Xe&&bi(r)?((o=o.slice(r,+r+(e?1:0))).__actions__.push({func:ha,args:[i],thisArg:n}),new Pe(o,this.__chain__).thru(function(t){return e&&!t.length&&t.push(n),t})):this.thru(i)}),ga=Mo(function(n,t,e){Bn.call(n,e)?++n[e]:rr(n,e,1)}),ba=jo(Hi),ma=jo(Fi);function ya(n,t){return(Fa(n)?kt:cr)(n,li(t,3))}function _a(n,t){return(Fa(n)?It:fr)(n,li(t,3))}var wa=Mo(function(n,t,e){Bn.call(n,e)?n[e].push(t):rr(n,e,[t])}),xa=Ur(function(n,t,e){var r=-1,o="function"==typeof t,i=Va(n)?wn(n.length):[];return cr(n,function(n){i[++r]=o?xt(t,n,e):$r(n,t,e)}),i}),Ca=Mo(function(n,t,e){rr(n,e,t)});function ka(n,t){return(Fa(n)?Mt:jr)(n,li(t,3))}var Ia=Mo(function(n,t,e){n[e?0:1].push(t)},function(){return[[],[]]}),Aa=Ur(function(n,t){if(null==n)return[];var e=t.length;return e>1&&mi(n,t[0],t[1])?t=[]:e>2&&mi(t[0],t[1],t[2])&&(t=[t[0]]),Xr(n,vr(t,1),[])}),Sa=dt||function(){return ct.Date.now()};function $a(t,e,r){return e=r?n:e,e=t&&null==e?t.length:e,Jo(t,i,n,n,n,n,e)}function Na(e,r){var o;if("function"!=typeof r)throw new Nn(t);return e=vl(e),function(){return--e>0&&(o=r.apply(this,arguments)),e<=1&&(r=n),o}}var Ma=Ur(function(n,t,e){var r=1;if(e.length){var i=ie(e,ai(Ma));r|=o}return Jo(n,r,t,e,i)}),za=Ur(function(n,t,e){var r=3;if(e.length){var i=ie(e,ai(za));r|=o}return Jo(t,r,n,e,i)});function Ea(e,r,o){var i,a,l,s,u,c,f=0,d=!1,p=!1,h=!0;if("function"!=typeof e)throw new Nn(t);function v(t){var r=i,o=a;return i=a=n,f=t,s=e.apply(o,r)}function g(t){var e=t-c;return c===n||e>=r||e<0||p&&t-f>=l}function b(){var n=Sa();if(g(n))return m(n);u=Ni(b,function(n){var t=r-(n-c);return p?be(t,l-(n-f)):t}(n))}function m(t){return u=n,h&&i?v(t):(i=a=n,s)}function y(){var t=Sa(),e=g(t);if(i=arguments,a=this,c=t,e){if(u===n)return function(n){return f=n,u=Ni(b,r),d?v(n):s}(c);if(p)return wo(u),u=Ni(b,r),v(c)}return u===n&&(u=Ni(b,r)),s}return r=bl(r)||0,tl(o)&&(d=!!o.leading,l=(p="maxWait"in o)?ge(bl(o.maxWait)||0,r):l,h="trailing"in o?!!o.trailing:h),y.cancel=function(){u!==n&&wo(u),f=0,i=c=a=u=n},y.flush=function(){return u===n?s:m(Sa())},y}var Ra=Ur(function(n,t){return sr(n,1,t)}),Wa=Ur(function(n,t,e){return sr(n,bl(t)||0,e)});function Ba(n,e){if("function"!=typeof n||null!=e&&"function"!=typeof e)throw new Nn(t);var r=function(){var t=arguments,o=e?e.apply(this,t):t[0],i=r.cache;if(i.has(o))return i.get(o);var a=n.apply(this,t);return r.cache=i.set(o,a)||i,a};return r.cache=new(Ba.Cache||Fe),r}function La(n){if("function"!=typeof n)throw new Nn(t);return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}Ba.Cache=Fe;var ja=yo(function(n,t){var e=(t=1==t.length&&Fa(t[0])?Mt(t[0],Ut(li())):Mt(vr(t,1),Ut(li()))).length;return Ur(function(r){for(var o=-1,i=be(r.length,e);++o<i;)r[o]=t[o].call(this,r[o]);return xt(n,this,r)})}),Ta=Ur(function(t,e){var r=ie(e,ai(Ta));return Jo(t,o,n,e,r)}),Oa=Ur(function(t,e){var r=ie(e,ai(Oa));return Jo(t,64,n,e,r)}),Ga=ti(function(t,e){return Jo(t,a,n,n,n,e)});function Pa(n,t){return n===t||n!=n&&t!=t}var Xa=Fo(kr),Za=Fo(function(n,t){return n>=t}),Ha=Nr(function(){return arguments}())?Nr:function(n){return el(n)&&Bn.call(n,"callee")&&!Un.call(n,"callee")},Fa=wn.isArray,Da=gt?Ut(gt):function(n){return el(n)&&Cr(n)==$};function Va(n){return null!=n&&nl(n.length)&&!Ka(n)}function Ua(n){return el(n)&&Va(n)}var Ya=de||bs,Ja=bt?Ut(bt):function(n){return el(n)&&Cr(n)==v};function qa(n){if(!el(n))return!1;var t=Cr(n);return t==g||"[object DOMException]"==t||"string"==typeof n.message&&"string"==typeof n.name&&!il(n)}function Ka(n){if(!tl(n))return!1;var t=Cr(n);return t==b||t==m||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Qa(n){return"number"==typeof n&&n==vl(n)}function nl(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=s}function tl(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function el(n){return null!=n&&"object"==typeof n}var rl=mt?Ut(mt):function(n){return el(n)&&pi(n)==y};function ol(n){return"number"==typeof n||el(n)&&Cr(n)==_}function il(n){if(!el(n)||Cr(n)!=w)return!1;var t=Dn(n);if(null===t)return!0;var e=Bn.call(t,"constructor")&&t.constructor;return"function"==typeof e&&e instanceof e&&Wn.call(e)==On}var al=yt?Ut(yt):function(n){return el(n)&&Cr(n)==C},ll=_t?Ut(_t):function(n){return el(n)&&pi(n)==k};function sl(n){return"string"==typeof n||!Fa(n)&&el(n)&&Cr(n)==I}function ul(n){return"symbol"==typeof n||el(n)&&Cr(n)==A}var cl=wt?Ut(wt):function(n){return el(n)&&nl(n.length)&&!!rt[Cr(n)]},fl=Fo(Lr),dl=Fo(function(n,t){return n<=t});function pl(n){if(!n)return[];if(Va(n))return sl(n)?se(n):$o(n);if(it&&n[it])return function(n){for(var t,e=[];!(t=n.next()).done;)e.push(t.value);return e}(n[it]());var t=pi(n);return(t==y?re:t==k?ae:Pl)(n)}function hl(n){return n?(n=bl(n))===l||n===-1/0?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}function vl(n){var t=hl(n),e=t%1;return t==t?e?t-e:t:0}function gl(n){return n?ir(vl(n),0,c):0}function bl(n){if("number"==typeof n)return n;if(ul(n))return u;if(tl(n)){var t="function"==typeof n.valueOf?n.valueOf():n;n=tl(t)?t+"":t}if("string"!=typeof n)return 0===n?n:+n;n=Vt(n);var e=dn.test(n);return e||hn.test(n)?lt(n.slice(2),e?2:8):fn.test(n)?u:+n}function ml(n){return No(n,Rl(n))}function yl(n){return null==n?"":lo(n)}var _l=zo(function(n,t){if(xi(t)||Va(t))No(t,El(t),n);else for(var e in t)Bn.call(t,e)&&Qe(n,e,t[e])}),wl=zo(function(n,t){No(t,Rl(t),n)}),xl=zo(function(n,t,e,r){No(t,Rl(t),n,r)}),Cl=zo(function(n,t,e,r){No(t,El(t),n,r)}),kl=ti(or),Il=Ur(function(t,e){t=An(t);var r=-1,o=e.length,i=o>2?e[2]:n;for(i&&mi(e[0],e[1],i)&&(o=1);++r<o;)for(var a=e[r],l=Rl(a),s=-1,u=l.length;++s<u;){var c=l[s],f=t[c];(f===n||Pa(f,En[c])&&!Bn.call(t,c))&&(t[c]=a[c])}return t}),Al=Ur(function(t){return t.push(n,Ko),xt(Bl,n,t)});function Sl(t,e,r){var o=null==t?n:wr(t,e);return o===n?r:o}function $l(n,t){return null!=n&&hi(n,t,Ar)}var Nl=Go(function(n,t,e){null!=t&&"function"!=typeof t.toString&&(t=Tn.call(t)),n[t]=e},ts(os)),Ml=Go(function(n,t,e){null!=t&&"function"!=typeof t.toString&&(t=Tn.call(t)),Bn.call(n,t)?n[t].push(e):n[t]=[e]},li),zl=Ur($r);function El(n){return Va(n)?Ue(n):Wr(n)}function Rl(n){return Va(n)?Ue(n,!0):Br(n)}var Wl=zo(function(n,t,e){Gr(n,t,e)}),Bl=zo(function(n,t,e,r){Gr(n,t,e,r)}),Ll=ti(function(n,t){var e={};if(null==n)return e;var r=!1;t=Mt(t,function(t){return t=mo(t,n),r||(r=t.length>1),t}),No(n,ri(n),e),r&&(e=ar(e,7,Qo));for(var o=t.length;o--;)uo(e,t[o]);return e}),jl=ti(function(n,t){return null==n?{}:function(n,t){return Zr(n,t,function(t,e){return $l(n,e)})}(n,t)});function Tl(n,t){if(null==n)return{};var e=Mt(ri(n),function(n){return[n]});return t=li(t),Zr(n,e,function(n,e){return t(n,e[0])})}var Ol=Yo(El),Gl=Yo(Rl);function Pl(n){return null==n?[]:Yt(n,El(n))}var Xl=Bo(function(n,t,e){return t=t.toLowerCase(),n+(e?Zl(t):t)});function Zl(n){return ql(yl(n).toLowerCase())}function Hl(n){return(n=yl(n))&&n.replace(gn,Qt).replace(Jn,"")}var Fl=Bo(function(n,t,e){return n+(e?"-":"")+t.toLowerCase()}),Dl=Bo(function(n,t,e){return n+(e?" ":"")+t.toLowerCase()}),Vl=Wo("toLowerCase"),Ul=Bo(function(n,t,e){return n+(e?"_":"")+t.toLowerCase()}),Yl=Bo(function(n,t,e){return n+(e?" ":"")+ql(t)}),Jl=Bo(function(n,t,e){return n+(e?" ":"")+t.toUpperCase()}),ql=Wo("toUpperCase");function Kl(t,e,r){return t=yl(t),(e=r?n:e)===n?function(n){return nt.test(n)}(t)?function(n){return n.match(Kn)||[]}(t):function(n){return n.match(an)||[]}(t):t.match(e)||[]}var Ql=Ur(function(t,e){try{return xt(t,n,e)}catch(r){return qa(r)?r:new Cn(r)}}),ns=ti(function(n,t){return kt(t,function(t){t=Ti(t),rr(n,t,Ma(n[t],n))}),n});function ts(n){return function(){return n}}var es=To(),rs=To(!0);function os(n){return n}function is(n){return Rr("function"==typeof n?n:ar(n,1))}var as=Ur(function(n,t){return function(e){return $r(e,n,t)}}),ls=Ur(function(n,t){return function(e){return $r(n,e,t)}});function ss(n,t,e){var r=El(t),o=_r(t,r);null!=e||tl(t)&&(o.length||!r.length)||(e=t,t=n,n=this,o=_r(t,El(t)));var i=!(tl(e)&&"chain"in e&&!e.chain),a=Ka(n);return kt(o,function(e){var r=t[e];n[e]=r,a&&(n.prototype[e]=function(){var t=this.__chain__;if(i||t){var e=n(this.__wrapped__);return(e.__actions__=$o(this.__actions__)).push({func:r,args:arguments,thisArg:n}),e.__chain__=t,e}return r.apply(n,zt([this.value()],arguments))})}),n}function us(){}var cs=Xo(Mt),fs=Xo(At),ds=Xo(Wt);function ps(n){return yi(n)?Xt(Ti(n)):function(n){return function(t){return wr(t,n)}}(n)}var hs=Ho(),vs=Ho(!0);function gs(){return[]}function bs(){return!1}var ms,ys=Po(function(n,t){return n+t},0),_s=Vo("ceil"),ws=Po(function(n,t){return n/t},1),xs=Vo("floor"),Cs=Po(function(n,t){return n*t},1),ks=Vo("round"),Is=Po(function(n,t){return n-t},0);return Te.after=function(n,e){if("function"!=typeof e)throw new Nn(t);return n=vl(n),function(){if(--n<1)return e.apply(this,arguments)}},Te.ary=$a,Te.assign=_l,Te.assignIn=wl,Te.assignInWith=xl,Te.assignWith=Cl,Te.at=kl,Te.before=Na,Te.bind=Ma,Te.bindAll=ns,Te.bindKey=za,Te.castArray=function(){if(!arguments.length)return[];var n=arguments[0];return Fa(n)?n:[n]},Te.chain=pa,Te.chunk=function(t,e,r){e=(r?mi(t,e,r):e===n)?1:ge(vl(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var i=0,a=0,l=wn(vt(o/e));i<o;)l[a++]=to(t,i,i+=e);return l},Te.compact=function(n){for(var t=-1,e=null==n?0:n.length,r=0,o=[];++t<e;){var i=n[t];i&&(o[r++]=i)}return o},Te.concat=function(){var n=arguments.length;if(!n)return[];for(var t=wn(n-1),e=arguments[0],r=n;r--;)t[r-1]=arguments[r];return zt(Fa(e)?$o(e):[e],vr(t,1))},Te.cond=function(n){var e=null==n?0:n.length,r=li();return n=e?Mt(n,function(n){if("function"!=typeof n[1])throw new Nn(t);return[r(n[0]),n[1]]}):[],Ur(function(t){for(var r=-1;++r<e;){var o=n[r];if(xt(o[0],this,t))return xt(o[1],this,t)}})},Te.conforms=function(n){return function(n){var t=El(n);return function(e){return lr(e,n,t)}}(ar(n,1))},Te.constant=ts,Te.countBy=ga,Te.create=function(n,t){var e=Oe(n);return null==t?e:er(e,t)},Te.curry=function t(e,r,o){var i=Jo(e,8,n,n,n,n,n,r=o?n:r);return i.placeholder=t.placeholder,i},Te.curryRight=function t(e,r,o){var i=Jo(e,16,n,n,n,n,n,r=o?n:r);return i.placeholder=t.placeholder,i},Te.debounce=Ea,Te.defaults=Il,Te.defaultsDeep=Al,Te.defer=Ra,Te.delay=Wa,Te.difference=Pi,Te.differenceBy=Xi,Te.differenceWith=Zi,Te.drop=function(t,e,r){var o=null==t?0:t.length;return o?to(t,(e=r||e===n?1:vl(e))<0?0:e,o):[]},Te.dropRight=function(t,e,r){var o=null==t?0:t.length;return o?to(t,0,(e=o-(e=r||e===n?1:vl(e)))<0?0:e):[]},Te.dropRightWhile=function(n,t){return n&&n.length?fo(n,li(t,3),!0,!0):[]},Te.dropWhile=function(n,t){return n&&n.length?fo(n,li(t,3),!0):[]},Te.fill=function(t,e,r,o){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&mi(t,e,r)&&(r=0,o=i),function(t,e,r,o){var i=t.length;for((r=vl(r))<0&&(r=-r>i?0:i+r),(o=o===n||o>i?i:vl(o))<0&&(o+=i),o=r>o?0:gl(o);r<o;)t[r++]=e;return t}(t,e,r,o)):[]},Te.filter=function(n,t){return(Fa(n)?St:hr)(n,li(t,3))},Te.flatMap=function(n,t){return vr(ka(n,t),1)},Te.flatMapDeep=function(n,t){return vr(ka(n,t),l)},Te.flatMapDepth=function(t,e,r){return r=r===n?1:vl(r),vr(ka(t,e),r)},Te.flatten=Di,Te.flattenDeep=function(n){return null!=n&&n.length?vr(n,l):[]},Te.flattenDepth=function(t,e){return null!=t&&t.length?vr(t,e=e===n?1:vl(e)):[]},Te.flip=function(n){return Jo(n,512)},Te.flow=es,Te.flowRight=rs,Te.fromPairs=function(n){for(var t=-1,e=null==n?0:n.length,r={};++t<e;){var o=n[t];r[o[0]]=o[1]}return r},Te.functions=function(n){return null==n?[]:_r(n,El(n))},Te.functionsIn=function(n){return null==n?[]:_r(n,Rl(n))},Te.groupBy=wa,Te.initial=function(n){return null!=n&&n.length?to(n,0,-1):[]},Te.intersection=Ui,Te.intersectionBy=Yi,Te.intersectionWith=Ji,Te.invert=Nl,Te.invertBy=Ml,Te.invokeMap=xa,Te.iteratee=is,Te.keyBy=Ca,Te.keys=El,Te.keysIn=Rl,Te.map=ka,Te.mapKeys=function(n,t){var e={};return t=li(t,3),mr(n,function(n,r,o){rr(e,t(n,r,o),n)}),e},Te.mapValues=function(n,t){var e={};return t=li(t,3),mr(n,function(n,r,o){rr(e,r,t(n,r,o))}),e},Te.matches=function(n){return Tr(ar(n,1))},Te.matchesProperty=function(n,t){return Or(n,ar(t,1))},Te.memoize=Ba,Te.merge=Wl,Te.mergeWith=Bl,Te.method=as,Te.methodOf=ls,Te.mixin=ss,Te.negate=La,Te.nthArg=function(n){return n=vl(n),Ur(function(t){return Pr(t,n)})},Te.omit=Ll,Te.omitBy=function(n,t){return Tl(n,La(li(t)))},Te.once=function(n){return Na(2,n)},Te.orderBy=function(t,e,r,o){return null==t?[]:(Fa(e)||(e=null==e?[]:[e]),Fa(r=o?n:r)||(r=null==r?[]:[r]),Xr(t,e,r))},Te.over=cs,Te.overArgs=ja,Te.overEvery=fs,Te.overSome=ds,Te.partial=Ta,Te.partialRight=Oa,Te.partition=Ia,Te.pick=jl,Te.pickBy=Tl,Te.property=ps,Te.propertyOf=function(t){return function(e){return null==t?n:wr(t,e)}},Te.pull=Ki,Te.pullAll=Qi,Te.pullAllBy=function(n,t,e){return n&&n.length&&t&&t.length?Hr(n,t,li(e,2)):n},Te.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?Hr(t,e,n,r):t},Te.pullAt=na,Te.range=hs,Te.rangeRight=vs,Te.rearg=Ga,Te.reject=function(n,t){return(Fa(n)?St:hr)(n,La(li(t,3)))},Te.remove=function(n,t){var e=[];if(!n||!n.length)return e;var r=-1,o=[],i=n.length;for(t=li(t,3);++r<i;){var a=n[r];t(a,r,n)&&(e.push(a),o.push(r))}return Fr(n,o),e},Te.rest=function(e,r){if("function"!=typeof e)throw new Nn(t);return Ur(e,r=r===n?r:vl(r))},Te.reverse=ta,Te.sampleSize=function(t,e,r){return e=(r?mi(t,e,r):e===n)?1:vl(e),(Fa(t)?Je:Jr)(t,e)},Te.set=function(n,t,e){return null==n?n:qr(n,t,e)},Te.setWith=function(t,e,r,o){return o="function"==typeof o?o:n,null==t?t:qr(t,e,r,o)},Te.shuffle=function(n){return(Fa(n)?qe:no)(n)},Te.slice=function(t,e,r){var o=null==t?0:t.length;return o?(r&&"number"!=typeof r&&mi(t,e,r)?(e=0,r=o):(e=null==e?0:vl(e),r=r===n?o:vl(r)),to(t,e,r)):[]},Te.sortBy=Aa,Te.sortedUniq=function(n){return n&&n.length?io(n):[]},Te.sortedUniqBy=function(n,t){return n&&n.length?io(n,li(t,2)):[]},Te.split=function(t,e,r){return r&&"number"!=typeof r&&mi(t,e,r)&&(e=r=n),(r=r===n?c:r>>>0)?(t=yl(t))&&("string"==typeof e||null!=e&&!al(e))&&!(e=lo(e))&&ee(t)?_o(se(t),0,r):t.split(e,r):[]},Te.spread=function(n,e){if("function"!=typeof n)throw new Nn(t);return e=null==e?0:ge(vl(e),0),Ur(function(t){var r=t[e],o=_o(t,0,e);return r&&zt(o,r),xt(n,this,o)})},Te.tail=function(n){var t=null==n?0:n.length;return t?to(n,1,t):[]},Te.take=function(t,e,r){return t&&t.length?to(t,0,(e=r||e===n?1:vl(e))<0?0:e):[]},Te.takeRight=function(t,e,r){var o=null==t?0:t.length;return o?to(t,(e=o-(e=r||e===n?1:vl(e)))<0?0:e,o):[]},Te.takeRightWhile=function(n,t){return n&&n.length?fo(n,li(t,3),!1,!0):[]},Te.takeWhile=function(n,t){return n&&n.length?fo(n,li(t,3)):[]},Te.tap=function(n,t){return t(n),n},Te.throttle=function(n,e,r){var o=!0,i=!0;if("function"!=typeof n)throw new Nn(t);return tl(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),Ea(n,e,{leading:o,maxWait:e,trailing:i})},Te.thru=ha,Te.toArray=pl,Te.toPairs=Ol,Te.toPairsIn=Gl,Te.toPath=function(n){return Fa(n)?Mt(n,Ti):ul(n)?[n]:$o(ji(yl(n)))},Te.toPlainObject=ml,Te.transform=function(n,t,e){var r=Fa(n),o=r||Ya(n)||cl(n);if(t=li(t,4),null==e){var i=n&&n.constructor;e=o?r?new i:[]:tl(n)&&Ka(i)?Oe(Dn(n)):{}}return(o?kt:mr)(n,function(n,r,o){return t(e,n,r,o)}),e},Te.unary=function(n){return $a(n,1)},Te.union=ea,Te.unionBy=ra,Te.unionWith=oa,Te.uniq=function(n){return n&&n.length?so(n):[]},Te.uniqBy=function(n,t){return n&&n.length?so(n,li(t,2)):[]},Te.uniqWith=function(t,e){return e="function"==typeof e?e:n,t&&t.length?so(t,n,e):[]},Te.unset=function(n,t){return null==n||uo(n,t)},Te.unzip=ia,Te.unzipWith=aa,Te.update=function(n,t,e){return null==n?n:co(n,t,bo(e))},Te.updateWith=function(t,e,r,o){return o="function"==typeof o?o:n,null==t?t:co(t,e,bo(r),o)},Te.values=Pl,Te.valuesIn=function(n){return null==n?[]:Yt(n,Rl(n))},Te.without=la,Te.words=Kl,Te.wrap=function(n,t){return Ta(bo(t),n)},Te.xor=sa,Te.xorBy=ua,Te.xorWith=ca,Te.zip=fa,Te.zipObject=function(n,t){return vo(n||[],t||[],Qe)},Te.zipObjectDeep=function(n,t){return vo(n||[],t||[],qr)},Te.zipWith=da,Te.entries=Ol,Te.entriesIn=Gl,Te.extend=wl,Te.extendWith=xl,ss(Te,Te),Te.add=ys,Te.attempt=Ql,Te.camelCase=Xl,Te.capitalize=Zl,Te.ceil=_s,Te.clamp=function(t,e,r){return r===n&&(r=e,e=n),r!==n&&(r=(r=bl(r))==r?r:0),e!==n&&(e=(e=bl(e))==e?e:0),ir(bl(t),e,r)},Te.clone=function(n){return ar(n,4)},Te.cloneDeep=function(n){return ar(n,5)},Te.cloneDeepWith=function(t,e){return ar(t,5,e="function"==typeof e?e:n)},Te.cloneWith=function(t,e){return ar(t,4,e="function"==typeof e?e:n)},Te.conformsTo=function(n,t){return null==t||lr(n,t,El(t))},Te.deburr=Hl,Te.defaultTo=function(n,t){return null==n||n!=n?t:n},Te.divide=ws,Te.endsWith=function(t,e,r){t=yl(t),e=lo(e);var o=t.length,i=r=r===n?o:ir(vl(r),0,o);return(r-=e.length)>=0&&t.slice(r,i)==e},Te.eq=Pa,Te.escape=function(n){return(n=yl(n))&&F.test(n)?n.replace(Z,ne):n},Te.escapeRegExp=function(n){return(n=yl(n))&&Q.test(n)?n.replace(K,"\\$&"):n},Te.every=function(t,e,r){var o=Fa(t)?At:dr;return r&&mi(t,e,r)&&(e=n),o(t,li(e,3))},Te.find=ba,Te.findIndex=Hi,Te.findKey=function(n,t){return Lt(n,li(t,3),mr)},Te.findLast=ma,Te.findLastIndex=Fi,Te.findLastKey=function(n,t){return Lt(n,li(t,3),yr)},Te.floor=xs,Te.forEach=ya,Te.forEachRight=_a,Te.forIn=function(n,t){return null==n?n:gr(n,li(t,3),Rl)},Te.forInRight=function(n,t){return null==n?n:br(n,li(t,3),Rl)},Te.forOwn=function(n,t){return n&&mr(n,li(t,3))},Te.forOwnRight=function(n,t){return n&&yr(n,li(t,3))},Te.get=Sl,Te.gt=Xa,Te.gte=Za,Te.has=function(n,t){return null!=n&&hi(n,t,Ir)},Te.hasIn=$l,Te.head=Vi,Te.identity=os,Te.includes=function(n,t,e,r){n=Va(n)?n:Pl(n),e=e&&!r?vl(e):0;var o=n.length;return e<0&&(e=ge(o+e,0)),sl(n)?e<=o&&n.indexOf(t,e)>-1:!!o&&Tt(n,t,e)>-1},Te.indexOf=function(n,t,e){var r=null==n?0:n.length;if(!r)return-1;var o=null==e?0:vl(e);return o<0&&(o=ge(r+o,0)),Tt(n,t,o)},Te.inRange=function(t,e,r){return e=hl(e),r===n?(r=e,e=0):r=hl(r),function(n,t,e){return n>=be(t,e)&&n<ge(t,e)}(t=bl(t),e,r)},Te.invoke=zl,Te.isArguments=Ha,Te.isArray=Fa,Te.isArrayBuffer=Da,Te.isArrayLike=Va,Te.isArrayLikeObject=Ua,Te.isBoolean=function(n){return!0===n||!1===n||el(n)&&Cr(n)==h},Te.isBuffer=Ya,Te.isDate=Ja,Te.isElement=function(n){return el(n)&&1===n.nodeType&&!il(n)},Te.isEmpty=function(n){if(null==n)return!0;if(Va(n)&&(Fa(n)||"string"==typeof n||"function"==typeof n.splice||Ya(n)||cl(n)||Ha(n)))return!n.length;var t=pi(n);if(t==y||t==k)return!n.size;if(xi(n))return!Wr(n).length;for(var e in n)if(Bn.call(n,e))return!1;return!0},Te.isEqual=function(n,t){return Mr(n,t)},Te.isEqualWith=function(t,e,r){var o=(r="function"==typeof r?r:n)?r(t,e):n;return o===n?Mr(t,e,n,r):!!o},Te.isError=qa,Te.isFinite=function(n){return"number"==typeof n&&pe(n)},Te.isFunction=Ka,Te.isInteger=Qa,Te.isLength=nl,Te.isMap=rl,Te.isMatch=function(n,t){return n===t||zr(n,t,ui(t))},Te.isMatchWith=function(t,e,r){return r="function"==typeof r?r:n,zr(t,e,ui(e),r)},Te.isNaN=function(n){return ol(n)&&n!=+n},Te.isNative=function(n){if(wi(n))throw new Cn("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Er(n)},Te.isNil=function(n){return null==n},Te.isNull=function(n){return null===n},Te.isNumber=ol,Te.isObject=tl,Te.isObjectLike=el,Te.isPlainObject=il,Te.isRegExp=al,Te.isSafeInteger=function(n){return Qa(n)&&n>=-9007199254740991&&n<=s},Te.isSet=ll,Te.isString=sl,Te.isSymbol=ul,Te.isTypedArray=cl,Te.isUndefined=function(t){return t===n},Te.isWeakMap=function(n){return el(n)&&pi(n)==S},Te.isWeakSet=function(n){return el(n)&&"[object WeakSet]"==Cr(n)},Te.join=function(n,t){return null==n?"":he.call(n,t)},Te.kebabCase=Fl,Te.last=qi,Te.lastIndexOf=function(t,e,r){var o=null==t?0:t.length;if(!o)return-1;var i=o;return r!==n&&(i=(i=vl(r))<0?ge(o+i,0):be(i,o-1)),e==e?function(n,t,e){for(var r=e+1;r--;)if(n[r]===t)return r;return r}(t,e,i):jt(t,Gt,i,!0)},Te.lowerCase=Dl,Te.lowerFirst=Vl,Te.lt=fl,Te.lte=dl,Te.max=function(t){return t&&t.length?pr(t,os,kr):n},Te.maxBy=function(t,e){return t&&t.length?pr(t,li(e,2),kr):n},Te.mean=function(n){return Pt(n,os)},Te.meanBy=function(n,t){return Pt(n,li(t,2))},Te.min=function(t){return t&&t.length?pr(t,os,Lr):n},Te.minBy=function(t,e){return t&&t.length?pr(t,li(e,2),Lr):n},Te.stubArray=gs,Te.stubFalse=bs,Te.stubObject=function(){return{}},Te.stubString=function(){return""},Te.stubTrue=function(){return!0},Te.multiply=Cs,Te.nth=function(t,e){return t&&t.length?Pr(t,vl(e)):n},Te.noConflict=function(){return ct._===this&&(ct._=Gn),this},Te.noop=us,Te.now=Sa,Te.pad=function(n,t,e){n=yl(n);var r=(t=vl(t))?le(n):0;if(!t||r>=t)return n;var o=(t-r)/2;return Zo(Bt(o),e)+n+Zo(vt(o),e)},Te.padEnd=function(n,t,e){n=yl(n);var r=(t=vl(t))?le(n):0;return t&&r<t?n+Zo(t-r,e):n},Te.padStart=function(n,t,e){n=yl(n);var r=(t=vl(t))?le(n):0;return t&&r<t?Zo(t-r,e)+n:n},Te.parseInt=function(n,t,e){return e||null==t?t=0:t&&(t=+t),ye(yl(n).replace(nn,""),t||0)},Te.random=function(t,e,r){if(r&&"boolean"!=typeof r&&mi(t,e,r)&&(e=r=n),r===n&&("boolean"==typeof e?(r=e,e=n):"boolean"==typeof t&&(r=t,t=n)),t===n&&e===n?(t=0,e=1):(t=hl(t),e===n?(e=t,t=0):e=hl(e)),t>e){var o=t;t=e,e=o}if(r||t%1||e%1){var i=_e();return be(t+i*(e-t+at("1e-"+((i+"").length-1))),e)}return Dr(t,e)},Te.reduce=function(n,t,e){var r=Fa(n)?Et:Ht,o=arguments.length<3;return r(n,li(t,4),e,o,cr)},Te.reduceRight=function(n,t,e){var r=Fa(n)?Rt:Ht,o=arguments.length<3;return r(n,li(t,4),e,o,fr)},Te.repeat=function(t,e,r){return e=(r?mi(t,e,r):e===n)?1:vl(e),Vr(yl(t),e)},Te.replace=function(){var n=arguments,t=yl(n[0]);return n.length<3?t:t.replace(n[1],n[2])},Te.result=function(t,e,r){var o=-1,i=(e=mo(e,t)).length;for(i||(i=1,t=n);++o<i;){var a=null==t?n:t[Ti(e[o])];a===n&&(o=i,a=r),t=Ka(a)?a.call(t):a}return t},Te.round=ks,Te.runInContext=tn,Te.sample=function(n){return(Fa(n)?Ye:Yr)(n)},Te.size=function(n){if(null==n)return 0;if(Va(n))return sl(n)?le(n):n.length;var t=pi(n);return t==y||t==k?n.size:Wr(n).length},Te.snakeCase=Ul,Te.some=function(t,e,r){var o=Fa(t)?Wt:eo;return r&&mi(t,e,r)&&(e=n),o(t,li(e,3))},Te.sortedIndex=function(n,t){return ro(n,t)},Te.sortedIndexBy=function(n,t,e){return oo(n,t,li(e,2))},Te.sortedIndexOf=function(n,t){var e=null==n?0:n.length;if(e){var r=ro(n,t);if(r<e&&Pa(n[r],t))return r}return-1},Te.sortedLastIndex=function(n,t){return ro(n,t,!0)},Te.sortedLastIndexBy=function(n,t,e){return oo(n,t,li(e,2),!0)},Te.sortedLastIndexOf=function(n,t){if(null!=n&&n.length){var e=ro(n,t,!0)-1;if(Pa(n[e],t))return e}return-1},Te.startCase=Yl,Te.startsWith=function(n,t,e){return n=yl(n),e=null==e?0:ir(vl(e),0,n.length),t=lo(t),n.slice(e,e+t.length)==t},Te.subtract=Is,Te.sum=function(n){return n&&n.length?Ft(n,os):0},Te.sumBy=function(n,t){return n&&n.length?Ft(n,li(t,2)):0},Te.template=function(t,e,r){var o=Te.templateSettings;r&&mi(t,e,r)&&(e=n),t=yl(t),e=xl({},e,o,qo);var i,a,l=xl({},e.imports,o.imports,qo),s=El(l),u=Yt(l,s),c=0,f=e.interpolate||bn,d="__p += '",p=Sn((e.escape||bn).source+"|"+f.source+"|"+(f===U?un:bn).source+"|"+(e.evaluate||bn).source+"|$","g"),h="//# sourceURL="+(Bn.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++et+"]")+"\n";t.replace(p,function(n,e,r,o,l,s){return r||(r=o),d+=t.slice(c,s).replace(mn,te),e&&(i=!0,d+="' +\n__e("+e+") +\n'"),l&&(a=!0,d+="';\n"+l+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=s+n.length,n}),d+="';\n";var v=Bn.call(e,"variable")&&e.variable;if(v){if(ln.test(v))throw new Cn("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(O,""):d).replace(G,"$1").replace(P,"$1;"),d="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=Ql(function(){return kn(s,h+"return "+d).apply(n,u)});if(g.source=d,qa(g))throw g;return g},Te.times=function(n,t){if((n=vl(n))<1||n>s)return[];var e=c,r=be(n,c);t=li(t),n-=c;for(var o=Dt(r,t);++e<n;)t(e);return o},Te.toFinite=hl,Te.toInteger=vl,Te.toLength=gl,Te.toLower=function(n){return yl(n).toLowerCase()},Te.toNumber=bl,Te.toSafeInteger=function(n){return n?ir(vl(n),-9007199254740991,s):0===n?n:0},Te.toString=yl,Te.toUpper=function(n){return yl(n).toUpperCase()},Te.trim=function(t,e,r){if((t=yl(t))&&(r||e===n))return Vt(t);if(!t||!(e=lo(e)))return t;var o=se(t),i=se(e);return _o(o,qt(o,i),Kt(o,i)+1).join("")},Te.trimEnd=function(t,e,r){if((t=yl(t))&&(r||e===n))return t.slice(0,ue(t)+1);if(!t||!(e=lo(e)))return t;var o=se(t);return _o(o,0,Kt(o,se(e))+1).join("")},Te.trimStart=function(t,e,r){if((t=yl(t))&&(r||e===n))return t.replace(nn,"");if(!t||!(e=lo(e)))return t;var o=se(t);return _o(o,qt(o,se(e))).join("")},Te.truncate=function(t,e){var r=30,o="...";if(tl(e)){var i="separator"in e?e.separator:i;r="length"in e?vl(e.length):r,o="omission"in e?lo(e.omission):o}var a=(t=yl(t)).length;if(ee(t)){var l=se(t);a=l.length}if(r>=a)return t;var s=r-le(o);if(s<1)return o;var u=l?_o(l,0,s).join(""):t.slice(0,s);if(i===n)return u+o;if(l&&(s+=u.length-s),al(i)){if(t.slice(s).search(i)){var c,f=u;for(i.global||(i=Sn(i.source,yl(cn.exec(i))+"g")),i.lastIndex=0;c=i.exec(f);)var d=c.index;u=u.slice(0,d===n?s:d)}}else if(t.indexOf(lo(i),s)!=s){var p=u.lastIndexOf(i);p>-1&&(u=u.slice(0,p))}return u+o},Te.unescape=function(n){return(n=yl(n))&&H.test(n)?n.replace(X,ce):n},Te.uniqueId=function(n){var t=++Ln;return yl(n)+t},Te.upperCase=Jl,Te.upperFirst=ql,Te.each=ya,Te.eachRight=_a,Te.first=Vi,ss(Te,(ms={},mr(Te,function(n,t){Bn.call(Te.prototype,t)||(ms[t]=n)}),ms),{chain:!1}),Te.VERSION="4.17.21",kt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){Te[n].placeholder=Te}),kt(["drop","take"],function(t,e){Xe.prototype[t]=function(r){r=r===n?1:ge(vl(r),0);var o=this.__filtered__&&!e?new Xe(this):this.clone();return o.__filtered__?o.__takeCount__=be(r,o.__takeCount__):o.__views__.push({size:be(r,c),type:t+(o.__dir__<0?"Right":"")}),o},Xe.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}}),kt(["filter","map","takeWhile"],function(n,t){var e=t+1,r=1==e||3==e;Xe.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:li(n,3),type:e}),t.__filtered__=t.__filtered__||r,t}}),kt(["head","last"],function(n,t){var e="take"+(t?"Right":"");Xe.prototype[n]=function(){return this[e](1).value()[0]}}),kt(["initial","tail"],function(n,t){var e="drop"+(t?"":"Right");Xe.prototype[n]=function(){return this.__filtered__?new Xe(this):this[e](1)}}),Xe.prototype.compact=function(){return this.filter(os)},Xe.prototype.find=function(n){return this.filter(n).head()},Xe.prototype.findLast=function(n){return this.reverse().find(n)},Xe.prototype.invokeMap=Ur(function(n,t){return"function"==typeof n?new Xe(this):this.map(function(e){return $r(e,n,t)})}),Xe.prototype.reject=function(n){return this.filter(La(li(n)))},Xe.prototype.slice=function(t,e){t=vl(t);var r=this;return r.__filtered__&&(t>0||e<0)?new Xe(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==n&&(r=(e=vl(e))<0?r.dropRight(-e):r.take(e-t)),r)},Xe.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Xe.prototype.toArray=function(){return this.take(c)},mr(Xe.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),i=Te[o?"take"+("last"==e?"Right":""):e],a=o||/^find/.test(e);i&&(Te.prototype[e]=function(){var e=this.__wrapped__,l=o?[1]:arguments,s=e instanceof Xe,u=l[0],c=s||Fa(e),f=function(n){var t=i.apply(Te,zt([n],l));return o&&d?t[0]:t};c&&r&&"function"==typeof u&&1!=u.length&&(s=c=!1);var d=this.__chain__,p=!!this.__actions__.length,h=a&&!d,v=s&&!p;if(!a&&c){e=v?e:new Xe(this);var g=t.apply(e,l);return g.__actions__.push({func:ha,args:[f],thisArg:n}),new Pe(g,d)}return h&&v?t.apply(this,l):(g=this.thru(f),h?o?g.value()[0]:g.value():g)})}),kt(["pop","push","shift","sort","splice","unshift"],function(n){var t=Mn[n],e=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",r=/^(?:pop|shift)$/.test(n);Te.prototype[n]=function(){var n=arguments;if(r&&!this.__chain__){var o=this.value();return t.apply(Fa(o)?o:[],n)}return this[e](function(e){return t.apply(Fa(e)?e:[],n)})}}),mr(Xe.prototype,function(n,t){var e=Te[t];if(e){var r=e.name+"";Bn.call(Ne,r)||(Ne[r]=[]),Ne[r].push({name:t,func:e})}}),Ne[Oo(n,2).name]=[{name:"wrapper",func:n}],Xe.prototype.clone=function(){var n=new Xe(this.__wrapped__);return n.__actions__=$o(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=$o(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=$o(this.__views__),n},Xe.prototype.reverse=function(){if(this.__filtered__){var n=new Xe(this);n.__dir__=-1,n.__filtered__=!0}else(n=this.clone()).__dir__*=-1;return n},Xe.prototype.value=function(){var n=this.__wrapped__.value(),t=this.__dir__,e=Fa(n),r=t<0,o=e?n.length:0,i=function(n,t,e){for(var r=-1,o=e.length;++r<o;){var i=e[r],a=i.size;switch(i.type){case"drop":n+=a;break;case"dropRight":t-=a;break;case"take":t=be(t,n+a);break;case"takeRight":n=ge(n,t-a)}}return{start:n,end:t}}(0,o,this.__views__),a=i.start,l=i.end,s=l-a,u=r?l:a-1,c=this.__iteratees__,f=c.length,d=0,p=be(s,this.__takeCount__);if(!e||!r&&o==s&&p==s)return po(n,this.__actions__);var h=[];n:for(;s--&&d<p;){for(var v=-1,g=n[u+=t];++v<f;){var b=c[v],m=b.iteratee,y=b.type,_=m(g);if(2==y)g=_;else if(!_){if(1==y)continue n;break n}}h[d++]=g}return h},Te.prototype.at=va,Te.prototype.chain=function(){return pa(this)},Te.prototype.commit=function(){return new Pe(this.value(),this.__chain__)},Te.prototype.next=function(){this.__values__===n&&(this.__values__=pl(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?n:this.__values__[this.__index__++]}},Te.prototype.plant=function(t){for(var e,r=this;r instanceof Ge;){var o=Gi(r);o.__index__=0,o.__values__=n,e?i.__wrapped__=o:e=o;var i=o;r=r.__wrapped__}return i.__wrapped__=t,e},Te.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Xe){var e=t;return this.__actions__.length&&(e=new Xe(this)),(e=e.reverse()).__actions__.push({func:ha,args:[ta],thisArg:n}),new Pe(e,this.__chain__)}return this.thru(ta)},Te.prototype.toJSON=Te.prototype.valueOf=Te.prototype.value=function(){return po(this.__wrapped__,this.__actions__)},Te.prototype.first=Te.prototype.head,it&&(Te.prototype[it]=function(){return this}),Te}();dt?((dt.exports=fe)._=fe,ft._=fe):ct._=fe}.call(Di.exports)),Di.exports);const Ji={chatScreen:{root:{cssClass:["div.default-chat-screen"],className:"default-chat-screen"},displayContainer:{cssClass:["div.default-chat-screen > div.flex.flex-col-reverse"],className:`${yi}-display-container`},inputContainer:{cssClass:["div.default-chat-screen > div.mt-2.mb-2.flex.items-stretch.w-full","div.default-chat-screen > div.sticky.pt-2.pb-2.right-0.bottom-0.bg-bgcolor.flex.items-stretch.w-full"],className:`${yi}-input-container`},textarea:{cssClass:["div.default-chat-screen > div.mt-2.mb-2.flex.items-stretch.w-full > textarea"],className:`${yi}-input-textarea`},sendButton:{cssClass:["div.default-chat-screen > button.button-icon-send",".button-icon-send"],className:`${yi}-send-button`},burgerButton:{cssClass:["div.default-chat-screen > button.peer-focus:border-textcolor.mr-2.flex.border-y.border-r.border-darkborderc.justify-center.items-center.text-gray-100.p-3.rounded-r-md.hover:bg-blue-500.transition-colors",`${yi}-burger-button`]},burgerMenu:{cssClass:["div.default-chat-screen > div.right-2.bottom-16.p-5.bg-darkbg.flex.flex-col.gap-3.text-textcolor.rounded-md"],className:"burger-menu"}},chatMessage:{root:{cssClass:["div.risu-chat"],className:`${yi}-chat-message-root`},thumbnail:{cssClass:["div.shadow-lg.bg-textcolor2.rounded-md"],className:`${yi}-chat-message-thumbnail`},botName:{cssClass:["span.chat-width.text-xl.unmargin.text-textcolor"],className:`${yi}-chat-message-bot-name`},botButtonDiv:{cssClass:["div.flex-grow.flex.items-center.justify-end.text-textcolor2"],className:`${yi}-chat-message-bot-buttons`},copyButton:{cssClass:["button-icon-copy"],className:"button-icon-copy"},ttsButton:{cssClass:["button-icon-tts"],className:"button-icon-tts"},removeButton:{cssClass:["button-icon-remove"],className:"button-icon-remove"},translateButton:{cssClass:["button-icon-translate"],className:"button-icon-translate"},unrerollButton:{cssClass:["button-icon-unreroll"],className:"button-icon-unreroll"},rerollButton:{cssClass:["button-icon-reroll"],className:"button-icon-reroll"},lightboardButtons:{cssClass:["x-risu-lb-module-root","x-risu-lb-nai-btn"],className:"x-risu-lb-module-root"},lightboardNewsButton:{dataId:"lightboard-news",cssClass:["div.x-risu-lb-module-root"],className:`${yi}-lightboard-news`},lightboardCommentButton:{dataId:"lightboard-comment",cssClass:["div.x-risu-lb-module-root"],className:`${yi}-lightboard-comment`},lightboardMiniboardButton:{dataId:"lightboard-miniboard",cssClass:["div.x-risu-lb-module-root"],className:`${yi}-lightboard-miniboard`},lightboardSNSButton:{dataId:"SNS-Forme",cssClass:["div.x-risu-lb-module-root"],className:`${yi}-lightboard-sns`},lightboardNAIButton:{cssClass:["x-risu-lb-nai-btn"],className:"x-risu-lb-nai-btn"}}};function qi(n,t){const e=t??document;if(!n)return null;if(n.dataId){const t=e.querySelector(`[data-id="${n.dataId}"]`);if(t)return t.classList.contains(n.className)||(t.className=`${n.className} ${t.className}`.trim()),t}for(const r of[null==n?void 0:n.className,...(null==n?void 0:n.cssClass)??[]])if(r)try{const t=e.querySelector(r.startsWith(".")?r:`.${r}`);if(t)return t.classList.contains(n.className)||(t.className=`${n.className} ${t.className}`.trim()),t}catch{}for(const r of(null==n?void 0:n.cssClass)??[])try{const t=e.querySelector(r);if(t)return t.classList.contains(n.className)||(t.className=`${n.className} ${t.className}`.trim()),t}catch{}return null}function Ki(n,t){const e=document;if(!n)return[];const r=new Set;if(n.dataId)try{e.querySelectorAll(`[data-id="${n.dataId}"]`).forEach(n=>r.add(n))}catch{}for(const i of(null==n?void 0:n.cssClass)??[])try{e.querySelectorAll(i).forEach(n=>r.add(n))}catch{}if(null==n?void 0:n.className)try{e.querySelectorAll(`.${n.className}`).forEach(n=>r.add(n))}catch{}const o=[...r];return o.forEach(t=>{n.className&&!t.classList.contains(n.className)&&(t.className=`${n.className} ${t.className}`.trim())}),o}function Qi(n){if(null==n)return null;const t=Ki(Ji.chatMessage.root);if(!t.length)return null;const e="string"==typeof n?parseInt(n,10):n;if(!Number.isFinite(e))return null;const r=String(e);return t.find(n=>{var t;return(null==(t=n.dataset)?void 0:t.chatIndex)===r})??null}function na(){const n=Ki(Ji.chatMessage.root);if(!n.length)return[];const t=n.filter(n=>!n.classList.contains("book-viewer-root")).map(n=>{var t;const e=null==(t=n.dataset)?void 0:t.chatIndex;if(null==e)return null;const r=parseInt(e,10);return Number.isFinite(r)?r:null}).filter(n=>null!==n);return[...new Set(t)].sort((n,t)=>n-t)}function ta(n,t){const e=na();if(0===e.length)return{index:null,isFirst:!0,isLast:!0};let r=e.indexOf(n);if(-1===r){if(r=e.findIndex(t=>t>n),-1===r&&(r=e.length),"prev"===t){const n=r>0?e[r-1]:null;return{index:n,isFirst:null===n,isLast:r>=e.length}}{const n=r<e.length?e[r]:null;return{index:n,isFirst:r<=0,isLast:null===n}}}const o=0===r,i=r===e.length-1;return"prev"===t?{index:o?null:e[r-1],isFirst:o,isLast:i}:{index:i?null:e[r+1],isFirst:o,isLast:i}}Un=!0;const ea={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};oa[Xn]="node_modules/lucide-svelte/dist/Icon.svelte";var ra=Or(no("<svg><!><!></svg>"),oa[Xn],[[14,0]]);function oa(n,t){co(new.target);const e=di(t,["children","$$slots","$$events","$$legacy"]),r=di(e,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);ut(t,!1,oa);let o=vi(t,"name",8,void 0),i=vi(t,"color",8,"currentColor"),a=vi(t,"size",8,24),l=vi(t,"strokeWidth",8,2),s=vi(t,"absoluteStrokeWidth",8,!1),u=vi(t,"iconNode",24,()=>[]);var c={...fo()};si();var f=ra();ni(f,(n,t)=>({...ea,...r,width:a(),height:a(),stroke:i(),"stroke-width":n,class:t}),[()=>(Nr(s()),Nr(l()),Nr(a()),Ar(()=>s()?24*Number(l())/Number(a()):l())),()=>(Nr(o()),Nr(e),Ar(()=>((...n)=>n.filter((n,t,e)=>Boolean(n)&&he(e.indexOf(n),t)).join(" "))("lucide-icon","lucide",o()?`lucide-${o()}`:"",e.class)))]);var d=Ce(f);return at(()=>mo(d,1,u,vo,(n,t)=>{var e=Zt(()=>function(n,t){if(Array.isArray(n))return n;if(!(Symbol.iterator in n))return Array.from(n);const e=[];for(const r of n)if(e.push(r),e.length===t)break;return e}(Cr(t),2));let r=()=>Cr(e)[0];r();let o=()=>Cr(e)[1];o();var i=to(),a=ke(i);Co(r),function(n,t,e,r,o,i){var a=i&&(null==et?void 0:et.function[Xn]),l=null,s=new po(n,!1);Oe(()=>{const n=t()||null;return null===n?(s.ensure(null,null),void oo(!0)):(s.ensure(n,t=>{if(n){if(l=document.createElementNS("http://www.w3.org/2000/svg",n),i&&(l.__svelte_meta={parent:ot,loc:{file:a,line:i[0],column:i[1]}}),qr(l,l),r){var e=l.appendChild(_e());r(l,e)}or.nodes.end=l,t.before(l)}}),oo(!0),()=>{n&&oo(!1)})},In),Re(()=>{oo(!0)})}(a,r,0,(n,t)=>{ni(n,()=>({...o()}))},0,[35,4]),eo(n,i)}),"each",oa,34,2),xo(Ie(d),t,"default",{}),eo(n,f),ct(c)}function ia(n,t){co(new.target);const e=di(t,["children","$$slots","$$events","$$legacy"]);ut(t,!1,ia);const r=[["path",{d:"M12 7v14"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"}]];var o={...fo()};return at(()=>oa(n,hi({name:"book-open"},()=>e,{get iconNode(){return r},children:Io(ia,(n,e)=>{var r=to();xo(ke(r),t,"default",{}),eo(n,r)}),$$slots:{default:!0}})),"component",ia,22,0,{componentTag:"Icon"}),ct(o)}function aa(n,t){co(new.target);const e=di(t,["children","$$slots","$$events","$$legacy"]);ut(t,!1,aa);const r=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}]];var o={...fo()};return at(()=>oa(n,hi({name:"book"},()=>e,{get iconNode(){return r},children:Io(aa,(n,e)=>{var r=to();xo(ke(r),t,"default",{}),eo(n,r)}),$$slots:{default:!0}})),"component",aa,22,0,{componentTag:"Icon"}),ct(o)}function la(n,t){co(new.target);const e=di(t,["children","$$slots","$$events","$$legacy"]);ut(t,!1,la);const r=[["path",{d:"m15 18-6-6 6-6"}]];var o={...fo()};return at(()=>oa(n,hi({name:"chevron-left"},()=>e,{get iconNode(){return r},children:Io(la,(n,e)=>{var r=to();xo(ke(r),t,"default",{}),eo(n,r)}),$$slots:{default:!0}})),"component",la,22,0,{componentTag:"Icon"}),ct(o)}function sa(n,t){co(new.target);const e=di(t,["children","$$slots","$$events","$$legacy"]);ut(t,!1,sa);const r=[["path",{d:"m9 18 6-6-6-6"}]];var o={...fo()};return at(()=>oa(n,hi({name:"chevron-right"},()=>e,{get iconNode(){return r},children:Io(sa,(n,e)=>{var r=to();xo(ke(r),t,"default",{}),eo(n,r)}),$$slots:{default:!0}})),"component",sa,22,0,{componentTag:"Icon"}),ct(o)}function ua(n,t){co(new.target);const e=di(t,["children","$$slots","$$events","$$legacy"]);ut(t,!1,ua);const r=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"}]];var o={...fo()};return at(()=>oa(n,hi({name:"layers"},()=>e,{get iconNode(){return r},children:Io(ua,(n,e)=>{var r=to();xo(ke(r),t,"default",{}),eo(n,r)}),$$slots:{default:!0}})),"component",ua,22,0,{componentTag:"Icon"}),ct(o)}function ca(n,t){co(new.target);const e=di(t,["children","$$slots","$$events","$$legacy"]);ut(t,!1,ca);const r=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]];var o={...fo()};return at(()=>oa(n,hi({name:"settings"},()=>e,{get iconNode(){return r},children:Io(ca,(n,e)=>{var r=to();xo(ke(r),t,"default",{}),eo(n,r)}),$$slots:{default:!0}})),"component",ca,22,0,{componentTag:"Icon"}),ct(o)}function fa(n,t){co(new.target);const e=di(t,["children","$$slots","$$events","$$legacy"]);ut(t,!1,fa);const r=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];var o={...fo()};return at(()=>oa(n,hi({name:"x"},()=>e,{get iconNode(){return r},children:Io(fa,(n,e)=>{var r=to();xo(ke(r),t,"default",{}),eo(n,r)}),$$slots:{default:!0}})),"component",fa,22,0,{componentTag:"Icon"}),ct(o)}ia[Xn]="node_modules/lucide-svelte/dist/icons/book-open.svelte",aa[Xn]="node_modules/lucide-svelte/dist/icons/book.svelte",la[Xn]="node_modules/lucide-svelte/dist/icons/chevron-left.svelte",sa[Xn]="node_modules/lucide-svelte/dist/icons/chevron-right.svelte",ua[Xn]="node_modules/lucide-svelte/dist/icons/layers.svelte",ca[Xn]="node_modules/lucide-svelte/dist/icons/settings.svelte",fa[Xn]="node_modules/lucide-svelte/dist/icons/x.svelte",ha[Xn]="src/ui/components/viewer/pc/BookHeader.svelte";var da=Or(Kr('<span class="chat-index-total"> </span>'),ha[Xn],[[60,10]]),pa=Or(Kr('<header class="book-header"><div class="header-left"><div class="header-thumbnail"></div> <div class="header-info"><span class="header-name"> </span> <div class="header-buttons"></div></div></div> <div class="header-right"><div class="chat-index-nav"><button class="chat-nav-btn" title="ì´ì „ ì±„íŒ…"><!></button> <span class="header-chat-index"> <!></span> <button class="chat-nav-btn" title="ë‹¤ìŒ ì±„íŒ…"><!></button></div> <button class="close-btn" title="ë‹«ê¸°"><!></button></div></header>'),ha[Xn],[[34,0,[[35,2,[[36,4],[41,4,[[42,6],[43,6]]]]],[47,2,[[48,4,[[49,6],[57,6],[63,6]]],[72,4]]]]]]);function ha(n,t){co(new.target),ut(t,!0,ha);let e=vi(t,"thumbnailUrl",3,""),r=vi(t,"name",3,""),o=vi(t,"chatIndex",3,0),i=vi(t,"buttons",19,()=>[]),a=vi(t,"chatIndexPosition",19,()=>({position:0,total:0,isFirst:!0,isLast:!0})),l=Qn(ne(null),"buttonsContainer");We(()=>{Cr(l)&&i().length>0&&(Cr(l).innerHTML="",i().forEach(n=>{const t=n.cloneNode(!0);Cr(l).appendChild(t)}))});let s=Qn(Zt(()=>o()+1),"displayIndex");var u={...fo()},c=pa(),f=Ce(c),d=Ce(f);let p;var h=Ce(Ie(d,2)),v=Ce(h);li(Ie(h,2),n=>ee(l,n),()=>Cr(l));var g=Ce(Ie(f,2)),b=Ce(g);b.__click=function(...n){Yr(()=>t.onPrevChat,this,n,ha,[51,17])};var m=Ce(b);at(()=>la(m,{size:16}),"component",ha,55,8,{componentTag:"ChevronLeft"});var y=Ie(b,2),_=Ce(y),w=Ie(_),x=n=>{var t=da(),e=Ce(t);Te(()=>io(e,`(${a().position??""}/${a().total??""})`)),eo(n,t)};at(()=>ho(w,n=>{a().total>0&&n(x)}),"if",ha,59,8);var C=Ie(y,2);C.__click=function(...n){Yr(()=>t.onNextChat,this,n,ha,[65,17])};var k=Ce(C);at(()=>sa(k,{size:16}),"component",ha,69,8,{componentTag:"ChevronRight"});var I=Ie(g,2);I.__click=function(...n){Yr(()=>t.onClose,this,n,ha,[72,39])};var A=Ce(I);return at(()=>fa(A,{size:20}),"component",ha,73,6,{componentTag:"X"}),Te(()=>{p=Zo(d,"",p,{"background-image":e()?`url('${e()}')`:"none"}),io(v,r()||"Unknown"),b.disabled=a().isFirst,io(_,`#${Cr(s)??""} `),C.disabled=a().isLast}),eo(n,c),ct(u)}Dr(["click"]);const va=n=>n;function ga(n,{delay:t=0,duration:e=400,easing:r=va}={}){const o=+getComputedStyle(n).opacity;return{delay:t,duration:e,easing:r,css:n=>"opacity: "+n*o}}function ba(n){const t=n-1;return t*t*t+1}wa[Xn]="src/ui/components/viewer/pc/LoadingOverlay.svelte";var ma=Or(Kr('<span class="loading-message svelte-1jvz8ec"> </span>'),wa[Xn],[[24,8]]),ya=Or(Kr('<div class="loading-overlay svelte-1jvz8ec"><div class="loading-content svelte-1jvz8ec"><div class="loading-spinner svelte-1jvz8ec"><div class="spinner-ring svelte-1jvz8ec"></div> <div class="spinner-ring svelte-1jvz8ec"></div> <div class="spinner-ring svelte-1jvz8ec"></div></div> <!></div></div>'),wa[Xn],[[12,2,[[17,4,[[18,6,[[19,8],[20,8],[21,8]]]]]]]]);const _a={hash:"svelte-1jvz8ec",code:"\n  .loading-overlay.svelte-1jvz8ec {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 50;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background: color-mix(in srgb, var(--bv-page-color) 85%, transparent);\n    backdrop-filter: blur(12px);\n    -webkit-backdrop-filter: blur(12px);\n    pointer-events: all;\n    border-radius: inherit;\n  }\n\n  .loading-content.svelte-1jvz8ec {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 16px;\n    animation: svelte-1jvz8ec-contentFadeIn 0.3s ease-out;\n  }\n\n  @keyframes svelte-1jvz8ec-contentFadeIn {\n    from {\n      opacity: 0;\n      transform: scale(0.95);\n    }\n    to {\n      opacity: 1;\n      transform: scale(1);\n    }\n  }\n\n  .loading-spinner.svelte-1jvz8ec {\n    position: relative;\n    width: 44px;\n    height: 44px;\n  }\n\n  .spinner-ring.svelte-1jvz8ec {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    border: 2.5px solid transparent;\n    border-top-color: var(--bv-accent-color, #6366f1);\n    border-radius: 50%;\n    animation: svelte-1jvz8ec-spin 1s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n  }\n\n  .spinner-ring.svelte-1jvz8ec:nth-child(1) {\n    animation-delay: -0.4s;\n  }\n\n  .spinner-ring.svelte-1jvz8ec:nth-child(2) {\n    animation-delay: -0.25s;\n    width: 75%;\n    height: 75%;\n    top: 12.5%;\n    left: 12.5%;\n  }\n\n  .spinner-ring.svelte-1jvz8ec:nth-child(3) {\n    animation-delay: -0.1s;\n    width: 50%;\n    height: 50%;\n    top: 25%;\n    left: 25%;\n  }\n\n  @keyframes svelte-1jvz8ec-spin {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n\n  .loading-message.svelte-1jvz8ec {\n    font-size: 13px;\n    font-weight: 500;\n    color: var(--bv-text-secondary, #666);\n  }\n\n  .book-viewer-root[data-theme='dark'] .loading-message.svelte-1jvz8ec {\n    color: var(--bv-text-secondary, #aaa);\n  }\n\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTG9hZGluZ092ZXJsYXkuc3ZlbHRlIiwic291cmNlcyI6WyJMb2FkaW5nT3ZlcmxheS5zdmVsdGUiXSwic291cmNlc0NvbnRlbnQiOlsiPHNjcmlwdD5cbiAgLyoqXG4gICAqIExvYWRpbmdPdmVybGF5IC0gY2hhdCBpbmRleCDsnbTrj5kg7IucIO2RnOyLnOuQmOuKlCDroZzrlKkg7Jik67KE66CI7J20XG4gICAqL1xuICBpbXBvcnQgeyBmYWRlIH0gZnJvbSAnc3ZlbHRlL3RyYW5zaXRpb24nO1xuICBpbXBvcnQgeyBjdWJpY091dCB9IGZyb20gJ3N2ZWx0ZS9lYXNpbmcnO1xuXG4gIGxldCB7IHZpc2libGUgPSBmYWxzZSwgbWVzc2FnZSA9ICfroZzrlKkg7KSRLi4uJyB9ID0gJHByb3BzKCk7XG48L3NjcmlwdD5cblxueyNpZiB2aXNpYmxlfVxuICA8ZGl2XG4gICAgY2xhc3M9XCJsb2FkaW5nLW92ZXJsYXlcIlxuICAgIGluOmZhZGU9e3sgZHVyYXRpb246IDIwMCwgZWFzaW5nOiBjdWJpY091dCB9fVxuICAgIG91dDpmYWRlPXt7IGR1cmF0aW9uOiAzMDAsIGVhc2luZzogY3ViaWNPdXQgfX1cbiAgPlxuICAgIDxkaXYgY2xhc3M9XCJsb2FkaW5nLWNvbnRlbnRcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJsb2FkaW5nLXNwaW5uZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInNwaW5uZXItcmluZ1wiPjwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwic3Bpbm5lci1yaW5nXCI+PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJzcGlubmVyLXJpbmdcIj48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgeyNpZiBtZXNzYWdlfVxuICAgICAgICA8c3BhbiBjbGFzcz1cImxvYWRpbmctbWVzc2FnZVwiPnttZXNzYWdlfTwvc3Bhbj5cbiAgICAgIHsvaWZ9XG4gICAgPC9kaXY+XG4gIDwvZGl2Plxuey9pZn1cblxuPHN0eWxlPlxuICAubG9hZGluZy1vdmVybGF5IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGxlZnQ6IDA7XG4gICAgcmlnaHQ6IDA7XG4gICAgYm90dG9tOiAwO1xuICAgIHotaW5kZXg6IDUwO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBiYWNrZ3JvdW5kOiBjb2xvci1taXgoaW4gc3JnYiwgdmFyKC0tYnYtcGFnZS1jb2xvcikgODUlLCB0cmFuc3BhcmVudCk7XG4gICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDEycHgpO1xuICAgIC13ZWJraXQtYmFja2Ryb3AtZmlsdGVyOiBibHVyKDEycHgpO1xuICAgIHBvaW50ZXItZXZlbnRzOiBhbGw7XG4gICAgYm9yZGVyLXJhZGl1czogaW5oZXJpdDtcbiAgfVxuXG4gIC5sb2FkaW5nLWNvbnRlbnQge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGdhcDogMTZweDtcbiAgICBhbmltYXRpb246IGNvbnRlbnRGYWRlSW4gMC4zcyBlYXNlLW91dDtcbiAgfVxuXG4gIEBrZXlmcmFtZXMgY29udGVudEZhZGVJbiB7XG4gICAgZnJvbSB7XG4gICAgICBvcGFjaXR5OiAwO1xuICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwLjk1KTtcbiAgICB9XG4gICAgdG8ge1xuICAgICAgb3BhY2l0eTogMTtcbiAgICAgIHRyYW5zZm9ybTogc2NhbGUoMSk7XG4gICAgfVxuICB9XG5cbiAgLmxvYWRpbmctc3Bpbm5lciB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIHdpZHRoOiA0NHB4O1xuICAgIGhlaWdodDogNDRweDtcbiAgfVxuXG4gIC5zcGlubmVyLXJpbmcge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgYm9yZGVyOiAyLjVweCBzb2xpZCB0cmFuc3BhcmVudDtcbiAgICBib3JkZXItdG9wLWNvbG9yOiB2YXIoLS1idi1hY2NlbnQtY29sb3IsICM2MzY2ZjEpO1xuICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICBhbmltYXRpb246IHNwaW4gMXMgY3ViaWMtYmV6aWVyKDAuNSwgMCwgMC41LCAxKSBpbmZpbml0ZTtcbiAgfVxuXG4gIC5zcGlubmVyLXJpbmc6bnRoLWNoaWxkKDEpIHtcbiAgICBhbmltYXRpb24tZGVsYXk6IC0wLjRzO1xuICB9XG5cbiAgLnNwaW5uZXItcmluZzpudGgtY2hpbGQoMikge1xuICAgIGFuaW1hdGlvbi1kZWxheTogLTAuMjVzO1xuICAgIHdpZHRoOiA3NSU7XG4gICAgaGVpZ2h0OiA3NSU7XG4gICAgdG9wOiAxMi41JTtcbiAgICBsZWZ0OiAxMi41JTtcbiAgfVxuXG4gIC5zcGlubmVyLXJpbmc6bnRoLWNoaWxkKDMpIHtcbiAgICBhbmltYXRpb24tZGVsYXk6IC0wLjFzO1xuICAgIHdpZHRoOiA1MCU7XG4gICAgaGVpZ2h0OiA1MCU7XG4gICAgdG9wOiAyNSU7XG4gICAgbGVmdDogMjUlO1xuICB9XG5cbiAgQGtleWZyYW1lcyBzcGluIHtcbiAgICAwJSB7XG4gICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTtcbiAgICB9XG4gICAgMTAwJSB7XG4gICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xuICAgIH1cbiAgfVxuXG4gIC5sb2FkaW5nLW1lc3NhZ2Uge1xuICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIGNvbG9yOiB2YXIoLS1idi10ZXh0LXNlY29uZGFyeSwgIzY2Nik7XG4gIH1cblxuICA6Z2xvYmFsKC5ib29rLXZpZXdlci1yb290W2RhdGEtdGhlbWU9J2RhcmsnXSkgLmxvYWRpbmctbWVzc2FnZSB7XG4gICAgY29sb3I6IHZhcigtLWJ2LXRleHQtc2Vjb25kYXJ5LCAjYWFhKTtcbiAgfVxuPC9zdHlsZT5cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwiaWdub3JlTGlzdCI6W119 */"};function wa(n,t){co(new.target),ut(t,!0,wa),Wo(n,_a);let e=vi(t,"visible",3,!1),r=vi(t,"message",3,"ë¡œë”© ì¤‘...");var o={...fo()},i=to(),a=ke(i),l=n=>{var t=ya(),e=Ce(t),o=Ie(Ce(e),2),i=n=>{var t=ma(),e=Ce(t);Te(()=>io(e,r())),eo(n,t)};at(()=>ho(o,n=>{r()&&n(i)}),"if",wa,23,6),Eo(1,t,()=>ga,()=>({duration:200,easing:ba})),Eo(2,t,()=>ga,()=>({duration:300,easing:ba})),eo(n,t)};return at(()=>ho(a,n=>{e()&&n(l)}),"if",wa,11,0),eo(n,i),ct(o)}Ia[Xn]="src/ui/components/viewer/pc/BookPages.svelte";var xa=Or(Kr('<div class="page-number left-page-num"> </div>'),Ia[Xn],[[59,8]]),Ca=Or(Kr('<div class="page-number right-page-num"> </div>'),Ia[Xn],[[72,8]]),ka=Or(Kr('<div class="book-pages"><div class="click-area click-left"></div>  <div class="click-area click-right"></div> <div class="page page-left"><div class="page-content"><div class="text-content chattext"></div> <!></div></div> <div class="book-spine"></div> <div class="page page-right"><div class="page-content"><div class="text-content chattext"></div> <!></div></div> <!></div>'),Ia[Xn],[[45,0,[[49,2],[52,2],[55,2,[[56,4,[[57,6]]]]],[65,2],[68,2,[[69,4,[[70,6]]]]]]]]);function Ia(n,t){co(new.target),ut(t,!0,Ia);let e=vi(t,"leftContent",3,""),r=vi(t,"rightContent",3,""),o=vi(t,"leftPageNum",3,0),i=vi(t,"rightPageNum",3,0),a=vi(t,"leftContentRef",7,null);vi(t,"rightContentRef",3,null);let l=vi(t,"isLoading",3,!1),s=vi(t,"loadingMessage",3,""),u=Qn(ne(null),"leftTextContent"),c=Qn(ne(null),"rightTextContent");We(()=>{Cr(u)&&(Cr(u).innerHTML=e())}),We(()=>{Cr(c)&&(Cr(c).innerHTML=r())}),We(()=>{Cr(u)&&he(a(),Cr(u),!1)&&a(Cr(u))});var f={...fo()},d=ka(),p=Ce(d);p.__click=function(...n){Yr(()=>t.onPrevPage,this,n,Ia,[49,46])};var h=Ie(p,2);h.__click=function(...n){Yr(()=>t.onNextPage,this,n,Ia,[52,47])};var v=Ie(h,2),g=Ce(v),b=Ce(g);li(b,n=>ee(u,n),()=>Cr(u));var m=Ie(b,2),y=n=>{var t=xa(),e=Ce(t);Te(()=>io(e,o())),eo(n,t)};at(()=>ho(m,n=>{o()>0&&n(y)}),"if",Ia,58,6);var _=Ie(v,4),w=Ce(_),x=Ce(w);li(x,n=>ee(c,n),()=>Cr(c));var C=Ie(x,2),k=n=>{var t=Ca(),e=Ce(t);Te(()=>io(e,i())),eo(n,t)};at(()=>ho(C,n=>{i()>0&&n(k)}),"if",Ia,71,6);var I=Ie(_,2);return at(()=>wa(I,{get visible(){return l()},get message(){return s()}}),"component",Ia,78,2,{componentTag:"LoadingOverlay"}),eo(n,d),ct(f)}Dr(["click"]),Sa[Xn]="src/ui/components/viewer/pc/SettingsMenu.svelte";var Aa=Or(Kr('<div class="dropdown-container"><div><div class="dropdown-header">ì„¤ì •</div> <div class="setting-item"><label for="fontSize">í°íŠ¸ í¬ê¸°</label> <input type="range" id="fontSize" min="12" max="24" step="2"/> <span> </span></div> <div class="setting-item"><label for="lineHeight">ì¤„ ê°„ê²©</label> <input type="range" id="lineHeight" min="1.5" max="2.2" step="0.2"/> <span> </span></div> <div class="setting-item"><label for="theme">í…Œë§ˆ</label> <select id="theme"><option>ë°ì€ í…Œë§ˆ</option><option>ì„¸í”¼ì•„</option><option>ì–´ë‘ìš´ í…Œë§ˆ</option></select></div> <div class="setting-item"><button class="custom-css-btn">ì‚¬ìš©ìž CSS íŽ¸ì§‘</button></div></div></div>'),Sa[Xn],[[34,0,[[35,2,[[36,4],[38,4,[[39,6],[40,6],[49,6]]],[52,4,[[53,6],[54,6],[63,6]]],[66,4,[[67,6],[68,6,[[69,8],[70,8],[71,8]]]]],[75,4,[[76,6]]]]]]]]);function Sa(n,t){co(new.target),ut(t,!0,Sa);let e=vi(t,"isOpen",3,!1),r=vi(t,"settings",19,()=>({fontSize:17,lineHeight:1.5,theme:"dark"}));var o={...fo()},i=Aa(),a=Ce(i);let l;var s=Ie(Ce(a),2),u=Ie(Ce(s),2);u.__input=function(n){var e;const o={...r(),fontSize:Number(n.target.value)};null==(e=t.onSettingsChange)||e.call(t,o)};var c=Ce(Ie(u,2)),f=Ie(s,2),d=Ie(Ce(f),2);d.__input=function(n){var e;const o={...r(),lineHeight:Number(n.target.value)};null==(e=t.onSettingsChange)||e.call(t,o)};var p=Ce(Ie(d,2)),h=Ie(f,2),v=Ie(Ce(h),2);v.__change=function(n){var e;const o={...r(),theme:n.target.value};null==(e=t.onSettingsChange)||e.call(t,o)};var g=Ce(v);g.value=g.__value="light";var b=Ie(g);b.value=b.__value="sepia";var m,y=Ie(b);return y.value=y.__value="dark",Fo(v),Ce(Ie(h,2)).__click=function(...n){Yr(()=>t.onOpenCustomCss,this,n,Sa,[76,46])},Te(n=>{l=Po(a,1,"dropdown-menu",null,l,{active:e()}),qo(u,r().fontSize),io(c,`${r().fontSize??""}px`),qo(d,r().lineHeight),io(p,n),m!==(m=r().theme)&&(v.value=(v.__value=r().theme)??"",Ho(v,r().theme))},[()=>r().lineHeight.toFixed(1)]),eo(n,i),ct(o)}Dr(["input","change","click"]),za[Xn]="src/ui/components/viewer/pc/LBModuleMenu.svelte";var $a=Or(Kr('<div class="lb-module-item" style="cursor: default; opacity: 0.6;">ëª¨ë“ˆì´ ì—†ìŠµë‹ˆë‹¤</div>'),za[Xn],[[30,8]]),Na=Or(Kr('<div class="lb-module-item" role="button" tabindex="0"><span class="lb-module-label"> </span></div>'),za[Xn],[[35,10,[[42,12]]]]),Ma=Or(Kr('<div class="dropdown-container"><div><div class="dropdown-header">LB ëª¨ë“ˆ</div> <div class="lb-modules-list"><!></div></div></div>'),za[Xn],[[24,0,[[25,2,[[26,4],[28,4]]]]]]);function za(n,t){co(new.target),ut(t,!0,za);let e=vi(t,"isOpen",3,!1),r=vi(t,"modules",19,()=>[]);function o(n){var e;null==(e=t.onModuleClick)||e.call(t,n)}var i={...fo()},a=Ma(),l=Ce(a);let s;var u=Ie(Ce(l),2),c=Ce(u),f=n=>{eo(n,$a())},d=n=>{var t=to(),e=ke(t);at(()=>mo(e,17,r,vo,(n,t)=>{var e=Na();e.__click=()=>o(Cr(t)),e.__keydown=n=>he(n.key,"Enter")&&o(Cr(t));var r=Ce(e),i=Ce(r);Te(n=>io(i,n),[()=>function(n,t=30){const e=n.replace(/\s+/g," ").trim();return e.length<=t?e:e.substring(0,t)+"..."}(Cr(t).label)]),eo(n,e)}),"each",za,34,8),eo(n,t)};return at(()=>ho(c,n=>{he(r().length,0)?n(f):n(d,!1)}),"if",za,29,6),Te(()=>s=Po(l,1,"dropdown-menu",null,s,{active:e()})),eo(n,a),ct(i)}Dr(["click","keydown"]),Wa[Xn]="src/ui/components/viewer/pc/NavControls.svelte";var Ea=Or(Kr('<div class="lb-menu-container"><button class="nav-icon-btn lb-btn" title="LB ëª¨ë“ˆ"><!> <span>LB</span></button> <!></div>'),Wa[Xn],[[94,6,[[95,8,[[101,10]]]]]]),Ra=Or(Kr('<nav class="nav-controls"><button class="nav-btn prev-btn" title="ì´ì „ íŽ˜ì´ì§€"><!></button> <span class="page-indicator"> </span> <button class="nav-btn next-btn" title="ë‹¤ìŒ íŽ˜ì´ì§€"><!></button> <div class="nav-right-buttons"><!> <div class="settings-menu-container"><button class="nav-icon-btn settings-btn" title="ì„¤ì •"><!></button> <!></div></div></nav>'),Wa[Xn],[[71,0,[[72,2],[81,2],[83,2],[92,2,[[112,4,[[113,6]]]]]]]]);function Wa(n,t){co(new.target),ut(t,!0,Wa);let e=vi(t,"currentSpread",3,0),r=vi(t,"totalSpreads",3,1),o=vi(t,"prevDisabled",3,!1),i=vi(t,"nextDisabled",3,!1),a=vi(t,"settings",19,()=>({fontSize:17,lineHeight:1.9,theme:"light"})),l=vi(t,"lbModules",19,()=>[]),s=Qn(ne(!1),"isSettingsOpen"),u=Qn(ne(!1),"isLBMenuOpen");function c(){ee(s,!1),ee(u,!1)}function f(n){var e;null==(e=t.onSettingsChange)||e.call(t,n)}function d(){var n;c(),null==(n=t.onOpenCustomCss)||n.call(t)}function p(n){var e;c(),null==(e=t.onLBModuleClick)||e.call(t,n)}var h={...fo()},v=Ra();Fr("click",ve,function(n){const t=n.target.closest(".settings-menu-container"),e=n.target.closest(".lb-menu-container");!t&&Cr(s)&&ee(s,!1),!e&&Cr(u)&&ee(u,!1)});var g=Ce(v);g.__click=function(...n){Yr(()=>t.onPrev,this,n,Wa,[74,13])};var b=Ce(g);at(()=>la(b,{size:28}),"component",Wa,78,4,{componentTag:"ChevronLeft"});var m=Ie(g,2),y=Ce(m),_=Ie(m,2);_.__click=function(...n){Yr(()=>t.onNext,this,n,Wa,[85,13])};var w=Ce(_);at(()=>sa(w,{size:28}),"component",Wa,89,4,{componentTag:"ChevronRight"});var x=Ce(Ie(_,2)),C=n=>{var t=Ea(),e=Ce(t);e.__click=n=>{n.stopPropagation(),ee(u,!Cr(u)),Cr(u)&&ee(s,!1)};var r=Ce(e);at(()=>ua(r,{size:18}),"component",Wa,100,10,{componentTag:"Layers"});var o=Ie(e,2);at(()=>za(o,{get isOpen(){return Cr(u)},get modules(){return l()},onModuleClick:p,onClose:()=>ee(u,!1)}),"component",Wa,103,8,{componentTag:"LBModuleMenu"}),eo(n,t)};at(()=>ho(x,n=>{l().length>0&&n(C)}),"if",Wa,93,4);var k=Ce(Ie(x,2));k.__click=n=>{n.stopPropagation(),ee(s,!Cr(s)),Cr(s)&&ee(u,!1)};var I=Ce(k);at(()=>ca(I,{size:18}),"component",Wa,118,8,{componentTag:"Settings"});var A=Ie(k,2);return at(()=>Sa(A,{get isOpen(){return Cr(s)},get settings(){return a()},onSettingsChange:f,onOpenCustomCss:d,onClose:()=>ee(s,!1)}),"component",Wa,120,6,{componentTag:"SettingsMenu"}),Te(()=>{g.disabled=o(),io(y,`${e()+1} / ${r()??""}`),_.disabled=i()}),eo(n,v),ct(h)}Dr(["click"]);const Ba="/* ===== PC Book Viewer Styles ===== */\n\n/* CSS ë³€ìˆ˜ ì •ì˜ */\n.book-viewer-root {\n  /* í”„ë¦¬ë¯¸ì—„ ì»¬ëŸ¬ íŒ”ë ˆíŠ¸ */\n  --bv-bg-gradient-start: #1a1f35;\n  --bv-bg-gradient-end: #2d3654;\n  --bv-page-color: #fdfbf7;\n  --bv-page-shadow: #f5f0e8;\n  --bv-text-color: #2c2c2c;\n  --bv-text-secondary: #6b6b6b;\n  --bv-accent-color: #c9a66b;\n  --bv-accent-hover: #b8935a;\n  --bv-divider-color: #e8e4dc;\n  --bv-spine-gradient: linear-gradient(\n    90deg,\n    #d4cfc4 0%,\n    #c9c4b9 50%,\n    #d4cfc4 100%\n  );\n\n  /* ê·¸ë¦¼ìž ì‹œìŠ¤í…œ */\n  --bv-shadow-soft: 0 4px 20px rgba(0, 0, 0, 0.08);\n  --bv-shadow-medium: 0 8px 40px rgba(0, 0, 0, 0.12);\n  --bv-shadow-strong: 0 20px 60px rgba(0, 0, 0, 0.2);\n  --bv-shadow-inner: inset 0 0 30px rgba(0, 0, 0, 0.03);\n\n  /* íƒ€ì´í¬ê·¸ëž˜í”¼ */\n  --bv-font-size: 17px;\n  --bv-line-height: 1.9;\n  --bv-font-family:\n    'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;\n  --bv-font-serif: 'Noto Serif KR', 'Crimson Text', 'Georgia', serif;\n\n  /* ì• ë‹ˆë©”ì´ì…˜ */\n  --bv-transition-fast: 0.15s cubic-bezier(0.4, 0, 0.2, 1);\n  --bv-transition-smooth: 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  --bv-transition-slow: 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n\n  /* í°íŠ¸ ì»¬ëŸ¬ (Light) */\n  --FontColorStandard: #2c2c2c;\n  --FontColorItalic: #5a5a5a;\n  --FontColorBold: #1a1a1a;\n  --FontColorItalicBold: #5a5a5a;\n  --FontColorQuote1: #0e7490;\n  --FontColorQuote2: #c2410c;\n\n  --bv-font-color: var(--FontColorStandard);\n  --bv-mark1-color: var(--FontColorQuote1);\n  --bv-mark2-color: var(--FontColorQuote2);\n  --bv-em-color: var(--FontColorItalic);\n}\n\n/* í…Œë§ˆ: Sepia */\n.book-viewer-root[data-theme='sepia'] {\n  --bv-bg-gradient-start: #3d3830;\n  --bv-bg-gradient-end: #4a4238;\n  --bv-page-color: #f7f0e3;\n  --bv-page-shadow: #ebe4d7;\n  --bv-text-color: #3d2e1c;\n  --bv-text-secondary: #7a6b5a;\n  --bv-accent-color: #8b7355;\n  --bv-divider-color: #d4c9b8;\n  --bv-spine-gradient: linear-gradient(\n    90deg,\n    #c4b9a8 0%,\n    #b8ad9c 50%,\n    #c4b9a8 100%\n  );\n\n  /* í°íŠ¸ ì»¬ëŸ¬ (Sepia) */\n  --FontColorBold: #2a1f10;\n  --FontColorItalicBold: #6b5a48;\n\n  --FontColorStandard: #3d2e1c;\n  --FontColorQuote1: #1a6b6b;\n  --FontColorQuote2: #a85d20;\n  --FontColorItalic: #6b5a48;\n  --bv-font-color: var(--FontColorStandard);\n  --bv-mark1-color: var(--FontColorQuote1);\n  --bv-mark2-color: var(--FontColorQuote2);\n  --bv-em-color: var(--FontColorItalic);\n}\n\n/* í…Œë§ˆ: Dark */\n.book-viewer-root[data-theme='dark'] {\n  --bv-bg-gradient-start: #0d1117;\n  --bv-bg-gradient-end: #161b22;\n  --bv-page-color: var(--risu-theme-bgcolor);\n  --bv-page-shadow: #151a20;\n  --bv-text-color: #c9d1d9;\n  --bv-text-secondary: #8b949e;\n  --bv-accent-color: #d4a574;\n  --bv-accent-hover: #e0b584;\n  --bv-divider-color: #30363d;\n  --bv-spine-gradient: linear-gradient(\n    90deg,\n    #21262d 0%,\n    #30363d 50%,\n    #21262d 100%\n  );\n  --FontColorStandard: #fafafa;\n  --FontColorItalic: #8c8d93;\n  --FontColorBold: #fafafa;\n  --FontColorItalicBold: #8c8d93;\n  --FontColorQuote1: #8be9fd;\n  --FontColorQuote2: #ffb86c;\n\n  --bv-font-color: var(--FontColorStandard);\n  --bv-mark1-color: var(--FontColorQuote1);\n  --bv-mark2-color: var(--FontColorQuote2);\n  --bv-em-color: var(--FontColorItalic);\n}\n\n/* í…ìŠ¤íŠ¸ ìƒ‰ìƒ */\n.text-content p {\n  margin-top: 1em;\n  /* color: var(--bv-font-color); */\n}\n\n.text-content h1 {\n  font-weight: 800;\n  font-size: 2.25em;\n  line-height: 1.1111111;\n}\n\n.text-content h2 {\n  font-weight: 700;\n  font-size: 1.5em;\n  line-height: 1.3333333;\n}\n\n.text-content h3 {\n  font-weight: 600;\n  font-size: 1.25em;\n  line-height: 1.6;\n}\n\n/* ===== ì±… ëž˜í¼ (ì „ì²´ í™”ë©´) ===== */\n.book-viewer-root {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 93.5%;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  z-index: 5;\n  font-family: var(--bv-font-family);\n  background: linear-gradient(\n    135deg,\n    var(--bv-bg-gradient-start) 0%,\n    var(--bv-bg-gradient-end) 100%\n  );\n  user-select: none;\n  border-bottom: 1px solid var(--bv-divider-color);\n}\n\n/* ë°°ê²½ íŒ¨í„´ */\n.book-viewer-root::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image:\n    radial-gradient(\n      circle at 20% 80%,\n      rgba(201, 166, 107, 0.05) 0%,\n      transparent 50%\n    ),\n    radial-gradient(\n      circle at 80% 20%,\n      rgba(201, 166, 107, 0.03) 0%,\n      transparent 50%\n    );\n  pointer-events: none;\n  z-index: 0;\n}\n\n/* ===== í—¤ë” ì˜ì—­ ===== */\n.book-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 24px;\n  background: var(--bv-page-color);\n  border-bottom: 1px solid var(--bv-divider-color);\n  flex-shrink: 0;\n  z-index: 1;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  min-width: 0;\n  flex: 1;\n  margin-left: 30px;\n}\n\n.header-thumbnail {\n  width: 40px;\n  height: 40px;\n  min-width: 40px;\n  border-radius: 8px;\n  background-size: cover;\n  background-position: center;\n  background-color: var(--bv-divider-color);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.header-info {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  min-width: 0;\n  flex: 1;\n}\n\n.header-name {\n  font-size: 15px;\n  font-weight: 600;\n  color: var(--bv-text-color);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.header-buttons {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.header-buttons button {\n  background: none;\n  border: none;\n  padding: 6px;\n  cursor: pointer;\n  color: var(--bv-text-secondary);\n  border-radius: 6px;\n  transition: all var(--bv-transition-fast);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.header-buttons button:hover {\n  background: rgba(0, 0, 0, 0.05);\n  color: var(--bv-accent-color);\n}\n\n.book-viewer-root[data-theme='dark'] .header-buttons button:hover {\n  background: rgba(255, 255, 255, 0.08);\n}\n\n.header-buttons button :global(svg) {\n  width: 18px;\n  height: 18px;\n}\n\n.header-right {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-shrink: 0;\n}\n\n.chat-index-nav {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.chat-nav-btn {\n  background: none;\n  border: none;\n  padding: 4px;\n  cursor: pointer;\n  color: var(--bv-text-secondary);\n  border-radius: 4px;\n  transition: all var(--bv-transition-fast);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.chat-nav-btn:hover:not(:disabled) {\n  background: rgba(0, 0, 0, 0.05);\n  color: var(--bv-accent-color);\n}\n\n.chat-nav-btn:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\n.book-viewer-root[data-theme='dark'] .chat-nav-btn:hover:not(:disabled) {\n  background: rgba(255, 255, 255, 0.08);\n}\n\n.header-chat-index {\n  font-size: 13px;\n  font-weight: 500;\n  color: var(--bv-text-secondary);\n  background: rgba(0, 0, 0, 0.04);\n  padding: 4px 10px;\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.chat-index-total {\n  font-size: 11px;\n  opacity: 0.7;\n}\n\n.book-viewer-root[data-theme='dark'] .header-chat-index {\n  background: rgba(255, 255, 255, 0.08);\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  padding: 6px;\n  cursor: pointer;\n  color: var(--bv-text-secondary);\n  border-radius: 6px;\n  transition: all var(--bv-transition-fast);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.close-btn:hover {\n  background: rgba(0, 0, 0, 0.05);\n  color: var(--bv-accent-color);\n}\n\n/* ===== íŽ˜ì´ì§€ ì˜ì—­ ===== */\n.book-pages {\n  position: relative;\n  display: flex;\n  flex: 1;\n  min-height: 0;\n  z-index: 1;\n}\n\n.page {\n  flex: 1;\n  background: var(--bv-page-color);\n  position: relative;\n  overflow: hidden;\n}\n\n/* ì¢…ì´ ì§ˆê° íš¨ê³¼ */\n.page::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background:\n    linear-gradient(\n      90deg,\n      rgba(0, 0, 0, 0.02) 0%,\n      transparent 5%,\n      transparent 95%,\n      rgba(0, 0, 0, 0.02) 100%\n    ),\n    url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E\");\n  pointer-events: none;\n  z-index: 1;\n}\n\n.book-viewer-root[data-theme='dark'] .page::before {\n  opacity: 0.5;\n}\n\n.page-left {\n  border-radius: 4px 0 0 4px;\n  box-shadow: var(--bv-shadow-inner);\n}\n\n.page-left::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 40px;\n  height: 100%;\n  background: linear-gradient(90deg, transparent 0%, rgba(0, 0, 0, 0.03) 100%);\n  pointer-events: none;\n}\n\n.page-right {\n  border-radius: 0 4px 4px 0;\n  box-shadow: var(--bv-shadow-inner);\n}\n\n.page-right::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 40px;\n  height: 100%;\n  background: linear-gradient(90deg, rgba(0, 0, 0, 0.03) 0%, transparent 100%);\n  pointer-events: none;\n}\n\n/* ===== ì±…ë“± (ìŠ¤íŒŒì¸) ===== */\n.book-spine {\n  width: 8px;\n  background: var(--bv-spine-gradient);\n  position: relative;\n  box-shadow:\n    inset 2px 0 4px rgba(0, 0, 0, 0.1),\n    inset -2px 0 4px rgba(0, 0, 0, 0.1);\n}\n\n.book-spine::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 1px;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.1);\n}\n\n/* ===== íŽ˜ì´ì§€ ì½˜í…ì¸  ===== */\n.page-content {\n  padding: 50px 60px 10px;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  color: var(--bv-text-color);\n  position: relative;\n  z-index: 2;\n}\n\n.page-content > .chattext [class*='-image-wrapper'] {\n  max-height: 100% !important;\n}\n.page-content > .chattext [class*='-image-container'] {\n  max-height: 100% !important;\n}\n.page-content > .x-risu-image-cell {\n  aspect-ratio: auto !important;\n}\n\n.text-content {\n  flex: 1;\n  overflow-y: auto;\n  font-size: var(--bv-font-size);\n  line-height: var(--bv-line-height);\n  text-align: -webkit-auto;\n  word-break: keep-all;\n  letter-spacing: -0.01em;\n  padding-right: 10px;\n  user-select: text;\n  -webkit-user-select: text;\n  cursor: text;\n}\n\n.text-content * {\n  user-select: text;\n  -webkit-user-select: text;\n}\n\n/* í—¤ë”© ìŠ¤íƒ€ì¼ */\n.text-content :global(h1),\n.text-content :global(h2),\n.text-content :global(h3) {\n  margin: 2em 0 1em;\n  text-indent: 0;\n  font-weight: 600;\n  color: #1a1a1a;\n  letter-spacing: -0.02em;\n}\n\n.text-content :global(h1) {\n  font-size: 1.8em;\n  border-bottom: 2px solid var(--bv-accent-color);\n  padding-bottom: 0.5em;\n}\n\n.text-content :global(h2) {\n  font-size: 1.4em;\n}\n\n/* Mark ìŠ¤íƒ€ì¼ */\n.text-content :global(mark),\n.text-content :global(mark[risu-mark]) {\n  display: inline !important;\n  background: linear-gradient(\n    120deg,\n    rgba(201, 166, 107, 0.2) 0%,\n    rgba(201, 166, 107, 0.3) 100%\n  ) !important;\n  color: inherit !important;\n  padding: 0.1em 0.3em !important;\n  border-radius: 3px !important;\n  flex-direction: unset !important;\n  align-items: unset !important;\n  gap: unset !important;\n}\n\n/* ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */\n.text-content:has(img) {\n  position: static;\n}\n\n.text-content :global(img) {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  object-position: center;\n  margin: 0;\n  z-index: 10;\n}\n\n.page-content:has(img) .page-number {\n  display: none;\n}\n\n/* ===== íŽ˜ì´ì§€ ë²ˆí˜¸ ===== */\n.page-number {\n  font-size: 13px;\n  color: var(--bv-text-secondary);\n  font-weight: 500;\n  letter-spacing: 0.05em;\n}\n\n.left-page-num {\n  text-align: left;\n}\n.right-page-num {\n  text-align: right;\n}\n\n/* ===== í´ë¦­ ì˜ì—­ ===== */\n.click-area {\n  position: absolute;\n  top: 0;\n  width: 5%;\n  height: 100%;\n  z-index: 10;\n  cursor: pointer;\n}\n\n.click-left {\n  left: 0;\n  cursor:\n    url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='none' stroke='%23c9a66b' stroke-width='2'%3E%3Cpolyline points='15 18 9 12 15 6'%3E%3C/polyline%3E%3C/svg%3E\")\n      16 16,\n    w-resize;\n}\n\n.click-right {\n  right: 0;\n  cursor:\n    url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='none' stroke='%23c9a66b' stroke-width='2'%3E%3Cpolyline points='9 18 15 12 9 6'%3E%3C/polyline%3E%3C/svg%3E\")\n      16 16,\n    e-resize;\n}\n\n.click-area::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 50px;\n  height: 100px;\n  opacity: 0;\n  transition: opacity var(--bv-transition-smooth);\n  pointer-events: none;\n}\n\n.click-left::after {\n  left: 30px;\n  background: radial-gradient(\n    ellipse at left,\n    rgba(201, 166, 107, 0.15),\n    transparent 70%\n  );\n}\n\n.click-right::after {\n  right: 30px;\n  background: radial-gradient(\n    ellipse at right,\n    rgba(201, 166, 107, 0.15),\n    transparent 70%\n  );\n}\n\n.click-area:hover::after {\n  opacity: 1;\n}\n\n/* ===== ë„¤ë¹„ê²Œì´ì…˜ ì»¨íŠ¸ë¡¤ ===== */\n.nav-controls {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 32px;\n  background: var(--bv-page-color);\n  padding: 14px 40px;\n  border-top: 1px solid rgba(201, 166, 107, 0.12);\n  flex-shrink: 0;\n  z-index: 1;\n}\n\n.nav-btn {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 10px;\n  border-radius: 50%;\n  transition: all var(--bv-transition-fast);\n  color: var(--bv-accent-color);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.nav-btn :global(svg) {\n  transition: transform var(--bv-transition-fast);\n}\n\n.nav-btn:hover:not(:disabled) {\n  background: rgba(201, 166, 107, 0.12);\n}\n.nav-btn:hover:not(:disabled) :global(svg) {\n  transform: scale(1.1);\n}\n.nav-btn:active:not(:disabled) :global(svg) {\n  transform: scale(0.95);\n}\n.nav-btn:disabled {\n  opacity: 0.25;\n  cursor: not-allowed;\n}\n\n.page-indicator {\n  font-size: 14px;\n  color: var(--bv-text-color);\n  min-width: 90px;\n  text-align: center;\n  font-weight: 600;\n  letter-spacing: 0.02em;\n}\n\n/* ===== ë„¤ë¹„ê²Œì´ì…˜ ìš°ì¸¡ ë²„íŠ¼ ê·¸ë£¹ ===== */\n.nav-right-buttons {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-left: auto;\n  padding-left: 20px;\n}\n\n.nav-icon-btn {\n  background: none;\n  border: 2px solid var(--bv-accent-color);\n  color: var(--bv-accent-color);\n  padding: 8px 12px;\n  cursor: pointer;\n  border-radius: 8px;\n  transition: all var(--bv-transition-fast);\n  font-size: 13px;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n}\n\n.nav-icon-btn:hover {\n  background: var(--bv-accent-color);\n  color: white;\n}\n\n.nav-icon-btn :global(svg) {\n  width: 18px;\n  height: 18px;\n}\n\n/* ===== ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ===== */\n.dropdown-container {\n  position: relative;\n}\n\n.dropdown-menu {\n  display: none;\n  position: absolute;\n  bottom: calc(100% + 40px);\n  right: 0;\n  background: rgba(255, 255, 255, 0.98);\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  padding: 16px;\n  border-radius: 16px;\n  box-shadow: var(--bv-shadow-strong);\n  min-width: 280px;\n  max-width: 320px;\n  border: 1px solid rgba(201, 166, 107, 0.15);\n  z-index: 200;\n}\n\n.dropdown-menu.active {\n  display: block;\n  animation: dropdownFadeIn 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n@keyframes dropdownFadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px) scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n}\n\n.book-viewer-root[data-theme='dark'] .dropdown-menu {\n  background: rgba(28, 33, 40, 0.98);\n}\n\n.dropdown-header {\n  font-size: 14px;\n  font-weight: 700;\n  color: var(--bv-text-color);\n  padding-bottom: 12px;\n  margin-bottom: 12px;\n  border-bottom: 1px solid var(--bv-divider-color);\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n\n/* ===== ì„¤ì • ì•„ì´í…œ ===== */\n.setting-item {\n  margin-bottom: 16px;\n}\n.setting-item:last-child {\n  margin-bottom: 0;\n}\n\n.setting-item label {\n  display: block;\n  margin-bottom: 8px;\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--bv-font-color);\n  text-transform: uppercase;\n  letter-spacing: 0.06em;\n}\n\n.setting-item input[type='range'] {\n  width: 100%;\n  height: 5px;\n  -webkit-appearance: none;\n  appearance: none;\n  background: #e8e4dc;\n  border-radius: 3px;\n  outline: none;\n  margin-bottom: 6px;\n}\n\n.book-viewer-root[data-theme='dark'] .setting-item input[type='range'] {\n  background: #30363d;\n}\n\n.setting-item input[type='range']::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 18px;\n  height: 18px;\n  background: var(--bv-accent-color);\n  border-radius: 50%;\n  cursor: pointer;\n  box-shadow: 0 2px 6px rgba(201, 166, 107, 0.4);\n  transition: all var(--bv-transition-fast);\n}\n\n.setting-item input[type='range']::-webkit-slider-thumb:hover {\n  transform: scale(1.1);\n}\n\n.setting-item input[type='range']::-moz-range-thumb {\n  width: 18px;\n  height: 18px;\n  background: var(--bv-accent-color);\n  border-radius: 50%;\n  cursor: pointer;\n  border: none;\n}\n\n.setting-item select {\n  width: 100%;\n  padding: 10px 14px;\n  border: 2px solid #e8e4dc;\n  border-radius: 10px;\n  font-size: 13px;\n  background: #fff;\n  cursor: pointer;\n  transition: all var(--bv-transition-fast);\n  appearance: none;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23c9a66b' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: right 10px center;\n  background-size: 16px;\n}\n\n.book-viewer-root[data-theme='dark'] .setting-item select {\n  background-color: #21262d;\n  border-color: #30363d;\n  color: var(--bv-font-color);\n}\n\n.book-viewer-root[data-theme='light'] .setting-item select {\n  color: var(--bv-font-color);\n}\n\n.book-viewer-root[data-theme='sepia'] .setting-item select {\n  color: var(--bv-font-color);\n}\n\n.setting-item select:hover {\n  border-color: var(--bv-accent-color);\n}\n.setting-item select:focus {\n  outline: none;\n  border-color: var(--bv-accent-color);\n  box-shadow: 0 0 0 3px rgba(201, 166, 107, 0.15);\n}\n\n.setting-item span {\n  font-size: 11px;\n  color: var(--bv-text-secondary);\n  font-weight: 500;\n}\n\n.custom-css-btn {\n  width: 100%;\n  padding: 10px 16px;\n  background: var(--bv-accent-color);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-size: 13px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all var(--bv-transition-fast);\n}\n\n.custom-css-btn:hover {\n  background: var(--bv-accent-hover);\n  transform: translateY(-1px);\n}\n\n/* ===== LB ëª¨ë“ˆ ë¦¬ìŠ¤íŠ¸ ===== */\n.lb-modules-list {\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.lb-module-item {\n  padding: 10px 12px;\n  margin-bottom: 6px;\n  background: rgba(201, 166, 107, 0.08);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all var(--bv-transition-fast);\n  font-size: 13px;\n  color: var(--bv-text-color);\n}\n\n.lb-module-item:hover {\n  background: rgba(201, 166, 107, 0.2);\n}\n.lb-module-item:last-child {\n  margin-bottom: 0;\n}\n\n.book-viewer-root[data-theme='dark'] .lb-module-item {\n  background: rgba(212, 165, 116, 0.1);\n}\n\n.book-viewer-root[data-theme='dark'] .lb-module-item:hover {\n  background: rgba(212, 165, 116, 0.2);\n}\n\n/* ===== ëª¨ë‹¬ ===== */\n.modal-overlay {\n  display: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  backdrop-filter: blur(4px);\n  z-index: 1100;\n  justify-content: center;\n  align-items: center;\n}\n\n.modal-overlay.active {\n  display: flex;\n  animation: modalFadeIn 0.3s ease;\n}\n\n@keyframes modalFadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n.modal-content {\n  background: var(--bv-page-color);\n  border-radius: 16px;\n  width: 90%;\n  max-width: 600px;\n  max-height: 80vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--bv-shadow-strong);\n  animation: modalSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.book-viewer-root[data-theme='dark'] .modal-content {\n  background: #1c2128;\n}\n\n@keyframes modalSlideIn {\n  from {\n    opacity: 0;\n    transform: translateY(-20px) scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 24px;\n  border-bottom: 1px solid var(--bv-divider-color);\n}\n\n.modal-header h3 {\n  font-size: 18px;\n  font-weight: 700;\n  color: var(--bv-text-color);\n  margin: 0;\n}\n\n.modal-close {\n  background: none;\n  border: none;\n  font-size: 24px;\n  color: var(--bv-text-secondary);\n  cursor: pointer;\n  padding: 4px 8px;\n  border-radius: 6px;\n  transition: all var(--bv-transition-fast);\n}\n\n.modal-close:hover {\n  background: rgba(0, 0, 0, 0.05);\n  color: var(--bv-text-color);\n}\n\n.book-viewer-root[data-theme='dark'] .modal-close:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.modal-body {\n  flex: 1;\n  padding: 20px 24px;\n  overflow: auto;\n}\n\n.modal-body textarea {\n  width: 100%;\n  height: 300px;\n  padding: 16px;\n  border: 2px solid var(--bv-divider-color);\n  border-radius: 12px;\n  font-family: 'Consolas', 'Monaco', monospace;\n  font-size: 14px;\n  line-height: 1.6;\n  resize: vertical;\n  background: #fafafa;\n  color: var(--bv-text-color);\n}\n\n.book-viewer-root[data-theme='dark'] .modal-body textarea {\n  background: #0d1117;\n  border-color: #30363d;\n}\n\n.modal-body textarea:focus {\n  outline: none;\n  border-color: var(--bv-accent-color);\n  box-shadow: 0 0 0 3px rgba(201, 166, 107, 0.15);\n}\n\n.modal-footer {\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n  padding: 16px 24px;\n  border-top: 1px solid var(--bv-divider-color);\n}\n\n.modal-btn {\n  padding: 10px 20px;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all var(--bv-transition-fast);\n}\n\n.modal-btn.primary {\n  background: var(--bv-accent-color);\n  color: white;\n  border: none;\n}\n\n.modal-btn.primary:hover {\n  background: var(--bv-accent-hover);\n}\n\n.modal-btn.secondary {\n  background: transparent;\n  color: var(--bv-text-secondary);\n  border: 2px solid var(--bv-divider-color);\n}\n\n.modal-btn.secondary:hover {\n  border-color: var(--bv-text-secondary);\n  color: var(--bv-text-color);\n}\n\n/* ===== ë°˜ì‘í˜• ===== */\n@media (max-width: 1200px) {\n  .page-content {\n    padding: 50px 40px 40px;\n  }\n  .text-content {\n    font-size: 16px;\n  }\n}\n\n@media (max-width: 900px) {\n  .book-header {\n    padding: 10px 16px;\n  }\n  .header-thumbnail {\n    width: 32px;\n    height: 32px;\n    min-width: 32px;\n    border-radius: 6px;\n  }\n  .header-name {\n    font-size: 14px;\n  }\n  .header-buttons button {\n    padding: 4px;\n  }\n  .header-buttons button :global(svg) {\n    width: 16px;\n    height: 16px;\n  }\n  .page-content {\n    padding: 40px 30px 35px;\n  }\n  .book-spine {\n    width: 4px;\n  }\n  .nav-controls {\n    padding: 12px 20px;\n    gap: 20px;\n  }\n}\n";ja[Xn]="src/ui/components/viewer/pc/CustomCssModal.svelte";var La=Or(Kr('<div><div class="modal-content"><div class="modal-header"><h3>ì‚¬ìš©ìž CSS</h3> <button class="modal-close">&times;</button></div> <div class="modal-body"><textarea placeholder="/* ì‚¬ìš©ìž ì •ì˜ CSSë¥¼ ìž…ë ¥í•˜ì„¸ìš” */"></textarea></div> <div class="modal-footer"><button class="modal-btn secondary">ì´ˆê¸°í™”</button> <button class="modal-btn primary">ì ìš©</button></div></div></div>'),ja[Xn],[[44,0,[[45,2,[[46,4,[[47,6],[48,6]]],[51,4,[[52,6]]],[58,4,[[59,6],[62,6]]]]]]]]);function ja(n,t){co(new.target),ut(t,!0,ja);let e=vi(t,"isOpen",3,!1),r=vi(t,"initialCss",3,""),o=Qn(ne(""),"cssValue");We(()=>{e()&&ee(o,r()||Ba,!0)});var i={...fo()},a=La();let l;Fr("keydown",ve,function(n){var e;he(n.key,"Escape")&&(null==(e=t.onClose)||e.call(t))}),a.__click=function(n){var e;he(n.target,n.currentTarget)&&(null==(e=t.onClose)||e.call(t))};var s=Ce(a),u=Ce(s);Ie(Ce(u),2).__click=function(...n){Yr(()=>t.onClose,this,n,ja,[48,43])};var c=Ie(u,2),f=Ce(c),d=Ce(Ie(c,2));return d.__click=function(){var n;ee(o,Ba,!0),null==(n=t.onReset)||n.call(t)},Ie(d,2).__click=function(){var n;null==(n=t.onApply)||n.call(t,Cr(o))},Te(()=>l=Po(a,1,"modal-overlay",null,l,{active:e()})),function(n,t,e=t){var r=new WeakSet;Ne(n,"input",async o=>{"checkbox"===n.type&&Gn();var i=o?n.defaultValue:n.value;if(i=oi(n)?ii(i):i,e(i),null!==wt&&r.add(wt),await xr(),i!==(i=t())){var a=n.selectionStart,l=n.selectionEnd,s=n.value.length;if(n.value=i??"",null!==l){var u=n.value.length;a===l&&l===s&&u>s?(n.selectionStart=u,n.selectionEnd=u):(n.selectionStart=a,n.selectionEnd=Math.min(l,u))}}}),null==Ar(t)&&n.value&&(e(oi(n)?ii(n.value):n.value),null!==wt&&r.add(wt)),je(()=>{"checkbox"===n.type&&Gn();var e=t();if(n===document.activeElement){var o=xt??wt;if(r.has(o))return}oi(n)&&e===ii(n.value)||("date"!==n.type||e||n.value)&&e!==n.value&&(n.value=e??"")})}(f,function(){return Cr(o)},function(n){ee(o,n)}),eo(n,a),ct(i)}Dr(["click"]),Ga[Xn]="src/ui/components/viewer/pc/ViewerToast.svelte";var Ta=Or(Kr('<div><div class="toast-content svelte-wkpsvb"> </div></div>'),Ga[Xn],[[42,2,[[43,4]]]]);const Oa={hash:"svelte-wkpsvb",code:"\n  .viewer-toast.svelte-wkpsvb {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 1000;\n    pointer-events: none;\n    opacity: 0;\n    transition: opacity 0.3s ease;\n  }\n\n  .viewer-toast.showing.svelte-wkpsvb {\n    opacity: 1;\n  }\n\n  .toast-content.svelte-wkpsvb {\n    background: rgba(0, 0, 0, 0.8);\n    color: white;\n    padding: 16px 32px;\n    border-radius: 12px;\n    font-size: 15px;\n    font-weight: 500;\n    text-align: center;\n    backdrop-filter: blur(8px);\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n    max-width: 400px;\n  }\n\n  .book-viewer-root[data-theme='light'] .toast-content.svelte-wkpsvb {\n    background: rgba(50, 50, 50, 0.9);\n  }\n\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVmlld2VyVG9hc3Quc3ZlbHRlIiwic291cmNlcyI6WyJWaWV3ZXJUb2FzdC5zdmVsdGUiXSwic291cmNlc0NvbnRlbnQiOlsiPHNjcmlwdD5cbiAgLyoqXG4gICAqIFZpZXdlclRvYXN0IC0g67ew7Ja0IOuCtCDsnqzsgqzsmqkg6rCA64ql7ZWcIO2GoOyKpO2KuCDslYzrprwg7Lu07Y+s64SM7Yq4XG4gICAqL1xuICBpbXBvcnQgeyBvbk1vdW50IH0gZnJvbSAnc3ZlbHRlJztcblxuICBsZXQge1xuICAgIG1lc3NhZ2UgPSAnJyxcbiAgICBkdXJhdGlvbiA9IDIwMDAsXG4gICAgdmlzaWJsZSA9IGZhbHNlLFxuICAgIG9uSGlkZSA9ICgpID0+IHt9LFxuICB9ID0gJHByb3BzKCk7XG5cbiAgbGV0IGlzU2hvd2luZyA9ICRzdGF0ZShmYWxzZSk7XG4gIGxldCBoaWRlVGltZXIgPSBudWxsO1xuXG4gICRlZmZlY3QoKCkgPT4ge1xuICAgIGlmICh2aXNpYmxlKSB7XG4gICAgICBpc1Nob3dpbmcgPSB0cnVlO1xuXG4gICAgICAvLyDquLDsobQg7YOA7J2066i4IOygleumrFxuICAgICAgaWYgKGhpZGVUaW1lcikgY2xlYXJUaW1lb3V0KGhpZGVUaW1lcik7XG5cbiAgICAgIC8vIGR1cmF0aW9uIO2bhCDsnpDrj5kg7Iio6rmAXG4gICAgICBoaWRlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaXNTaG93aW5nID0gZmFsc2U7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIG9uSGlkZSgpO1xuICAgICAgICB9LCAzMDApOyAvLyBmYWRlIG91dCDslaDri4jrqZTsnbTshZgg7Iuc6rCEXG4gICAgICB9LCBkdXJhdGlvbik7XG4gICAgfVxuICB9KTtcblxuICBvbk1vdW50KCgpID0+IHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGhpZGVUaW1lcikgY2xlYXJUaW1lb3V0KGhpZGVUaW1lcik7XG4gICAgfTtcbiAgfSk7XG48L3NjcmlwdD5cblxueyNpZiB2aXNpYmxlfVxuICA8ZGl2IGNsYXNzPVwidmlld2VyLXRvYXN0XCIgY2xhc3M6c2hvd2luZz17aXNTaG93aW5nfT5cbiAgICA8ZGl2IGNsYXNzPVwidG9hc3QtY29udGVudFwiPlxuICAgICAge21lc3NhZ2V9XG4gICAgPC9kaXY+XG4gIDwvZGl2Plxuey9pZn1cblxuPHN0eWxlPlxuICAudmlld2VyLXRvYXN0IHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiA1MCU7XG4gICAgbGVmdDogNTAlO1xuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICAgIHotaW5kZXg6IDEwMDA7XG4gICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgb3BhY2l0eTogMDtcbiAgICB0cmFuc2l0aW9uOiBvcGFjaXR5IDAuM3MgZWFzZTtcbiAgfVxuXG4gIC52aWV3ZXItdG9hc3Quc2hvd2luZyB7XG4gICAgb3BhY2l0eTogMTtcbiAgfVxuXG4gIC50b2FzdC1jb250ZW50IHtcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuOCk7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIHBhZGRpbmc6IDE2cHggMzJweDtcbiAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoOHB4KTtcbiAgICBib3gtc2hhZG93OiAwIDRweCAyMHB4IHJnYmEoMCwgMCwgMCwgMC4zKTtcbiAgICBtYXgtd2lkdGg6IDQwMHB4O1xuICB9XG5cbiAgOmdsb2JhbCguYm9vay12aWV3ZXItcm9vdFtkYXRhLXRoZW1lPSdsaWdodCddKSAudG9hc3QtY29udGVudCB7XG4gICAgYmFja2dyb3VuZDogcmdiYSg1MCwgNTAsIDUwLCAwLjkpO1xuICB9XG48L3N0eWxlPlxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiIiLCJpZ25vcmVMaXN0IjpbXX0= */"};function Ga(n,t){co(new.target),ut(t,!0,Ga),Wo(n,Oa);let e=vi(t,"message",3,""),r=vi(t,"duration",3,2e3),o=vi(t,"visible",3,!1),i=vi(t,"onHide",3,()=>{}),a=Qn(ne(!1),"isShowing"),l=null;We(()=>{o()&&(ee(a,!0),l&&clearTimeout(l),l=setTimeout(()=>{ee(a,!1),setTimeout(()=>{i()()},300)},r()))}),bi(()=>()=>{l&&clearTimeout(l)});var s={...fo()},u=to(),c=ke(u),f=n=>{var t=Ta();let r;var o=Ce(t),i=Ce(o);Te(()=>{r=Po(t,1,"viewer-toast svelte-wkpsvb",null,r,{showing:Cr(a)}),io(i,e())}),eo(n,t)};return at(()=>ho(c,n=>{o()&&n(f)}),"if",Ga,41,0),eo(n,u),ct(s)}class Pa{constructor(n={}){this.splittableTags=n.splittableTags||["p"],this.minHeightRatio=n.minHeightRatio||.9}isSplittable(n){var t;const e=null==(t=n.tagName)?void 0:t.toLowerCase();if(!this.splittableTags.includes(e))return!1;return!n.querySelector("mark, strong, em, a, span[class], code")}splitElement(n,t,e){if(!this.isSplittable(n))return[n.cloneNode(!0)];const r=n.cloneNode(!0);t.innerHTML="",t.appendChild(r);return t.scrollHeight<=e?[n.cloneNode(!0)]:this._splitBySentence(n,t,e)}_splitBySentence(n,t,e){const r=n.tagName.toLowerCase(),o=n.innerText||n.textContent||"",i=this._splitIntoSentences(o);if(i.length<=1)return this._splitByWords(n,t,e);const a=[];let l=[];for(const s of i){const o=[...l,s].join(""),i=document.createElement(r);if(Array.from(n.attributes).forEach(n=>{i.setAttribute(n.name,n.value)}),i.textContent=o,t.innerHTML="",t.appendChild(i),t.scrollHeight<=e)l.push(s);else{if(l.length>0){const t=document.createElement(r);Array.from(n.attributes).forEach(n=>{t.setAttribute(n.name,n.value)}),t.textContent=l.join(""),a.push(t)}l=[s]}}if(l.length>0){const t=document.createElement(r);Array.from(n.attributes).forEach(n=>{t.setAttribute(n.name,n.value)}),t.textContent=l.join(""),a.push(t)}return a.length>0?a:[n.cloneNode(!0)]}_splitIntoSentences(n){return n.split(new RegExp("(?<=[.!?ã€‚ï¼ï¼Ÿ])\\s*")).filter(n=>n.length>0)}_splitByWords(n,t,e){const r=n.tagName.toLowerCase(),o=(n.innerText||n.textContent||"").split(/(\s+)/).filter(n=>n.length>0);if(0===o.length)return[n.cloneNode(!0)];const i=[];let a=0;for(;a<o.length;){let l=a+1,s=a+1;for(;l<=o.length;){const i=o.slice(a,l).join(""),u=document.createElement(r);if(Array.from(n.attributes).forEach(n=>{u.setAttribute(n.name,n.value)}),u.textContent=i,t.innerHTML="",t.appendChild(u),!(t.scrollHeight<=e))break;s=l,l++}const u=document.createElement(r);Array.from(n.attributes).forEach(n=>{u.setAttribute(n.name,n.value)}),u.textContent=o.slice(a,s).join(""),i.push(u),a=s}return i}static createMeasureContainer(n){const t=document.createElement("div"),e=getComputedStyle(n);return t.style.cssText=`\n      position: absolute;\n      visibility: hidden;\n      pointer-events: none;\n      width: ${n.clientWidth}px;\n      padding: ${e.padding};\n      font-size: ${e.fontSize};\n      line-height: ${e.lineHeight};\n      font-family: ${e.fontFamily};\n      overflow: hidden;\n    `,t}}function Xa(n,t,e){const r=[],o=Array.from(n.children),i=t.clientHeight;let a=[];return o.forEach(n=>{const o=n.cloneNode(!0);if(t.innerHTML="",t.appendChild(o),n.querySelector("img")||"IMG"===n.tagName||"DIV"===n.tagName&&n.classList.contains("x-risu-image-container"))return a.length>0&&(r.push(Za(a)),a=[]),r.push(Za([n.cloneNode(!0)])),void(t.innerHTML="");t.innerHTML="",a.forEach(n=>{t.appendChild(n.cloneNode(!0))}),t.appendChild(o);const l=t.scrollHeight>t.clientHeight;if(l&&e.isSplittable(n)){a.length>0&&(r.push(Za(a)),a=[]),t.innerHTML="";return void e.splitElement(n,t,i).forEach(n=>{(n=>{const e=n.cloneNode(!0);t.appendChild(e),t.scrollHeight>t.clientHeight&&a.length>0&&(r.push(Za(a)),a=[],t.innerHTML="",t.appendChild(e)),a.push(n)})(n)})}l&&a.length>0&&(r.push(Za(a)),a=[],t.innerHTML="",t.appendChild(o)),a.push(n.cloneNode(!0))}),a.length>0&&r.push(Za(a)),r}function Za(n){const t=document.createElement("div");return n.forEach(n=>t.appendChild(n)),t.innerHTML}function Ha(){return new Promise(n=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})})}const Fa="bookViewerSettings",Da="bookViewerCustomCss",Va={fontSize:17,lineHeight:1.9,theme:"light"};function Ua(){try{const n=localStorage.getItem(Fa);if(n){const t=JSON.parse(n);return{fontSize:t.fontSize??Va.fontSize,lineHeight:t.lineHeight??Va.lineHeight,theme:t.theme??Va.theme}}}catch(n){console.error("[SettingsManager] Failed to load settings:",n)}return{...Va}}function Ya(n){const t=document.getElementById("book-viewer-custom-css");if(t&&t.remove(),!n||""===n.trim())return null;const e=document.createElement("style");return e.id="book-viewer-custom-css",e.textContent=n,document.head.appendChild(e),e}qa[Xn]="src/ui/components/viewer/pc/PCBookViewer.svelte";var Ja=Or(Kr('<div class="book-viewer-root risu-chat chat-message-container"><!> <!> <!> <!> <!></div>'),qa[Xn],[[445,0]]);function qa(n,t){co(new.target),ut(t,!0,qa);let e=vi(t,"chatHtml",7,""),r=vi(t,"chatIndex",3,0),o=vi(t,"chatPage",3,0),i=vi(t,"chaId",3,null),a=vi(t,"initialLoading",3,!1),l=Qn(ne(ue([])),"pages"),s=Qn(ne(0),"currentPage"),u=Qn(ne(ue({fontSize:17,lineHeight:1.9,theme:"dark"})),"settings"),c=Qn(ne(ue({thumbnailUrl:"",name:"",chatIndex:0,buttons:[]})),"headerInfo"),f=Qn(ne(ue([])),"lbModules"),d=Qn(ne(!1),"isCssModalOpen"),p=Qn(ne(""),"customCss"),h=Qn(ne(null),"originalContent"),v=Qn(ne(""),"lastKnownHtml"),g=Qn(ne(ue({position:0,total:0,isFirst:!0,isLast:!0})),"chatIndexPosition"),b=Qn(ne(ue([])),"visibleChatIndices"),m=Qn(ne(ue(a())),"isLoading"),y=Qn(ne(ue(a()?"ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...":"")),"loadingMessage"),_=Qn(ne(!1),"toastVisible"),w=Qn(ne(""),"toastMessage"),x=new Pa({splittableTags:["p"]}),C=Qn(ne(null),"leftContentRef"),k=Qn(ne(null),"rootElement"),I=null,A=null,S=null,$=null,N=Qn(Zt(()=>Math.ceil(Cr(l).length/2)),"totalSpreads"),M=Qn(Zt(()=>2*Cr(s)),"leftIndex"),z=Qn(Zt(()=>2*Cr(s)+1),"rightIndex"),E=Qn(Zt(()=>Cr(l)[Cr(M)]||""),"leftContent"),R=Qn(Zt(()=>Cr(l)[Cr(z)]||""),"rightContent"),W=Qn(Zt(()=>Cr(l)[Cr(M)]?Cr(M)+1:0),"leftPageNum"),B=Qn(Zt(()=>Cr(l)[Cr(z)]?Cr(z)+1:0),"rightPageNum"),L=Qn(Zt(()=>he(Cr(s),0)),"prevDisabled"),j=Qn(Zt(()=>Cr(z)>=Cr(l).length-1),"nextDisabled");function T(){ee(b,na(),!0),ee(g,function(n){const t=na();if(0===t.length)return{position:0,total:0,isFirst:!0,isLast:!0};const e=t.indexOf(n);if(-1===e){const e=t.findIndex(t=>t>n),r=-1===e?t.length:e;return{position:0,total:t.length,isFirst:0===r,isLast:r>=t.length}}return{position:e+1,total:t.length,isFirst:0===e,isLast:e===t.length-1}}(r()),!0)}async function O(){if(!e())return;ee(v,e(),!0);const n=(new DOMParser).parseFromString(e(),"text/html");ee(c,function(n){const t={thumbnailUrl:"",name:"",chatIndex:0,buttons:[]},e=n.querySelector(".shadow-lg.bg-textcolor2.rounded-md");if(e){const n=e.getAttribute("style");if(n){const e=n.match(/background:\s*url\(['"]?([^'")\s]+)['"]?\)/);e&&e[1]&&(t.thumbnailUrl=e[1])}}const r=n.querySelector(".flexium.items-center.chat-width");if(r){const n=r.querySelector("span.chat-width");n&&(t.name=n.textContent.trim())}const o=n.querySelector(".risu-ebooklike-viewer-chat-message-bot-buttons");o&&[".button-icon-copy",".button-icon-tts",".button-icon-edit",".button-icon-translate"].forEach(n=>{const e=o.querySelector(n);e&&t.buttons.push(e.cloneNode(!0))});const i=n.querySelector(".risu-chat");if(i){const n=i.getAttribute("data-chat-index");n&&(t.chatIndex=parseInt(n,10))}return t}(n),!0),Cr(c).chatIndex=r(),ee(f,function(n){const t=[];return n.querySelectorAll(".x-risu-lb-module-root").forEach(n=>{var e,r;const o=n.getAttribute("data-id")||"",i=n.querySelector(".x-risu-lb-opener span"),a=n.querySelector(".x-risu-lb-nai-opener span"),l=(null==(e=null==i?void 0:i.textContent)?void 0:e.trim())||(null==(r=null==a?void 0:a.textContent)?void 0:r.trim())||o||"LB Module";t.push({type:"module-root",dataId:o,label:l,element:n.cloneNode(!0)})}),n.querySelectorAll(".x-risu-lb-nai-btn").forEach(n=>{var e;if(!n.closest(".x-risu-lb-module-root")){const r=n.getAttribute("risu-btn")||"",o=(null==(e=n.textContent)?void 0:e.trim())||r||"NAI Button";t.push({type:"nai-btn",dataId:r,label:o,element:n.cloneNode(!0)})}}),t}(n),!0);const t=n.querySelector(".chattext");t&&(!function(n){const t=Array.from(n.childNodes);let e=[];const r=()=>{if(0===e.length)return;const t=e.map(n=>n.nodeType===Node.TEXT_NODE?n.textContent:n.outerHTML).join("");if(""===t.trim())return e.forEach(n=>{n.parentNode&&n.parentNode.removeChild(n)}),void(e=[]);const r=document.createElement("p");r.innerHTML=t;const o=e[0];n.insertBefore(r,o),e.forEach(n=>{n.parentNode&&n.parentNode.removeChild(n)}),e=[]},o=["p","div","ul","ol","li","h1","h2","h3","h4","h5","h6","table","blockquote","pre","hr","details","figure","section","article","header","footer","nav","aside","title"];t.forEach(n=>{if(n.nodeType===Node.TEXT_NODE)(""!==n.textContent.trim()||e.length>0)&&e.push(n);else if(n.nodeType===Node.ELEMENT_NODE){const t=n.tagName.toLowerCase();o.includes(t)?r():e.push(n)}}),r()}(t),ee(h,t.cloneNode(!0),!0),(await Tt(Ha()))(),(await Tt(G()))(),Cr(m)&&setTimeout(()=>{ee(m,!1),ee(y,"")},100))}async function G(){if(!Cr(h))return;const n=document.querySelector(".book-viewer-root .text-content");if(!n){(await Tt(Ha()))();if(!document.querySelector(".book-viewer-root .text-content"))return}const t=function(n){const t=document.createElement("div");if(t.className="text-content chattext",t.style.position="absolute",t.style.visibility="hidden",t.style.pointerEvents="none",t.style.overflow="hidden",n){const e=n.getBoundingClientRect(),r=window.getComputedStyle(n);t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.padding=r.padding,t.style.fontSize=r.fontSize,t.style.lineHeight=r.lineHeight,t.style.fontFamily=r.fontFamily}return t}(n||document.body);document.body.appendChild(t);try{ee(l,Xa(Cr(h).cloneNode(!0),t,x),!0)}finally{document.body.removeChild(t)}}function P(){I&&clearTimeout(I),I=setTimeout(()=>{!async function(){if(!Cr(h))return;const n=2*Cr(s);ee(l,[],!0),ee(s,0),(await Tt(Ha()))(),(await Tt(G()))();const t=Math.max(0,Math.ceil(Cr(l).length/2)-1);ee(s,Math.min(Math.floor(n/2),t),!0)}()},300)}function X(){const n=Qi(r());if(n){const t=n.outerHTML;he(t,Cr(v),!1)&&(ee(v,t,!0),e(t),O())}}function Z(n){ee(w,n,!0),ee(_,!0)}function H(){ee(_,!1),ee(w,"")}function F(){Cr(z)>=Cr(l).length-1?U():ie(s)}function D(){he(Cr(s),0)?V():ie(s,-1)}function V(){const{index:n,isFirst:t}=ta(r(),"prev");he(n,null,!1)?tl(n,!1,!0):t&&Z("í˜„ìž¬ ì±„íŒ…ì˜ ì²« ë²ˆì§¸ íŽ˜ì´ì§€ìž…ë‹ˆë‹¤")}function U(){const{index:n,isLast:t}=ta(r(),"next");he(n,null,!1)?tl(n,!1,!0):t&&Z("í˜„ìž¬ ì±„íŒ…ì˜ ë§ˆì§€ë§‰ íŽ˜ì´ì§€ìž…ë‹ˆë‹¤")}function Y(n){ee(u,n,!0),function(n){try{const t={...Ua(),...n};localStorage.setItem(Fa,JSON.stringify(t))}catch(t){console.error("[SettingsManager] Failed to save settings:",t)}}(Cr(u)),P()}function J(){ee(d,!0)}function q(n){ee(p,n,!0),function(n){try{n?localStorage.setItem(Da,n):localStorage.removeItem(Da)}catch(t){console.error("[SettingsManager] Failed to save custom CSS:",t)}}(n),Ya(n),ee(d,!1),P()}function K(){ee(p,""),function(){const n=document.getElementById("book-viewer-custom-css");n&&n.remove(),localStorage.removeItem(Da)}(),P()}function Q(n){const t=n.dataId||n.risuBtn;for(let e=0;e<Cr(l).length;e++){const n=Cr(l)[e];if(n.includes(`data-id="${t}"`)||n.includes(`risu-btn="${t}"`)){ee(s,Math.floor(e/2),!0);break}}}We(()=>{Cr(k)&&(Cr(k).style.setProperty("--bv-font-size",`${Cr(u).fontSize}px`),Cr(k).style.setProperty("--bv-line-height",String(Cr(u).lineHeight)),Cr(k).setAttribute("data-theme",Cr(u).theme))}),bi(async()=>{ee(u,Ua(),!0),ee(p,function(){try{return localStorage.getItem(Da)||""}catch(n){return console.error("[SettingsManager] Failed to load custom CSS:",n),""}}(),!0),Cr(p)&&Ya(Cr(p)),T(),(await Tt(Ha()))(),(await Tt(O()))(),A=setInterval(X,2e3);const n=xi.getInstance();S=n.subscribeToChar(n=>({chatPage:null==n?void 0:n.chatPage,chaId:null==n?void 0:n.chaId}),n=>{(he(n.chatPage,o(),!1)||he(n.chaId,i(),!1))&&(console.log("[PCBookViewer] Chat page or character changed, reloading..."),tl(null,!1))},500),$=n.subscribeToChar(n=>{var t,e,r;return null==(r=null==(e=null==(t=null==n?void 0:n.chats)?void 0:t[n.chatPage])?void 0:e.message)?void 0:r.length},n=>{const t=na();if(he(t.length,Cr(b).length,!1)){const n=t.filter(n=>!Cr(b).includes(n));n.length>0&&console.log(...gi("log","[PCBookViewer] New chat indices detected:",n)),ee(b,t,!0),T()}},1e3)}),mi(()=>{I&&clearTimeout(I),A&&clearInterval(A),S&&S(),$&&$();const n=document.getElementById("book-viewer-custom-css");n&&n.remove()});var nn={...fo()},tn=Ja();Fr("keydown",ve,function(n){var e;if(Cr(d))he(n.key,"Escape")&&ee(d,!1);else{if(he(n.key,"Escape",!1)){const n=document.activeElement;if(n&&(he(n.tagName,"TEXTAREA")||he(n.tagName,"INPUT")||n.isContentEditable))return;const t=window.getSelection();if(t&&t.toString().length>0)return}he(n.key,"ArrowRight")||he(n.key,"PageDown")||he(n.key," ")?(n.preventDefault(),F()):he(n.key,"ArrowLeft")||he(n.key,"PageUp")?(n.preventDefault(),D()):he(n.key,"Escape")&&(null==(e=t.onClose)||e.call(t))}}),Fr("resize",ve,function(){P()});var en=Ce(tn);at(()=>ha(en,{get thumbnailUrl(){return Cr(c).thumbnailUrl},get name(){return Cr(c).name},get chatIndex(){return Cr(c).chatIndex},get buttons(){return Cr(c).buttons},get chatIndexPosition(){return Cr(g)},onPrevChat:V,onNextChat:U,get onClose(){return t.onClose}}),"component",qa,453,2,{componentTag:"BookHeader"});var rn=Ie(en,2);at(()=>Ia(rn,{get leftContent(){return Cr(E)},get rightContent(){return Cr(R)},get leftPageNum(){return Cr(W)},get rightPageNum(){return Cr(B)},onPrevPage:D,onNextPage:F,get isLoading(){return Cr(m)},get loadingMessage(){return Cr(y)},get leftContentRef(){return Cr(C)},set leftContentRef(n){ee(C,n,!0)}}),"component",qa,464,2,{componentTag:"BookPages"});var on=Ie(rn,2);at(()=>Wa(on,{get currentSpread(){return Cr(s)},get totalSpreads(){return Cr(N)},onPrev:D,onNext:F,get prevDisabled(){return Cr(L)},get nextDisabled(){return Cr(j)},get settings(){return Cr(u)},onSettingsChange:Y,onOpenCustomCss:J,get lbModules(){return Cr(f)},onLBModuleClick:Q}),"component",qa,476,2,{componentTag:"NavControls"});var an=Ie(on,2);at(()=>ja(an,{get isOpen(){return Cr(d)},get initialCss(){return Cr(p)},onApply:q,onReset:K,onClose:()=>ee(d,!1)}),"component",qa,490,2,{componentTag:"CustomCssModal"});var ln=Ie(an,2);return at(()=>Ga(ln,{get message(){return Cr(w)},get visible(){return Cr(_)},duration:2e3,onHide:H}),"component",qa,498,2,{componentTag:"ViewerToast"}),li(tn,n=>ee(k,n),()=>Cr(k)),Te(()=>{Qo(tn,"data-chat-index",r()),Qo(tn,"data-chat-page",o()),Qo(tn,"data-char-id",i()),Qo(tn,"data-theme",Cr(u).theme)}),eo(n,tn),ct(nn)}const Ka="pc-book-viewer",Qa="pc-viewer";let nl=null;function tl(n=null,t=!0,e=!1){if(r=Ka,Ii.has(r)&&(el(),t))return!0;var r;try{const t=xi.getInstance(),r=null!=n?Number(n):t.getLastChatIndex()-1,o=Qi(r);if(!o)return console.warn("[PCViewer] Chat element not found for index:",r),!1;const i=qi(Ji.chatScreen.displayContainer);if(!i)return console.warn("[PCViewer] Display container not found"),!1;nl=i,$i(i,{overflow:"hidden"},Qa);$i(qi(Ji.chatScreen.root),{overflow:"hidden"},Qa);return!!Ai({id:Ka,component:qa,target:i,props:{chatHtml:o.outerHTML,chatIndex:r,chatPage:t.getCurrentChatPage(),chaId:t.getChaId(),onClose:el,initialLoading:e},useContents:!1})}catch(o){return console.error("[PCViewer] Failed to open:",o),!1}}function el(){if(nl){Ni(nl,Qa);Ni(qi(Ji.chatScreen.root),Qa),nl=null}return Si(Ka)}ol[Xn]="src/ui/components/BookButton.svelte";var rl=Or(Kr('<button class="flex justify-center border-y border-darkborderc items-center text-gray-100 p-3 peer-focus:border-textcolor hover:bg-blue-500 transition-colors button-icon-ebook" title="ì´ë¶ ë¦¬ìˆ˜ ê¸°ë¦½í•˜ì‹œì˜¤"><!></button>'),ol[Xn],[[22,0]]);function ol(n,t){co(new.target),ut(t,!0,ol);let e=Qn(ne("44px"),"inputHeight");bi(()=>{const n=qi(Ji.chatScreen.textarea);n&&ee(e,`${n.scrollHeight}px`)});var r={...fo()},o=rl();let i;o.__click=function(n){n.stopPropagation(),tl()};var a=Ce(o);return at(()=>aa(a,{}),"component",ol,28,2,{componentTag:"Book"}),Te(()=>i=Zo(o,"",i,{height:Cr(e)})),eo(n,o),ct(r)}Dr(["click"]),al[Xn]="src/ui/components/SmallBookButton.svelte";var il=Or(Kr('<button class="ml-2 hover:text-blue-500 transition-colors button-small-book" title="ì´ë¶ ë·°ì–´ë¡œ ë³´ê¸°"><!></button>'),al[Xn],[[13,0]]);function al(n,t){co(new.target),ut(t,!0,al);var e={...fo()},r=il();r.__click=function(n){n.stopPropagation(),tl(t.chatIndex)};var o=Ce(r);return at(()=>ia(o,{size:20}),"component",al,18,2,{componentTag:"BookOpen"}),eo(n,r),ct(e)}function ll(n,t){co(new.target),ut(t,!0,ll);let e=Qn(ne(null),"risuAPI"),r=Qn(ne(null),"observer");const o=Yi.debounce(function(){const n=qi(Ji.chatScreen.inputContainer),t=qi(Ji.chatScreen.sendButton);Yi.isNil(n)||Ai({id:"book-button",component:ol,target:n,anchor:t});const e=Ki(Ji.chatMessage.botButtonDiv);Yi.isNil(e)||e.forEach(n=>{Ai({id:"small-book-button",component:al,target:n,anchor:qi(Ji.chatMessage.copyButton,n),props:{chatIndex:function({node:n,maxDepth:t=10}){var e;return n&&n instanceof Node?(n instanceof Element||n.parentElement,null==(e=n.closest(".risu-chat").dataset)?void 0:e.chatIndex):null}({node:n})}})});qi(Ji.chatScreen.burgerMenu)},100);return bi(()=>{ee(e,xi.getInstance(),!0),Yi.isNil(Cr(e))?console.log(`[${yi}] RisuAPI is not initialized`):(!function(){Yi.isNil(Cr(r))||Cr(r).disconnect();ee(r,new MutationObserver(()=>{o()}),!0),Cr(r).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]}),o()}(),console.log(`[${yi}] plugin loaded`))}),mi(()=>{Yi.isNil(Cr(r))||Cr(r).disconnect(),Si("book-button"),o.cancel(),console.log(`${yi} ì–¸ë¡œë“œ`)}),ct({...fo()})}Dr(["click"]),ll[Xn]="src/App.svelte",(async()=>{Promise.resolve().then(()=>fl).then(({initHotReload:n})=>{n(),console.log(`[${yi}] ðŸ”¥ Hot Reload enabled`)}).catch(n=>{console.warn("[App] Hot reload initialization failed:",n)});try{const n=xi.getInstance(globalThis.__pluginApis__);if(!(await n.initialize()))return void console.error(`[${yi}] Failed to initialize RisuAPI`);Zi({silent:!0}).catch(n=>{console.warn("[App] Update check failed:",n)});const t=document.createElement("div");t.id=`${yi}-root`,document.body.appendChild(t);const e=ao(ll,{target:t});console.log(`${yi} v${_i} loaded`),n.onUnload(()=>{uo(e),t.remove()})}catch(n){console.error(`[${yi}] Initialization failed:`,n)}})();const sl="wss://ws.noelkim12.dev/ws";class ul{constructor(){this.ws=null,this.reconnectAttempts=0,this.reconnectTimeout=null,this.isIntentionallyClosed=!1,this.errorLogCount=0}connect(){if(this.ws&&this.ws.readyState===WebSocket.OPEN)console.log(`[${yi}:HotReload] Already connected`);else try{this.errorLogCount<3&&console.log(`[${yi}:HotReload] Connecting to dev server:`,sl),this.ws=new WebSocket(sl),this.ws.onopen=()=>{console.log(`[${yi}:HotReload] âœ… Connected to dev server`),this.reconnectAttempts=0,this.errorLogCount=0},this.ws.onmessage=n=>{this.handleMessage(n.data)},this.ws.onclose=n=>{this.errorLogCount<3?(console.log(`[${yi}:HotReload] Disconnected (code: ${n.code}, reason: ${n.reason||"unknown"})`),this.errorLogCount++):3===this.errorLogCount&&(console.log(`[${yi}:HotReload] Connection errors suppressed (max logs reached). Retrying silently...`),this.errorLogCount++),this.isIntentionallyClosed||this.scheduleReconnect()},this.ws.onerror=n=>{}}catch(n){this.errorLogCount<3&&this.errorLogCount++,this.scheduleReconnect()}}handleMessage(n){try{const t=JSON.parse(n);switch(t.type){case"connected":console.log(`[${yi}:HotReload] Server message:`,t.message);break;case"reload":console.log(`[${yi}:HotReload] ðŸ“¦ Update received (${t.file}, ${t.size} bytes)`),this.handleReload(t.scriptContent);break;case"pong":break;default:console.warn(`[${yi}:HotReload] Unknown message type:`,t.type)}}catch(t){console.error(`[${yi}:HotReload] Failed to parse message:`,t)}}extractPluginName(n){try{const t=/\/\/@name (.+?)\n/,e=n.match(t);return e?e[1].trim():null}catch(t){return console.error(`[${yi}:HotReload] Failed to extract plugin name:`,t),null}}async handleReload(n){var t;try{console.log(`[${yi}:HotReload] ðŸ”„ Parsing updated script...`);const e=this.extractPluginName(n),r=yi;if(!e)return console.error(`[${yi}:HotReload] âŒ Security Check Failed: No plugin name found in received script`),void this.showToast("âŒ Security Check Failed: Invalid script format","error");if(e!==r)return console.error(`[${yi}:HotReload] âŒ Security Check Failed: Plugin name mismatch\n  Expected: ${r}\n  Received: ${e}`),void this.showToast(`âŒ Security Check Failed: Wrong plugin (${e})`,"error");console.log(`[${yi}:HotReload] âœ… Security Check Passed: Plugin name verified (${r})`);const o=Mi(n);console.log(`[${yi}:HotReload] ðŸ”„ Updating plugin...`);const i=await zi(o);i.success?(console.log(`[${yi}:HotReload] âœ… Plugin updated successfully`),this.showToast("ðŸ”¥ Hot Reload Complete!","success")):(console.error(`[${yi}:HotReload] âŒ Plugin update failed:`,i.error),this.showToast(`âŒ Hot Reload Failed: ${(null==(t=i.error)?void 0:t.message)||"Unknown error"}`,"error"))}catch(e){console.error(`[${yi}:HotReload] âŒ Reload failed:`,e),this.showToast(`âŒ Hot Reload Error: ${e.message}`,"error")}}showToast(n,t="success"){const e=document.getElementById("hot-reload-toast");e&&e.remove();const r=document.createElement("div");r.id="hot-reload-toast",r.textContent=n;const o="success"===t?"#10b981":"#ef4444";Object.assign(r.style,{position:"fixed",top:"-100px",left:"50%",transform:"translateX(-50%)",backgroundColor:o,color:"white",padding:"12px 24px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.06)",fontSize:"14px",fontWeight:"500",zIndex:"999999",transition:"top 0.3s ease-out",fontFamily:"system-ui, -apple-system, sans-serif"}),document.body.appendChild(r),setTimeout(()=>{r.style.top="20px"},10),setTimeout(()=>{r.style.top="-100px",setTimeout(()=>{r.remove()},300)},3e3)}scheduleReconnect(){if(this.reconnectTimeout&&clearTimeout(this.reconnectTimeout),this.reconnectAttempts>=3)return void(this.errorLogCount<3&&console.log(`[${yi}:HotReload] Max reconnection attempts reached. Stopped retrying.`));const n=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);this.errorLogCount<3&&console.log(`[${yi}:HotReload] Reconnecting in ${n/1e3}s... (attempt ${this.reconnectAttempts+1})`),this.reconnectTimeout=setTimeout(()=>{this.reconnectAttempts++,this.connect()},n)}ping(){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"ping",timestamp:Date.now()}))}disconnect(){this.isIntentionallyClosed=!0,this.reconnectTimeout&&clearTimeout(this.reconnectTimeout),this.ws&&(this.ws.close(1e3,"Client closed"),this.ws=null),console.log(`[${yi}:HotReload] Disconnected`)}}let cl=null;const fl=Object.freeze(Object.defineProperty({__proto__:null,initHotReload:function(){return cl?(console.log(`[${yi}:HotReload] Already initialized`),cl):(console.log(`[${yi}:HotReload] ðŸ”¥ Initializing hot reload client...`),cl=new ul,cl.connect(),setInterval(()=>{cl.ping()},3e4),cl)}},Symbol.toStringTag,{value:"Module"}))});
