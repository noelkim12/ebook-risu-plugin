//@name risu-ebooklike-viewer
//@display-name risu-ebooklike-viewer_v0.0.4
//@version 0.0.4
//@description EBook like viewer for RISU AI
//@arg arg1 string
//@arg arg2 int

//@link https://unpkg.com/risu-ebooklike-viewer@0.0.4/dist/risu-ebooklike-viewer.js
!function(){"use strict";try{if("undefined"!=typeof document){var e=document.createElement("style");e.appendChild(document.createTextNode('@import"https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css";@import"//fonts.googleapis.com/earlyaccess/notosanskr.css";.burger-menu{z-index:10}.update-dialog-module__udRoot--bWc9J{position:fixed;top:0;right:0;bottom:0;left:0;z-index:2147483646;display:grid;place-items:center;background:#0006;padding:16px}.update-dialog-module__udCard---wy8T{width:min(520px,100%);max-height:90vh;border-radius:16px;padding:20px;background:var(--bg, #111);color:var(--fg, #eaeaea);box-shadow:0 10px 30px #00000059;transform:scale(.97);animation:update-dialog-module__udPop--0Vb0B .16s ease-out forwards;overflow-y:auto}.update-dialog-module__udTitle--5imsi{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}.update-dialog-module__udTitle--5imsi h3{margin:0;font-size:18px;font-weight:700;word-break:break-word;flex:1 1 auto;min-width:0}.update-dialog-module__udPill--leinK{font:12px/1.8 system-ui;padding:0 8px;border-radius:999px;background:#2a2a2a;color:#cfcfcf;white-space:nowrap;flex-shrink:0}.update-dialog-module__udSub--zfs1y{margin:8px 0 12px;color:#9aa0a6;font:13px/1.5 system-ui;word-break:break-word}.update-dialog-module__udList--jnFg8{margin:10px 0 16px;padding-left:18px;max-height:180px;overflow-y:auto;overflow-x:hidden}.update-dialog-module__udList--jnFg8 li{margin:6px 0;word-break:break-word;overflow-wrap:break-word}.update-dialog-module__udFeat--MSXJY::marker{content:"âœ¨ "}.update-dialog-module__udFix--18UZ3::marker{content:"ðŸ”§ "}.update-dialog-module__udPerf--bRifN::marker{content:"âš¡ "}.update-dialog-module__udBreak--jl-Bf::marker{content:"âš ï¸ "}.update-dialog-module__udActions--5tqy2{display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}.update-dialog-module__udBtn--IHB-y{border:0;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:600;font-size:14px;white-space:nowrap;flex:0 1 auto}.update-dialog-module__udBtnPrimary--ZlLFd{border:0;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:600;font-size:14px;background:#4f7cff;color:#fff;white-space:nowrap;flex:0 1 auto}.update-dialog-module__udBtnGhost--Ly-cb{border:0;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:600;font-size:14px;background:transparent;color:#cfcfcf;white-space:nowrap;flex:0 1 auto}.update-dialog-module__udBtn--IHB-y:hover,.update-dialog-module__udBtnPrimary--ZlLFd:hover,.update-dialog-module__udBtnGhost--Ly-cb:hover{filter:brightness(1.05)}@media(max-width:480px){.update-dialog-module__udCard---wy8T{padding:16px;border-radius:12px}.update-dialog-module__udTitle--5imsi{gap:8px}.update-dialog-module__udTitle--5imsi h3{font-size:16px}.update-dialog-module__udPill--leinK{font-size:11px;padding:0 6px}.update-dialog-module__udSub--zfs1y{font-size:12px;margin:6px 0 10px}.update-dialog-module__udList--jnFg8{font-size:14px;max-height:150px;padding-left:16px}.update-dialog-module__udList--jnFg8 li{margin:5px 0;line-height:1.5}.update-dialog-module__udActions--5tqy2{flex-direction:column;gap:8px}.update-dialog-module__udBtn--IHB-y,.update-dialog-module__udBtnPrimary--ZlLFd,.update-dialog-module__udBtnGhost--Ly-cb{width:100%;padding:11px 16px;font-size:14px}}@media(min-width:481px)and (max-width:600px){.update-dialog-module__udCard---wy8T{padding:18px}.update-dialog-module__udActions--5tqy2{gap:6px}.update-dialog-module__udBtn--IHB-y,.update-dialog-module__udBtnPrimary--ZlLFd,.update-dialog-module__udBtnGhost--Ly-cb{padding:9px 11px;font-size:13px}}@media(prefers-color-scheme:light){:root{--bg: #fff;--fg: #111}.update-dialog-module__udCard---wy8T{background:#fff;color:#111}.update-dialog-module__udPill--leinK{background:#eef2ff;color:#1f3fb3}.update-dialog-module__udSub--zfs1y{color:#4b5563}}@media(prefers-reduced-motion:reduce){.update-dialog-module__udCard---wy8T{animation:none;transform:none}}@keyframes update-dialog-module__udPop--0Vb0B{to{transform:scale(1)}}.update-dialog-module__udAlert--GJ6WI{max-width:420px;text-align:center}.update-dialog-module__udAlertMessage--nJfX4{margin:16px 0 20px;font-size:16px;line-height:1.6;color:var(--fg, #eaeaea);white-space:pre-line;word-break:break-word}.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udActions--5tqy2{justify-content:center}.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udBtn--IHB-y,.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udBtnPrimary--ZlLFd,.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udBtnGhost--Ly-cb{min-width:120px}@media(max-width:480px){.update-dialog-module__udAlert--GJ6WI{max-width:100%}.update-dialog-module__udAlertMessage--nJfX4{font-size:15px;margin:12px 0 16px}.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udBtn--IHB-y,.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udBtnPrimary--ZlLFd,.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udBtnGhost--Ly-cb{min-width:100px;padding:11px 16px}}@media(prefers-color-scheme:light){.update-dialog-module__udAlertMessage--nJfX4{color:var(--fg, #111)}}.update-dialog-module__udLoading----KQf{max-width:320px;text-align:center;padding:32px 24px}.update-dialog-module__udLoadingSpinner--0OgBH{display:flex;justify-content:center;align-items:center;margin-bottom:20px}.update-dialog-module__udLoadingSvg--k5e0b{width:50px;height:50px;animation:update-dialog-module__udRotate--gve2C 1.4s linear infinite}.update-dialog-module__udLoadingCircle--Q78XG{stroke:#4f7cff;stroke-linecap:round;animation:update-dialog-module__udDash--TGdW5 1.4s ease-in-out infinite}.update-dialog-module__udLoadingMessage---UM99{font-size:15px;line-height:1.6;color:var(--fg, #eaeaea);font-weight:500;word-break:break-word}@media(max-width:480px){.update-dialog-module__udLoading----KQf{max-width:100%;padding:28px 20px}.update-dialog-module__udLoadingSpinner--0OgBH{margin-bottom:16px}.update-dialog-module__udLoadingSvg--k5e0b{width:44px;height:44px}.update-dialog-module__udLoadingMessage---UM99{font-size:14px}}@keyframes update-dialog-module__udRotate--gve2C{to{transform:rotate(360deg)}}@keyframes update-dialog-module__udDash--TGdW5{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}to{stroke-dasharray:90,150;stroke-dashoffset:-124}}@media(prefers-color-scheme:light){.update-dialog-module__udLoadingMessage---UM99{color:var(--fg, #111)}}@media(prefers-reduced-motion:reduce){.update-dialog-module__udLoadingSvg--k5e0b{animation:none}.update-dialog-module__udLoadingCircle--Q78XG{animation:none;stroke-dasharray:90,150}}@font-face{font-family:ë‚˜ëˆ”ìŠ¤í€˜ì–´ë„¤ì˜¤;src:url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-bRg.eot);src:url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-bRg.eot?#iefix) format("embedded-opentype"),url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-bRg.woff) format("woff"),url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-bRg.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:ì—ìŠ¤ì½”ì–´ë“œë¦¼;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/S-CoreDream-3Light.woff) format("woff")}@font-face{font-family:ë ˆíŽ˜ë¦¬í¬ì¸íŠ¸;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2201-2@1.0/LeferiPoint-WhiteObliqueA.woff) format("woff")}@font-face{font-family:í”Œë ‰ìŠ¤;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_20-07@1.0/IBMPlexSansKR-Regular.woff) format("woff")}@font-face{font-family:ìŠ¤ìœ„íŠ¸;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2304-2@1.0/SUITE-Regular.woff2) format("woff2")}@font-face{font-family:ì˜¤ë¥´ë¹—;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2310@1.0/Orbit-Regular.woff2) format("woff2")}@font-face{font-family:ìŠ¤ì¿¨ì˜¤ë¥´ë¹—;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2307-2@1.0/HakgyoansimWoojuR.woff2) format("woff2")}@font-face{font-family:í”„ë¦¬í‹°ë‚˜ìž‡;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_twelve@1.1/Cafe24Oneprettynight.woff) format("woff")}@font-face{font-family:ì„œë¼ìš´ë“œì—ì–´;src:url(https://gcore.jsdelivr.net/gh/projectnoonnu/noonfonts_2105_2@1.0/Cafe24SsurroundAir.woff) format("woff")}@font-face{font-family:ê³ ìš´ë‹ì›€;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2108@1.1/GowunDodum-Regular.woff) format("woff")}@font-face{font-family:ê³ ìš´ë°”íƒ•;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2108@1.1/GowunBatang-Regular.woff) format("woff")}@font-face{font-family:ë¦¬ë””ë°”íƒ•;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_twelve@1.0/RIDIBatang.woff) format("woff")}@font-face{font-family:ë§ˆë£¨ë¶€ë¦¬;src:url(https://hangeul.pstatic.net/hangeul_static/webfont/MaruBuri/MaruBuri-Regular.eot);src:url(https://hangeul.pstatic.net/hangeul_static/webfont/MaruBuri/MaruBuri-Regular.eot?#iefix) format("embedded-opentype"),url(https://hangeul.pstatic.net/hangeul_static/webfont/MaruBuri/MaruBuri-Regular.woff2) format("woff2"),url(https://hangeul.pstatic.net/hangeul_static/webfont/MaruBuri/MaruBuri-Regular.woff) format("woff"),url(https://hangeul.pstatic.net/hangeul_static/webfont/MaruBuri/MaruBuri-Regular.ttf) format("truetype")}@font-face{font-family:ë„ìŠ¤ê³ ë”•;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_eight@1.0/DOSGothic.woff) format("woff")}@font-face{font-family:ìŠ¤íƒ€ë”ìŠ¤íŠ¸;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/PFStardust.woff) format("woff")}@font-face{font-family:í”½ì‹œë“œì‹œìŠ¤;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/DungGeunMo.woff) format("woff")}@font-face{font-family:ë„¤ì˜¤ë‘¥ê·¼ëª¨;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.3/NeoDunggeunmo.woff) format("woff")}.book-viewer-root{--bv-bg-gradient-start: #1a1f35;--bv-bg-gradient-end: #2d3654;--bv-page-color: #fdfbf7;--bv-page-shadow: #f5f0e8;--bv-text-color: #2c2c2c;--bv-text-secondary: #6b6b6b;--bv-accent-color: #c9a66b;--bv-accent-hover: #b8935a;--bv-divider-color: #e8e4dc;--bv-spine-gradient: linear-gradient( 90deg, #d4cfc4 0%, hsl(41, 13%, 76%) 50%, #d4cfc4 100% );--bv-shadow-soft: 0 4px 20px rgba(0, 0, 0, .08);--bv-shadow-medium: 0 8px 40px rgba(0, 0, 0, .12);--bv-shadow-strong: 0 20px 60px rgba(0, 0, 0, .2);--bv-shadow-inner: inset 0 0 30px rgba(0, 0, 0, .03);--bv-font-size: 17px;--bv-line-height: 1.9;--bv-font-family: "Pretendard", -apple-system, BlinkMacSystemFont, system-ui, sans-serif;--bv-font-serif: "Noto Serif KR", "Crimson Text", "Georgia", serif;--bv-transition-fast: .15s cubic-bezier(.4, 0, .2, 1);--bv-transition-smooth: .3s cubic-bezier(.4, 0, .2, 1);--bv-transition-slow: .5s cubic-bezier(.4, 0, .2, 1);--FontColorStandard: #2c2c2c;--FontColorItalic: #5a5a5a;--FontColorBold: #1a1a1a;--FontColorItalicBold: #5a5a5a;--FontColorQuote1: #0e7490;--FontColorQuote2: #c2410c;--bv-font-color: var(--FontColorStandard);--bv-mark1-color: var(--FontColorQuote1);--bv-mark2-color: var(--FontColorQuote2);--bv-em-color: var(--FontColorItalic)}.book-viewer-root[data-theme=sepia]{--bv-bg-gradient-start: #3d3830;--bv-bg-gradient-end: #4a4238;--bv-page-color: #f7f0e3;--bv-page-shadow: #ebe4d7;--bv-text-color: #3d2e1c;--bv-text-secondary: #7a6b5a;--bv-accent-color: #8b7355;--bv-divider-color: #d4c9b8;--bv-spine-gradient: linear-gradient( 90deg, #c4b9a8 0%, #b8ad9c 50%, #c4b9a8 100% );--FontColorBold: #2a1f10;--FontColorItalicBold: #6b5a48;--FontColorStandard: #3d2e1c;--FontColorQuote1: #1a6b6b;--FontColorQuote2: #a85d20;--FontColorItalic: #6b5a48;--bv-font-color: var(--FontColorStandard);--bv-mark1-color: var(--FontColorQuote1);--bv-mark2-color: var(--FontColorQuote2);--bv-em-color: var(--FontColorItalic)}.book-viewer-root[data-theme=dark]{--bv-bg-gradient-start: #0d1117;--bv-bg-gradient-end: #161b22;--bv-page-color: var(--risu-theme-bgcolor);--bv-page-shadow: #151a20;--bv-text-color: #c9d1d9;--bv-text-secondary: #8b949e;--bv-accent-color: #d4a574;--bv-accent-hover: #e0b584;--bv-divider-color: #30363d;--bv-spine-gradient: linear-gradient( 90deg, #21262d 0%, #30363d 50%, #21262d 100% );--FontColorStandard: #fafafa;--FontColorItalic: #8c8d93;--FontColorBold: #fafafa;--FontColorItalicBold: #8c8d93;--FontColorQuote1: #8be9fd;--FontColorQuote2: #ffb86c;--bv-font-color: var(--FontColorStandard);--bv-mark1-color: var(--FontColorQuote1);--bv-mark2-color: var(--FontColorQuote2);--bv-em-color: var(--FontColorItalic)}.text-content p{margin-top:1em}.text-content h1{font-weight:800;font-size:2.25em;line-height:1.1111111}.text-content h2{font-weight:700;font-size:1.5em;line-height:1.3333333}.text-content h3{font-weight:600;font-size:1.25em;line-height:1.6}.book-viewer-root{position:absolute;top:0;left:0;width:100%;height:93.5%;display:flex!important;flex-direction:column;overflow:hidden;z-index:5;font-family:var(--bv-font-family);background:linear-gradient(135deg,var(--bv-bg-gradient-start) 0%,var(--bv-bg-gradient-end) 100%);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-bottom:1px solid var(--bv-divider-color)}.book-viewer-root:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background-image:radial-gradient(circle at 20% 80%,rgba(201,166,107,.05) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(201,166,107,.03) 0%,transparent 50%);pointer-events:none;z-index:0}.book-header{display:flex!important;align-items:center;justify-content:space-between;padding:12px 24px;background:var(--bv-page-color);border-bottom:1px solid var(--bv-divider-color);flex-shrink:0;z-index:1}.header-left{display:flex!important;align-items:center;gap:12px;min-width:0;flex:1;margin-left:30px}.header-thumbnail{width:40px;height:40px;min-width:40px;border-radius:8px;background-size:cover;background-position:center;background-color:var(--bv-divider-color);box-shadow:0 2px 8px #0000001a}.header-info{display:flex!important;align-items:center;gap:12px;min-width:0;flex:1}.header-name{font-size:15px;font-weight:600;color:var(--bv-text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.header-buttons{display:flex!important;align-items:center;gap:4px}.header-buttons button{background:none;border:none;padding:6px;cursor:pointer;color:var(--bv-text-secondary);border-radius:6px;transition:all var(--bv-transition-fast);display:flex;align-items:center;justify-content:center}.header-buttons button:hover{background:#0000000d;color:var(--bv-accent-color)}.book-viewer-root[data-theme=dark] .header-buttons button:hover{background:#ffffff14}.header-buttons button :global(svg){width:18px;height:18px}.header-right{display:flex!important;align-items:center;gap:8px;flex-shrink:0}.chat-index-nav{display:flex!important;align-items:center;gap:4px}.chat-nav-btn{background:none;border:none;padding:4px;cursor:pointer;color:var(--bv-text-secondary);border-radius:4px;transition:all var(--bv-transition-fast);display:flex!important;align-items:center;justify-content:center}.chat-nav-btn:hover:not(:disabled){background:#0000000d;color:var(--bv-accent-color)}.chat-nav-btn:disabled{opacity:.3;cursor:not-allowed}.book-viewer-root[data-theme=dark] .chat-nav-btn:hover:not(:disabled){background:#ffffff14}.header-chat-index{font-size:13px;font-weight:500;color:var(--bv-text-secondary);background:#0000000a;padding:4px 10px;border-radius:12px;display:flex;align-items:center;gap:4px}.chat-index-total{font-size:11px;opacity:.7}.book-viewer-root[data-theme=dark] .header-chat-index{background:#ffffff14}.close-btn{background:none;border:none;padding:6px;cursor:pointer;color:var(--bv-text-secondary);border-radius:6px;transition:all var(--bv-transition-fast);display:flex!important;align-items:center;justify-content:center}.close-btn:hover{background:#0000000d;color:var(--bv-accent-color)}.book-pages{position:relative;display:flex!important;flex:1;min-height:0;z-index:1}.page{flex:1;background:var(--bv-page-color);position:relative;overflow:hidden}.page:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(90deg,rgba(0,0,0,.02) 0%,transparent 5%,transparent 95%,rgba(0,0,0,.02) 100%),url("data:image/svg+xml,%3Csvg viewBox=\'0 0 200 200\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cfilter id=\'noise\'%3E%3CfeTurbulence type=\'fractalNoise\' baseFrequency=\'0.9\' numOctaves=\'4\' stitchTiles=\'stitch\'/%3E%3C/filter%3E%3Crect width=\'100%25\' height=\'100%25\' filter=\'url(%23noise)\' opacity=\'0.03\'/%3E%3C/svg%3E");pointer-events:none;z-index:1}.book-viewer-root[data-theme=dark] .page:before{opacity:.5}.page-left{border-radius:4px 0 0 4px;box-shadow:var(--bv-shadow-inner)}.page-left:after{content:"";position:absolute;top:0;right:0;width:40px;height:100%;background:linear-gradient(90deg,transparent 0%,rgba(0,0,0,.03) 100%);pointer-events:none}.page-right{border-radius:0 4px 4px 0;box-shadow:var(--bv-shadow-inner)}.page-right:after{content:"";position:absolute;top:0;left:0;width:40px;height:100%;background:linear-gradient(90deg,rgba(0,0,0,.03) 0%,transparent 100%);pointer-events:none}.book-spine{width:8px;background:var(--bv-spine-gradient);position:relative;box-shadow:inset 2px 0 4px #0000001a,inset -2px 0 4px #0000001a}.book-spine:before{content:"";position:absolute;top:0;left:50%;transform:translate(-50%);width:1px;height:100%;background:#0000001a}.page-content{padding:50px 60px 10px;height:100%;display:flex!important;flex-direction:column;color:var(--bv-text-color);position:relative;z-index:2}.page-content>.chattext [class*=-image-wrapper]{max-height:100%}.page-content>.chattext [class*=-image-container]{min-height:98%;max-height:100%}.page-content>.x-risu-image-cell{aspect-ratio:auto}.text-content{flex:1;overflow-y:auto;font-size:var(--bv-font-size)!important;line-height:var(--bv-line-height)!important;font-family:var(--bv-font-family)!important;text-align:-webkit-auto;word-break:keep-all;letter-spacing:-.01em;padding-right:10px;-moz-user-select:text;user-select:text;-webkit-user-select:text;cursor:text}.text-content *{-moz-user-select:text;user-select:text;-webkit-user-select:text}.text-content :global(h1),.text-content :global(h2),.text-content :global(h3){margin:2em 0 1em;text-indent:0;font-weight:600;color:#1a1a1a;letter-spacing:-.02em}.text-content :global(h1){font-size:1.8em;border-bottom:2px solid var(--bv-accent-color);padding-bottom:.5em}.text-content :global(h2){font-size:1.4em}.text-content :global(mark),.text-content :global(mark[risu-mark]){display:inline;background:linear-gradient(120deg,#c9a66b33,#c9a66b4d);color:inherit;padding:.1em .3em;border-radius:3px;flex-direction:unset;align-items:unset;gap:unset}.text-content:has(img){position:static}.text-content :global(img){position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center;margin:0;z-index:10}.page-content:has(img) .page-number{display:none}.page-number{font-size:13px;color:var(--bv-text-secondary);font-weight:500;letter-spacing:.05em}.left-page-num{text-align:left}.right-page-num{text-align:right}.click-area{position:absolute;top:0;width:5%;height:100%;z-index:10;cursor:pointer}.click-left{left:0;cursor:url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'32\' height=\'32\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'%23c9a66b\' stroke-width=\'2\'%3E%3Cpolyline points=\'15 18 9 12 15 6\'%3E%3C/polyline%3E%3C/svg%3E") 16 16,w-resize}.click-right{right:0;cursor:url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'32\' height=\'32\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'%23c9a66b\' stroke-width=\'2\'%3E%3Cpolyline points=\'9 18 15 12 9 6\'%3E%3C/polyline%3E%3C/svg%3E") 16 16,e-resize}.click-area:after{content:"";position:absolute;top:50%;transform:translateY(-50%);width:50px;height:100px;opacity:0;transition:opacity var(--bv-transition-smooth);pointer-events:none}.click-left:after{left:30px;background:radial-gradient(ellipse at left,rgba(201,166,107,.15),transparent 70%)}.click-right:after{right:30px;background:radial-gradient(ellipse at right,rgba(201,166,107,.15),transparent 70%)}.click-area:hover:after{opacity:1}.nav-controls{display:flex;align-items:center;justify-content:center;gap:32px;background:var(--bv-page-color);padding:14px 40px;border-top:1px solid rgba(201,166,107,.12);flex-shrink:0;z-index:1}.nav-btn{background:none;border:none;cursor:pointer;padding:10px;border-radius:50%;transition:all var(--bv-transition-fast);color:var(--bv-accent-color);display:flex;align-items:center;justify-content:center}.nav-btn :global(svg){transition:transform var(--bv-transition-fast)}.nav-btn:hover:not(:disabled){background:#c9a66b1f}.nav-btn:hover:not(:disabled) :global(svg){transform:scale(1.1)}.nav-btn:active:not(:disabled) :global(svg){transform:scale(.95)}.nav-btn:disabled{opacity:.25;cursor:not-allowed}.page-indicator{font-size:14px;color:var(--bv-text-color);min-width:90px;text-align:center;font-weight:600;letter-spacing:.02em}.nav-right-buttons{display:flex;align-items:center;gap:8px;margin-left:auto;padding-left:20px}.nav-icon-btn{background:none;border:2px solid var(--bv-accent-color);color:var(--bv-accent-color);padding:8px 12px;cursor:pointer;border-radius:8px;transition:all var(--bv-transition-fast);font-size:13px!important;font-weight:600!important;display:flex;align-items:center;justify-content:center;gap:4px}.nav-icon-btn:hover{background:var(--bv-accent-color);color:#fff}.nav-icon-btn :global(svg){width:18px;height:18px}.dropdown-container{position:relative}.dropdown-menu{display:none;position:absolute;bottom:calc(100% + 40px);right:0;background:#fffffffa;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);padding:16px;border-radius:16px;box-shadow:var(--bv-shadow-strong);min-width:280px;max-width:320px;border:1px solid rgba(201,166,107,.15);z-index:200}.dropdown-menu.active{display:block;animation:dropdownFadeIn .25s cubic-bezier(.4,0,.2,1)}@keyframes dropdownFadeIn{0%{opacity:0;transform:translateY(10px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.book-viewer-root[data-theme=dark] .dropdown-menu{background:#1c2128fa}.dropdown-header{font-size:14px;font-weight:700;color:var(--bv-text-color);padding-bottom:12px;margin-bottom:12px;border-bottom:1px solid var(--bv-divider-color);text-transform:uppercase;letter-spacing:.05em}.setting-item{margin-bottom:16px}.setting-item label{display:block;margin-bottom:8px;font-size:12px;font-weight:600;color:var(--bv-font-color);text-transform:uppercase;letter-spacing:.06em}.setting-item input[type=range]{width:100%;height:5px;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#e8e4dc;border-radius:3px;outline:none;margin-bottom:6px}.book-viewer-root[data-theme=dark] .setting-item input[type=range]{background:#30363d}.setting-item input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:18px;height:18px;background:var(--bv-accent-color);border-radius:50%;cursor:pointer;box-shadow:0 2px 6px #c9a66b66;-webkit-transition:all var(--bv-transition-fast);transition:all var(--bv-transition-fast)}.setting-item input[type=range]::-webkit-slider-thumb:hover{transform:scale(1.1)}.setting-item input[type=range]::-moz-range-thumb{width:18px;height:18px;background:var(--bv-accent-color);border-radius:50%;cursor:pointer;border:none}.setting-item select{width:100%;padding:10px 14px;border:2px solid #e8e4dc;border-radius:10px;font-size:13px;background:#fff;cursor:pointer;transition:all var(--bv-transition-fast);-webkit-appearance:none;-moz-appearance:none;appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'24\' height=\'24\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'%23c9a66b\' stroke-width=\'2\'%3E%3Cpolyline points=\'6 9 12 15 18 9\'%3E%3C/polyline%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 10px center;background-size:16px}.book-viewer-root[data-theme=dark] .setting-item select{background-color:#21262d;border-color:#30363d;color:var(--bv-font-color)}.book-viewer-root[data-theme=light] .setting-item select,.book-viewer-root[data-theme=sepia] .setting-item select{color:var(--bv-font-color)}.setting-item select:hover{border-color:var(--bv-accent-color)}.setting-item select:focus{outline:none;border-color:var(--bv-accent-color);box-shadow:0 0 0 3px #c9a66b26}.setting-item span{font-size:11px;color:var(--bv-text-secondary);font-weight:500}.custom-css-btn{width:100%;padding:10px 16px;background:var(--bv-accent-color);color:#fff;border:none;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;transition:all var(--bv-transition-fast)}.custom-css-btn:hover{background:var(--bv-accent-hover);transform:translateY(-1px)}.lb-modules-list{max-height:300px;overflow-y:auto}.lb-module-item{padding:10px 12px;margin-bottom:6px;background:#c9a66b14;border-radius:8px;cursor:pointer;transition:all var(--bv-transition-fast);font-size:13px;color:var(--bv-text-color)}.lb-module-item:hover{background:#c9a66b33}.lb-module-item:last-child{margin-bottom:0}.book-viewer-root[data-theme=dark] .lb-module-item{background:#d4a5741a}.book-viewer-root[data-theme=dark] .lb-module-item:hover{background:#d4a57433}.modal-overlay{display:none!important;position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1100;justify-content:center;align-items:center}.modal-overlay.active{display:flex;animation:modalFadeIn .3s ease}@keyframes modalFadeIn{0%{opacity:0}to{opacity:1}}.modal-content{background:var(--bv-page-color);border-radius:16px;width:90%;max-width:600px;max-height:80vh;display:flex;flex-direction:column;box-shadow:var(--bv-shadow-strong);animation:modalSlideIn .3s cubic-bezier(.4,0,.2,1)}.book-viewer-root[data-theme=dark] .modal-content{background:#1c2128}.modal-header{display:flex!important;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid var(--bv-divider-color)}.modal-header h3{font-size:18px;font-weight:700;color:var(--bv-text-color);margin:0}.modal-close{background:none;border:none;font-size:24px;color:var(--bv-text-secondary);cursor:pointer;padding:4px 8px;border-radius:6px;transition:all var(--bv-transition-fast)}.modal-close:hover{background:#0000000d;color:var(--bv-text-color)}.book-viewer-root[data-theme=dark] .modal-close:hover{background:#ffffff1a}.modal-body{flex:1;padding:20px 24px;overflow:auto}.modal-body textarea{width:100%;height:300px;padding:16px;border:2px solid var(--bv-divider-color);border-radius:12px;font-family:Consolas,Monaco,monospace;font-size:14px;line-height:1.6;resize:vertical;background:#fafafa;color:var(--bv-text-color)}.book-viewer-root[data-theme=dark] .modal-body textarea{background:#0d1117;border-color:#30363d}.modal-body textarea:focus{outline:none;border-color:var(--bv-accent-color);box-shadow:0 0 0 3px #c9a66b26}.modal-footer{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid var(--bv-divider-color)}.modal-btn{padding:10px 20px;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all var(--bv-transition-fast)}.modal-btn.primary{background:var(--bv-accent-color);color:#fff;border:none}.modal-btn.primary:hover{background:var(--bv-accent-hover)}.modal-btn.secondary{background:transparent;color:var(--bv-text-secondary);border:2px solid var(--bv-divider-color)}.modal-btn.secondary:hover{border-color:var(--bv-text-secondary);color:var(--bv-text-color)}@media(max-width:1200px){.page-content{padding:50px 40px 40px}.text-content{font-size:16px}}@media(max-width:900px){.book-header{padding:10px 16px}.header-thumbnail{width:32px;height:32px;min-width:32px;border-radius:6px}.header-name{font-size:14px}.header-buttons button{padding:4px}.header-buttons button :global(svg){width:16px;height:16px}.page-content{padding:40px 30px 35px}.book-spine{width:4px}.nav-controls{padding:12px 20px;gap:20px}}@font-face{font-family:ë‚˜ëˆ”ìŠ¤í€˜ì–´ë„¤ì˜¤;src:url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-bRg.eot);src:url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-bRg.eot?#iefix) format("embedded-opentype"),url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-bRg.woff) format("woff"),url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-bRg.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:ì—ìŠ¤ì½”ì–´ë“œë¦¼;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/S-CoreDream-3Light.woff) format("woff")}@font-face{font-family:ë ˆíŽ˜ë¦¬í¬ì¸íŠ¸;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2201-2@1.0/LeferiPoint-WhiteObliqueA.woff) format("woff")}@font-face{font-family:í”Œë ‰ìŠ¤;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_20-07@1.0/IBMPlexSansKR-Regular.woff) format("woff")}@font-face{font-family:ìŠ¤ìœ„íŠ¸;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2304-2@1.0/SUITE-Regular.woff2) format("woff2")}@font-face{font-family:ì˜¤ë¥´ë¹—;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2310@1.0/Orbit-Regular.woff2) format("woff2")}@font-face{font-family:ìŠ¤ì¿¨ì˜¤ë¥´ë¹—;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2307-2@1.0/HakgyoansimWoojuR.woff2) format("woff2")}@font-face{font-family:í”„ë¦¬í‹°ë‚˜ìž‡;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_twelve@1.1/Cafe24Oneprettynight.woff) format("woff")}@font-face{font-family:ì„œë¼ìš´ë“œì—ì–´;src:url(https://gcore.jsdelivr.net/gh/projectnoonnu/noonfonts_2105_2@1.0/Cafe24SsurroundAir.woff) format("woff")}@font-face{font-family:ê³ ìš´ë‹ì›€;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2108@1.1/GowunDodum-Regular.woff) format("woff")}@font-face{font-family:ê³ ìš´ë°”íƒ•;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2108@1.1/GowunBatang-Regular.woff) format("woff")}@font-face{font-family:ë¦¬ë””ë°”íƒ•;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_twelve@1.0/RIDIBatang.woff) format("woff")}@font-face{font-family:ë§ˆë£¨ë¶€ë¦¬;src:url(https://hangeul.pstatic.net/hangeul_static/webfont/MaruBuri/MaruBuri-Regular.eot);src:url(https://hangeul.pstatic.net/hangeul_static/webfont/MaruBuri/MaruBuri-Regular.eot?#iefix) format("embedded-opentype"),url(https://hangeul.pstatic.net/hangeul_static/webfont/MaruBuri/MaruBuri-Regular.woff2) format("woff2"),url(https://hangeul.pstatic.net/hangeul_static/webfont/MaruBuri/MaruBuri-Regular.woff) format("woff"),url(https://hangeul.pstatic.net/hangeul_static/webfont/MaruBuri/MaruBuri-Regular.ttf) format("truetype")}@font-face{font-family:ë„ìŠ¤ê³ ë”•;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_eight@1.0/DOSGothic.woff) format("woff")}@font-face{font-family:ìŠ¤íƒ€ë”ìŠ¤íŠ¸;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/PFStardust.woff) format("woff")}@font-face{font-family:í”½ì‹œë“œì‹œìŠ¤;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/DungGeunMo.woff) format("woff")}@font-face{font-family:ë„¤ì˜¤ë‘¥ê·¼ëª¨;src:url(https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.3/NeoDunggeunmo.woff) format("woff")}.risu-chat>div{padding:unset!important;margin:unset!important;justify-content:unset!important;align-items:unset!important}.risu-chat>div>div{margin:unset!important;justify-content:unset!important}.mobile-reader{--mv-bg-gradient-start: #1a1f35;--mv-bg-gradient-end: #2d3654;--mv-page-color: #fdfbf7;--mv-text-color: #2c2c2c;--mv-text-secondary: #6b6b6b;--mv-header-bg: rgba(26, 31, 53, .97);--mv-footer-bg: rgba(253, 251, 247, .98);--mv-accent-color: #c9a66b;--mv-accent-light: rgba(201, 166, 107, .15);--mv-border-color: rgba(201, 166, 107, .2);--mv-shadow-soft: 0 2px 12px rgba(0, 0, 0, .08);--mv-shadow-medium: 0 4px 24px rgba(0, 0, 0, .12);--mv-shadow-glow: 0 0 20px rgba(201, 166, 107, .15);--mv-font-size: 17px;--mv-line-height: 1.85;--mv-font-family: "Pretendard", -apple-system, BlinkMacSystemFont, system-ui, sans-serif;--mv-font-serif: "Noto Serif KR", "Crimson Text", "Georgia", serif;--mv-transition-fast: .15s cubic-bezier(.4, 0, .2, 1);--mv-transition-smooth: .3s cubic-bezier(.4, 0, .2, 1)}.mobile-reader{position:fixed;top:0;left:0;width:100%;height:93.5%;display:flex;flex-direction:column;background:linear-gradient(135deg,var(--mv-bg-gradient-start) 0%,var(--mv-bg-gradient-end) 100%);z-index:9999;font-family:var(--mv-font-family);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent}.mobile-reader .reader-header{display:flex;flex-direction:column;background:var(--mv-header-bg);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-bottom:1px solid var(--mv-border-color);z-index:100;flex-shrink:0}.mobile-reader .header-row{display:flex;align-items:center;padding:0 12px}.mobile-reader .header-row-top{justify-content:space-between;padding-top:10px;padding-bottom:6px}.mobile-reader .header-row-bottom{justify-content:space-between;padding-top:4px;padding-bottom:10px;border-top:1px solid rgba(255,255,255,.06)}.mobile-reader .header-btn{background:none;border:none;color:#ffffffd9;padding:8px;cursor:pointer;border-radius:10px;transition:all var(--mv-transition-fast);display:flex;align-items:center;justify-content:center;flex-shrink:0;min-width:44px;min-height:44px}.mobile-reader .header-btn:active{background:#c9a66b33;color:var(--mv-accent-color);transform:scale(.95)}.mobile-reader .header-btn svg{width:20px;height:20px}.mobile-reader .header-bot-info{display:flex;align-items:center;gap:10px;flex:1;min-width:0;justify-content:center}.mobile-reader .header-thumbnail{width:32px;height:32px;min-width:32px;border-radius:8px;background-size:cover;background-position:center;background-color:#ffffff1a;box-shadow:0 2px 6px #0003}.mobile-reader .header-bot-name{font-size:14px;font-weight:600;color:var(--mv-accent-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:180px}.mobile-reader .header-action-buttons{display:flex;align-items:center;gap:2px}.mobile-reader .header-action-buttons button{background:none;border:none;padding:6px;cursor:pointer;color:#fff9;border-radius:8px;transition:all var(--mv-transition-fast);display:flex;align-items:center;justify-content:center;min-width:36px;min-height:36px}.mobile-reader .header-action-buttons button:active{background:#c9a66b33;color:var(--mv-accent-color)}.mobile-reader .header-action-buttons button svg{width:18px;height:18px}.mobile-reader .header-chat-index{font-size:12px;font-weight:500;color:#fff9;background:#ffffff14;padding:4px 10px;border-radius:10px}.mobile-reader .header-right-group{display:flex;align-items:center;gap:8px}.mobile-reader .header-toggle-btn{background:#ffffff1a;border:1px solid rgba(255,255,255,.2);color:var(--mv-accent-color);padding:4px 10px;font-size:11px;font-weight:700;border-radius:8px;cursor:pointer;transition:all var(--mv-transition-fast);min-height:32px}.mobile-reader .header-toggle-btn:active{background:var(--mv-accent-color);color:#fff;transform:scale(.95)}.mobile-reader .page-container{flex:1;overflow:hidden;position:relative;background:var(--mv-page-color);margin:10px;border-radius:12px;box-shadow:var(--mv-shadow-medium),var(--mv-shadow-glow);touch-action:pan-y;-moz-user-select:text!important;user-select:text!important;-webkit-user-select:text!important;cursor:text}.mobile-reader .page-container:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:url("data:image/svg+xml,%3Csvg viewBox=\'0 0 200 200\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cfilter id=\'noise\'%3E%3CfeTurbulence type=\'fractalNoise\' baseFrequency=\'0.9\' numOctaves=\'4\' stitchTiles=\'stitch\'/%3E%3C/filter%3E%3Crect width=\'100%25\' height=\'100%25\' filter=\'url(%23noise)\' opacity=\'0.02\'/%3E%3C/svg%3E");pointer-events:none;z-index:1;border-radius:12px}.mobile-reader .page-content{width:100%;height:100%;display:flex;flex-direction:column;padding:28px 24px;overflow:hidden;position:relative;z-index:2}.mobile-reader .text-content{flex:1;font-size:var(--mv-font-size);line-height:var(--mv-line-height);font-family:var(--mv-font-family);color:var(--bv-text-color);word-break:keep-all;letter-spacing:-.01em;overflow-y:scroll!important;-moz-user-select:text;user-select:text;-webkit-user-select:text;cursor:text}.mobile-reader .text-content p{margin-bottom:1.3em}.mobile-reader .text-content p:first-child{text-indent:0}.mobile-reader .text-content h1,.mobile-reader .text-content h2,.mobile-reader .text-content h3{margin:1.8em 0 .8em;text-indent:0;font-weight:600;color:#1a1a1a;letter-spacing:-.02em}.mobile-reader .text-content h1{font-size:1.6em;border-bottom:2px solid var(--mv-accent-color);padding-bottom:.4em}.mobile-reader .text-content mark{background:linear-gradient(120deg,#c9a66b33,#c9a66b4d);color:inherit;padding:.1em .2em;border-radius:3px}.mobile-reader .text-content img{max-width:100%;height:auto;margin:1.2em 0;border-radius:8px;box-shadow:var(--mv-shadow-soft)}.mobile-reader .page-number{position:absolute;bottom:12px;font-size:11px;color:var(--mv-text-secondary);opacity:.6}.mobile-reader .page-number.left{left:10px}.mobile-reader .page-number.right{right:16px}.mobile-reader .touch-area{position:absolute;top:0;bottom:0;width:10%;z-index:50}.mobile-reader .touch-left{left:0}.mobile-reader .touch-right{right:0}.mobile-reader .reader-footer{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;background:var(--bv-page-color);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-top:1px solid rgba(201,166,107,.15);gap:16px;flex-shrink:0}.mobile-reader .nav-btn{background:none;border:2px solid var(--mv-accent-color);color:var(--mv-accent-color);padding:12px;cursor:pointer;border-radius:50%;transition:all var(--mv-transition-fast);display:flex;align-items:center;justify-content:center;min-width:50px;min-height:50px}.mobile-reader .nav-btn svg{width:22px;height:22px;transition:transform var(--mv-transition-fast)}.mobile-reader .nav-btn:active:not(:disabled){background:var(--mv-accent-color);color:#fff;transform:scale(.95)}.mobile-reader .nav-btn:active:not(:disabled) svg{transform:scale(.9)}.mobile-reader .nav-btn:disabled{opacity:.25;border-color:#ccc;color:#999}.mobile-reader .page-info{flex:1;display:flex;flex-direction:column;gap:10px}.mobile-reader .page-indicator{font-size:14px;font-weight:600;color:var(--mv-text-color);text-align:center;letter-spacing:.03em}.mobile-reader .progress-bar{width:100%;height:5px;background:#c9a66b33;border-radius:3px;overflow:hidden}.mobile-reader .progress-fill{height:100%;background:linear-gradient(90deg,var(--mv-accent-color) 0%,#d4b87a 100%);border-radius:3px;transition:width var(--mv-transition-smooth);box-shadow:0 0 8px #c9a66b80}.mobile-reader .panel-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:#0009;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px)}.mobile-reader .panel-content{position:absolute;bottom:0;left:0;width:100%;background:var(--mv-page-color);border-radius:24px 24px 0 0;overflow-y:auto;animation:slideUp .35s cubic-bezier(.4,0,.2,1);box-shadow:0 -8px 32px #0003}@keyframes slideDown{0%{transform:translateY(0)}to{transform:translateY(100%)}}.mobile-reader .panel-header{display:flex;align-items:center;justify-content:space-between;padding:24px 24px 20px;border-bottom:1px solid rgba(201,166,107,.2);position:sticky;top:0;background:var(--mv-page-color);z-index:10}.mobile-reader .panel-header h3{font-size:18px;font-weight:700;color:var(--mv-text-color);letter-spacing:-.02em;margin:0}.mobile-reader .panel-close{background:none;border:none;font-size:20px;color:var(--mv-text-secondary);cursor:pointer;padding:8px 12px;border-radius:8px;transition:all var(--mv-transition-fast);line-height:1}.mobile-reader .panel-close:active{background:var(--mv-accent-light);color:var(--mv-accent-color)}.mobile-reader .panel-body{padding:24px}.mobile-reader .settings-panel{position:fixed;top:0;left:0;width:100%;height:100%;z-index:200;display:none}.mobile-reader .settings-panel.active{display:block}.mobile-reader .settings-panel .panel-content{max-height:80%}.mobile-reader .setting-item{margin-bottom:32px}.mobile-reader .setting-item:last-child{margin-bottom:0}.mobile-reader .setting-item label{display:block;margin-bottom:14px;font-size:13px;font-weight:600;color:var(--mv-text-color);text-transform:uppercase;letter-spacing:.08em}.mobile-reader .range-control{display:flex;align-items:center;gap:14px;margin-bottom:10px}.mobile-reader .range-label{font-size:12px;color:var(--mv-text-secondary);min-width:36px}.mobile-reader .setting-item input[type=range]{flex:1;-webkit-appearance:none;-moz-appearance:none;appearance:none;height:6px;background:#c9a66b40;border-radius:3px;outline:none}.mobile-reader .setting-item input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:26px;height:26px;background:var(--mv-accent-color);border-radius:50%;cursor:pointer;box-shadow:0 2px 10px #c9a66b66}.mobile-reader .setting-item input[type=range]::-moz-range-thumb{width:26px;height:26px;background:var(--mv-accent-color);border-radius:50%;cursor:pointer;border:none;box-shadow:0 2px 10px #c9a66b66}.mobile-reader .setting-value{display:block;text-align:center;font-size:13px;color:var(--mv-accent-color);font-weight:600}.mobile-reader .theme-buttons{display:flex;gap:12px}.mobile-reader .theme-btn{flex:1;display:flex;flex-direction:column;align-items:center;gap:10px;padding:16px 12px;border:2px solid rgba(201,166,107,.25);border-radius:16px;background:transparent;cursor:pointer;transition:all var(--mv-transition-fast);font-size:13px;color:var(--mv-text-secondary);font-weight:500}.mobile-reader .theme-btn.active{border-color:var(--mv-accent-color);background:var(--mv-accent-light);color:var(--mv-accent-color)}.mobile-reader .theme-btn:active:not(.active){transform:scale(.97);background:#c9a66b14}.mobile-reader .theme-preview{width:44px;height:44px;border-radius:50%;border:2px solid rgba(201,166,107,.3);box-shadow:var(--mv-shadow-soft)}.mobile-reader .theme-preview.light{background:linear-gradient(135deg,#fff,#fdfbf7)}.mobile-reader .theme-preview.sepia{background:linear-gradient(135deg,#f7f0e3,#ebe4d7)}.mobile-reader .theme-preview.dark{background:linear-gradient(135deg,#1c2128,#0d1117)}.mobile-reader .font-selector{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;max-height:200px;overflow-y:auto}.mobile-reader .font-option{padding:12px;border:2px solid rgba(201,166,107,.2);border-radius:10px;background:transparent;cursor:pointer;transition:all var(--mv-transition-fast);font-size:13px;color:var(--mv-text-color);text-align:center}.mobile-reader .font-option.active{border-color:var(--mv-accent-color);background:var(--mv-accent-light);color:var(--mv-accent-color)}.mobile-reader .font-option:active:not(.active){background:#c9a66b14}.mobile-reader .custom-css-btn{width:100%;padding:14px 16px;background:var(--mv-accent-color);color:#fff;border:none;border-radius:12px;font-size:14px;font-weight:600;cursor:pointer;transition:all var(--mv-transition-fast)}.mobile-reader .custom-css-btn:active{transform:scale(.98);opacity:.9}.mobile-reader .lb-panel{position:fixed;top:0;left:0;width:100%;height:100%;z-index:200;display:none}.mobile-reader .lb-panel.active{display:block}.mobile-reader .lb-panel .panel-content{max-height:60%}.mobile-reader .lb-modules-list{display:flex;flex-direction:column;gap:10px}.mobile-reader .lb-module-item{padding:16px;background:#c9a66b14;border-radius:12px;cursor:pointer;transition:all var(--mv-transition-fast);font-size:15px;font-weight:500;color:var(--mv-text-color);border:1px solid transparent}.mobile-reader .lb-module-item:active{background:#c9a66b33;border-color:var(--mv-accent-color);transform:scale(.98)}.mobile-reader .lb-empty{text-align:center;color:var(--mv-text-secondary);font-size:14px;padding:20px}.mobile-reader .modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);z-index:300;display:flex;justify-content:center;align-items:center;padding:20px}.mobile-reader .modal-content{background:var(--mv-page-color);border-radius:16px;width:100%;max-width:500px;max-height:80vh;display:flex;flex-direction:column;box-shadow:0 20px 60px #0006;animation:modalSlideIn .25s ease-out}@keyframes modalSlideIn{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.mobile-reader .modal-header{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid rgba(0,0,0,.1)}.mobile-reader .modal-header h3{font-size:16px;font-weight:700;color:var(--mv-text-color);margin:0}.mobile-reader .modal-close{background:none;border:none;font-size:24px;color:var(--mv-text-secondary);cursor:pointer;padding:4px 8px;border-radius:6px;transition:all var(--mv-transition-fast);line-height:1}.mobile-reader .modal-close:active{background:#0000001a}.mobile-reader .modal-body{flex:1;padding:16px 20px;overflow:auto}.mobile-reader .modal-body textarea{width:100%;height:200px;padding:14px;border:2px solid rgba(0,0,0,.1);border-radius:10px;font-family:Consolas,Monaco,monospace;font-size:13px;line-height:1.5;resize:vertical;background:#00000005;color:var(--mv-text-color)}.mobile-reader .modal-body textarea:focus{outline:none;border-color:var(--mv-accent-color)}.mobile-reader .modal-footer{display:flex;justify-content:flex-end;gap:10px;padding:14px 20px;border-top:1px solid rgba(0,0,0,.1)}.mobile-reader .modal-btn{padding:10px 18px;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all var(--mv-transition-fast)}.mobile-reader .modal-btn.primary{background:var(--mv-accent-color);color:#fff;border:none}.mobile-reader .modal-btn.primary:active{opacity:.9;transform:scale(.98)}.mobile-reader .modal-btn.secondary{background:transparent;color:var(--mv-text-secondary);border:2px solid rgba(0,0,0,.15)}.mobile-reader .modal-btn.secondary:active{background:#0000000d}.mobile-reader[data-theme=light]{--FontColorStandard: #2c2c2c;--FontColorItalic: #5a5a5a;--FontColorBold: #1a1a1a;--FontColorItalicBold: #5a5a5a;--FontColorQuote1: #0e7490;--FontColorQuote2: #c2410c;--bv-font-color: var(--FontColorStandard);--bv-mark1-color: var(--FontColorQuote1);--bv-mark2-color: var(--FontColorQuote2);--bv-em-color: var(--FontColorItalic)}.mobile-reader[data-theme=sepia]{--bv-bg-gradient-start: #3d3830;--bv-bg-gradient-end: #4a4238;--bv-page-color: #f7f0e3;--bv-page-shadow: #ebe4d7;--bv-text-color: #3d2e1c;--bv-text-secondary: #7a6b5a;--bv-accent-color: #8b7355;--bv-divider-color: #d4c9b8;--bv-spine-gradient: linear-gradient( 90deg, #c4b9a8 0%, #b8ad9c 50%, #c4b9a8 100% );--mv-bg-gradient-start: #3d3830;--mv-bg-gradient-end: #4a4238;--mv-page-color: #f7f0e3;--mv-text-color: #3d2e1c;--mv-text-secondary: #7a6b5a;--mv-header-bg: rgba(61, 56, 48, .97);--mv-accent-color: #8b7355;--FontColorBold: #2a1f10;--FontColorItalicBold: #6b5a48;--FontColorStandard: #3d2e1c;--FontColorQuote1: #1a6b6b;--FontColorQuote2: #a85d20;--FontColorItalic: #6b5a48;--bv-font-color: var(--FontColorStandard);--bv-mark1-color: var(--FontColorQuote1);--bv-mark2-color: var(--FontColorQuote2);--bv-em-color: var(--FontColorItalic)}.mobile-reader[data-theme=dark]{--bv-bg-gradient-start: #0d1117;--bv-bg-gradient-end: #161b22;--bv-page-color: var(--risu-theme-bgcolor);--bv-page-shadow: #151a20;--bv-text-color: #c9d1d9;--bv-text-secondary: #8b949e;--bv-accent-color: #d4a574;--bv-accent-hover: #e0b584;--bv-divider-color: #30363d;--bv-spine-gradient: linear-gradient( 90deg, #21262d 0%, #30363d 50%, #21262d 100% );--mv-bg-gradient-start: #0d1117;--mv-bg-gradient-end: #161b22;--mv-page-color: var(--risu-theme-bgcolor);--mv-page-shadow: #151a20;--mv-text-color: #c9d1d9;--mv-text-secondary: #8b949e;--mv-header-bg: rgba(13, 17, 23, .97);--mv-footer-bg: var(--bv-page-color);--mv-accent-color: #d4a574;--FontColorStandard: #fafafa;--FontColorItalic: #8c8d93;--FontColorBold: #fafafa;--FontColorItalicBold: #8c8d93;--FontColorQuote1: #8be9fd;--FontColorQuote2: #ffb86c;--bv-font-color: var(--FontColorStandard);--bv-mark1-color: var(--FontColorQuote1);--bv-mark2-color: var(--FontColorQuote2);--bv-em-color: var(--FontColorItalic)}.mobile-reader[data-theme=dark] .page-container:before{opacity:.5}.mobile-reader[data-theme=dark] .page-indicator{color:var(--mv-text-color)}.mobile-reader[data-theme=dark] .panel-content,.mobile-reader[data-theme=dark] .panel-header{background:#1c2128}.mobile-reader[data-theme=dark] .panel-header{border-bottom-color:#d4a57433}.mobile-reader[data-theme=dark] .lb-module-item{background:#d4a5741a}.mobile-reader[data-theme=dark] .lb-module-item:active{background:#d4a57433}.mobile-reader[data-theme=dark] .modal-content{background:#1c2128}.mobile-reader[data-theme=dark] .modal-body textarea{background:#0d1117;border-color:#30363d;color:var(--mv-text-color)}.mobile-reader[data-theme=dark] .modal-header,.mobile-reader[data-theme=dark] .modal-footer{border-color:#ffffff1a}.mobile-reader .loading-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:var(--mv-page-color);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:100;border-radius:12px;opacity:1;transition:opacity .3s ease}.mobile-reader .loading-overlay.fade-out{opacity:0;pointer-events:none}@media(min-width:600px)and (orientation:landscape){.mobile-reader .page-container{margin:12px 20px}.mobile-reader .page-content{padding:36px 48px}.mobile-reader .text-content{max-width:720px;margin:0 auto;font-size:18px}.mobile-reader .reader-header,.mobile-reader .reader-footer{padding:14px 24px}}@media(min-width:768px){.mobile-reader .page-container{margin:16px 24px;border-radius:16px}.mobile-reader .page-content{padding:40px 56px}.mobile-reader .text-content{max-width:800px;font-size:18px;line-height:1.9}.mobile-reader .settings-panel .panel-content,.mobile-reader .lb-panel .panel-content{max-width:480px;left:50%;transform:translate(-50%)}@keyframes slideUp{0%{transform:translate(-50%) translateY(100%)}to{transform:translate(-50%) translateY(0)}}}@supports (padding-top: env(safe-area-inset-top)){.mobile-reader .header-row-top{padding-top:max(10px,env(safe-area-inset-top))}.mobile-reader .reader-footer{padding-bottom:max(14px,env(safe-area-inset-bottom))}.mobile-reader .panel-body{padding-bottom:max(24px,env(safe-area-inset-bottom))}}.viewer-toast{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1000;pointer-events:none;opacity:0;transition:opacity .3s ease}.viewer-toast.showing{opacity:1}.toast-content{background:#000c;color:#fff;padding:16px 32px;border-radius:12px;font-size:15px;font-weight:500;text-align:center;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);box-shadow:0 4px 20px #0000004d;max-width:400px}:global(.book-viewer-root[data-theme=light]) .toast-content{background:#323232e6}:global(.mobile-reader[data-theme=light]) .toast-content{background:#323232e6}.settings-panel{position:fixed;top:0;left:0;width:100%;height:100%;z-index:200;display:none}.settings-panel.active{display:block}.panel-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:#0009;backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px)}.panel-content{position:absolute;bottom:0;left:0;width:100%;background:var(--mv-page-color, #fdfbf7);border-radius:24px 24px 0 0;max-height:80%;overflow-y:auto;animation:slideUp .35s cubic-bezier(.4,0,.2,1);box-shadow:0 -8px 32px #0003}@keyframes slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}.panel-header{display:flex;align-items:center;justify-content:space-between;padding:24px 24px 20px;border-bottom:1px solid rgba(201,166,107,.2);position:sticky;top:0;background:var(--mv-page-color, #fdfbf7);z-index:10}.panel-header h3{font-size:18px;font-weight:700;color:var(--mv-text-color, #2c2c2c);letter-spacing:-.02em;margin:0}.panel-close{background:none;border:none;font-size:20px;color:var(--mv-text-secondary, #6b6b6b);cursor:pointer;padding:8px 12px;border-radius:8px;transition:all var(--mv-transition-fast, .15s);line-height:1}.panel-close:active{background:var(--mv-accent-light, rgba(201, 166, 107, .15));color:var(--mv-accent-color, #c9a66b)}.panel-body{padding:24px}.setting-item{margin-bottom:32px}.setting-item:last-child{margin-bottom:0}.setting-item label{display:block;margin-bottom:14px;font-size:13px;font-weight:600;color:var(--mv-text-color, #2c2c2c);text-transform:uppercase;letter-spacing:.08em}.font-selector{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;max-height:200px;overflow-y:auto}.font-option{padding:12px;border:2px solid rgba(201,166,107,.2);border-radius:10px;background:transparent;cursor:pointer;transition:all var(--mv-transition-fast, .15s);font-size:13px;color:var(--mv-text-color, #2c2c2c);text-align:center}.font-option.active{border-color:var(--mv-accent-color, #c9a66b);background:var(--mv-accent-light, rgba(201, 166, 107, .15));color:var(--mv-accent-color, #c9a66b)}.font-option:active:not(.active){background:#c9a66b14}.range-control{display:flex;align-items:center;gap:14px;margin-bottom:10px}.range-label{font-size:12px;color:var(--mv-text-secondary, #6b6b6b);min-width:36px}.setting-item input[type=range]{flex:1;-webkit-appearance:none;-moz-appearance:none;appearance:none;height:6px;background:#c9a66b40;border-radius:3px;outline:none}.setting-item input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:26px;height:26px;background:var(--mv-accent-color, #c9a66b);border-radius:50%;cursor:pointer;box-shadow:0 2px 10px #c9a66b66}.setting-item input[type=range]::-moz-range-thumb{width:26px;height:26px;background:var(--mv-accent-color, #c9a66b);border-radius:50%;cursor:pointer;border:none;box-shadow:0 2px 10px #c9a66b66}.setting-value{display:block;text-align:center;font-size:13px;color:var(--mv-accent-color, #c9a66b);font-weight:600}.theme-buttons{display:flex;gap:12px}.theme-btn{flex:1;display:flex;flex-direction:column;align-items:center;gap:10px;padding:16px 12px;border:2px solid rgba(201,166,107,.25);border-radius:16px;background:transparent;cursor:pointer;transition:all var(--mv-transition-fast, .15s);font-size:13px;color:var(--mv-text-secondary, #6b6b6b);font-weight:500}.theme-btn.active{border-color:var(--mv-accent-color, #c9a66b);background:var(--mv-accent-light, rgba(201, 166, 107, .15));color:var(--mv-accent-color, #c9a66b)}.theme-btn:active:not(.active){transform:scale(.97);background:#c9a66b14}.theme-preview{width:44px;height:44px;border-radius:50%;border:2px solid rgba(201,166,107,.3);box-shadow:var(--mv-shadow-soft, 0 2px 12px rgba(0, 0, 0, .08))}.theme-preview.light{background:linear-gradient(135deg,#fff,#fdfbf7)}.theme-preview.sepia{background:linear-gradient(135deg,#f7f0e3,#ebe4d7)}.theme-preview.dark{background:linear-gradient(135deg,#1c2128,#0d1117)}.custom-css-btn{width:100%;padding:14px 16px;background:var(--mv-accent-color, #c9a66b);color:#fff;border:none;border-radius:12px;font-size:14px;font-weight:600;cursor:pointer;transition:all var(--mv-transition-fast, .15s)}.custom-css-btn:active{transform:scale(.98);opacity:.9}@supports (padding-bottom: env(safe-area-inset-bottom)){.panel-body{padding-bottom:max(24px,env(safe-area-inset-bottom))}}@media(min-width:768px){.panel-content{max-width:480px;left:50%;transform:translate(-50%)}@keyframes slideUp{0%{transform:translate(-50%) translateY(100%)}to{transform:translate(-50%) translateY(0)}}}')),document.head.appendChild(e)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}}();
!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";var t,n,e,r,o,i,a,l,s,u,c,f,d,p,v,h,g,b,m,y,w,x,_,k,C,S,E,z,j,A,M,N,$,I,P,L,T,F,B,R,O,W,q=Object.defineProperty,D=t=>{throw TypeError(t)},H=(t,n,e)=>((t,n,e)=>n in t?q(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e)(t,"symbol"!=typeof n?n+"":n,e),U=(t,n,e)=>n.has(t)||D("Cannot "+e),V=(t,n,e)=>(U(t,n,"read from private field"),e?e.call(t):n.get(t)),G=(t,n,e)=>n.has(t)?D("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(t):n.set(t,e),Y=(t,n,e,r)=>(U(t,n,"write to private field"),r?r.call(t,e):n.set(t,e),e),K=(t,n,e)=>(U(t,n,"access private method"),e);const Q={udRoot:"update-dialog-module__udRoot--bWc9J",udCard:"update-dialog-module__udCard---wy8T",udPop:"update-dialog-module__udPop--0Vb0B",udTitle:"update-dialog-module__udTitle--5imsi",udPill:"update-dialog-module__udPill--leinK",udSub:"update-dialog-module__udSub--zfs1y",udList:"update-dialog-module__udList--jnFg8",udFeat:"update-dialog-module__udFeat--MSXJY",udFix:"update-dialog-module__udFix--18UZ3",udPerf:"update-dialog-module__udPerf--bRifN",udBreak:"update-dialog-module__udBreak--jl-Bf",udActions:"update-dialog-module__udActions--5tqy2",udBtn:"update-dialog-module__udBtn--IHB-y",udBtnPrimary:"update-dialog-module__udBtnPrimary--ZlLFd",udBtnGhost:"update-dialog-module__udBtnGhost--Ly-cb",udAlert:"update-dialog-module__udAlert--GJ6WI",udAlertMessage:"update-dialog-module__udAlertMessage--nJfX4",udLoading:"update-dialog-module__udLoading----KQf",udLoadingSpinner:"update-dialog-module__udLoadingSpinner--0OgBH",udLoadingSvg:"update-dialog-module__udLoadingSvg--k5e0b",udRotate:"update-dialog-module__udRotate--gve2C",udLoadingCircle:"update-dialog-module__udLoadingCircle--Q78XG",udDash:"update-dialog-module__udDash--TGdW5",udLoadingMessage:"update-dialog-module__udLoadingMessage---UM99"},X=!1;var J=Array.isArray,Z=Array.prototype.indexOf,tt=Array.from,nt=Object.defineProperty,et=Object.getOwnPropertyDescriptor,rt=Object.getOwnPropertyDescriptors,ot=Object.prototype,it=Array.prototype,at=Object.getPrototypeOf,lt=Object.isExtensible;function st(t){return"function"==typeof t}const ut=()=>{};function ct(t){return t()}function ft(t){for(var n=0;n<t.length;n++)t[n]()}function dt(){var t,n;return{promise:new Promise((e,r)=>{t=e,n=r}),resolve:t,reject:n}}const pt=1<<24,vt=16,ht=32,gt=64,bt=128,mt=512,yt=1024,wt=2048,xt=4096,_t=8192,kt=16384,Ct=32768,St=65536,Et=1<<17,zt=1<<18,jt=1<<19,At=1<<25,Mt=32768,Nt=1<<21,$t=1<<23,It=Symbol("$state"),Pt=Symbol("legacy props"),Lt=Symbol(""),Tt=new class extends Error{constructor(){super(...arguments),H(this,"name","StaleReactionError"),H(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Ft(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}const Bt=Symbol();function Rt(t){return t===this.v}function Ot(t){return n=t,e=this.v,!(n!=n?e==e:n!==e||null!==n&&"object"==typeof n||"function"==typeof n);var n,e}let Wt=!1;let qt=null;function Dt(t){qt=t}function Ht(t,n=!1,e){qt={p:qt,i:!1,c:null,e:null,s:t,x:null,l:Wt&&!n?{s:null,u:null,$:[]}:null}}function Ut(t){var n=qt,e=n.e;if(null!==e)for(var r of(n.e=null,e))ae(r);return n.i=!0,qt=n.p,{}}function Vt(){return!Wt||null!==qt&&null===qt.l}let Gt=[];function Yt(){var t=Gt;Gt=[],ft(t)}function Kt(t){if(0===Gt.length&&!ln){var n=Gt;queueMicrotask(()=>{n===Gt&&Yt()})}Gt.push(t)}function Qt(){for(;Gt.length>0;)Yt()}function Xt(t){var n=Me;if(null===n)return ze.f|=$t,t;if(0===(n.f&Ct)){if(0===(n.f&bt))throw t;n.b.error(t)}else Jt(t,n)}function Jt(t,n){for(;null!==n;){if(0!==(n.f&bt))try{return void n.b.error(t)}catch(e){t=e}n=n.parent}throw t}const Zt=new Set;let tn=null,nn=null,en=null,rn=[],on=null,an=!1,ln=!1;t=new WeakMap,n=new WeakMap,e=new WeakMap,r=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,l=new WeakSet,s=function(t,n){var e;t.f^=yt;for(var r=t.first;null!==r;){var o=r.f,a=!!(96&o),s=a&&0!==(o&yt)||0!==(o&_t)||this.skipped_effects.has(r);if(0!==(r.f&bt)&&(null==(e=r.b)?void 0:e.is_pending())&&(n={parent:n,effect:r,effects:[],render_effects:[]}),!s&&null!==r.fn){a?r.f^=yt:4&o?n.effects.push(r):qe(r)&&(0!==(r.f&vt)&&V(this,i).add(r),Ge(r));var c=r.first;if(null!==c){r=c;continue}}var f=r.parent;for(r=r.next;null===r&&null!==f;)f===n.effect&&(K(this,l,u).call(this,n.effects),K(this,l,u).call(this,n.render_effects),n=n.parent),r=f.next,f=f.parent}},u=function(t){for(const n of t)0!==(n.f&wt)?V(this,i).add(n):0!==(n.f&xt)&&V(this,a).add(n),K(this,l,c).call(this,n.deps),tr(n,yt)},c=function(t){if(null!==t)for(const n of t)2&n.f&&0!==(n.f&Mt)&&(n.f^=Mt,K(this,l,c).call(this,n.deps))},f=function(){if(0===V(this,r)){for(const n of V(this,t))n();V(this,t).clear()}0===V(this,e)&&K(this,l,d).call(this)},d=function(){var t;if(Zt.size>1){this.previous.clear();var n=en,e=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const n of Zt){if(n===this){e=!1;continue}const i=[];for(const[t,r]of this.current){if(n.current.has(t)){if(!e||r===n.current.get(t))continue;n.current.set(t,r)}i.push(t)}if(0===i.length)continue;const a=[...n.current.keys()].filter(t=>!this.current.has(t));if(a.length>0){var o=rn;rn=[];const e=new Set,u=new Map;for(const t of i)pn(t,a,e,u);if(rn.length>0){tn=n,n.apply();for(const e of rn)K(t=n,l,s).call(t,e,r);n.deactivate()}rn=o}}tn=null,en=n}this.committed=!0,Zt.delete(this)};let sn=class c{constructor(){G(this,l),H(this,"committed",!1),H(this,"current",new Map),H(this,"previous",new Map),G(this,t,new Set),G(this,n,new Set),G(this,e,0),G(this,r,0),G(this,o,null),G(this,i,new Set),G(this,a,new Set),H(this,"skipped_effects",new Set),H(this,"is_fork",!1)}is_deferred(){return this.is_fork||V(this,r)>0}process(t){var n;rn=[],nn=null,this.apply();var e={parent:null,effect:null,effects:[],render_effects:[]};for(const r of t)K(this,l,s).call(this,r,e);this.is_fork||K(this,l,f).call(this),this.is_deferred()?(K(this,l,u).call(this,e.effects),K(this,l,u).call(this,e.render_effects)):(nn=this,tn=null,dn(e.render_effects),dn(e.effects),nn=null,null==(n=V(this,o))||n.resolve()),en=null}capture(t,n){this.previous.has(t)||this.previous.set(t,n),0===(t.f&$t)&&(this.current.set(t,t.v),null==en||en.set(t,t.v))}activate(){tn=this,this.apply()}deactivate(){tn===this&&(tn=null,en=null)}flush(){if(this.activate(),rn.length>0){if(un(),null!==tn&&tn!==this)return}else 0===V(this,e)&&this.process([]);this.deactivate()}discard(){for(const t of V(this,n))t(this);V(this,n).clear()}increment(t){Y(this,e,V(this,e)+1),t&&Y(this,r,V(this,r)+1)}decrement(t){Y(this,e,V(this,e)-1),t&&Y(this,r,V(this,r)-1),this.revive()}revive(){for(const t of V(this,i))V(this,a).delete(t),tr(t,wt),hn(t);for(const t of V(this,a))tr(t,xt),hn(t);this.flush()}oncommit(n){V(this,t).add(n)}ondiscard(t){V(this,n).add(t)}settled(){return(V(this,o)??Y(this,o,dt())).promise}static ensure(){if(null===tn){const t=tn=new c;Zt.add(tn),ln||c.enqueue(()=>{tn===t&&t.flush()})}return tn}static enqueue(t){Kt(t)}apply(){}};function un(){var t=ke;an=!0;try{var n=0;for(Ce(!0);rn.length>0;){var e=sn.ensure();if(n++>1e3)X,cn();e.process(rn),zn.clear()}}finally{an=!1,Ce(t),on=null}}function cn(){try{!function(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}()}catch(t){Jt(t,on)}}let fn=null;function dn(t){var n=t.length;if(0!==n){for(var e=0;e<n;){var r=t[e++];if(!(24576&r.f)&&qe(r)&&(fn=new Set,Ge(r),null===r.deps&&null===r.first&&null===r.nodes&&(null===r.teardown&&null===r.ac?be(r):r.fn=null),(null==fn?void 0:fn.size)>0)){zn.clear();for(const t of fn){if(24576&t.f)continue;const n=[t];let e=t.parent;for(;null!==e;)fn.has(e)&&(fn.delete(e),n.push(e)),e=e.parent;for(let t=n.length-1;t>=0;t--){const e=n[t];24576&e.f||Ge(e)}}fn.clear()}}fn=null}}function pn(t,n,e,r){if(!e.has(t)&&(e.add(t),null!==t.reactions))for(const o of t.reactions){const t=o.f;2&t?pn(o,n,e,r):4194320&t&&0===(t&wt)&&vn(o,n,r)&&(tr(o,wt),hn(o))}}function vn(t,n,e){const r=e.get(t);if(void 0!==r)return r;if(null!==t.deps)for(const o of t.deps){if(n.includes(o))return!0;if(2&o.f&&vn(o,n,e))return e.set(o,!0),!0}return e.set(t,!1),!1}function hn(t){for(var n=on=t;null!==n.parent;){var e=(n=n.parent).f;if(an&&n===Me&&0!==(e&vt)&&0===(e&zt))return;if(96&e){if(0===(e&yt))return;n.f^=yt}}rn.push(n)}class gn{constructor(t,n,e){G(this,A),H(this,"parent"),G(this,p,!1),G(this,v),G(this,h,null),G(this,g),G(this,b),G(this,m),G(this,y,null),G(this,w,null),G(this,x,null),G(this,_,null),G(this,k,null),G(this,C,0),G(this,S,0),G(this,E,!1),G(this,z,null),G(this,j,function(t){let n,e=0,r=An(0);return()=>{re()&&(Ke(r),se(()=>(0===e&&(n=Je(()=>t(()=>Ln(r)))),e+=1,()=>{Kt(()=>{e-=1,0===e&&(null==n||n(),n=void 0,Ln(r))})})))}}(()=>(Y(this,z,An(V(this,C))),()=>{Y(this,z,null)}))),Y(this,v,t),Y(this,g,n),Y(this,b,e),this.parent=Me.b,Y(this,p,!!V(this,g).pending),Y(this,m,ce(()=>{Me.b=this;var t=K(this,A,M).call(this);try{Y(this,y,de(()=>e(t)))}catch(n){this.error(n)}return V(this,S)>0?K(this,A,$).call(this):Y(this,p,!1),()=>{var t;null==(t=V(this,k))||t.remove()}},589952))}is_pending(){return V(this,p)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!V(this,g).pending}update_pending_count(t){K(this,A,I).call(this,t),Y(this,C,V(this,C)+t),V(this,z)&&In(V(this,z),V(this,C))}get_effect_pending(){return V(this,j).call(this),Ke(V(this,z))}error(t){var n=V(this,g).onerror;let e=V(this,g).failed;if(V(this,E)||!n&&!e)throw t;V(this,y)&&(he(V(this,y)),Y(this,y,null)),V(this,w)&&(he(V(this,w)),Y(this,w,null)),V(this,x)&&(he(V(this,x)),Y(this,x,null));var r=!1,o=!1;const i=()=>{r?console.warn("https://svelte.dev/e/svelte_boundary_reset_noop"):(r=!0,o&&function(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}(),sn.ensure(),Y(this,C,0),null!==V(this,x)&&me(V(this,x),()=>{Y(this,x,null)}),Y(this,p,this.has_pending_snippet()),Y(this,y,K(this,A,N).call(this,()=>(Y(this,E,!1),de(()=>V(this,b).call(this,V(this,v)))))),V(this,S)>0?K(this,A,$).call(this):Y(this,p,!1))};var a=ze;try{Ae(null),o=!0,null==n||n(t,i),o=!1}catch(l){Jt(l,V(this,m)&&V(this,m).parent)}finally{Ae(a)}e&&Kt(()=>{Y(this,x,K(this,A,N).call(this,()=>{sn.ensure(),Y(this,E,!0);try{return de(()=>{e(V(this,v),()=>t,()=>i)})}catch(l){return Jt(l,V(this,m).parent),null}finally{Y(this,E,!1)}}))})}}function bn(t,n,e,r){const o=Vt()?yn:_n;if(0!==e.length||0!==t.length){var i,a,l,s,u=tn,c=Me,f=(i=Me,a=ze,l=qt,s=tn,function(t=!0){Ne(i),Ae(a),Dt(l),t&&(null==s||s.activate())});t.length>0?Promise.all(t).then(()=>{f();try{return d()}finally{null==u||u.deactivate(),mn()}}):d()}else r(n.map(o));function d(){Promise.all(e.map(t=>wn(t))).then(t=>{f();try{r([...n.map(o),...t])}catch(e){0===(c.f&kt)&&Jt(e,c)}null==u||u.deactivate(),mn()}).catch(t=>{Jt(t,c)})}}function mn(){Ne(null),Ae(null),Dt(null)}function yn(t){var n=null!==ze&&2&ze.f?ze:null;null!==Me&&(Me.f|=jt);return{ctx:qt,deps:null,effects:null,equals:Rt,f:2050,fn:t,reactions:null,rv:0,v:Bt,wv:0,parent:n??Me,ac:null}}function wn(t,n){let e=Me;null===e&&function(){throw new Error("https://svelte.dev/e/async_derived_orphan")}();var r=e.b,o=void 0,i=An(Bt),a=!ze,l=new Map;return function(t){ee(4718592,t,!0)}(()=>{var n,e=dt();o=e.promise;try{Promise.resolve(t()).then(e.resolve,e.reject).then(()=>{s===tn&&s.committed&&s.deactivate(),mn()})}catch(f){e.reject(f),mn()}var s=tn;if(a){var u=!r.is_pending();r.update_pending_count(1),s.increment(u),null==(n=l.get(s))||n.reject(Tt),l.delete(s),l.set(s,e)}const c=(t,n=void 0)=>{if(s.activate(),n)n!==Tt&&(i.f|=$t,In(i,n));else{0!==(i.f&$t)&&(i.f^=$t),In(i,t);for(const[t,n]of l){if(l.delete(t),t===s)break;n.reject(Tt)}}a&&(r.update_pending_count(-1),s.decrement(u))};e.promise.then(c,t=>c(null,t||"unknown"))}),oe(()=>{for(const t of l.values())t.reject(Tt)}),new Promise(t=>{!function n(e){function r(){e===o?t(i):n(o)}e.then(r,r)}(o)})}function xn(t){const n=yn(t);return Ie(n),n}function _n(t){const n=yn(t);return n.equals=Ot,n}function kn(t){var n=t.effects;if(null!==n){t.effects=null;for(var e=0;e<n.length;e+=1)he(n[e])}}function Cn(t){var n,e=Me;Ne(function(t){for(var n=t.parent;null!==n;){if(!(2&n.f))return 0===(n.f&kt)?n:null;n=n.parent}return null}(t));try{t.f&=-32769,kn(t),n=He(t)}finally{Ne(e)}return n}function Sn(t){var n=Cn(t);(t.equals(n)||((null==tn?void 0:tn.is_fork)||(t.v=n),t.wv=We()),Se)||(null!==en?(re()||(null==tn?void 0:tn.is_fork))&&en.set(t,n):tr(t,0===(t.f&mt)?xt:yt))}p=new WeakMap,v=new WeakMap,h=new WeakMap,g=new WeakMap,b=new WeakMap,m=new WeakMap,y=new WeakMap,w=new WeakMap,x=new WeakMap,_=new WeakMap,k=new WeakMap,C=new WeakMap,S=new WeakMap,E=new WeakMap,z=new WeakMap,j=new WeakMap,A=new WeakSet,M=function(){var t=V(this,v);return V(this,p)&&(Y(this,k,Un()),V(this,v).before(V(this,k)),t=V(this,k)),t},N=function(t){var n=Me,e=ze,r=qt;Ne(V(this,m)),Ae(V(this,m)),Dt(V(this,m).ctx);try{return t()}catch(o){return Xt(o),null}finally{Ne(n),Ae(e),Dt(r)}},$=function(){const t=V(this,g).pending;null!==V(this,y)&&(Y(this,_,document.createDocumentFragment()),V(this,_).append(V(this,k)),_e(V(this,y),V(this,_))),null===V(this,w)&&Y(this,w,de(()=>t(V(this,v))))},I=function(t){var n;this.has_pending_snippet()?(Y(this,S,V(this,S)+t),0===V(this,S)&&(Y(this,p,!1),V(this,w)&&me(V(this,w),()=>{Y(this,w,null)}),V(this,_)&&(V(this,v).before(V(this,_)),Y(this,_,null)))):this.parent&&K(n=this.parent,A,I).call(n,t)};let En=new Set;const zn=new Map;let jn=!1;function An(t,n){return{f:0,v:t,reactions:null,equals:Rt,rv:0,wv:0}}function Mn(t,n){const e=An(t);return Ie(e),e}function Nn(t,n=!1,e=!0){var r;const o=An(t);return n||(o.equals=Ot),Wt&&e&&null!==qt&&null!==qt.l&&((r=qt.l).s??(r.s=[])).push(o),o}function $n(t,n,e=!1){return null!==ze&&(!je||0!==(ze.f&Et))&&Vt()&&4325394&ze.f&&!(null==$e?void 0:$e.includes(t))&&function(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}(),In(t,e?Fn(n):n)}function In(t,n){if(!t.equals(n)){var e=t.v;Se?zn.set(t,n):zn.set(t,e),t.v=n;var r=sn.ensure();r.capture(t,e),2&t.f&&(0!==(t.f&wt)&&Cn(t),tr(t,0!==(t.f&mt)?yt:xt)),t.wv=We(),Tn(t,wt),!Vt()||null===Me||0===(Me.f&yt)||96&Me.f||(null===Te?function(t){Te=t}([t]):Te.push(t)),!r.is_fork&&En.size>0&&!jn&&function(){jn=!1;var t=ke;Ce(!0);const n=Array.from(En);try{for(const t of n)0!==(t.f&yt)&&tr(t,xt),qe(t)&&Ge(t)}finally{Ce(t)}En.clear()}()}return n}function Pn(t,n=1){var e=Ke(t),r=1===n?e++:e--;return $n(t,e),r}function Ln(t){$n(t,t.v+1)}function Tn(t,n){var e=t.reactions;if(null!==e)for(var r=Vt(),o=e.length,i=0;i<o;i++){var a=e[i],l=a.f;if(r||a!==Me){var s=0===(l&wt);if(s&&tr(a,n),2&l){var u=a;null==en||en.delete(u),0===(l&Mt)&&(l&mt&&(a.f|=Mt),Tn(u,xt))}else s&&(0!==(l&vt)&&null!==fn&&fn.add(a),hn(a))}}}function Fn(t){if("object"!=typeof t||null===t||It in t)return t;const n=at(t);if(n!==ot&&n!==it)return t;var e=new Map,r=J(t),o=Mn(0),i=Re,a=t=>{if(Re===i)return t();var n=ze,e=Re;Ae(null),Oe(i);var r=t();return Ae(n),Oe(e),r};return r&&e.set("length",Mn(t.length)),new Proxy(t,{defineProperty(t,n,r){"value"in r&&!1!==r.configurable&&!1!==r.enumerable&&!1!==r.writable||function(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}();var o=e.get(n);return void 0===o?o=a(()=>{var t=Mn(r.value);return e.set(n,t),t}):$n(o,r.value,!0),!0},deleteProperty(t,n){var r=e.get(n);if(void 0===r){if(n in t){const t=a(()=>Mn(Bt));e.set(n,t),Ln(o)}}else $n(r,Bt),Ln(o);return!0},get(n,r,o){var i;if(r===It)return t;var l=e.get(r),s=r in n;if(void 0!==l||s&&!(null==(i=et(n,r))?void 0:i.writable)||(l=a(()=>Mn(Fn(s?n[r]:Bt))),e.set(r,l)),void 0!==l){var u=Ke(l);return u===Bt?void 0:u}return Reflect.get(n,r,o)},getOwnPropertyDescriptor(t,n){var r=Reflect.getOwnPropertyDescriptor(t,n);if(r&&"value"in r){var o=e.get(n);o&&(r.value=Ke(o))}else if(void 0===r){var i=e.get(n),a=null==i?void 0:i.v;if(void 0!==i&&a!==Bt)return{enumerable:!0,configurable:!0,value:a,writable:!0}}return r},has(t,n){var r;if(n===It)return!0;var o=e.get(n),i=void 0!==o&&o.v!==Bt||Reflect.has(t,n);if((void 0!==o||null!==Me&&(!i||(null==(r=et(t,n))?void 0:r.writable)))&&(void 0===o&&(o=a(()=>Mn(i?Fn(t[n]):Bt)),e.set(n,o)),Ke(o)===Bt))return!1;return i},set(t,n,i,l){var s,u=e.get(n),c=n in t;if(r&&"length"===n)for(var f=i;f<u.v;f+=1){var d=e.get(f+"");void 0!==d?$n(d,Bt):f in t&&(d=a(()=>Mn(Bt)),e.set(f+"",d))}void 0===u?c&&!(null==(s=et(t,n))?void 0:s.writable)||($n(u=a(()=>Mn(void 0)),Fn(i)),e.set(n,u)):(c=u.v!==Bt,$n(u,a(()=>Fn(i))));var p=Reflect.getOwnPropertyDescriptor(t,n);if((null==p?void 0:p.set)&&p.set.call(l,i),!c){if(r&&"string"==typeof n){var v=e.get("length"),h=Number(n);Number.isInteger(h)&&h>=v.v&&$n(v,h+1)}Ln(o)}return!0},ownKeys(t){Ke(o);var n=Reflect.ownKeys(t).filter(t=>{var n=e.get(t);return void 0===n||n.v!==Bt});for(var[r,i]of e)i.v===Bt||r in t||n.push(r);return n},setPrototypeOf(){!function(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}()}})}function Bn(t){try{if(null!==t&&"object"==typeof t&&It in t)return t[It]}catch{}return t}function Rn(t,n){return Object.is(Bn(t),Bn(n))}var On,Wn,qn,Dn,Hn;function Un(t=""){return document.createTextNode(t)}function Vn(t){return Dn.call(t)}function Gn(t){return Hn.call(t)}function Yn(t,n){return Vn(t)}function Kn(t,n=!1){var e=Vn(t);return e instanceof Comment&&""===e.data?Gn(e):e}function Qn(t,n=1,e=!1){let r=t;for(;n--;)r=Gn(r);return r}function Xn(t,n){if(n){const n=document.body;t.autofocus=!0,Kt(()=>{document.activeElement===n&&t.focus()})}}let Jn=!1;function Zn(t){var n=ze,e=Me;Ae(null),Ne(null);try{return t()}finally{Ae(n),Ne(e)}}function te(t,n,e,r=e){t.addEventListener(n,()=>Zn(e));const o=t.__on_r;t.__on_r=o?()=>{o(),r(!0)}:()=>r(!0),Jn||(Jn=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var n;if(!t.defaultPrevented)for(const e of t.target.elements)null==(n=e.__on_r)||n.call(e)})},{capture:!0}))}function ne(t){null===Me&&(null===ze&&function(){throw new Error("https://svelte.dev/e/effect_orphan")}(),function(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}()),Se&&function(){throw new Error("https://svelte.dev/e/effect_in_teardown")}()}function ee(t,n,e){var r=Me;null!==r&&0!==(r.f&_t)&&(t|=_t);var o={ctx:qt,deps:null,nodes:null,f:t|wt|mt,first:null,fn:n,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(e)try{Ge(o),o.f|=Ct}catch(l){throw he(o),l}else null!==n&&hn(o);var i=o;if(e&&null===i.deps&&null===i.teardown&&null===i.nodes&&i.first===i.last&&0===(i.f&jt)&&(i=i.first,0!==(t&vt)&&0!==(t&St)&&null!==i&&(i.f|=St)),null!==i&&(i.parent=r,null!==r&&function(t,n){var e=n.last;null===e?n.last=n.first=t:(e.next=t,t.prev=e,n.last=t)}(i,r),null!==ze&&2&ze.f&&0===(t&gt))){var a=ze;(a.effects??(a.effects=[])).push(i)}return o}function re(){return null!==ze&&!je}function oe(t){const n=ee(8,null,!1);return tr(n,yt),n.teardown=t,n}function ie(t){ne();var n=Me.f;if(!(!ze&&0!==(n&ht)&&0===(n&Ct)))return ae(t);var e=qt;(e.e??(e.e=[])).push(t)}function ae(t){return ee(1048580,t,!1)}function le(t){return ee(4,t,!1)}function se(t,n=0){return ee(8|n,t,!0)}function ue(t,n=[],e=[],r=[]){bn(r,n,e,n=>{ee(8,()=>t(...n.map(Ke)),!0)})}function ce(t,n=0){return ee(vt|n,t,!0)}function fe(t,n=0){return ee(pt|n,t,!0)}function de(t){return ee(524320,t,!0)}function pe(t){var n=t.teardown;if(null!==n){const t=Se,e=ze;Ee(!0),Ae(null);try{n.call(null)}finally{Ee(t),Ae(e)}}}function ve(t,n=!1){var e=t.first;for(t.first=t.last=null;null!==e;){const t=e.ac;null!==t&&Zn(()=>{t.abort(Tt)});var r=e.next;0!==(e.f&gt)?e.parent=null:he(e,n),e=r}}function he(t,n=!0){var e=!1;!n&&0===(t.f&zt)||null===t.nodes||null===t.nodes.end||(ge(t.nodes.start,t.nodes.end),e=!0),ve(t,n&&!e),Ve(t,0),tr(t,kt);var r=t.nodes&&t.nodes.t;if(null!==r)for(const i of r)i.stop();pe(t);var o=t.parent;null!==o&&null!==o.first&&be(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function ge(t,n){for(;null!==t;){var e=t===n?null:Gn(t);t.remove(),t=e}}function be(t){var n=t.parent,e=t.prev,r=t.next;null!==e&&(e.next=r),null!==r&&(r.prev=e),null!==n&&(n.first===t&&(n.first=r),n.last===t&&(n.last=e))}function me(t,n,e=!0){var r=[];ye(t,r,!0);var o=()=>{e&&he(t),n&&n()},i=r.length;if(i>0){var a=()=>--i||o();for(var l of r)l.out(a)}else o()}function ye(t,n,e){if(0===(t.f&_t)){t.f^=_t;var r=t.nodes&&t.nodes.t;if(null!==r)for(const t of r)(t.is_global||e)&&n.push(t);for(var o=t.first;null!==o;){var i=o.next;ye(o,n,!!(0!==(o.f&St)||0!==(o.f&ht)&&0!==(t.f&vt))&&e),o=i}}}function we(t){xe(t,!0)}function xe(t,n){if(0!==(t.f&_t)){t.f^=_t,0===(t.f&yt)&&(tr(t,wt),hn(t));for(var e=t.first;null!==e;){var r=e.next;xe(e,!!(0!==(e.f&St)||0!==(e.f&ht))&&n),e=r}var o=t.nodes&&t.nodes.t;if(null!==o)for(const t of o)(t.is_global||n)&&t.in()}}function _e(t,n){if(t.nodes)for(var e=t.nodes.start,r=t.nodes.end;null!==e;){var o=e===r?null:Gn(e);n.append(e),e=o}}let ke=!1;function Ce(t){ke=t}let Se=!1;function Ee(t){Se=t}let ze=null,je=!1;function Ae(t){ze=t}let Me=null;function Ne(t){Me=t}let $e=null;function Ie(t){null!==ze&&(null===$e?$e=[t]:$e.push(t))}let Pe=null,Le=0,Te=null;let Fe=1,Be=0,Re=Be;function Oe(t){Re=t}function We(){return++Fe}function qe(t){var n=t.f;if(0!==(n&wt))return!0;if(2&n&&(t.f&=-32769),0!==(n&xt)){var e=t.deps;if(null!==e)for(var r=e.length,o=0;o<r;o++){var i=e[o];if(qe(i)&&Sn(i),i.wv>t.wv)return!0}0!==(n&mt)&&null===en&&tr(t,yt)}return!1}function De(t,n,e=!0){var r=t.reactions;if(null!==r&&!(null==$e?void 0:$e.includes(t)))for(var o=0;o<r.length;o++){var i=r[o];2&i.f?De(i,n,!1):n===i&&(e?tr(i,wt):0!==(i.f&yt)&&tr(i,xt),hn(i))}}function He(t){var n,e=Pe,r=Le,o=Te,i=ze,a=$e,l=qt,s=je,u=Re,c=t.f;Pe=null,Le=0,Te=null,ze=96&c?null:t,$e=null,Dt(t.ctx),je=!1,Re=++Be,null!==t.ac&&(Zn(()=>{t.ac.abort(Tt)}),t.ac=null);try{t.f|=Nt;var f=(0,t.fn)(),d=t.deps;if(null!==Pe){var p;if(Ve(t,Le),null!==d&&Le>0)for(d.length=Le+Pe.length,p=0;p<Pe.length;p++)d[Le+p]=Pe[p];else t.deps=d=Pe;if(re()&&0!==(t.f&mt))for(p=Le;p<d.length;p++)((n=d[p]).reactions??(n.reactions=[])).push(t)}else null!==d&&Le<d.length&&(Ve(t,Le),d.length=Le);if(Vt()&&null!==Te&&!je&&null!==d&&!(6146&t.f))for(p=0;p<Te.length;p++)De(Te[p],t);return null!==i&&i!==t&&(Be++,null!==Te&&(null===o?o=Te:o.push(...Te))),0!==(t.f&$t)&&(t.f^=$t),f}catch(v){return Xt(v)}finally{t.f^=Nt,Pe=e,Le=r,Te=o,ze=i,$e=a,Dt(l),je=s,Re=u}}function Ue(t,n){let e=n.reactions;if(null!==e){var r=Z.call(e,t);if(-1!==r){var o=e.length-1;0===o?e=n.reactions=null:(e[r]=e[o],e.pop())}}null===e&&2&n.f&&(null===Pe||!Pe.includes(n))&&(tr(n,xt),0!==(n.f&mt)&&(n.f^=mt,n.f&=-32769),kn(n),Ve(n,0))}function Ve(t,n){var e=t.deps;if(null!==e)for(var r=n;r<e.length;r++)Ue(t,e[r])}function Ge(t){var n=t.f;if(0===(n&kt)){tr(t,yt);var e=Me,r=ke;Me=t,ke=!0;try{16777232&n?function(t){for(var n=t.first;null!==n;){var e=n.next;0===(n.f&ht)&&he(n),n=e}}(t):ve(t),pe(t);var o=He(t);t.teardown="function"==typeof o?o:null,t.wv=Fe}finally{ke=r,Me=e}}}async function Ye(){await Promise.resolve(),function(){var t=ln;ln=!0;try{for(;;){if(Qt(),0===rn.length&&(null==tn||tn.flush(),0===rn.length))return void(on=null);un()}}finally{ln=t}}()}function Ke(t){var n=!!(2&t.f);if(null!==ze&&!je&&(!(null!==Me&&0!==(Me.f&kt))&&!(null==$e?void 0:$e.includes(t)))){var e=ze.deps;if(0!==(ze.f&Nt))t.rv<Be&&(t.rv=Be,null===Pe&&null!==e&&e[Le]===t?Le++:null===Pe?Pe=[t]:Pe.includes(t)||Pe.push(t));else{(ze.deps??(ze.deps=[])).push(t);var r=t.reactions;null===r?t.reactions=[ze]:r.includes(ze)||r.push(ze)}}if(Se){if(zn.has(t))return zn.get(t);if(n){var o=t,i=o.v;return(0===(o.f&yt)&&null!==o.reactions||Xe(o))&&(i=Cn(o)),zn.set(o,i),i}}else n&&(!(null==en?void 0:en.has(t))||(null==tn?void 0:tn.is_fork)&&!re())&&(qe(o=t)&&Sn(o),ke&&re()&&0===(o.f&mt)&&Qe(o));if(null==en?void 0:en.has(t))return en.get(t);if(0!==(t.f&$t))throw t.v;return t.v}function Qe(t){if(null!==t.deps){t.f^=mt;for(const n of t.deps)(n.reactions??(n.reactions=[])).push(t),2&n.f&&0===(n.f&mt)&&Qe(n)}}function Xe(t){if(t.v===Bt)return!0;if(null===t.deps)return!1;for(const n of t.deps){if(zn.has(n))return!0;if(2&n.f&&Xe(n))return!0}return!1}function Je(t){var n=je;try{return je=!0,t()}finally{je=n}}const Ze=-7169;function tr(t,n){t.f=t.f&Ze|n}function nr(t){if("object"==typeof t&&t&&!(t instanceof EventTarget))if(It in t)er(t);else if(!Array.isArray(t))for(let n in t){const e=t[n];"object"==typeof e&&e&&It in e&&er(e)}}function er(t,n=new Set){if(!("object"!=typeof t||null===t||t instanceof EventTarget||n.has(t))){n.add(t),t instanceof Date&&t.getTime();for(let o in t)try{er(t[o],n)}catch(e){}const r=at(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=rt(r);for(let r in n){const o=n[r].get;if(o)try{o.call(t)}catch(e){}}}}}function rr(t){return t.endsWith("capture")&&"gotpointercapture"!==t&&"lostpointercapture"!==t}const or=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function ir(t){return or.includes(t)}const ar={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function lr(t){return t=t.toLowerCase(),ar[t]??t}const sr=["touchstart","touchmove"];function ur(t){return sr.includes(t)}const cr=new Set,fr=new Set;function dr(t,n,e,r={}){function o(t){if(r.capture||gr.call(n,t),!t.cancelBubble)return Zn(()=>null==e?void 0:e.call(this,t))}return t.startsWith("pointer")||t.startsWith("touch")||"wheel"===t?Kt(()=>{n.addEventListener(t,o,r)}):n.addEventListener(t,o,r),o}function pr(t,n,e,r,o){var i={capture:r,passive:o},a=dr(t,n,e,i);(n===document.body||n===window||n===document||n instanceof HTMLMediaElement)&&oe(()=>{n.removeEventListener(t,a,i)})}function vr(t){for(var n=0;n<t.length;n++)cr.add(t[n]);for(var e of fr)e(t)}let hr=null;function gr(t){var n,e=this,r=e.ownerDocument,o=t.type,i=(null==(n=t.composedPath)?void 0:n.call(t))||[],a=i[0]||t.target;hr=t;var l=0,s=hr===t&&t.__root;if(s){var u=i.indexOf(s);if(-1!==u&&(e===document||e===window))return void(t.__root=e);var c=i.indexOf(e);if(-1===c)return;u<=c&&(l=u)}if((a=i[l]||t.target)!==e){nt(t,"currentTarget",{configurable:!0,get:()=>a||r});var f=ze,d=Me;Ae(null),Ne(null);try{for(var p,v=[];null!==a;){var h=a.assignedSlot||a.parentNode||a.host||null;try{var g=a["__"+o];null==g||a.disabled&&t.target!==a||g.call(a,t)}catch(b){p?v.push(b):p=b}if(t.cancelBubble||h===e||null===h)break;a=h}if(p){for(let t of v)queueMicrotask(()=>{throw t});throw p}}finally{t.__root=e,delete t.currentTarget,Ae(f),Ne(d)}}}function br(t){var n=document.createElement("template");return n.innerHTML=t.replaceAll("<!>","\x3c!----\x3e"),n.content}function mr(t,n){var e=Me;null===e.nodes&&(e.nodes={start:t,end:n,a:null,t:null})}function yr(t,n){var e,r=!!(1&n),o=!!(2&n),i=!t.startsWith("<!>");return()=>{void 0===e&&(e=br(i?t:"<!>"+t),r||(e=Vn(e)));var n=o||qn?document.importNode(e,!0):e.cloneNode(!0);r?mr(Vn(n),n.lastChild):mr(n,n);return n}}function wr(t,n,e="svg"){var r,o=`<${e}>${!t.startsWith("<!>")?t:"<!>"+t}</${e}>`;return()=>{if(!r){var t=br(o);r=Vn(Vn(t))}var n=r.cloneNode(!0);return mr(n,n),n}}function xr(t,n){return wr(t,0,"svg")}function _r(){var t=document.createDocumentFragment(),n=document.createComment(""),e=Un();return t.append(n,e),mr(n,e),t}function kr(t,n){null!==t&&t.before(n)}let Cr=!0;function Sr(t){Cr=t}function Er(t,n){var e=null==n?"":"object"==typeof n?n+"":n;e!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=e,t.nodeValue=e+"")}function zr(t,n){return function(t,{target:n,anchor:e,props:r={},events:o,context:i,intro:a=!0}){!function(){if(void 0===On){On=window,Wn=document,qn=/Firefox/.test(navigator.userAgent);var t=Element.prototype,n=Node.prototype,e=Text.prototype;Dn=et(n,"firstChild").get,Hn=et(n,"nextSibling").get,lt(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),lt(e)&&(e.__t=void 0)}}();var l=new Set,s=t=>{for(var e=0;e<t.length;e++){var r=t[e];if(!l.has(r)){l.add(r);var o=ur(r);n.addEventListener(r,gr,{passive:o});var i=jr.get(r);void 0===i?(document.addEventListener(r,gr,{passive:o}),jr.set(r,1)):jr.set(r,i+1)}}};s(tt(cr)),fr.add(s);var u=void 0,c=function(t){sn.ensure();const n=ee(524352,t,!0);return(t={})=>new Promise(e=>{t.outro?me(n,()=>{he(n),e(void 0)}):(he(n),e(void 0))})}(()=>{var c=e??n.appendChild(Un());return function(t,n,e){new gn(t,n,e)}(c,{pending:()=>{}},n=>{i&&(Ht({}),qt.c=i);o&&(r.$$events=o),Cr=a,u=t(n,r)||{},Cr=!0,i&&Ut()}),()=>{var t;for(var r of l){n.removeEventListener(r,gr);var o=jr.get(r);0===--o?(document.removeEventListener(r,gr),jr.delete(r)):jr.set(r,o)}fr.delete(s),c!==e&&(null==(t=c.parentNode)||t.removeChild(c))}});return Ar.set(u,c),u}(t,n)}const jr=new Map;let Ar=new WeakMap;function Mr(t,n){const e=Ar.get(t);return e?(Ar.delete(t),e(n)):Promise.resolve()}class Nr{constructor(t,n=!0){H(this,"anchor"),G(this,P,new Map),G(this,L,new Map),G(this,T,new Map),G(this,F,new Set),G(this,B,!0),G(this,R,()=>{var t=tn;if(V(this,P).has(t)){var n=V(this,P).get(t),e=V(this,L).get(n);if(e)we(e),V(this,F).delete(n);else{var r=V(this,T).get(n);r&&(V(this,L).set(n,r.effect),V(this,T).delete(n),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),e=r.effect)}for(const[n,e]of V(this,P)){if(V(this,P).delete(n),n===t)break;const r=V(this,T).get(e);r&&(he(r.effect),V(this,T).delete(e))}for(const[t,r]of V(this,L)){if(t===n||V(this,F).has(t))continue;const o=()=>{if(Array.from(V(this,P).values()).includes(t)){var n=document.createDocumentFragment();_e(r,n),n.append(Un()),V(this,T).set(t,{effect:r,fragment:n})}else he(r);V(this,F).delete(t),V(this,L).delete(t)};V(this,B)||!e?(V(this,F).add(t),me(r,o,!1)):o()}}}),G(this,O,t=>{V(this,P).delete(t);const n=Array.from(V(this,P).values());for(const[e,r]of V(this,T))n.includes(e)||(he(r.effect),V(this,T).delete(e))}),this.anchor=t,Y(this,B,n)}ensure(t,n){var e=tn;!n||V(this,L).has(t)||V(this,T).has(t)||V(this,L).set(t,de(()=>n(this.anchor)));V(this,P).set(e,t),V(this,R).call(this)}}function $r(t,n,e=!1){var r=new Nr(t);function o(t,n){r.ensure(t,n)}ce(()=>{var t=!1;n((n,e=!0)=>{t=!0,o(e,n)}),t||o(!1,null)},e?St:0)}function Ir(t,n){return n}function Pr(t,n=!0){for(var e=0;e<t.length;e++)he(t[e],n)}var Lr;function Tr(t,n,e,r,o,i=null){var a=t,l=new Map;!(4&n)||(a=t.appendChild(Un()));var s,u=null,c=_n(()=>{var t=e();return J(t)?t:null==t?[]:tt(t)}),f=!0;function d(){p.fallback=u,function(t,n,e,r,o){var i,a,l,s,u,c,f,d,p,v,h,g,b,m,y=!!(8&r),w=n.length,x=t.items,_=t.effect.first,k=null,C=[],S=[];if(y)for(m=0;m<w;m+=1)g=o(n[m],m),0===((b=x.get(g).e).f&At)&&(null==(a=null==(i=b.nodes)?void 0:i.a)||a.measure(),(h??(h=new Set)).add(b));for(m=0;m<w;m+=1){if(g=o(n[m],m),b=x.get(g).e,null!==t.outrogroups)for(const n of t.outrogroups)n.pending.delete(b),n.done.delete(b);if(0!==(b.f&At)){if(b.f^=At,b!==_){var E=k?k.next:_;b===t.effect.last&&(t.effect.last=b.prev),b.prev&&(b.prev.next=b.next),b.next&&(b.next.prev=b.prev),Rr(t,k,b),Rr(t,b,E),Br(b,E,e),C=[],S=[],_=(k=b).next;continue}Br(b,null,e)}if(0!==(b.f&_t)&&(we(b),y&&(null==(s=null==(l=b.nodes)?void 0:l.a)||s.unfix(),(h??(h=new Set)).delete(b))),b!==_){if(void 0!==v&&v.has(b)){if(C.length<S.length){var z,j=S[0];k=j.prev;var A=C[0],M=C[C.length-1];for(z=0;z<C.length;z+=1)Br(C[z],j,e);for(z=0;z<S.length;z+=1)v.delete(S[z]);Rr(t,A.prev,M.next),Rr(t,k,A),Rr(t,M,j),_=j,k=M,m-=1,C=[],S=[]}else v.delete(b),Br(b,_,e),Rr(t,b.prev,b.next),Rr(t,b,null===k?t.effect.first:k.next),Rr(t,k,b),k=b;continue}for(C=[],S=[];null!==_&&_!==b;)(v??(v=new Set)).add(_),S.push(_),_=_.next;if(null===_)continue}0===(b.f&At)&&C.push(b),k=b,_=b.next}if(null!==t.outrogroups){for(const n of t.outrogroups)0===n.pending.size&&(Pr(tt(n.done)),null==(u=t.outrogroups)||u.delete(n));0===t.outrogroups.size&&(t.outrogroups=null)}if(null!==_||void 0!==v){var N=[];if(void 0!==v)for(b of v)0===(b.f&_t)&&N.push(b);for(;null!==_;)0===(_.f&_t)&&_!==t.fallback&&N.push(_),_=_.next;var $=N.length;if($>0){var I=4&r&&0===w?e:null;if(y){for(m=0;m<$;m+=1)null==(f=null==(c=N[m].nodes)?void 0:c.a)||f.measure();for(m=0;m<$;m+=1)null==(p=null==(d=N[m].nodes)?void 0:d.a)||p.fix()}!function(t,n,e){for(var r,o=n.length,i=n.length,a=0;a<o;a++){let e=n[a];me(e,()=>{if(r){if(r.pending.delete(e),r.done.add(e),0===r.pending.size){var n=t.outrogroups;Pr(tt(r.done)),n.delete(r),0===n.size&&(t.outrogroups=null)}}else i-=1},!1)}if(0===i){var l=null!==e;if(l){var s=e,u=s.parentNode;u.textContent="",u.append(s),t.items.clear()}Pr(n,!l)}else r={pending:new Set(n),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(r)}(t,N,I)}}y&&Kt(()=>{var t,n;if(void 0!==h)for(b of h)null==(n=null==(t=b.nodes)?void 0:t.a)||n.apply()})}(p,s,a,n,r),null!==u&&(0===s.length?0===(u.f&At)?we(u):(u.f^=At,Br(u,null,a)):me(u,()=>{u=null}))}var p={effect:ce(()=>{for(var t=(s=Ke(c)).length,p=new Set,v=0;v<t;v+=1){var h=s[v],g=r(h,v),b=f?null:l.get(g);b?(b.v&&In(b.v,h),b.i&&In(b.i,v)):(b=Fr(l,f?a:Lr??(Lr=Un()),h,g,v,o,n,e),f||(b.e.f|=At),l.set(g,b)),p.add(g)}0===t&&i&&!u&&(f?u=de(()=>i(a)):(u=de(()=>i(Lr??(Lr=Un())))).f|=At),f||d(),Ke(c)}),items:l,outrogroups:null,fallback:u};f=!1}function Fr(t,n,e,r,o,i,a,l){var s=1&a?16&a?An(e):Nn(e,!1,!1):null,u=2&a?An(o):null;return{v:s,i:u,e:de(()=>(i(n,s??e,u??o,l),()=>{t.delete(r)}))}}function Br(t,n,e){if(t.nodes)for(var r=t.nodes.start,o=t.nodes.end,i=n&&0===(n.f&At)?n.nodes.start:e;null!==r;){var a=Gn(r);if(i.before(r),r===o)return;r=a}}function Rr(t,n,e){null===n?t.effect.first=e:n.next=e,null===e?t.effect.last=n:e.prev=n}function Or(t,n,e,r,o){var i,a=null==(i=n.$$slots)?void 0:i[e],l=!1;!0===a&&(a=n.children,l=!0),void 0===a||a(t,l?()=>r:r)}P=new WeakMap,L=new WeakMap,T=new WeakMap,F=new WeakMap,B=new WeakMap,R=new WeakMap,O=new WeakMap;const Wr={tick:t=>requestAnimationFrame(t),now:()=>performance.now(),tasks:new Set};function qr(){const t=Wr.now();Wr.tasks.forEach(n=>{n.c(t)||(Wr.tasks.delete(n),n.f())}),0!==Wr.tasks.size&&Wr.tick(qr)}function Dr(t,n){Zn(()=>{t.dispatchEvent(new CustomEvent(n))})}function Hr(t){if("float"===t)return"cssFloat";if("offset"===t)return"cssOffset";if(t.startsWith("--"))return t;const n=t.split("-");return 1===n.length?n[0]:n[0]+n.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function Ur(t){const n={},e=t.split(";");for(const r of e){const[t,e]=r.split(":");if(!t||void 0===e)break;n[Hr(t.trim())]=e.trim()}return n}const Vr=t=>t;function Gr(t,n,e,r){var o,i,a,l,s=!!(1&t),u=!!(2&t),c=!!(4&t),f=s&&u?"both":s?"in":"out",d=n.inert,p=n.style.overflow;function v(){return Zn(()=>i??(i=e()(n,(null==r?void 0:r())??{},{direction:f})))}var h={is_global:c,in(){var t;if(n.inert=d,!s)return null==l||l.abort(),void(null==(t=null==l?void 0:l.reset)||t.call(l));u||null==a||a.abort(),Dr(n,"introstart"),a=Yr(n,v(),l,1,()=>{Dr(n,"introend"),null==a||a.abort(),a=i=void 0,n.style.overflow=p})},out(t){if(!u)return null==t||t(),void(i=void 0);n.inert=!0,Dr(n,"outrostart"),l=Yr(n,v(),a,0,()=>{Dr(n,"outroend"),null==t||t()})},stop:()=>{null==a||a.abort(),null==l||l.abort()}},g=Me;if(((o=g.nodes).t??(o.t=[])).push(h),s&&Cr){var b=c;if(!b){for(var m=g.parent;m&&0!==(m.f&St);)for(;(m=m.parent)&&0===(m.f&vt););b=!m||0!==(m.f&Ct)}b&&le(()=>{Je(()=>h.in())})}}function Yr(t,n,e,r,o){var i=1===r;if(st(n)){var a,l=!1;return Kt(()=>{if(!l){var s=n({direction:i?"in":"out"});a=Yr(t,s,e,r,o)}}),{abort:()=>{l=!0,null==a||a.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(null==e||e.deactivate(),!(null==n?void 0:n.duration))return o(),{abort:ut,deactivate:ut,reset:ut,t:()=>r};const{delay:s=0,css:u,tick:c,easing:f=Vr}=n;var d=[];if(i&&void 0===e&&(c&&c(0,1),u)){var p=Ur(u(0,1));d.push(p,p)}var v=()=>1-r,h=t.animate(d,{duration:s,fill:"forwards"});return h.onfinish=()=>{h.cancel();var i=(null==e?void 0:e.t())??1-r;null==e||e.abort();var a=r-i,l=n.duration*Math.abs(a),s=[];if(l>0){var d=!1;if(u)for(var p=Math.ceil(l/(1e3/60)),g=0;g<=p;g+=1){var b=i+a*f(g/p),m=Ur(u(b,1-b));s.push(m),d||(d="hidden"===m.overflow)}d&&(t.style.overflow="hidden"),v=()=>{var t=h.currentTime;return i+a*f(t/l)},c&&function(t){let n;0===Wr.tasks.size&&Wr.tick(qr),new Promise(e=>{Wr.tasks.add(n={c:t,f:e})})}(()=>{if("running"!==h.playState)return!1;var t=v();return c(t,1-t),!0})}(h=t.animate(s,{duration:l,fill:"forwards"})).onfinish=()=>{v=()=>r,null==c||c(r,1-r),o()}},{abort:()=>{h&&(h.cancel(),h.effect=null,h.onfinish=ut)},deactivate:()=>{o=ut},reset:()=>{0===r&&(null==c||c(1,0))},t:()=>v()}}function Kr(t,n){le(()=>{var e=t.getRootNode(),r=e.host?e:e.head??e.ownerDocument.head;if(!r.querySelector("#"+n.hash)){const t=document.createElement("style");t.id=n.hash,t.textContent=n.code,r.appendChild(t)}})}function Qr(t,n){var e,r=void 0;fe(()=>{r!==(r=n())&&(e&&(he(e),e=null),r&&(e=de(()=>{le(()=>r(t))})))})}function Xr(t){var n,e,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var o=t.length;for(n=0;n<o;n++)t[n]&&(e=Xr(t[n]))&&(r&&(r+=" "),r+=e)}else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Jr(t){return"object"==typeof t?function(){for(var t,n,e=0,r="",o=arguments.length;e<o;e++)(t=arguments[e])&&(n=Xr(t))&&(r&&(r+=" "),r+=n);return r}(t):t??""}const Zr=[..." \t\n\r\fÂ \v\ufeff"];function to(t,n=!1){var e=n?" !important;":";",r="";for(var o in t){var i=t[o];null!=i&&""!==i&&(r+=" "+o+": "+i+e)}return r}function no(t){return"-"!==t[0]||"-"!==t[1]?t.toLowerCase():t}function eo(t,n,e,r,o,i){var a=t.__className;if(a!==e||void 0===a){var l=function(t,n,e){var r=null==t?"":""+t;if(n&&(r=r?r+" "+n:n),e)for(var o in e)if(e[o])r=r?r+" "+o:o;else if(r.length)for(var i=o.length,a=0;(a=r.indexOf(o,a))>=0;){var l=a+i;0!==a&&!Zr.includes(r[a-1])||l!==r.length&&!Zr.includes(r[l])?a=l:r=(0===a?"":r.substring(0,a))+r.substring(l+1)}return""===r?null:r}(e,r,i);null==l?t.removeAttribute("class"):n?t.className=l:t.setAttribute("class",l),t.__className=e}else if(i&&o!==i)for(var s in i){var u=!!i[s];null!=o&&u===!!o[s]||t.classList.toggle(s,u)}return i}function ro(t,n={},e,r){for(var o in e){var i=e[o];n[o]!==i&&(null==e[o]?t.style.removeProperty(o):t.style.setProperty(o,i,r))}}function oo(t,n,e,r){if(t.__style!==n){var o=function(t,n){if(n){var e,r,o="";if(Array.isArray(n)?(e=n[0],r=n[1]):e=n,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,a=0,l=!1,s=[];e&&s.push(...Object.keys(e).map(no)),r&&s.push(...Object.keys(r).map(no));var u=0,c=-1;const n=t.length;for(var f=0;f<n;f++){var d=t[f];if(l?"/"===d&&"*"===t[f-1]&&(l=!1):i?i===d&&(i=!1):"/"===d&&"*"===t[f+1]?l=!0:'"'===d||"'"===d?i=d:"("===d?a++:")"===d&&a--,!l&&!1===i&&0===a)if(":"===d&&-1===c)c=f;else if(";"===d||f===n-1){if(-1!==c){var p=no(t.substring(u,c).trim());s.includes(p)||(";"!==d&&f++,o+=" "+t.substring(u,f).trim()+";")}u=f+1,c=-1}}}return e&&(o+=to(e)),r&&(o+=to(r,!0)),""===(o=o.trim())?null:o}return null==t?null:String(t)}(n,r);null==o?t.removeAttribute("style"):t.style.cssText=o,t.__style=n}else r&&(Array.isArray(r)?(ro(t,null==e?void 0:e[0],r[0]),ro(t,null==e?void 0:e[1],r[1],"important")):ro(t,e,r));return r}function io(t,n,e=!1){if(t.multiple){if(null==n)return;if(!J(n))return void console.warn("https://svelte.dev/e/select_multiple_invalid_value");for(var r of t.options)r.selected=n.includes(lo(r))}else{for(r of t.options){if(Rn(lo(r),n))return void(r.selected=!0)}e&&void 0===n||(t.selectedIndex=-1)}}function ao(t){var n=new MutationObserver(()=>{io(t,t.__value)});n.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),oe(()=>{n.disconnect()})}function lo(t){return"__value"in t?t.__value:t.value}const so=Symbol("class"),uo=Symbol("style"),co=Symbol("is custom element"),fo=Symbol("is html");function po(t,n){var e=bo(t);e.value!==(e.value=n??void 0)&&(t.value!==n||0===n&&"PROGRESS"===t.nodeName)&&(t.value=n??"")}function vo(t,n){n?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function ho(t,n,e,r){var o=bo(t);o[n]!==(o[n]=e)&&("loading"===n&&(t[Lt]=e),null==e?t.removeAttribute(n):"string"!=typeof e&&yo(t).includes(n)?t[n]=e:t.setAttribute(n,e))}function go(t,n,e=[],r=[],o=[],i,a=!1,l=!1){bn(o,e,r,e=>{var r=void 0,o={},s="SELECT"===t.nodeName,u=!1;if(fe(()=>{var c=n(...e.map(Ke)),f=function(t,n,e,r){var o=bo(t),i=o[co],a=!o[fo],l=n||{},s="OPTION"===t.tagName;for(var u in n)u in e||(e[u]=null);e.class?e.class=Jr(e.class):e[so]&&(e.class=null),e[uo]&&(e.style??(e.style=null));var c=yo(t);for(const g in e){let u=e[g];if(s&&"value"===g&&null==u)t.value=t.__value="",l[g]=u;else if("class"!==g)if("style"!==g){var f=l[g];if(u!==f||void 0===u&&t.hasAttribute(g)){l[g]=u;var d=g[0]+g[1];if("$$"!==d)if("on"===d){const n={},e="$$"+g;let r=g.slice(2);var p=ir(r);if(rr(r)&&(r=r.slice(0,-7),n.capture=!0),!p&&f){if(null!=u)continue;t.removeEventListener(r,l[e],n),l[e]=null}if(null!=u)if(p)t[`__${r}`]=u,vr([r]);else{let o=function(t){l[g].call(this,t)};l[e]=dr(r,t,o,n)}else p&&(t[`__${r}`]=void 0)}else if("style"===g)ho(t,g,u);else if("autofocus"===g)Xn(t,Boolean(u));else if(i||"__value"!==g&&("value"!==g||null==u))if("selected"===g&&s)vo(t,u);else{var v=g;a||(v=lr(v));var h="defaultValue"===v||"defaultChecked"===v;if(null!=u||i||h)h||c.includes(v)&&(i||"string"!=typeof u)?(t[v]=u,v in o&&(o[v]=Bt)):"function"!=typeof u&&ho(t,v,u);else if(o[g]=null,"value"===v||"checked"===v){let e=t;const r=void 0===n;if("value"===v){let t=e.defaultValue;e.removeAttribute(v),e.defaultValue=t,e.value=e.__value=r?t:null}else{let t=e.defaultChecked;e.removeAttribute(v),e.defaultChecked=t,e.checked=!!r&&t}}else t.removeAttribute(g)}else t.value=t.__value=u}}else oo(t,u,null==n?void 0:n[uo],e[uo]),l[g]=u,l[uo]=e[uo];else eo(t,"http://www.w3.org/1999/xhtml"===t.namespaceURI,u,r,null==n?void 0:n[so],e[so]),l[g]=u,l[so]=e[so]}return l}(t,r,c,i,a,l);u&&s&&"value"in c&&io(t,c.value);for(let t of Object.getOwnPropertySymbols(o))c[t]||he(o[t]);for(let n of Object.getOwnPropertySymbols(c)){var d=c[n];"@attach"!==n.description||r&&d===r[n]||(o[n]&&he(o[n]),o[n]=de(()=>Qr(t,()=>d))),f[n]=d}r=f}),s){var c=t;le(()=>{io(c,r.value,!0),ao(c)})}u=!0})}function bo(t){return t.__attributes??(t.__attributes={[co]:t.nodeName.includes("-"),[fo]:"http://www.w3.org/1999/xhtml"===t.namespaceURI})}var mo=new Map;function yo(t){var n,e=t.getAttribute("is")||t.nodeName,r=mo.get(e);if(r)return r;mo.set(e,r=[]);for(var o=t,i=Element.prototype;i!==o;){for(var a in n=rt(o))n[a].set&&r.push(a);o=at(o)}return r}function wo(t,n,e=n){var r=new WeakSet;te(t,"input",async o=>{var i=o?t.defaultValue:t.value;if(i=xo(t)?_o(i):i,e(i),null!==tn&&r.add(tn),await Ye(),i!==(i=n())){var a=t.selectionStart,l=t.selectionEnd,s=t.value.length;if(t.value=i??"",null!==l){var u=t.value.length;a===l&&l===s&&u>s?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=a,t.selectionEnd=Math.min(l,u))}}}),null==Je(n)&&t.value&&(e(xo(t)?_o(t.value):t.value),null!==tn&&r.add(tn)),se(()=>{var e=n();if(t===document.activeElement){var o=nn??tn;if(r.has(o))return}xo(t)&&e===_o(t.value)||("date"!==t.type||e||t.value)&&e!==t.value&&(t.value=e??"")})}function xo(t){var n=t.type;return"number"===n||"range"===n}function _o(t){return""===t?null:+t}function ko(t,n){return t===n||(null==t?void 0:t[It])===n}function Co(t={},n,e,r){return le(()=>{var r,o;return se(()=>{r=o,o=[],Je(()=>{t!==e(...o)&&(n(t,...o),r&&ko(e(...r),t)&&n(null,...r))})}),()=>{Kt(()=>{o&&ko(e(...o),t)&&n(null,...o)})}}),t}function So(t=!1){const n=qt,e=n.l.u;if(!e)return;let r=()=>nr(n.s);if(t){let t=0,e={};const o=yn(()=>{let r=!1;const o=n.s;for(const t in o)o[t]!==e[t]&&(e[t]=o[t],r=!0);return r&&t++,t});r=()=>Ke(o)}var o;e.b.length&&(o=()=>{Eo(n,r),ft(e.b)},ne(),ee(1048584,o,!0)),ie(()=>{const t=Je(()=>e.m.map(ct));return()=>{for(const n of t)"function"==typeof n&&n()}}),e.a.length&&ie(()=>{Eo(n,r),ft(e.a)})}function Eo(t,n){if(t.l.s)for(const e of t.l.s)Ke(e);n()}let zo=!1;const jo={get(t,n){if(!t.exclude.includes(n))return Ke(t.version),n in t.special?t.special[n]():t.props[n]},set(t,n,e){if(!(n in t.special)){var r=Me;try{Ne(t.parent_effect),t.special[n]=$o({get[n](){return t.props[n]}},n,4)}finally{Ne(r)}}return t.special[n](e),Pn(t.version),!0},getOwnPropertyDescriptor(t,n){if(!t.exclude.includes(n))return n in t.props?{enumerable:!0,configurable:!0,value:t.props[n]}:void 0},deleteProperty:(t,n)=>(t.exclude.includes(n)||(t.exclude.push(n),Pn(t.version)),!0),has:(t,n)=>!t.exclude.includes(n)&&n in t.props,ownKeys:t=>Reflect.ownKeys(t.props).filter(n=>!t.exclude.includes(n))};function Ao(t,n){return new Proxy({props:t,exclude:n,special:{},version:An(0),parent_effect:Me},jo)}const Mo={get(t,n){let e=t.props.length;for(;e--;){let r=t.props[e];if(st(r)&&(r=r()),"object"==typeof r&&null!==r&&n in r)return r[n]}},set(t,n,e){let r=t.props.length;for(;r--;){let o=t.props[r];st(o)&&(o=o());const i=et(o,n);if(i&&i.set)return i.set(e),!0}return!1},getOwnPropertyDescriptor(t,n){let e=t.props.length;for(;e--;){let r=t.props[e];if(st(r)&&(r=r()),"object"==typeof r&&null!==r&&n in r){const t=et(r,n);return t&&!t.configurable&&(t.configurable=!0),t}}},has(t,n){if(n===It||n===Pt)return!1;for(let e of t.props)if(st(e)&&(e=e()),null!=e&&n in e)return!0;return!1},ownKeys(t){const n=[];for(let e of t.props)if(st(e)&&(e=e()),e){for(const t in e)n.includes(t)||n.push(t);for(const t of Object.getOwnPropertySymbols(e))n.includes(t)||n.push(t)}return n}};function No(...t){return new Proxy({props:t},Mo)}function $o(t,n,e,r){var o,i,a,l=!Wt||!!(2&e),s=!!(8&e),u=!!(16&e),c=r,f=!0,d=()=>(f&&(f=!1,c=u?Je(r):r),c);if(s){var p=It in t||Pt in t;i=(null==(o=et(t,n))?void 0:o.set)??(p&&n in t?e=>t[n]=e:void 0)}var v,h=!1;if(s?[a,h]=function(t){var n=zo;try{return zo=!1,[t(),zo]}finally{zo=n}}(()=>t[n]):a=t[n],void 0===a&&void 0!==r&&(a=d(),i&&(l&&function(){throw new Error("https://svelte.dev/e/props_invalid_value")}(),i(a))),v=l?()=>{var e=t[n];return void 0===e?d():(f=!0,e)}:()=>{var e=t[n];return void 0!==e&&(c=void 0),void 0===e?c:e},l&&!(4&e))return v;if(i){var g=t.$$legacy;return function(t,n){return arguments.length>0?(l&&n&&!g&&!h||i(n?v():t),t):v()}}var b=!1,m=(1&e?yn:_n)(()=>(b=!1,v()));s&&Ke(m);var y=Me;return function(t,n){if(arguments.length>0){const e=n?Ke(m):l&&s?Fn(t):t;return $n(m,e),b=!0,void 0!==c&&(c=e),t}return Se&&b||0!==(y.f&kt)?m.v:Ke(m)}}function Io(t){var n,e;null===qt&&Ft(),Wt&&null!==qt.l?(n=qt,e=n.l,e.u??(e.u={a:[],b:[],m:[]})).m.push(t):ie(()=>{const n=Je(t);if("function"==typeof n)return n})}function Po(t){null===qt&&Ft(),Io(()=>()=>Je(t))}const Lo="risu-ebooklike-viewer",To="0.0.4",Fo=class t{constructor(n){if(t._instance)return console.log(`[${Lo}] Returning existing RisuAPI instance`),t._instance;this._risuFetch=n.risuFetch,this._nativeFetch=n.nativeFetch,this._getArg=n.getArg,this._setArg=n.setArg,this._getChar=n.getChar,this._setChar=n.setChar,this._addProvider=n.addProvider,this._addRisuScriptHandler=n.addRisuScriptHandler,this._removeRisuScriptHandler=n.removeRisuScriptHandler,this._addRisuReplacer=n.addRisuReplacer,this._removeRisuReplacer=n.removeRisuReplacer,this._onUnload=n.onUnload,this._getDatabase=null,this._setDatabaseLite=null,this._charWatchers=new Map,this._databaseWatchers=new Map,this._watcherIdCounter=0,t._instance=this}async initialize(){try{return this._getDatabase=getDatabase,this._setDatabaseLite=setDatabaseLite,console.log(`[${Lo}] RisuAPI initialized successfully`),!0}catch(t){return console.log(`[${Lo}] Failed to initialize RisuAPI:`,t),!1}}static getInstance(n=null){if(!t._instance){if(!n)throw new Error("RisuAPI instance does not exist. Provide pluginApis on first call.");t._instance=new t(n)}return t._instance}static resetInstance(){t._instance=null}risuFetch(t,n={}){return this._risuFetch(t,n)}nativeFetch(t,n={}){return this._nativeFetch(t,n)}getArg(t){return this._getArg(t)}setArg(t,n){return this._setArg(t,n)}getChar(){return this._getChar()}setChar(t){return this._setChar(t)}subscribeToChar(t,n,e=500){const r=++this._watcherIdCounter,o=()=>{try{const n=this._getChar();if(null===n)return null;const e=t?t(n):n;return JSON.stringify(e)}catch(n){return null}};let i=o();const a=setInterval(()=>{const t=o();if(t!==i){i=t;try{const e=t?JSON.parse(t):null;n(e)}catch(e){console.error(`[${Lo}] subscribeToChar callback error:`,e)}}},e);return this._charWatchers.set(r,a),()=>{clearInterval(a),this._charWatchers.delete(r)}}addProvider(t,n,e){return this._addProvider(t,n,e)}addRisuScriptHandler(t,n){return this._addRisuScriptHandler(t,n)}removeRisuScriptHandler(t,n){return this._removeRisuScriptHandler(t,n)}addRisuReplacer(t,n){return this._addRisuReplacer(t,n)}removeRisuReplacer(t,n){return this._removeRisuReplacer(t,n)}onUnload(t){return this._onUnload(t)}clearAllSubscriptions(){this._charWatchers.forEach(t=>clearInterval(t)),this._charWatchers.clear(),this._databaseWatchers.forEach(t=>clearInterval(t)),this._databaseWatchers.clear(),console.log(`[${Lo}] All subscriptions cleared`)}getDatabase(){if(!this._getDatabase)throw new Error("RisuAPI is not initialized. Call initialize() first.");return this._getDatabase()}setDatabaseLite(t){if(!this._setDatabaseLite)throw new Error("RisuAPI is not initialized. Call initialize() first.");return this._setDatabaseLite(t)}subscribeToDatabase(t,n,e=500){if(!this._getDatabase)throw new Error("RisuAPI is not initialized. Call initialize() first.");const r=++this._watcherIdCounter,o=()=>{try{const n=this._getDatabase();if(null===n)return null;const e=t?t(n):n;return JSON.stringify(e)}catch(n){return null}};let i=o();const a=setInterval(()=>{const t=o();if(t!==i){i=t;try{const e=t?JSON.parse(t):null;n(e)}catch(e){console.error(`[${Lo}] subscribeToDatabase callback error:`,e)}}},e);return this._databaseWatchers.set(r,a),()=>{clearInterval(a),this._databaseWatchers.delete(r)}}getChaId(){const t=this._getChar();return null==t?null:t.chaId}getCurrentChatPage(){const t=this._getChar();return null==t?null:t.chatPage}getAllCurrentChatMessages(){const t=this._getChar();return null==t?null:t.chats[this.getCurrentChatPage()].message}getLastChatIndex(){const t=this._getChar();return null==t?null:t.chats[this.getCurrentChatPage()].message.length}getLastChatMessage(){const t=this._getChar();return null==t?null:t.chats[this.getCurrentChatPage()].message[this.getLastChatIndex()]}};H(Fo,"_instance",null);let Bo=Fo;const Ro="data-svelte-helper",Oo=new WeakMap,Wo=new Map;function qo({id:t,component:n,target:e,anchor:r=null,props:o={},wrapperTag:i="div",useContents:a=!0}){if(!t||!n||!e)return console.warn("[safeMount] id, component, targetì€ í•„ìˆ˜ìž…ë‹ˆë‹¤."),null;const l=`data-mounted-${t}`;if(e.hasAttribute(l))return null;try{const s=document.createElement(i);s.setAttribute("data-svelte-wrapper",t),a&&(s.style.display="contents");const u=zr(n,{target:s,props:o}),c=Array.from(s.childNodes);r&&r.parentElement===e?c.forEach(t=>{e.insertBefore(t,r)}):c.forEach(t=>{e.appendChild(t)}),e.setAttribute(l,"true");const f={instance:u,wrapper:s,target:e,cleanup:()=>Do(t),flagKey:l};return Wo.set(t,f),f}catch(s){return console.log(s),console.error(`[safeMount] ${t} ë§ˆìš´íŠ¸ ì‹¤íŒ¨:`,s),null}}function Do(t){const n=Wo.get(t);if(!n)return!1;try{const{instance:e,wrapper:r,target:o,flagKey:i}=n;return e&&Mr(e),o&&i&&o.removeAttribute(i),Wo.delete(t),!0}catch(e){return console.error(`[safeUnmount] ${t} ì–¸ë§ˆìš´íŠ¸ ì‹¤íŒ¨:`,e),!1}}function Ho(t){return Wo.has(t)}function Uo(t,n,e="default"){var r;if(!t||!n)return;const o=`${Ro}-style-${e}`;let i=(null==(r=Oo.get(t))?void 0:r[o])||{};Object.entries(n).forEach(([n,e])=>{n in i||(i[n]=t.style.getPropertyValue(n)),t.style.setProperty(n,e)});const a=Oo.get(t)||{};a[o]=i,Oo.set(t,a)}function Vo(t,n="default"){if(!t)return;const e=`${Ro}-style-${n}`,r=Oo.get(t),o=null==r?void 0:r[e];o&&(Object.entries(o).forEach(([n,e])=>{e?t.style.setProperty(n,e):t.style.removeProperty(n)}),delete r[e])}function Go(t){const n=Bo.getInstance();if(!n)throw new Error("RisuAPI is not initialized. Please ensure the plugin is loaded.");const e=n.getDatabase(),r=e.plugins.findIndex(t=>t.name===Lo),o=r>=0?{...e.plugins[r]}:null;console.log("[UpdateManager] Old plugin found:",r>=0,null==o?void 0:o.name);const i=function(t,n){const e={};for(const[r,o]of Object.entries(n))e[r]=t&&r in t?t[r]:"int"===o?0:"";return e}(null==o?void 0:o.realArg,t.arguments),a={...t,realArg:i};console.log("[UpdateManager] New plugin data prepared:",a.name,a.displayName),r>=0?(e.plugins[r]=a,console.log("[UpdateManager] Replaced existing plugin at index",r)):(e.plugins.push(a),console.log("[UpdateManager] Added new plugin"));try{return n.setDatabaseLite(e),console.log("[UpdateManager] Database saved successfully"),{success:!0}}catch(l){return console.error("[UpdateManager] Database save failed:",l),o&&r>=0?(e.plugins[r]=o,console.log("[UpdateManager] Rolled back to previous plugin")):-1===r&&(e.plugins.pop(),console.log("[UpdateManager] Removed newly added plugin")),{success:!1,error:l}}}"undefined"!=typeof window&&((W=window.__svelte??(window.__svelte={})).v??(W.v=new Set)).add("5");var Yo=yr('<div role="dialog" aria-modal="true" tabindex="-1"><div><div> </div> <div><button> </button></div></div></div>');function Ko(t,n){Ht(n,!0);let e=$o(n,"message",3,""),r=$o(n,"confirmText",3,"í™•ì¸"),o=Mn(null);function i(t){"Enter"!==t.key&&"Escape"!==t.key||a()}function a(){var t;null==(t=Ke(o))||t.dispatchEvent(new CustomEvent("confirm",{bubbles:!0,composed:!0}))}Io(()=>{document.addEventListener("keydown",i),setTimeout(()=>{var t;return null==(t=Ke(o))?void 0:t.focus()},0)}),Po(()=>{document.removeEventListener("keydown",i)});var l=Yo(),s=Yn(l),u=Yn(s),c=Yn(u),f=Qn(u,2),d=Yn(f);d.__click=a;var p=Yn(d);Co(d,t=>$n(o,t),()=>Ke(o)),ue(()=>{eo(l,1,Jr(Q.udRoot)),eo(s,1,`${Q.udCard} ${Q.udAlert}`),eo(u,1,Jr(Q.udAlertMessage)),Er(c,e()),eo(f,1,Jr(Q.udActions)),eo(d,1,Jr(Q.udBtnPrimary)),Er(p,r())}),kr(t,l),Ut()}vr(["click"]);var Qo=yr('<div role="dialog" aria-modal="true" aria-busy="true" tabindex="-1"><div><div><svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4"></circle></svg></div> <div> </div></div></div>');function Xo(t,n){Ht(n,!0);let e=$o(n,"message",3,"ì—…ë°ì´íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê³  ìžˆìŠµë‹ˆë‹¤...");var r=Qo(),o=Yn(r),i=Yn(o),a=Yn(i),l=Yn(a),s=Qn(i,2),u=Yn(s);ue(()=>{eo(r,1,Jr(Q.udRoot)),eo(o,1,`${Q.udCard} ${Q.udLoading}`),eo(i,1,Jr(Q.udLoadingSpinner)),eo(a,0,Jr(Q.udLoadingSvg)),eo(l,0,Jr(Q.udLoadingCircle)),eo(s,1,Jr(Q.udLoadingMessage)),Er(u,e())}),kr(t,r),Ut()}var Jo=yr("<li> </li>"),Zo=yr("<li>ì„¸ë¶€ ë³€ê²½ì‚¬í•­ì€ ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”</li>"),ti=yr("<button> </button> <button> </button>",1),ni=yr('<div role="dialog" aria-modal="true" tabindex="-1"><div><div><h3> </h3> <span> </span></div> <div> </div> <ul aria-label="ë³€ê²½ì‚¬í•­"><!></ul> <div><!> <button> </button></div></div></div>');function ei(t,n){Ht(n,!0);let e=$o(n,"name",3,""),r=$o(n,"currentVersion",3,"0.0.0"),o=$o(n,"version",3,"0.0.0"),i=$o(n,"releasedAt",19,()=>(new Date).toISOString()),a=$o(n,"mandatory",3,!1),l=$o(n,"notes",19,()=>[]),s=$o(n,"i18n",19,()=>({title:"í”ŒëŸ¬ê·¸ì¸ ì—…ë°ì´íŠ¸ ì¤€ë¹„ ì™„ë£Œ",primary:"ì§€ê¸ˆ ì—…ë°ì´íŠ¸",later:"ë‚˜ì¤‘ì—",skip:"ì´ë²ˆ ë²„ì „ ê±´ë„ˆë›°ê¸°"})),u=Mn(null),c=xn(()=>new Date(i()).toLocaleDateString()),f=xn(()=>a()?"í•„ìˆ˜ ì—…ë°ì´íŠ¸":"ì„ íƒ ì—…ë°ì´íŠ¸");function d(t){"Escape"!==t.key||a()||p("later"),"Enter"===t.key&&p("update")}function p(t){var n;const e={action:t};"skip"===t&&(e.skipVersion=o()),null==(n=Ke(u))||n.dispatchEvent(new CustomEvent("update-action",{detail:e,bubbles:!0,composed:!0}))}Io(()=>{document.addEventListener("keydown",d),setTimeout(()=>{var t;return null==(t=Ke(u))?void 0:t.focus()},0)}),Po(()=>{document.removeEventListener("keydown",d)});var v=ni();v.__click=function(t){a()||t.target!==t.currentTarget||p("later")},v.__keydown=function(t){a()||"Escape"!==t.key&&"Enter"!==t.key||t.target===t.currentTarget&&p("later")};var h=Yn(v),g=Yn(h),b=Yn(g),m=Yn(b),y=Qn(b,2),w=Yn(y),x=Qn(g,2),_=Yn(x),k=Qn(x,2),C=Yn(k),S=t=>{var n=_r();Tr(Kn(n),17,()=>l().slice(0,8),Ir,(t,n)=>{var e=Jo(),r=Yn(e);ue(t=>{eo(e,1,t),Er(r,Ke(n).text||"")},[()=>Jr(function(t){const n=(t||"").trim(),e=n.charAt(0).toUpperCase()+n.slice(1);return Q[`ud${e}`]||""}(Ke(n).type))]),kr(t,e)}),kr(t,n)},E=t=>{kr(t,Zo())};$r(C,t=>{l().length>0?t(S):t(E,!1)});var z=Qn(k,2),j=Yn(z),A=t=>{var n=ti(),e=Kn(n);e.__click=()=>p("later");var r=Yn(e),o=Qn(e,2);o.__click=()=>p("skip");var i=Yn(o);ue(()=>{eo(e,1,Jr(Q.udBtnGhost)),Er(r,s().later),eo(o,1,Jr(Q.udBtnGhost)),Er(i,s().skip)}),kr(t,n)};$r(j,t=>{a()||t(A)});var M=Qn(j,2);M.__click=()=>p("update");var N=Yn(M);Co(M,t=>$n(u,t),()=>Ke(u)),ue(()=>{eo(v,1,Jr(Q.udRoot)),eo(h,1,Jr(Q.udCard)),eo(g,1,Jr(Q.udTitle)),Er(m,`${s().title??""}${e()?` Â· ${e()}`:""}`),eo(y,1,Jr(Q.udPill)),Er(w,`v${r()??""} â†’ v${o()??""}`),eo(x,1,Jr(Q.udSub)),Er(_,`${Ke(c)??""} Â· ${Ke(f)??""}`),eo(k,1,Jr(Q.udList)),eo(z,1,Jr(Q.udActions)),eo(M,1,Jr(Q.udBtnPrimary)),Er(N,s().primary)}),kr(t,v),Ut()}async function ri(t){try{console.log("[UpdateManager] Fetching latest script from unpkg:",t.url);const n=await fetch(t.url).then(t=>t.text());console.log("[UpdateManager] Parsing plugin script...");const e=function(t){const n=t.split("\n");let e,r="",o={},i={},a=[];for(const l of n){if(l.startsWith("//@risu-name")||l.startsWith("//@risu-display-name"))throw new Error("V1 plugin is not supported. Please use V2 plugin.");if(l.startsWith("//@name")){const t=l.slice(7).trim();if(""===t)throw new Error("Plugin name must be longer than 0");r=t}if(l.startsWith("//@display-name")){const t=l.slice(16).trim();if(""===t)throw new Error("Plugin display name must be longer than 0");e=t}if(l.startsWith("//@link")){const t=l.split(" ")[1];if(!t||""===t)throw new Error("Plugin link is empty");if(!t.startsWith("https"))throw new Error("Plugin link must start with https");const n=l.split(" ").slice(2).join(" ").trim();a.push({link:t,hoverText:n||void 0})}if(l.startsWith("//@risu-arg")||l.startsWith("//@arg")){const t=l.trim().split(" "),n=t[1];if("int"!==t[2]&&"string"!==t[2])throw new Error(`Unknown argument type: ${t[2]}`);"int"===t[2]?(o[n]="int",i[n]=0):"string"===t[2]&&(o[n]="string",i[n]="")}}if(0===r.length)throw new Error("Plugin name not found");return{name:r,script:t,realArg:i,arguments:o,displayName:e,version:2,customLink:a}}(n);return Go(e)}catch(n){return console.error("[UpdateManager] Plugin update failed:",n),{success:!1,error:n}}}function oi(t,n,e){return function(t,n){const e=t.split(".").map(Number),r=n.split(".").map(Number);for(let o=0;o<Math.max(e.length,r.length);o++){const t=e[o]||0,n=r[o]||0;if(t>n)return 1;if(t<n)return-1}return 0}(t,n)<=0?(e||console.log(`[UpdateManager] Already up to date (${n})`),{available:!1,current:n,latest:t}):null}async function ii(t,n){var e;console.log("[UpdateManager] Updating to version",n);const r=await ri(t);return r.success?(console.log("[UpdateManager] Plugin script updated successfully"),await function(t="ì—…ë°ì´íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê³  ìžˆìŠµë‹ˆë‹¤...",n=3e3){return new Promise(e=>{const r=document.createElement("div");document.body.appendChild(r);const o=zr(Xo,{target:r,props:{message:t}});setTimeout(()=>{Mr(o),r.remove(),e()},n)})}("ì—…ë°ì´íŠ¸ë¥¼ ì ìš©í•˜ê³  ìžˆìŠµë‹ˆë‹¤...",4e3),await function(t,n="í™•ì¸"){return new Promise(e=>{const r=document.createElement("div");document.body.appendChild(r);const o=zr(Ko,{target:r,props:{message:t,confirmText:n}});r.addEventListener("confirm",()=>{Mr(o),r.remove(),e()})})}("ì—…ë°ì´íŠ¸ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\n\nì—…ë°ì´íŠ¸ëœ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´\níŽ˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•©ë‹ˆë‹¤."),window.location.reload(),{available:!0,action:"updated",version:n}):(console.error("[UpdateManager] Plugin update failed:",r.error),alert(`ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: ${(null==(e=r.error)?void 0:e.message)||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"}\n\níŽ˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì—¬ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.`),{available:!0,action:"update_failed",error:r.error})}async function ai(t={}){const{silent:n=!1,force:e=!1,i18n:r={}}=t;try{const t=await async function(){var t,n,e;try{const o=`https://unpkg.com/${Lo}@latest/dist/${Lo}.js`,i=(await fetch(o,{method:"HEAD",redirect:"follow"})).url,a=i.match(/@([\d.]+)\//);if(!a)throw new Error("Version not found in resolved URL");const l=a[1],s=await fetch(i).then(t=>t.text()),u=/\/\/@name (.+?)\n\/\/@display-name (.+?)\n\/\/@version (.+?)\n\/\/@description (.+?)(?:\n|$)/,c=s.match(u),f=`https://unpkg.com/${Lo}@${l}/dist/release-notes.json`;let d={};try{const t=await fetch(f);t.ok&&(d=(await t.json())[l]||{})}catch(r){console.warn("[UpdateManager] Failed to fetch release notes:",r)}return{version:l,url:i,name:(null==(t=null==c?void 0:c[1])?void 0:t.trim())||Lo,displayName:(null==(n=null==c?void 0:c[2])?void 0:n.trim())||`${Lo}_v${l}`,description:(null==(e=null==c?void 0:c[4])?void 0:e.trim())||"",mandatory:d.mandatory||!1,notes:d.notes||[],released_at:d.released_at||(new Date).toISOString()}}catch(r){return console.log(`[${Lo}] Update check skipped: Plugin not published to npm yet`),null}}();if(!t)return{available:!1,skipped:!0};const o=To,i=t.version,a=function(t,n,e){if(n)return null;const r=`${Lo}_skip_version`;return localStorage.getItem(r)===t?(e||console.log(`[UpdateManager] Version ${t} is skipped by user`),{available:!1,skipped:!0,version:t}):null}(i,e,n);if(a)return a;const l=oi(i,o,n);if(l)return l;console.log(`[UpdateManager] New version available: ${o} â†’ ${i}`);const s=await function(t){const{name:n,currentVersion:e,manifest:r,i18n:o={},mandatory:i=!0===r.mandatory}=t,a=Object.assign({title:"í”ŒëŸ¬ê·¸ì¸ ì—…ë°ì´íŠ¸ ì¤€ë¹„ ì™„ë£Œ",primary:"ì§€ê¸ˆ ì—…ë°ì´íŠ¸",later:"ë‚˜ì¤‘ì—",skip:"ì´ë²ˆ ë²„ì „ ê±´ë„ˆë›°ê¸°"},o);return new Promise(t=>{const o=document.createElement("div");document.body.appendChild(o);const l=zr(ei,{target:o,props:{name:n||"",currentVersion:e,version:r.version,releasedAt:r.released_at||(new Date).toISOString(),mandatory:i,notes:r.notes||[],i18n:a}});o.addEventListener("update-action",n=>{const{action:e,skipVersion:i}=n.detail,a={action:e};"update"===e?a.url=r.url:"skip"===e&&(a.skipVersion=i),Mr(l),o.remove(),t(a)})})}({name:Lo,currentVersion:o,manifest:t,i18n:r});return await async function(t,n,e){if("update"===t.action)return await ii(n,e);if("skip"===t.action){const n=`${Lo}_skip_version`;return localStorage.setItem(n,t.skipVersion),console.log("[UpdateManager] Skipped version",t.skipVersion),{available:!0,action:"skipped",version:t.skipVersion}}return console.log("[UpdateManager] Update postponed"),{available:!0,action:"later",version:e}}(s,t,i)}catch(o){return console.error("[UpdateManager] Check failed:",o),{available:!1,error:o.message}}}vr(["click","keydown"]);var li,si="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ui={exports:{}};var ci,fi,di=(li||(li=1,ci=ui,fi=ui.exports,function(){var t,n="Expected a function",e="__lodash_hash_undefined__",r="__lodash_placeholder__",o=32,i=128,a=256,l=1/0,s=9007199254740991,u=NaN,c=4294967295,f=[["ary",i],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",o],["partialRight",64],["rearg",a]],d="[object Arguments]",p="[object Array]",v="[object Boolean]",h="[object Date]",g="[object Error]",b="[object Function]",m="[object GeneratorFunction]",y="[object Map]",w="[object Number]",x="[object Object]",_="[object Promise]",k="[object RegExp]",C="[object Set]",S="[object String]",E="[object Symbol]",z="[object WeakMap]",j="[object ArrayBuffer]",A="[object DataView]",M="[object Float32Array]",N="[object Float64Array]",$="[object Int8Array]",I="[object Int16Array]",P="[object Int32Array]",L="[object Uint8Array]",T="[object Uint8ClampedArray]",F="[object Uint16Array]",B="[object Uint32Array]",R=/\b__p \+= '';/g,O=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,D=/[&<>"']/g,H=RegExp(q.source),U=RegExp(D.source),V=/<%-([\s\S]+?)%>/g,G=/<%([\s\S]+?)%>/g,Y=/<%=([\s\S]+?)%>/g,K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,X=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,J=/[\\^$.*+?()[\]{}|]/g,Z=RegExp(J.source),tt=/^\s+/,nt=/\s/,et=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,rt=/\{\n\/\* \[wrapped with (.+)\] \*/,ot=/,? & /,it=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,at=/[()=,{}\[\]\/\s]/,lt=/\\(\\)?/g,st=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ut=/\w*$/,ct=/^[-+]0x[0-9a-f]+$/i,ft=/^0b[01]+$/i,dt=/^\[object .+?Constructor\]$/,pt=/^0o[0-7]+$/i,vt=/^(?:0|[1-9]\d*)$/,ht=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gt=/($^)/,bt=/['\n\r\u2028\u2029\\]/g,mt="\\ud800-\\udfff",yt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",wt="\\u2700-\\u27bf",xt="a-z\\xdf-\\xf6\\xf8-\\xff",_t="A-Z\\xc0-\\xd6\\xd8-\\xde",kt="\\ufe0e\\ufe0f",Ct="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",St="['â€™]",Et="["+mt+"]",zt="["+Ct+"]",jt="["+yt+"]",At="\\d+",Mt="["+wt+"]",Nt="["+xt+"]",$t="[^"+mt+Ct+At+wt+xt+_t+"]",It="\\ud83c[\\udffb-\\udfff]",Pt="[^"+mt+"]",Lt="(?:\\ud83c[\\udde6-\\uddff]){2}",Tt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ft="["+_t+"]",Bt="\\u200d",Rt="(?:"+Nt+"|"+$t+")",Ot="(?:"+Ft+"|"+$t+")",Wt="(?:['â€™](?:d|ll|m|re|s|t|ve))?",qt="(?:['â€™](?:D|LL|M|RE|S|T|VE))?",Dt="(?:"+jt+"|"+It+")?",Ht="["+kt+"]?",Ut=Ht+Dt+"(?:"+Bt+"(?:"+[Pt,Lt,Tt].join("|")+")"+Ht+Dt+")*",Vt="(?:"+[Mt,Lt,Tt].join("|")+")"+Ut,Gt="(?:"+[Pt+jt+"?",jt,Lt,Tt,Et].join("|")+")",Yt=RegExp(St,"g"),Kt=RegExp(jt,"g"),Qt=RegExp(It+"(?="+It+")|"+Gt+Ut,"g"),Xt=RegExp([Ft+"?"+Nt+"+"+Wt+"(?="+[zt,Ft,"$"].join("|")+")",Ot+"+"+qt+"(?="+[zt,Ft+Rt,"$"].join("|")+")",Ft+"?"+Rt+"+"+Wt,Ft+"+"+qt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",At,Vt].join("|"),"g"),Jt=RegExp("["+Bt+mt+yt+kt+"]"),Zt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],nn=-1,en={};en[M]=en[N]=en[$]=en[I]=en[P]=en[L]=en[T]=en[F]=en[B]=!0,en[d]=en[p]=en[j]=en[v]=en[A]=en[h]=en[g]=en[b]=en[y]=en[w]=en[x]=en[k]=en[C]=en[S]=en[z]=!1;var rn={};rn[d]=rn[p]=rn[j]=rn[A]=rn[v]=rn[h]=rn[M]=rn[N]=rn[$]=rn[I]=rn[P]=rn[y]=rn[w]=rn[x]=rn[k]=rn[C]=rn[S]=rn[E]=rn[L]=rn[T]=rn[F]=rn[B]=!0,rn[g]=rn[b]=rn[z]=!1;var on={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},an=parseFloat,ln=parseInt,sn="object"==typeof si&&si&&si.Object===Object&&si,un="object"==typeof self&&self&&self.Object===Object&&self,cn=sn||un||Function("return this")(),fn=fi&&!fi.nodeType&&fi,dn=fn&&ci&&!ci.nodeType&&ci,pn=dn&&dn.exports===fn,vn=pn&&sn.process,hn=function(){try{var t=dn&&dn.require&&dn.require("util").types;return t||vn&&vn.binding&&vn.binding("util")}catch(n){}}(),gn=hn&&hn.isArrayBuffer,bn=hn&&hn.isDate,mn=hn&&hn.isMap,yn=hn&&hn.isRegExp,wn=hn&&hn.isSet,xn=hn&&hn.isTypedArray;function _n(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}function kn(t,n,e,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var a=t[o];n(r,a,e(a),t)}return r}function Cn(t,n){for(var e=-1,r=null==t?0:t.length;++e<r&&!1!==n(t[e],e,t););return t}function Sn(t,n){for(var e=null==t?0:t.length;e--&&!1!==n(t[e],e,t););return t}function En(t,n){for(var e=-1,r=null==t?0:t.length;++e<r;)if(!n(t[e],e,t))return!1;return!0}function zn(t,n){for(var e=-1,r=null==t?0:t.length,o=0,i=[];++e<r;){var a=t[e];n(a,e,t)&&(i[o++]=a)}return i}function jn(t,n){return!(null==t||!t.length)&&Bn(t,n,0)>-1}function An(t,n,e){for(var r=-1,o=null==t?0:t.length;++r<o;)if(e(n,t[r]))return!0;return!1}function Mn(t,n){for(var e=-1,r=null==t?0:t.length,o=Array(r);++e<r;)o[e]=n(t[e],e,t);return o}function Nn(t,n){for(var e=-1,r=n.length,o=t.length;++e<r;)t[o+e]=n[e];return t}function $n(t,n,e,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(e=t[++o]);++o<i;)e=n(e,t[o],o,t);return e}function In(t,n,e,r){var o=null==t?0:t.length;for(r&&o&&(e=t[--o]);o--;)e=n(e,t[o],o,t);return e}function Pn(t,n){for(var e=-1,r=null==t?0:t.length;++e<r;)if(n(t[e],e,t))return!0;return!1}var Ln=qn("length");function Tn(t,n,e){var r;return e(t,function(t,e,o){if(n(t,e,o))return r=e,!1}),r}function Fn(t,n,e,r){for(var o=t.length,i=e+(r?1:-1);r?i--:++i<o;)if(n(t[i],i,t))return i;return-1}function Bn(t,n,e){return n==n?function(t,n,e){for(var r=e-1,o=t.length;++r<o;)if(t[r]===n)return r;return-1}(t,n,e):Fn(t,On,e)}function Rn(t,n,e,r){for(var o=e-1,i=t.length;++o<i;)if(r(t[o],n))return o;return-1}function On(t){return t!=t}function Wn(t,n){var e=null==t?0:t.length;return e?Un(t,n)/e:u}function qn(n){return function(e){return null==e?t:e[n]}}function Dn(n){return function(e){return null==n?t:n[e]}}function Hn(t,n,e,r,o){return o(t,function(t,o,i){e=r?(r=!1,t):n(e,t,o,i)}),e}function Un(n,e){for(var r,o=-1,i=n.length;++o<i;){var a=e(n[o]);a!==t&&(r=r===t?a:r+a)}return r}function Vn(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}function Gn(t){return t?t.slice(0,ue(t)+1).replace(tt,""):t}function Yn(t){return function(n){return t(n)}}function Kn(t,n){return Mn(n,function(n){return t[n]})}function Qn(t,n){return t.has(n)}function Xn(t,n){for(var e=-1,r=t.length;++e<r&&Bn(n,t[e],0)>-1;);return e}function Jn(t,n){for(var e=t.length;e--&&Bn(n,t[e],0)>-1;);return e}var Zn=Dn({"Ã€":"A","Ã":"A","Ã‚":"A","Ãƒ":"A","Ã„":"A","Ã…":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã‡":"C","Ã§":"c","Ã":"D","Ã°":"d","Ãˆ":"E","Ã‰":"E","ÃŠ":"E","Ã‹":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","ÃŒ":"I","Ã":"I","ÃŽ":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã‘":"N","Ã±":"n","Ã’":"O","Ã“":"O","Ã”":"O","Ã•":"O","Ã–":"O","Ã˜":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã™":"U","Ãš":"U","Ã›":"U","Ãœ":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã†":"Ae","Ã¦":"ae","Ãž":"Th","Ã¾":"th","ÃŸ":"ss","Ä€":"A","Ä‚":"A","Ä„":"A","Ä":"a","Äƒ":"a","Ä…":"a","Ä†":"C","Äˆ":"C","ÄŠ":"C","ÄŒ":"C","Ä‡":"c","Ä‰":"c","Ä‹":"c","Ä":"c","ÄŽ":"D","Ä":"D","Ä":"d","Ä‘":"d","Ä’":"E","Ä”":"E","Ä–":"E","Ä˜":"E","Äš":"E","Ä“":"e","Ä•":"e","Ä—":"e","Ä™":"e","Ä›":"e","Äœ":"G","Äž":"G","Ä ":"G","Ä¢":"G","Ä":"g","ÄŸ":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å€":"l","Å‚":"l","Åƒ":"N","Å…":"N","Å‡":"N","ÅŠ":"N","Å„":"n","Å†":"n","Åˆ":"n","Å‹":"n","ÅŒ":"O","ÅŽ":"O","Å":"O","Å":"o","Å":"o","Å‘":"o","Å”":"R","Å–":"R","Å˜":"R","Å•":"r","Å—":"r","Å™":"r","Åš":"S","Åœ":"S","Åž":"S","Å ":"S","Å›":"s","Å":"s","ÅŸ":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å’":"Oe","Å“":"oe","Å‰":"'n","Å¿":"s"}),te=Dn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ne(t){return"\\"+on[t]}function ee(t){return Jt.test(t)}function re(t){var n=-1,e=Array(t.size);return t.forEach(function(t,r){e[++n]=[r,t]}),e}function oe(t,n){return function(e){return t(n(e))}}function ie(t,n){for(var e=-1,o=t.length,i=0,a=[];++e<o;){var l=t[e];l!==n&&l!==r||(t[e]=r,a[i++]=e)}return a}function ae(t){var n=-1,e=Array(t.size);return t.forEach(function(t){e[++n]=t}),e}function le(t){return ee(t)?function(t){for(var n=Qt.lastIndex=0;Qt.test(t);)++n;return n}(t):Ln(t)}function se(t){return ee(t)?function(t){return t.match(Qt)||[]}(t):function(t){return t.split("")}(t)}function ue(t){for(var n=t.length;n--&&nt.test(t.charAt(n)););return n}var ce=Dn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),fe=function nt(mt){var yt,wt=(mt=null==mt?cn:fe.defaults(cn.Object(),mt,fe.pick(cn,tn))).Array,xt=mt.Date,_t=mt.Error,kt=mt.Function,Ct=mt.Math,St=mt.Object,Et=mt.RegExp,zt=mt.String,jt=mt.TypeError,At=wt.prototype,Mt=kt.prototype,Nt=St.prototype,$t=mt["__core-js_shared__"],It=Mt.toString,Pt=Nt.hasOwnProperty,Lt=0,Tt=(yt=/[^.]+$/.exec($t&&$t.keys&&$t.keys.IE_PROTO||""))?"Symbol(src)_1."+yt:"",Ft=Nt.toString,Bt=It.call(St),Rt=cn._,Ot=Et("^"+It.call(Pt).replace(J,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wt=pn?mt.Buffer:t,qt=mt.Symbol,Dt=mt.Uint8Array,Ht=Wt?Wt.allocUnsafe:t,Ut=oe(St.getPrototypeOf,St),Vt=St.create,Gt=Nt.propertyIsEnumerable,Qt=At.splice,Jt=qt?qt.isConcatSpreadable:t,on=qt?qt.iterator:t,sn=qt?qt.toStringTag:t,un=function(){try{var t=ci(St,"defineProperty");return t({},"",{}),t}catch(n){}}(),fn=mt.clearTimeout!==cn.clearTimeout&&mt.clearTimeout,dn=xt&&xt.now!==cn.Date.now&&xt.now,vn=mt.setTimeout!==cn.setTimeout&&mt.setTimeout,hn=Ct.ceil,Ln=Ct.floor,Dn=St.getOwnPropertySymbols,de=Wt?Wt.isBuffer:t,pe=mt.isFinite,ve=At.join,he=oe(St.keys,St),ge=Ct.max,be=Ct.min,me=xt.now,ye=mt.parseInt,we=Ct.random,xe=At.reverse,_e=ci(mt,"DataView"),ke=ci(mt,"Map"),Ce=ci(mt,"Promise"),Se=ci(mt,"Set"),Ee=ci(mt,"WeakMap"),ze=ci(St,"create"),je=Ee&&new Ee,Ae={},Me=Ri(_e),Ne=Ri(ke),$e=Ri(Ce),Ie=Ri(Se),Pe=Ri(Ee),Le=qt?qt.prototype:t,Te=Le?Le.valueOf:t,Fe=Le?Le.toString:t;function Be(t){if(el(t)&&!Ua(t)&&!(t instanceof qe)){if(t instanceof We)return t;if(Pt.call(t,"__wrapped__"))return Oi(t)}return new We(t)}var Re=function(){function n(){}return function(e){if(!nl(e))return{};if(Vt)return Vt(e);n.prototype=e;var r=new n;return n.prototype=t,r}}();function Oe(){}function We(n,e){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=t}function qe(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=c,this.__views__=[]}function De(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function He(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function Ue(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function Ve(t){var n=-1,e=null==t?0:t.length;for(this.__data__=new Ue;++n<e;)this.add(t[n])}function Ge(t){var n=this.__data__=new He(t);this.size=n.size}function Ye(t,n){var e=Ua(t),r=!e&&Ha(t),o=!e&&!r&&Ka(t),i=!e&&!r&&!o&&cl(t),a=e||r||o||i,l=a?Vn(t.length,zt):[],s=l.length;for(var u in t)!n&&!Pt.call(t,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||bi(u,s))||l.push(u);return l}function Ke(n){var e=n.length;return e?n[Vr(0,e-1)]:t}function Qe(t,n){return Ii(jo(t),ir(n,0,t.length))}function Xe(t){return Ii(jo(t))}function Je(n,e,r){(r!==t&&!Wa(n[e],r)||r===t&&!(e in n))&&rr(n,e,r)}function Ze(n,e,r){var o=n[e];Pt.call(n,e)&&Wa(o,r)&&(r!==t||e in n)||rr(n,e,r)}function tr(t,n){for(var e=t.length;e--;)if(Wa(t[e][0],n))return e;return-1}function nr(t,n,e,r){return cr(t,function(t,o,i){n(r,t,e(t),i)}),r}function er(t,n){return t&&Ao(n,$l(n),t)}function rr(t,n,e){"__proto__"==n&&un?un(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function or(n,e){for(var r=-1,o=e.length,i=wt(o),a=null==n;++r<o;)i[r]=a?t:zl(n,e[r]);return i}function ir(n,e,r){return n==n&&(r!==t&&(n=n<=r?n:r),e!==t&&(n=n>=e?n:e)),n}function ar(n,e,r,o,i,a){var l,s=1&e,u=2&e,c=4&e;if(r&&(l=i?r(n,o,i,a):r(n)),l!==t)return l;if(!nl(n))return n;var f=Ua(n);if(f){if(l=function(t){var n=t.length,e=new t.constructor(n);return n&&"string"==typeof t[0]&&Pt.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(n),!s)return jo(n,l)}else{var p=pi(n),g=p==b||p==m;if(Ka(n))return _o(n,s);if(p==x||p==d||g&&!i){if(l=u||g?{}:hi(n),!s)return u?function(t,n){return Ao(t,di(t),n)}(n,function(t,n){return t&&Ao(n,Il(n),t)}(l,n)):function(t,n){return Ao(t,fi(t),n)}(n,er(l,n))}else{if(!rn[p])return i?n:{};l=function(t,n,e){var r,o=t.constructor;switch(n){case j:return ko(t);case v:case h:return new o(+t);case A:return function(t,n){var e=n?ko(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case M:case N:case $:case I:case P:case L:case T:case F:case B:return Co(t,e);case y:return new o;case w:case S:return new o(t);case k:return function(t){var n=new t.constructor(t.source,ut.exec(t));return n.lastIndex=t.lastIndex,n}(t);case C:return new o;case E:return r=t,Te?St(Te.call(r)):{}}}(n,p,s)}}a||(a=new Ge);var _=a.get(n);if(_)return _;a.set(n,l),ll(n)?n.forEach(function(t){l.add(ar(t,e,r,t,n,a))}):rl(n)&&n.forEach(function(t,o){l.set(o,ar(t,e,r,o,n,a))});var z=f?t:(c?u?ri:ei:u?Il:$l)(n);return Cn(z||n,function(t,o){z&&(t=n[o=t]),Ze(l,o,ar(t,e,r,o,n,a))}),l}function lr(n,e,r){var o=r.length;if(null==n)return!o;for(n=St(n);o--;){var i=r[o],a=e[i],l=n[i];if(l===t&&!(i in n)||!a(l))return!1}return!0}function sr(e,r,o){if("function"!=typeof e)throw new jt(n);return Ai(function(){e.apply(t,o)},r)}function ur(t,n,e,r){var o=-1,i=jn,a=!0,l=t.length,s=[],u=n.length;if(!l)return s;e&&(n=Mn(n,Yn(e))),r?(i=An,a=!1):n.length>=200&&(i=Qn,a=!1,n=new Ve(n));t:for(;++o<l;){var c=t[o],f=null==e?c:e(c);if(c=r||0!==c?c:0,a&&f==f){for(var d=u;d--;)if(n[d]===f)continue t;s.push(c)}else i(n,f,r)||s.push(c)}return s}Be.templateSettings={escape:V,evaluate:G,interpolate:Y,variable:"",imports:{_:Be}},Be.prototype=Oe.prototype,Be.prototype.constructor=Be,We.prototype=Re(Oe.prototype),We.prototype.constructor=We,qe.prototype=Re(Oe.prototype),qe.prototype.constructor=qe,De.prototype.clear=function(){this.__data__=ze?ze(null):{},this.size=0},De.prototype.delete=function(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n},De.prototype.get=function(n){var r=this.__data__;if(ze){var o=r[n];return o===e?t:o}return Pt.call(r,n)?r[n]:t},De.prototype.has=function(n){var e=this.__data__;return ze?e[n]!==t:Pt.call(e,n)},De.prototype.set=function(n,r){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=ze&&r===t?e:r,this},He.prototype.clear=function(){this.__data__=[],this.size=0},He.prototype.delete=function(t){var n=this.__data__,e=tr(n,t);return!(e<0||(e==n.length-1?n.pop():Qt.call(n,e,1),--this.size,0))},He.prototype.get=function(n){var e=this.__data__,r=tr(e,n);return r<0?t:e[r][1]},He.prototype.has=function(t){return tr(this.__data__,t)>-1},He.prototype.set=function(t,n){var e=this.__data__,r=tr(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this},Ue.prototype.clear=function(){this.size=0,this.__data__={hash:new De,map:new(ke||He),string:new De}},Ue.prototype.delete=function(t){var n=si(this,t).delete(t);return this.size-=n?1:0,n},Ue.prototype.get=function(t){return si(this,t).get(t)},Ue.prototype.has=function(t){return si(this,t).has(t)},Ue.prototype.set=function(t,n){var e=si(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this},Ve.prototype.add=Ve.prototype.push=function(t){return this.__data__.set(t,e),this},Ve.prototype.has=function(t){return this.__data__.has(t)},Ge.prototype.clear=function(){this.__data__=new He,this.size=0},Ge.prototype.delete=function(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e},Ge.prototype.get=function(t){return this.__data__.get(t)},Ge.prototype.has=function(t){return this.__data__.has(t)},Ge.prototype.set=function(t,n){var e=this.__data__;if(e instanceof He){var r=e.__data__;if(!ke||r.length<199)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new Ue(r)}return e.set(t,n),this.size=e.size,this};var cr=$o(mr),fr=$o(yr,!0);function dr(t,n){var e=!0;return cr(t,function(t,r,o){return e=!!n(t,r,o)}),e}function pr(n,e,r){for(var o=-1,i=n.length;++o<i;){var a=n[o],l=e(a);if(null!=l&&(s===t?l==l&&!ul(l):r(l,s)))var s=l,u=a}return u}function vr(t,n){var e=[];return cr(t,function(t,r,o){n(t,r,o)&&e.push(t)}),e}function hr(t,n,e,r,o){var i=-1,a=t.length;for(e||(e=gi),o||(o=[]);++i<a;){var l=t[i];n>0&&e(l)?n>1?hr(l,n-1,e,r,o):Nn(o,l):r||(o[o.length]=l)}return o}var gr=Io(),br=Io(!0);function mr(t,n){return t&&gr(t,n,$l)}function yr(t,n){return t&&br(t,n,$l)}function wr(t,n){return zn(n,function(n){return Ja(t[n])})}function xr(n,e){for(var r=0,o=(e=mo(e,n)).length;null!=n&&r<o;)n=n[Bi(e[r++])];return r&&r==o?n:t}function _r(t,n,e){var r=n(t);return Ua(t)?r:Nn(r,e(t))}function kr(n){return null==n?n===t?"[object Undefined]":"[object Null]":sn&&sn in St(n)?function(n){var e=Pt.call(n,sn),r=n[sn];try{n[sn]=t;var o=!0}catch(a){}var i=Ft.call(n);return o&&(e?n[sn]=r:delete n[sn]),i}(n):function(t){return Ft.call(t)}(n)}function Cr(t,n){return t>n}function Sr(t,n){return null!=t&&Pt.call(t,n)}function Er(t,n){return null!=t&&n in St(t)}function zr(n,e,r){for(var o=r?An:jn,i=n[0].length,a=n.length,l=a,s=wt(a),u=1/0,c=[];l--;){var f=n[l];l&&e&&(f=Mn(f,Yn(e))),u=be(f.length,u),s[l]=!r&&(e||i>=120&&f.length>=120)?new Ve(l&&f):t}f=n[0];var d=-1,p=s[0];t:for(;++d<i&&c.length<u;){var v=f[d],h=e?e(v):v;if(v=r||0!==v?v:0,!(p?Qn(p,h):o(c,h,r))){for(l=a;--l;){var g=s[l];if(!(g?Qn(g,h):o(n[l],h,r)))continue t}p&&p.push(h),c.push(v)}}return c}function jr(n,e,r){var o=null==(n=Ei(n,e=mo(e,n)))?n:n[Bi(Xi(e))];return null==o?t:_n(o,n,r)}function Ar(t){return el(t)&&kr(t)==d}function Mr(n,e,r,o,i){return n===e||(null==n||null==e||!el(n)&&!el(e)?n!=n&&e!=e:function(n,e,r,o,i,a){var l=Ua(n),s=Ua(e),u=l?p:pi(n),c=s?p:pi(e),f=(u=u==d?x:u)==x,b=(c=c==d?x:c)==x,m=u==c;if(m&&Ka(n)){if(!Ka(e))return!1;l=!0,f=!1}if(m&&!f)return a||(a=new Ge),l||cl(n)?ti(n,e,r,o,i,a):function(t,n,e,r,o,i,a){switch(e){case A:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case j:return!(t.byteLength!=n.byteLength||!i(new Dt(t),new Dt(n)));case v:case h:case w:return Wa(+t,+n);case g:return t.name==n.name&&t.message==n.message;case k:case S:return t==n+"";case y:var l=re;case C:var s=1&r;if(l||(l=ae),t.size!=n.size&&!s)return!1;var u=a.get(t);if(u)return u==n;r|=2,a.set(t,n);var c=ti(l(t),l(n),r,o,i,a);return a.delete(t),c;case E:if(Te)return Te.call(t)==Te.call(n)}return!1}(n,e,u,r,o,i,a);if(!(1&r)){var _=f&&Pt.call(n,"__wrapped__"),z=b&&Pt.call(e,"__wrapped__");if(_||z){var M=_?n.value():n,N=z?e.value():e;return a||(a=new Ge),i(M,N,r,o,a)}}return!!m&&(a||(a=new Ge),function(n,e,r,o,i,a){var l=1&r,s=ei(n),u=s.length,c=ei(e),f=c.length;if(u!=f&&!l)return!1;for(var d=u;d--;){var p=s[d];if(!(l?p in e:Pt.call(e,p)))return!1}var v=a.get(n),h=a.get(e);if(v&&h)return v==e&&h==n;var g=!0;a.set(n,e),a.set(e,n);for(var b=l;++d<u;){var m=n[p=s[d]],y=e[p];if(o)var w=l?o(y,m,p,e,n,a):o(m,y,p,n,e,a);if(!(w===t?m===y||i(m,y,r,o,a):w)){g=!1;break}b||(b="constructor"==p)}if(g&&!b){var x=n.constructor,_=e.constructor;x==_||!("constructor"in n)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _||(g=!1)}return a.delete(n),a.delete(e),g}(n,e,r,o,i,a))}(n,e,r,o,Mr,i))}function Nr(n,e,r,o){var i=r.length,a=i,l=!o;if(null==n)return!a;for(n=St(n);i--;){var s=r[i];if(l&&s[2]?s[1]!==n[s[0]]:!(s[0]in n))return!1}for(;++i<a;){var u=(s=r[i])[0],c=n[u],f=s[1];if(l&&s[2]){if(c===t&&!(u in n))return!1}else{var d=new Ge;if(o)var p=o(c,f,u,n,e,d);if(!(p===t?Mr(f,c,3,o,d):p))return!1}}return!0}function $r(t){return!(!nl(t)||(n=t,Tt&&Tt in n))&&(Ja(t)?Ot:dt).test(Ri(t));var n}function Ir(t){return"function"==typeof t?t:null==t?os:"object"==typeof t?Ua(t)?Rr(t[0],t[1]):Br(t):ps(t)}function Pr(t){if(!_i(t))return he(t);var n=[];for(var e in St(t))Pt.call(t,e)&&"constructor"!=e&&n.push(e);return n}function Lr(t){if(!nl(t))return function(t){var n=[];if(null!=t)for(var e in St(t))n.push(e);return n}(t);var n=_i(t),e=[];for(var r in t)("constructor"!=r||!n&&Pt.call(t,r))&&e.push(r);return e}function Tr(t,n){return t<n}function Fr(t,n){var e=-1,r=Ga(t)?wt(t.length):[];return cr(t,function(t,o,i){r[++e]=n(t,o,i)}),r}function Br(t){var n=ui(t);return 1==n.length&&n[0][2]?Ci(n[0][0],n[0][1]):function(e){return e===t||Nr(e,t,n)}}function Rr(n,e){return yi(n)&&ki(e)?Ci(Bi(n),e):function(r){var o=zl(r,n);return o===t&&o===e?jl(r,n):Mr(e,o,3)}}function Or(n,e,r,o,i){n!==e&&gr(e,function(a,l){if(i||(i=new Ge),nl(a))!function(n,e,r,o,i,a,l){var s=zi(n,r),u=zi(e,r),c=l.get(u);if(c)Je(n,r,c);else{var f=a?a(s,u,r+"",n,e,l):t,d=f===t;if(d){var p=Ua(u),v=!p&&Ka(u),h=!p&&!v&&cl(u);f=u,p||v||h?Ua(s)?f=s:Ya(s)?f=jo(s):v?(d=!1,f=_o(u,!0)):h?(d=!1,f=Co(u,!0)):f=[]:il(u)||Ha(u)?(f=s,Ha(s)?f=ml(s):nl(s)&&!Ja(s)||(f=hi(u))):d=!1}d&&(l.set(u,f),i(f,u,o,a,l),l.delete(u)),Je(n,r,f)}}(n,e,l,r,Or,o,i);else{var s=o?o(zi(n,l),a,l+"",n,e,i):t;s===t&&(s=a),Je(n,l,s)}},Il)}function Wr(n,e){var r=n.length;if(r)return bi(e+=e<0?r:0,r)?n[e]:t}function qr(t,n,e){n=n.length?Mn(n,function(t){return Ua(t)?function(n){return xr(n,1===t.length?t[0]:t)}:t}):[os];var r=-1;return n=Mn(n,Yn(li())),function(t,n){var e=t.length;for(t.sort(n);e--;)t[e]=t[e].value;return t}(Fr(t,function(t,e,o){return{criteria:Mn(n,function(n){return n(t)}),index:++r,value:t}}),function(t,n){return function(t,n,e){for(var r=-1,o=t.criteria,i=n.criteria,a=o.length,l=e.length;++r<a;){var s=So(o[r],i[r]);if(s)return r>=l?s:s*("desc"==e[r]?-1:1)}return t.index-n.index}(t,n,e)})}function Dr(t,n,e){for(var r=-1,o=n.length,i={};++r<o;){var a=n[r],l=xr(t,a);e(l,a)&&Xr(i,mo(a,t),l)}return i}function Hr(t,n,e,r){var o=r?Rn:Bn,i=-1,a=n.length,l=t;for(t===n&&(n=jo(n)),e&&(l=Mn(t,Yn(e)));++i<a;)for(var s=0,u=n[i],c=e?e(u):u;(s=o(l,c,s,r))>-1;)l!==t&&Qt.call(l,s,1),Qt.call(t,s,1);return t}function Ur(t,n){for(var e=t?n.length:0,r=e-1;e--;){var o=n[e];if(e==r||o!==i){var i=o;bi(o)?Qt.call(t,o,1):uo(t,o)}}return t}function Vr(t,n){return t+Ln(we()*(n-t+1))}function Gr(t,n){var e="";if(!t||n<1||n>s)return e;do{n%2&&(e+=t),(n=Ln(n/2))&&(t+=t)}while(n);return e}function Yr(t,n){return Mi(Si(t,n,os),t+"")}function Kr(t){return Ke(Wl(t))}function Qr(t,n){var e=Wl(t);return Ii(e,ir(n,0,e.length))}function Xr(n,e,r,o){if(!nl(n))return n;for(var i=-1,a=(e=mo(e,n)).length,l=a-1,s=n;null!=s&&++i<a;){var u=Bi(e[i]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return n;if(i!=l){var f=s[u];(c=o?o(f,u,s):t)===t&&(c=nl(f)?f:bi(e[i+1])?[]:{})}Ze(s,u,c),s=s[u]}return n}var Jr=je?function(t,n){return je.set(t,n),t}:os,Zr=un?function(t,n){return un(t,"toString",{configurable:!0,enumerable:!1,value:ns(n),writable:!0})}:os;function to(t){return Ii(Wl(t))}function no(t,n,e){var r=-1,o=t.length;n<0&&(n=-n>o?0:o+n),(e=e>o?o:e)<0&&(e+=o),o=n>e?0:e-n>>>0,n>>>=0;for(var i=wt(o);++r<o;)i[r]=t[r+n];return i}function eo(t,n){var e;return cr(t,function(t,r,o){return!(e=n(t,r,o))}),!!e}function ro(t,n,e){var r=0,o=null==t?r:t.length;if("number"==typeof n&&n==n&&o<=2147483647){for(;r<o;){var i=r+o>>>1,a=t[i];null!==a&&!ul(a)&&(e?a<=n:a<n)?r=i+1:o=i}return o}return oo(t,n,os,e)}function oo(n,e,r,o){var i=0,a=null==n?0:n.length;if(0===a)return 0;for(var l=(e=r(e))!=e,s=null===e,u=ul(e),c=e===t;i<a;){var f=Ln((i+a)/2),d=r(n[f]),p=d!==t,v=null===d,h=d==d,g=ul(d);if(l)var b=o||h;else b=c?h&&(o||p):s?h&&p&&(o||!v):u?h&&p&&!v&&(o||!g):!v&&!g&&(o?d<=e:d<e);b?i=f+1:a=f}return be(a,4294967294)}function io(t,n){for(var e=-1,r=t.length,o=0,i=[];++e<r;){var a=t[e],l=n?n(a):a;if(!e||!Wa(l,s)){var s=l;i[o++]=0===a?0:a}}return i}function ao(t){return"number"==typeof t?t:ul(t)?u:+t}function lo(t){if("string"==typeof t)return t;if(Ua(t))return Mn(t,lo)+"";if(ul(t))return Fe?Fe.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}function so(t,n,e){var r=-1,o=jn,i=t.length,a=!0,l=[],s=l;if(e)a=!1,o=An;else if(i>=200){var u=n?null:Yo(t);if(u)return ae(u);a=!1,o=Qn,s=new Ve}else s=n?[]:l;t:for(;++r<i;){var c=t[r],f=n?n(c):c;if(c=e||0!==c?c:0,a&&f==f){for(var d=s.length;d--;)if(s[d]===f)continue t;n&&s.push(f),l.push(c)}else o(s,f,e)||(s!==l&&s.push(f),l.push(c))}return l}function uo(t,n){return null==(t=Ei(t,n=mo(n,t)))||delete t[Bi(Xi(n))]}function co(t,n,e,r){return Xr(t,n,e(xr(t,n)),r)}function fo(t,n,e,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&n(t[i],i,t););return e?no(t,r?0:i,r?i+1:o):no(t,r?i+1:0,r?o:i)}function po(t,n){var e=t;return e instanceof qe&&(e=e.value()),$n(n,function(t,n){return n.func.apply(n.thisArg,Nn([t],n.args))},e)}function vo(t,n,e){var r=t.length;if(r<2)return r?so(t[0]):[];for(var o=-1,i=wt(r);++o<r;)for(var a=t[o],l=-1;++l<r;)l!=o&&(i[o]=ur(i[o]||a,t[l],n,e));return so(hr(i,1),n,e)}function ho(n,e,r){for(var o=-1,i=n.length,a=e.length,l={};++o<i;){var s=o<a?e[o]:t;r(l,n[o],s)}return l}function go(t){return Ya(t)?t:[]}function bo(t){return"function"==typeof t?t:os}function mo(t,n){return Ua(t)?t:yi(t,n)?[t]:Fi(yl(t))}var yo=Yr;function wo(n,e,r){var o=n.length;return r=r===t?o:r,!e&&r>=o?n:no(n,e,r)}var xo=fn||function(t){return cn.clearTimeout(t)};function _o(t,n){if(n)return t.slice();var e=t.length,r=Ht?Ht(e):new t.constructor(e);return t.copy(r),r}function ko(t){var n=new t.constructor(t.byteLength);return new Dt(n).set(new Dt(t)),n}function Co(t,n){var e=n?ko(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function So(n,e){if(n!==e){var r=n!==t,o=null===n,i=n==n,a=ul(n),l=e!==t,s=null===e,u=e==e,c=ul(e);if(!s&&!c&&!a&&n>e||a&&l&&u&&!s&&!c||o&&l&&u||!r&&u||!i)return 1;if(!o&&!a&&!c&&n<e||c&&r&&i&&!o&&!a||s&&r&&i||!l&&i||!u)return-1}return 0}function Eo(t,n,e,r){for(var o=-1,i=t.length,a=e.length,l=-1,s=n.length,u=ge(i-a,0),c=wt(s+u),f=!r;++l<s;)c[l]=n[l];for(;++o<a;)(f||o<i)&&(c[e[o]]=t[o]);for(;u--;)c[l++]=t[o++];return c}function zo(t,n,e,r){for(var o=-1,i=t.length,a=-1,l=e.length,s=-1,u=n.length,c=ge(i-l,0),f=wt(c+u),d=!r;++o<c;)f[o]=t[o];for(var p=o;++s<u;)f[p+s]=n[s];for(;++a<l;)(d||o<i)&&(f[p+e[a]]=t[o++]);return f}function jo(t,n){var e=-1,r=t.length;for(n||(n=wt(r));++e<r;)n[e]=t[e];return n}function Ao(n,e,r,o){var i=!r;r||(r={});for(var a=-1,l=e.length;++a<l;){var s=e[a],u=o?o(r[s],n[s],s,r,n):t;u===t&&(u=n[s]),i?rr(r,s,u):Ze(r,s,u)}return r}function Mo(t,n){return function(e,r){var o=Ua(e)?kn:nr,i=n?n():{};return o(e,t,li(r,2),i)}}function No(n){return Yr(function(e,r){var o=-1,i=r.length,a=i>1?r[i-1]:t,l=i>2?r[2]:t;for(a=n.length>3&&"function"==typeof a?(i--,a):t,l&&mi(r[0],r[1],l)&&(a=i<3?t:a,i=1),e=St(e);++o<i;){var s=r[o];s&&n(e,s,o,a)}return e})}function $o(t,n){return function(e,r){if(null==e)return e;if(!Ga(e))return t(e,r);for(var o=e.length,i=n?o:-1,a=St(e);(n?i--:++i<o)&&!1!==r(a[i],i,a););return e}}function Io(t){return function(n,e,r){for(var o=-1,i=St(n),a=r(n),l=a.length;l--;){var s=a[t?l:++o];if(!1===e(i[s],s,i))break}return n}}function Po(n){return function(e){var r=ee(e=yl(e))?se(e):t,o=r?r[0]:e.charAt(0),i=r?wo(r,1).join(""):e.slice(1);return o[n]()+i}}function Lo(t){return function(n){return $n(Jl(Hl(n).replace(Yt,"")),t,"")}}function To(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var e=Re(t.prototype),r=t.apply(e,n);return nl(r)?r:e}}function Fo(n){return function(e,r,o){var i=St(e);if(!Ga(e)){var a=li(r,3);e=$l(e),r=function(t){return a(i[t],t,i)}}var l=n(e,r,o);return l>-1?i[a?e[l]:l]:t}}function Bo(e){return ni(function(r){var o=r.length,i=o,a=We.prototype.thru;for(e&&r.reverse();i--;){var l=r[i];if("function"!=typeof l)throw new jt(n);if(a&&!s&&"wrapper"==ii(l))var s=new We([],!0)}for(i=s?i:o;++i<o;){var u=ii(l=r[i]),c="wrapper"==u?oi(l):t;s=c&&wi(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?s[ii(c[0])].apply(s,c[3]):1==l.length&&wi(l)?s[u]():s.thru(l)}return function(){var t=arguments,n=t[0];if(s&&1==t.length&&Ua(n))return s.plant(n).value();for(var e=0,i=o?r[e].apply(this,t):n;++e<o;)i=r[e].call(this,i);return i}})}function Ro(n,e,r,o,a,l,s,u,c,f){var d=e&i,p=1&e,v=2&e,h=24&e,g=512&e,b=v?t:To(n);return function i(){for(var m=arguments.length,y=wt(m),w=m;w--;)y[w]=arguments[w];if(h)var x=ai(i),_=function(t,n){for(var e=t.length,r=0;e--;)t[e]===n&&++r;return r}(y,x);if(o&&(y=Eo(y,o,a,h)),l&&(y=zo(y,l,s,h)),m-=_,h&&m<f){var k=ie(y,x);return Vo(n,e,Ro,i.placeholder,r,y,k,u,c,f-m)}var C=p?r:this,S=v?C[n]:n;return m=y.length,u?y=function(n,e){for(var r=n.length,o=be(e.length,r),i=jo(n);o--;){var a=e[o];n[o]=bi(a,r)?i[a]:t}return n}(y,u):g&&m>1&&y.reverse(),d&&c<m&&(y.length=c),this&&this!==cn&&this instanceof i&&(S=b||To(S)),S.apply(C,y)}}function Oo(t,n){return function(e,r){return function(t,n,e,r){return mr(t,function(t,o,i){n(r,e(t),o,i)}),r}(e,t,n(r),{})}}function Wo(n,e){return function(r,o){var i;if(r===t&&o===t)return e;if(r!==t&&(i=r),o!==t){if(i===t)return o;"string"==typeof r||"string"==typeof o?(r=lo(r),o=lo(o)):(r=ao(r),o=ao(o)),i=n(r,o)}return i}}function qo(t){return ni(function(n){return n=Mn(n,Yn(li())),Yr(function(e){var r=this;return t(n,function(t){return _n(t,r,e)})})})}function Do(n,e){var r=(e=e===t?" ":lo(e)).length;if(r<2)return r?Gr(e,n):e;var o=Gr(e,hn(n/le(e)));return ee(e)?wo(se(o),0,n).join(""):o.slice(0,n)}function Ho(n){return function(e,r,o){return o&&"number"!=typeof o&&mi(e,r,o)&&(r=o=t),e=vl(e),r===t?(r=e,e=0):r=vl(r),function(t,n,e,r){for(var o=-1,i=ge(hn((n-t)/(e||1)),0),a=wt(i);i--;)a[r?i:++o]=t,t+=e;return a}(e,r,o=o===t?e<r?1:-1:vl(o),n)}}function Uo(t){return function(n,e){return"string"==typeof n&&"string"==typeof e||(n=bl(n),e=bl(e)),t(n,e)}}function Vo(n,e,r,i,a,l,s,u,c,f){var d=8&e;e|=d?o:64,4&(e&=~(d?64:o))||(e&=-4);var p=[n,e,a,d?l:t,d?s:t,d?t:l,d?t:s,u,c,f],v=r.apply(t,p);return wi(n)&&ji(v,p),v.placeholder=i,Ni(v,n,e)}function Go(t){var n=Ct[t];return function(t,e){if(t=bl(t),(e=null==e?0:be(hl(e),292))&&pe(t)){var r=(yl(t)+"e").split("e");return+((r=(yl(n(r[0]+"e"+(+r[1]+e)))+"e").split("e"))[0]+"e"+(+r[1]-e))}return n(t)}}var Yo=Se&&1/ae(new Se([,-0]))[1]==l?function(t){return new Se(t)}:us;function Ko(t){return function(n){var e=pi(n);return e==y?re(n):e==C?function(t){var n=-1,e=Array(t.size);return t.forEach(function(t){e[++n]=[t,t]}),e}(n):function(t,n){return Mn(n,function(n){return[n,t[n]]})}(n,t(n))}}function Qo(e,l,s,u,c,f,d,p){var v=2&l;if(!v&&"function"!=typeof e)throw new jt(n);var h=u?u.length:0;if(h||(l&=-97,u=c=t),d=d===t?d:ge(hl(d),0),p=p===t?p:hl(p),h-=c?c.length:0,64&l){var g=u,b=c;u=c=t}var m=v?t:oi(e),y=[e,l,s,u,c,g,b,f,d,p];if(m&&function(t,n){var e=t[1],o=n[1],l=e|o,s=l<131,u=o==i&&8==e||o==i&&e==a&&t[7].length<=n[8]||384==o&&n[7].length<=n[8]&&8==e;if(!s&&!u)return t;1&o&&(t[2]=n[2],l|=1&e?0:4);var c=n[3];if(c){var f=t[3];t[3]=f?Eo(f,c,n[4]):c,t[4]=f?ie(t[3],r):n[4]}(c=n[5])&&(f=t[5],t[5]=f?zo(f,c,n[6]):c,t[6]=f?ie(t[5],r):n[6]),(c=n[7])&&(t[7]=c),o&i&&(t[8]=null==t[8]?n[8]:be(t[8],n[8])),null==t[9]&&(t[9]=n[9]),t[0]=n[0],t[1]=l}(y,m),e=y[0],l=y[1],s=y[2],u=y[3],c=y[4],!(p=y[9]=y[9]===t?v?0:e.length:ge(y[9]-h,0))&&24&l&&(l&=-25),l&&1!=l)w=8==l||16==l?function(n,e,r){var o=To(n);return function i(){for(var a=arguments.length,l=wt(a),s=a,u=ai(i);s--;)l[s]=arguments[s];var c=a<3&&l[0]!==u&&l[a-1]!==u?[]:ie(l,u);return(a-=c.length)<r?Vo(n,e,Ro,i.placeholder,t,l,c,t,t,r-a):_n(this&&this!==cn&&this instanceof i?o:n,this,l)}}(e,l,p):l!=o&&33!=l||c.length?Ro.apply(t,y):function(t,n,e,r){var o=1&n,i=To(t);return function n(){for(var a=-1,l=arguments.length,s=-1,u=r.length,c=wt(u+l),f=this&&this!==cn&&this instanceof n?i:t;++s<u;)c[s]=r[s];for(;l--;)c[s++]=arguments[++a];return _n(f,o?e:this,c)}}(e,l,s,u);else var w=function(t,n,e){var r=1&n,o=To(t);return function n(){return(this&&this!==cn&&this instanceof n?o:t).apply(r?e:this,arguments)}}(e,l,s);return Ni((m?Jr:ji)(w,y),e,l)}function Xo(n,e,r,o){return n===t||Wa(n,Nt[r])&&!Pt.call(o,r)?e:n}function Jo(n,e,r,o,i,a){return nl(n)&&nl(e)&&(a.set(e,n),Or(n,e,t,Jo,a),a.delete(e)),n}function Zo(n){return il(n)?t:n}function ti(n,e,r,o,i,a){var l=1&r,s=n.length,u=e.length;if(s!=u&&!(l&&u>s))return!1;var c=a.get(n),f=a.get(e);if(c&&f)return c==e&&f==n;var d=-1,p=!0,v=2&r?new Ve:t;for(a.set(n,e),a.set(e,n);++d<s;){var h=n[d],g=e[d];if(o)var b=l?o(g,h,d,e,n,a):o(h,g,d,n,e,a);if(b!==t){if(b)continue;p=!1;break}if(v){if(!Pn(e,function(t,n){if(!Qn(v,n)&&(h===t||i(h,t,r,o,a)))return v.push(n)})){p=!1;break}}else if(h!==g&&!i(h,g,r,o,a)){p=!1;break}}return a.delete(n),a.delete(e),p}function ni(n){return Mi(Si(n,t,Vi),n+"")}function ei(t){return _r(t,$l,fi)}function ri(t){return _r(t,Il,di)}var oi=je?function(t){return je.get(t)}:us;function ii(t){for(var n=t.name+"",e=Ae[n],r=Pt.call(Ae,n)?e.length:0;r--;){var o=e[r],i=o.func;if(null==i||i==t)return o.name}return n}function ai(t){return(Pt.call(Be,"placeholder")?Be:t).placeholder}function li(){var t=Be.iteratee||is;return t=t===is?Ir:t,arguments.length?t(arguments[0],arguments[1]):t}function si(t,n){var e,r,o=t.__data__;return("string"==(r=typeof(e=n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e)?o["string"==typeof n?"string":"hash"]:o.map}function ui(t){for(var n=$l(t),e=n.length;e--;){var r=n[e],o=t[r];n[e]=[r,o,ki(o)]}return n}function ci(n,e){var r=function(n,e){return null==n?t:n[e]}(n,e);return $r(r)?r:t}var fi=Dn?function(t){return null==t?[]:(t=St(t),zn(Dn(t),function(n){return Gt.call(t,n)}))}:gs,di=Dn?function(t){for(var n=[];t;)Nn(n,fi(t)),t=Ut(t);return n}:gs,pi=kr;function vi(t,n,e){for(var r=-1,o=(n=mo(n,t)).length,i=!1;++r<o;){var a=Bi(n[r]);if(!(i=null!=t&&e(t,a)))break;t=t[a]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&tl(o)&&bi(a,o)&&(Ua(t)||Ha(t))}function hi(t){return"function"!=typeof t.constructor||_i(t)?{}:Re(Ut(t))}function gi(t){return Ua(t)||Ha(t)||!!(Jt&&t&&t[Jt])}function bi(t,n){var e=typeof t;return!!(n=null==n?s:n)&&("number"==e||"symbol"!=e&&vt.test(t))&&t>-1&&t%1==0&&t<n}function mi(t,n,e){if(!nl(e))return!1;var r=typeof n;return!!("number"==r?Ga(e)&&bi(n,e.length):"string"==r&&n in e)&&Wa(e[n],t)}function yi(t,n){if(Ua(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!ul(t))||Q.test(t)||!K.test(t)||null!=n&&t in St(n)}function wi(t){var n=ii(t),e=Be[n];if("function"!=typeof e||!(n in qe.prototype))return!1;if(t===e)return!0;var r=oi(e);return!!r&&t===r[0]}(_e&&pi(new _e(new ArrayBuffer(1)))!=A||ke&&pi(new ke)!=y||Ce&&pi(Ce.resolve())!=_||Se&&pi(new Se)!=C||Ee&&pi(new Ee)!=z)&&(pi=function(n){var e=kr(n),r=e==x?n.constructor:t,o=r?Ri(r):"";if(o)switch(o){case Me:return A;case Ne:return y;case $e:return _;case Ie:return C;case Pe:return z}return e});var xi=$t?Ja:bs;function _i(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||Nt)}function ki(t){return t==t&&!nl(t)}function Ci(n,e){return function(r){return null!=r&&r[n]===e&&(e!==t||n in St(r))}}function Si(n,e,r){return e=ge(e===t?n.length-1:e,0),function(){for(var t=arguments,o=-1,i=ge(t.length-e,0),a=wt(i);++o<i;)a[o]=t[e+o];o=-1;for(var l=wt(e+1);++o<e;)l[o]=t[o];return l[e]=r(a),_n(n,this,l)}}function Ei(t,n){return n.length<2?t:xr(t,no(n,0,-1))}function zi(t,n){if(("constructor"!==n||"function"!=typeof t[n])&&"__proto__"!=n)return t[n]}var ji=$i(Jr),Ai=vn||function(t,n){return cn.setTimeout(t,n)},Mi=$i(Zr);function Ni(t,n,e){var r=n+"";return Mi(t,function(t,n){var e=n.length;if(!e)return t;var r=e-1;return n[r]=(e>1?"& ":"")+n[r],n=n.join(e>2?", ":" "),t.replace(et,"{\n/* [wrapped with "+n+"] */\n")}(r,function(t,n){return Cn(f,function(e){var r="_."+e[0];n&e[1]&&!jn(t,r)&&t.push(r)}),t.sort()}(function(t){var n=t.match(rt);return n?n[1].split(ot):[]}(r),e)))}function $i(n){var e=0,r=0;return function(){var o=me(),i=16-(o-r);if(r=o,i>0){if(++e>=800)return arguments[0]}else e=0;return n.apply(t,arguments)}}function Ii(n,e){var r=-1,o=n.length,i=o-1;for(e=e===t?o:e;++r<e;){var a=Vr(r,i),l=n[a];n[a]=n[r],n[r]=l}return n.length=e,n}var Pi,Li,Ti,Fi=(Pi=function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(X,function(t,e,r,o){n.push(r?o.replace(lt,"$1"):e||t)}),n},Li=La(Pi,function(t){return 500===Ti.size&&Ti.clear(),t}),Ti=Li.cache,Li);function Bi(t){if("string"==typeof t||ul(t))return t;var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}function Ri(t){if(null!=t){try{return It.call(t)}catch(n){}try{return t+""}catch(n){}}return""}function Oi(t){if(t instanceof qe)return t.clone();var n=new We(t.__wrapped__,t.__chain__);return n.__actions__=jo(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}var Wi=Yr(function(t,n){return Ya(t)?ur(t,hr(n,1,Ya,!0)):[]}),qi=Yr(function(n,e){var r=Xi(e);return Ya(r)&&(r=t),Ya(n)?ur(n,hr(e,1,Ya,!0),li(r,2)):[]}),Di=Yr(function(n,e){var r=Xi(e);return Ya(r)&&(r=t),Ya(n)?ur(n,hr(e,1,Ya,!0),t,r):[]});function Hi(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var o=null==e?0:hl(e);return o<0&&(o=ge(r+o,0)),Fn(t,li(n,3),o)}function Ui(n,e,r){var o=null==n?0:n.length;if(!o)return-1;var i=o-1;return r!==t&&(i=hl(r),i=r<0?ge(o+i,0):be(i,o-1)),Fn(n,li(e,3),i,!0)}function Vi(t){return null!=t&&t.length?hr(t,1):[]}function Gi(n){return n&&n.length?n[0]:t}var Yi=Yr(function(t){var n=Mn(t,go);return n.length&&n[0]===t[0]?zr(n):[]}),Ki=Yr(function(n){var e=Xi(n),r=Mn(n,go);return e===Xi(r)?e=t:r.pop(),r.length&&r[0]===n[0]?zr(r,li(e,2)):[]}),Qi=Yr(function(n){var e=Xi(n),r=Mn(n,go);return(e="function"==typeof e?e:t)&&r.pop(),r.length&&r[0]===n[0]?zr(r,t,e):[]});function Xi(n){var e=null==n?0:n.length;return e?n[e-1]:t}var Ji=Yr(Zi);function Zi(t,n){return t&&t.length&&n&&n.length?Hr(t,n):t}var ta=ni(function(t,n){var e=null==t?0:t.length,r=or(t,n);return Ur(t,Mn(n,function(t){return bi(t,e)?+t:t}).sort(So)),r});function na(t){return null==t?t:xe.call(t)}var ea=Yr(function(t){return so(hr(t,1,Ya,!0))}),ra=Yr(function(n){var e=Xi(n);return Ya(e)&&(e=t),so(hr(n,1,Ya,!0),li(e,2))}),oa=Yr(function(n){var e=Xi(n);return e="function"==typeof e?e:t,so(hr(n,1,Ya,!0),t,e)});function ia(t){if(!t||!t.length)return[];var n=0;return t=zn(t,function(t){if(Ya(t))return n=ge(t.length,n),!0}),Vn(n,function(n){return Mn(t,qn(n))})}function aa(n,e){if(!n||!n.length)return[];var r=ia(n);return null==e?r:Mn(r,function(n){return _n(e,t,n)})}var la=Yr(function(t,n){return Ya(t)?ur(t,n):[]}),sa=Yr(function(t){return vo(zn(t,Ya))}),ua=Yr(function(n){var e=Xi(n);return Ya(e)&&(e=t),vo(zn(n,Ya),li(e,2))}),ca=Yr(function(n){var e=Xi(n);return e="function"==typeof e?e:t,vo(zn(n,Ya),t,e)}),fa=Yr(ia),da=Yr(function(n){var e=n.length,r=e>1?n[e-1]:t;return r="function"==typeof r?(n.pop(),r):t,aa(n,r)});function pa(t){var n=Be(t);return n.__chain__=!0,n}function va(t,n){return n(t)}var ha=ni(function(n){var e=n.length,r=e?n[0]:0,o=this.__wrapped__,i=function(t){return or(t,n)};return!(e>1||this.__actions__.length)&&o instanceof qe&&bi(r)?((o=o.slice(r,+r+(e?1:0))).__actions__.push({func:va,args:[i],thisArg:t}),new We(o,this.__chain__).thru(function(n){return e&&!n.length&&n.push(t),n})):this.thru(i)}),ga=Mo(function(t,n,e){Pt.call(t,e)?++t[e]:rr(t,e,1)}),ba=Fo(Hi),ma=Fo(Ui);function ya(t,n){return(Ua(t)?Cn:cr)(t,li(n,3))}function wa(t,n){return(Ua(t)?Sn:fr)(t,li(n,3))}var xa=Mo(function(t,n,e){Pt.call(t,e)?t[e].push(n):rr(t,e,[n])}),_a=Yr(function(t,n,e){var r=-1,o="function"==typeof n,i=Ga(t)?wt(t.length):[];return cr(t,function(t){i[++r]=o?_n(n,t,e):jr(t,n,e)}),i}),ka=Mo(function(t,n,e){rr(t,e,n)});function Ca(t,n){return(Ua(t)?Mn:Fr)(t,li(n,3))}var Sa=Mo(function(t,n,e){t[e?0:1].push(n)},function(){return[[],[]]}),Ea=Yr(function(t,n){if(null==t)return[];var e=n.length;return e>1&&mi(t,n[0],n[1])?n=[]:e>2&&mi(n[0],n[1],n[2])&&(n=[n[0]]),qr(t,hr(n,1),[])}),za=dn||function(){return cn.Date.now()};function ja(n,e,r){return e=r?t:e,e=n&&null==e?n.length:e,Qo(n,i,t,t,t,t,e)}function Aa(e,r){var o;if("function"!=typeof r)throw new jt(n);return e=hl(e),function(){return--e>0&&(o=r.apply(this,arguments)),e<=1&&(r=t),o}}var Ma=Yr(function(t,n,e){var r=1;if(e.length){var i=ie(e,ai(Ma));r|=o}return Qo(t,r,n,e,i)}),Na=Yr(function(t,n,e){var r=3;if(e.length){var i=ie(e,ai(Na));r|=o}return Qo(n,r,t,e,i)});function $a(e,r,o){var i,a,l,s,u,c,f=0,d=!1,p=!1,v=!0;if("function"!=typeof e)throw new jt(n);function h(n){var r=i,o=a;return i=a=t,f=n,s=e.apply(o,r)}function g(n){var e=n-c;return c===t||e>=r||e<0||p&&n-f>=l}function b(){var t=za();if(g(t))return m(t);u=Ai(b,function(t){var n=r-(t-c);return p?be(n,l-(t-f)):n}(t))}function m(n){return u=t,v&&i?h(n):(i=a=t,s)}function y(){var n=za(),e=g(n);if(i=arguments,a=this,c=n,e){if(u===t)return function(t){return f=t,u=Ai(b,r),d?h(t):s}(c);if(p)return xo(u),u=Ai(b,r),h(c)}return u===t&&(u=Ai(b,r)),s}return r=bl(r)||0,nl(o)&&(d=!!o.leading,l=(p="maxWait"in o)?ge(bl(o.maxWait)||0,r):l,v="trailing"in o?!!o.trailing:v),y.cancel=function(){u!==t&&xo(u),f=0,i=c=a=u=t},y.flush=function(){return u===t?s:m(za())},y}var Ia=Yr(function(t,n){return sr(t,1,n)}),Pa=Yr(function(t,n,e){return sr(t,bl(n)||0,e)});function La(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new jt(n);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(La.Cache||Ue),r}function Ta(t){if("function"!=typeof t)throw new jt(n);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}La.Cache=Ue;var Fa=yo(function(t,n){var e=(n=1==n.length&&Ua(n[0])?Mn(n[0],Yn(li())):Mn(hr(n,1),Yn(li()))).length;return Yr(function(r){for(var o=-1,i=be(r.length,e);++o<i;)r[o]=n[o].call(this,r[o]);return _n(t,this,r)})}),Ba=Yr(function(n,e){var r=ie(e,ai(Ba));return Qo(n,o,t,e,r)}),Ra=Yr(function(n,e){var r=ie(e,ai(Ra));return Qo(n,64,t,e,r)}),Oa=ni(function(n,e){return Qo(n,a,t,t,t,e)});function Wa(t,n){return t===n||t!=t&&n!=n}var qa=Uo(Cr),Da=Uo(function(t,n){return t>=n}),Ha=Ar(function(){return arguments}())?Ar:function(t){return el(t)&&Pt.call(t,"callee")&&!Gt.call(t,"callee")},Ua=wt.isArray,Va=gn?Yn(gn):function(t){return el(t)&&kr(t)==j};function Ga(t){return null!=t&&tl(t.length)&&!Ja(t)}function Ya(t){return el(t)&&Ga(t)}var Ka=de||bs,Qa=bn?Yn(bn):function(t){return el(t)&&kr(t)==h};function Xa(t){if(!el(t))return!1;var n=kr(t);return n==g||"[object DOMException]"==n||"string"==typeof t.message&&"string"==typeof t.name&&!il(t)}function Ja(t){if(!nl(t))return!1;var n=kr(t);return n==b||n==m||"[object AsyncFunction]"==n||"[object Proxy]"==n}function Za(t){return"number"==typeof t&&t==hl(t)}function tl(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}function nl(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}function el(t){return null!=t&&"object"==typeof t}var rl=mn?Yn(mn):function(t){return el(t)&&pi(t)==y};function ol(t){return"number"==typeof t||el(t)&&kr(t)==w}function il(t){if(!el(t)||kr(t)!=x)return!1;var n=Ut(t);if(null===n)return!0;var e=Pt.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e instanceof e&&It.call(e)==Bt}var al=yn?Yn(yn):function(t){return el(t)&&kr(t)==k},ll=wn?Yn(wn):function(t){return el(t)&&pi(t)==C};function sl(t){return"string"==typeof t||!Ua(t)&&el(t)&&kr(t)==S}function ul(t){return"symbol"==typeof t||el(t)&&kr(t)==E}var cl=xn?Yn(xn):function(t){return el(t)&&tl(t.length)&&!!en[kr(t)]},fl=Uo(Tr),dl=Uo(function(t,n){return t<=n});function pl(t){if(!t)return[];if(Ga(t))return sl(t)?se(t):jo(t);if(on&&t[on])return function(t){for(var n,e=[];!(n=t.next()).done;)e.push(n.value);return e}(t[on]());var n=pi(t);return(n==y?re:n==C?ae:Wl)(t)}function vl(t){return t?(t=bl(t))===l||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function hl(t){var n=vl(t),e=n%1;return n==n?e?n-e:n:0}function gl(t){return t?ir(hl(t),0,c):0}function bl(t){if("number"==typeof t)return t;if(ul(t))return u;if(nl(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=nl(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=Gn(t);var e=ft.test(t);return e||pt.test(t)?ln(t.slice(2),e?2:8):ct.test(t)?u:+t}function ml(t){return Ao(t,Il(t))}function yl(t){return null==t?"":lo(t)}var wl=No(function(t,n){if(_i(n)||Ga(n))Ao(n,$l(n),t);else for(var e in n)Pt.call(n,e)&&Ze(t,e,n[e])}),xl=No(function(t,n){Ao(n,Il(n),t)}),_l=No(function(t,n,e,r){Ao(n,Il(n),t,r)}),kl=No(function(t,n,e,r){Ao(n,$l(n),t,r)}),Cl=ni(or),Sl=Yr(function(n,e){n=St(n);var r=-1,o=e.length,i=o>2?e[2]:t;for(i&&mi(e[0],e[1],i)&&(o=1);++r<o;)for(var a=e[r],l=Il(a),s=-1,u=l.length;++s<u;){var c=l[s],f=n[c];(f===t||Wa(f,Nt[c])&&!Pt.call(n,c))&&(n[c]=a[c])}return n}),El=Yr(function(n){return n.push(t,Jo),_n(Ll,t,n)});function zl(n,e,r){var o=null==n?t:xr(n,e);return o===t?r:o}function jl(t,n){return null!=t&&vi(t,n,Er)}var Al=Oo(function(t,n,e){null!=n&&"function"!=typeof n.toString&&(n=Ft.call(n)),t[n]=e},ns(os)),Ml=Oo(function(t,n,e){null!=n&&"function"!=typeof n.toString&&(n=Ft.call(n)),Pt.call(t,n)?t[n].push(e):t[n]=[e]},li),Nl=Yr(jr);function $l(t){return Ga(t)?Ye(t):Pr(t)}function Il(t){return Ga(t)?Ye(t,!0):Lr(t)}var Pl=No(function(t,n,e){Or(t,n,e)}),Ll=No(function(t,n,e,r){Or(t,n,e,r)}),Tl=ni(function(t,n){var e={};if(null==t)return e;var r=!1;n=Mn(n,function(n){return n=mo(n,t),r||(r=n.length>1),n}),Ao(t,ri(t),e),r&&(e=ar(e,7,Zo));for(var o=n.length;o--;)uo(e,n[o]);return e}),Fl=ni(function(t,n){return null==t?{}:function(t,n){return Dr(t,n,function(n,e){return jl(t,e)})}(t,n)});function Bl(t,n){if(null==t)return{};var e=Mn(ri(t),function(t){return[t]});return n=li(n),Dr(t,e,function(t,e){return n(t,e[0])})}var Rl=Ko($l),Ol=Ko(Il);function Wl(t){return null==t?[]:Kn(t,$l(t))}var ql=Lo(function(t,n,e){return n=n.toLowerCase(),t+(e?Dl(n):n)});function Dl(t){return Xl(yl(t).toLowerCase())}function Hl(t){return(t=yl(t))&&t.replace(ht,Zn).replace(Kt,"")}var Ul=Lo(function(t,n,e){return t+(e?"-":"")+n.toLowerCase()}),Vl=Lo(function(t,n,e){return t+(e?" ":"")+n.toLowerCase()}),Gl=Po("toLowerCase"),Yl=Lo(function(t,n,e){return t+(e?"_":"")+n.toLowerCase()}),Kl=Lo(function(t,n,e){return t+(e?" ":"")+Xl(n)}),Ql=Lo(function(t,n,e){return t+(e?" ":"")+n.toUpperCase()}),Xl=Po("toUpperCase");function Jl(n,e,r){return n=yl(n),(e=r?t:e)===t?function(t){return Zt.test(t)}(n)?function(t){return t.match(Xt)||[]}(n):function(t){return t.match(it)||[]}(n):n.match(e)||[]}var Zl=Yr(function(n,e){try{return _n(n,t,e)}catch(r){return Xa(r)?r:new _t(r)}}),ts=ni(function(t,n){return Cn(n,function(n){n=Bi(n),rr(t,n,Ma(t[n],t))}),t});function ns(t){return function(){return t}}var es=Bo(),rs=Bo(!0);function os(t){return t}function is(t){return Ir("function"==typeof t?t:ar(t,1))}var as=Yr(function(t,n){return function(e){return jr(e,t,n)}}),ls=Yr(function(t,n){return function(e){return jr(t,e,n)}});function ss(t,n,e){var r=$l(n),o=wr(n,r);null!=e||nl(n)&&(o.length||!r.length)||(e=n,n=t,t=this,o=wr(n,$l(n)));var i=!(nl(e)&&"chain"in e&&!e.chain),a=Ja(t);return Cn(o,function(e){var r=n[e];t[e]=r,a&&(t.prototype[e]=function(){var n=this.__chain__;if(i||n){var e=t(this.__wrapped__);return(e.__actions__=jo(this.__actions__)).push({func:r,args:arguments,thisArg:t}),e.__chain__=n,e}return r.apply(t,Nn([this.value()],arguments))})}),t}function us(){}var cs=qo(Mn),fs=qo(En),ds=qo(Pn);function ps(t){return yi(t)?qn(Bi(t)):function(t){return function(n){return xr(n,t)}}(t)}var vs=Ho(),hs=Ho(!0);function gs(){return[]}function bs(){return!1}var ms,ys=Wo(function(t,n){return t+n},0),ws=Go("ceil"),xs=Wo(function(t,n){return t/n},1),_s=Go("floor"),ks=Wo(function(t,n){return t*n},1),Cs=Go("round"),Ss=Wo(function(t,n){return t-n},0);return Be.after=function(t,e){if("function"!=typeof e)throw new jt(n);return t=hl(t),function(){if(--t<1)return e.apply(this,arguments)}},Be.ary=ja,Be.assign=wl,Be.assignIn=xl,Be.assignInWith=_l,Be.assignWith=kl,Be.at=Cl,Be.before=Aa,Be.bind=Ma,Be.bindAll=ts,Be.bindKey=Na,Be.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ua(t)?t:[t]},Be.chain=pa,Be.chunk=function(n,e,r){e=(r?mi(n,e,r):e===t)?1:ge(hl(e),0);var o=null==n?0:n.length;if(!o||e<1)return[];for(var i=0,a=0,l=wt(hn(o/e));i<o;)l[a++]=no(n,i,i+=e);return l},Be.compact=function(t){for(var n=-1,e=null==t?0:t.length,r=0,o=[];++n<e;){var i=t[n];i&&(o[r++]=i)}return o},Be.concat=function(){var t=arguments.length;if(!t)return[];for(var n=wt(t-1),e=arguments[0],r=t;r--;)n[r-1]=arguments[r];return Nn(Ua(e)?jo(e):[e],hr(n,1))},Be.cond=function(t){var e=null==t?0:t.length,r=li();return t=e?Mn(t,function(t){if("function"!=typeof t[1])throw new jt(n);return[r(t[0]),t[1]]}):[],Yr(function(n){for(var r=-1;++r<e;){var o=t[r];if(_n(o[0],this,n))return _n(o[1],this,n)}})},Be.conforms=function(t){return function(t){var n=$l(t);return function(e){return lr(e,t,n)}}(ar(t,1))},Be.constant=ns,Be.countBy=ga,Be.create=function(t,n){var e=Re(t);return null==n?e:er(e,n)},Be.curry=function n(e,r,o){var i=Qo(e,8,t,t,t,t,t,r=o?t:r);return i.placeholder=n.placeholder,i},Be.curryRight=function n(e,r,o){var i=Qo(e,16,t,t,t,t,t,r=o?t:r);return i.placeholder=n.placeholder,i},Be.debounce=$a,Be.defaults=Sl,Be.defaultsDeep=El,Be.defer=Ia,Be.delay=Pa,Be.difference=Wi,Be.differenceBy=qi,Be.differenceWith=Di,Be.drop=function(n,e,r){var o=null==n?0:n.length;return o?no(n,(e=r||e===t?1:hl(e))<0?0:e,o):[]},Be.dropRight=function(n,e,r){var o=null==n?0:n.length;return o?no(n,0,(e=o-(e=r||e===t?1:hl(e)))<0?0:e):[]},Be.dropRightWhile=function(t,n){return t&&t.length?fo(t,li(n,3),!0,!0):[]},Be.dropWhile=function(t,n){return t&&t.length?fo(t,li(n,3),!0):[]},Be.fill=function(n,e,r,o){var i=null==n?0:n.length;return i?(r&&"number"!=typeof r&&mi(n,e,r)&&(r=0,o=i),function(n,e,r,o){var i=n.length;for((r=hl(r))<0&&(r=-r>i?0:i+r),(o=o===t||o>i?i:hl(o))<0&&(o+=i),o=r>o?0:gl(o);r<o;)n[r++]=e;return n}(n,e,r,o)):[]},Be.filter=function(t,n){return(Ua(t)?zn:vr)(t,li(n,3))},Be.flatMap=function(t,n){return hr(Ca(t,n),1)},Be.flatMapDeep=function(t,n){return hr(Ca(t,n),l)},Be.flatMapDepth=function(n,e,r){return r=r===t?1:hl(r),hr(Ca(n,e),r)},Be.flatten=Vi,Be.flattenDeep=function(t){return null!=t&&t.length?hr(t,l):[]},Be.flattenDepth=function(n,e){return null!=n&&n.length?hr(n,e=e===t?1:hl(e)):[]},Be.flip=function(t){return Qo(t,512)},Be.flow=es,Be.flowRight=rs,Be.fromPairs=function(t){for(var n=-1,e=null==t?0:t.length,r={};++n<e;){var o=t[n];r[o[0]]=o[1]}return r},Be.functions=function(t){return null==t?[]:wr(t,$l(t))},Be.functionsIn=function(t){return null==t?[]:wr(t,Il(t))},Be.groupBy=xa,Be.initial=function(t){return null!=t&&t.length?no(t,0,-1):[]},Be.intersection=Yi,Be.intersectionBy=Ki,Be.intersectionWith=Qi,Be.invert=Al,Be.invertBy=Ml,Be.invokeMap=_a,Be.iteratee=is,Be.keyBy=ka,Be.keys=$l,Be.keysIn=Il,Be.map=Ca,Be.mapKeys=function(t,n){var e={};return n=li(n,3),mr(t,function(t,r,o){rr(e,n(t,r,o),t)}),e},Be.mapValues=function(t,n){var e={};return n=li(n,3),mr(t,function(t,r,o){rr(e,r,n(t,r,o))}),e},Be.matches=function(t){return Br(ar(t,1))},Be.matchesProperty=function(t,n){return Rr(t,ar(n,1))},Be.memoize=La,Be.merge=Pl,Be.mergeWith=Ll,Be.method=as,Be.methodOf=ls,Be.mixin=ss,Be.negate=Ta,Be.nthArg=function(t){return t=hl(t),Yr(function(n){return Wr(n,t)})},Be.omit=Tl,Be.omitBy=function(t,n){return Bl(t,Ta(li(n)))},Be.once=function(t){return Aa(2,t)},Be.orderBy=function(n,e,r,o){return null==n?[]:(Ua(e)||(e=null==e?[]:[e]),Ua(r=o?t:r)||(r=null==r?[]:[r]),qr(n,e,r))},Be.over=cs,Be.overArgs=Fa,Be.overEvery=fs,Be.overSome=ds,Be.partial=Ba,Be.partialRight=Ra,Be.partition=Sa,Be.pick=Fl,Be.pickBy=Bl,Be.property=ps,Be.propertyOf=function(n){return function(e){return null==n?t:xr(n,e)}},Be.pull=Ji,Be.pullAll=Zi,Be.pullAllBy=function(t,n,e){return t&&t.length&&n&&n.length?Hr(t,n,li(e,2)):t},Be.pullAllWith=function(n,e,r){return n&&n.length&&e&&e.length?Hr(n,e,t,r):n},Be.pullAt=ta,Be.range=vs,Be.rangeRight=hs,Be.rearg=Oa,Be.reject=function(t,n){return(Ua(t)?zn:vr)(t,Ta(li(n,3)))},Be.remove=function(t,n){var e=[];if(!t||!t.length)return e;var r=-1,o=[],i=t.length;for(n=li(n,3);++r<i;){var a=t[r];n(a,r,t)&&(e.push(a),o.push(r))}return Ur(t,o),e},Be.rest=function(e,r){if("function"!=typeof e)throw new jt(n);return Yr(e,r=r===t?r:hl(r))},Be.reverse=na,Be.sampleSize=function(n,e,r){return e=(r?mi(n,e,r):e===t)?1:hl(e),(Ua(n)?Qe:Qr)(n,e)},Be.set=function(t,n,e){return null==t?t:Xr(t,n,e)},Be.setWith=function(n,e,r,o){return o="function"==typeof o?o:t,null==n?n:Xr(n,e,r,o)},Be.shuffle=function(t){return(Ua(t)?Xe:to)(t)},Be.slice=function(n,e,r){var o=null==n?0:n.length;return o?(r&&"number"!=typeof r&&mi(n,e,r)?(e=0,r=o):(e=null==e?0:hl(e),r=r===t?o:hl(r)),no(n,e,r)):[]},Be.sortBy=Ea,Be.sortedUniq=function(t){return t&&t.length?io(t):[]},Be.sortedUniqBy=function(t,n){return t&&t.length?io(t,li(n,2)):[]},Be.split=function(n,e,r){return r&&"number"!=typeof r&&mi(n,e,r)&&(e=r=t),(r=r===t?c:r>>>0)?(n=yl(n))&&("string"==typeof e||null!=e&&!al(e))&&!(e=lo(e))&&ee(n)?wo(se(n),0,r):n.split(e,r):[]},Be.spread=function(t,e){if("function"!=typeof t)throw new jt(n);return e=null==e?0:ge(hl(e),0),Yr(function(n){var r=n[e],o=wo(n,0,e);return r&&Nn(o,r),_n(t,this,o)})},Be.tail=function(t){var n=null==t?0:t.length;return n?no(t,1,n):[]},Be.take=function(n,e,r){return n&&n.length?no(n,0,(e=r||e===t?1:hl(e))<0?0:e):[]},Be.takeRight=function(n,e,r){var o=null==n?0:n.length;return o?no(n,(e=o-(e=r||e===t?1:hl(e)))<0?0:e,o):[]},Be.takeRightWhile=function(t,n){return t&&t.length?fo(t,li(n,3),!1,!0):[]},Be.takeWhile=function(t,n){return t&&t.length?fo(t,li(n,3)):[]},Be.tap=function(t,n){return n(t),t},Be.throttle=function(t,e,r){var o=!0,i=!0;if("function"!=typeof t)throw new jt(n);return nl(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),$a(t,e,{leading:o,maxWait:e,trailing:i})},Be.thru=va,Be.toArray=pl,Be.toPairs=Rl,Be.toPairsIn=Ol,Be.toPath=function(t){return Ua(t)?Mn(t,Bi):ul(t)?[t]:jo(Fi(yl(t)))},Be.toPlainObject=ml,Be.transform=function(t,n,e){var r=Ua(t),o=r||Ka(t)||cl(t);if(n=li(n,4),null==e){var i=t&&t.constructor;e=o?r?new i:[]:nl(t)&&Ja(i)?Re(Ut(t)):{}}return(o?Cn:mr)(t,function(t,r,o){return n(e,t,r,o)}),e},Be.unary=function(t){return ja(t,1)},Be.union=ea,Be.unionBy=ra,Be.unionWith=oa,Be.uniq=function(t){return t&&t.length?so(t):[]},Be.uniqBy=function(t,n){return t&&t.length?so(t,li(n,2)):[]},Be.uniqWith=function(n,e){return e="function"==typeof e?e:t,n&&n.length?so(n,t,e):[]},Be.unset=function(t,n){return null==t||uo(t,n)},Be.unzip=ia,Be.unzipWith=aa,Be.update=function(t,n,e){return null==t?t:co(t,n,bo(e))},Be.updateWith=function(n,e,r,o){return o="function"==typeof o?o:t,null==n?n:co(n,e,bo(r),o)},Be.values=Wl,Be.valuesIn=function(t){return null==t?[]:Kn(t,Il(t))},Be.without=la,Be.words=Jl,Be.wrap=function(t,n){return Ba(bo(n),t)},Be.xor=sa,Be.xorBy=ua,Be.xorWith=ca,Be.zip=fa,Be.zipObject=function(t,n){return ho(t||[],n||[],Ze)},Be.zipObjectDeep=function(t,n){return ho(t||[],n||[],Xr)},Be.zipWith=da,Be.entries=Rl,Be.entriesIn=Ol,Be.extend=xl,Be.extendWith=_l,ss(Be,Be),Be.add=ys,Be.attempt=Zl,Be.camelCase=ql,Be.capitalize=Dl,Be.ceil=ws,Be.clamp=function(n,e,r){return r===t&&(r=e,e=t),r!==t&&(r=(r=bl(r))==r?r:0),e!==t&&(e=(e=bl(e))==e?e:0),ir(bl(n),e,r)},Be.clone=function(t){return ar(t,4)},Be.cloneDeep=function(t){return ar(t,5)},Be.cloneDeepWith=function(n,e){return ar(n,5,e="function"==typeof e?e:t)},Be.cloneWith=function(n,e){return ar(n,4,e="function"==typeof e?e:t)},Be.conformsTo=function(t,n){return null==n||lr(t,n,$l(n))},Be.deburr=Hl,Be.defaultTo=function(t,n){return null==t||t!=t?n:t},Be.divide=xs,Be.endsWith=function(n,e,r){n=yl(n),e=lo(e);var o=n.length,i=r=r===t?o:ir(hl(r),0,o);return(r-=e.length)>=0&&n.slice(r,i)==e},Be.eq=Wa,Be.escape=function(t){return(t=yl(t))&&U.test(t)?t.replace(D,te):t},Be.escapeRegExp=function(t){return(t=yl(t))&&Z.test(t)?t.replace(J,"\\$&"):t},Be.every=function(n,e,r){var o=Ua(n)?En:dr;return r&&mi(n,e,r)&&(e=t),o(n,li(e,3))},Be.find=ba,Be.findIndex=Hi,Be.findKey=function(t,n){return Tn(t,li(n,3),mr)},Be.findLast=ma,Be.findLastIndex=Ui,Be.findLastKey=function(t,n){return Tn(t,li(n,3),yr)},Be.floor=_s,Be.forEach=ya,Be.forEachRight=wa,Be.forIn=function(t,n){return null==t?t:gr(t,li(n,3),Il)},Be.forInRight=function(t,n){return null==t?t:br(t,li(n,3),Il)},Be.forOwn=function(t,n){return t&&mr(t,li(n,3))},Be.forOwnRight=function(t,n){return t&&yr(t,li(n,3))},Be.get=zl,Be.gt=qa,Be.gte=Da,Be.has=function(t,n){return null!=t&&vi(t,n,Sr)},Be.hasIn=jl,Be.head=Gi,Be.identity=os,Be.includes=function(t,n,e,r){t=Ga(t)?t:Wl(t),e=e&&!r?hl(e):0;var o=t.length;return e<0&&(e=ge(o+e,0)),sl(t)?e<=o&&t.indexOf(n,e)>-1:!!o&&Bn(t,n,e)>-1},Be.indexOf=function(t,n,e){var r=null==t?0:t.length;if(!r)return-1;var o=null==e?0:hl(e);return o<0&&(o=ge(r+o,0)),Bn(t,n,o)},Be.inRange=function(n,e,r){return e=vl(e),r===t?(r=e,e=0):r=vl(r),function(t,n,e){return t>=be(n,e)&&t<ge(n,e)}(n=bl(n),e,r)},Be.invoke=Nl,Be.isArguments=Ha,Be.isArray=Ua,Be.isArrayBuffer=Va,Be.isArrayLike=Ga,Be.isArrayLikeObject=Ya,Be.isBoolean=function(t){return!0===t||!1===t||el(t)&&kr(t)==v},Be.isBuffer=Ka,Be.isDate=Qa,Be.isElement=function(t){return el(t)&&1===t.nodeType&&!il(t)},Be.isEmpty=function(t){if(null==t)return!0;if(Ga(t)&&(Ua(t)||"string"==typeof t||"function"==typeof t.splice||Ka(t)||cl(t)||Ha(t)))return!t.length;var n=pi(t);if(n==y||n==C)return!t.size;if(_i(t))return!Pr(t).length;for(var e in t)if(Pt.call(t,e))return!1;return!0},Be.isEqual=function(t,n){return Mr(t,n)},Be.isEqualWith=function(n,e,r){var o=(r="function"==typeof r?r:t)?r(n,e):t;return o===t?Mr(n,e,t,r):!!o},Be.isError=Xa,Be.isFinite=function(t){return"number"==typeof t&&pe(t)},Be.isFunction=Ja,Be.isInteger=Za,Be.isLength=tl,Be.isMap=rl,Be.isMatch=function(t,n){return t===n||Nr(t,n,ui(n))},Be.isMatchWith=function(n,e,r){return r="function"==typeof r?r:t,Nr(n,e,ui(e),r)},Be.isNaN=function(t){return ol(t)&&t!=+t},Be.isNative=function(t){if(xi(t))throw new _t("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return $r(t)},Be.isNil=function(t){return null==t},Be.isNull=function(t){return null===t},Be.isNumber=ol,Be.isObject=nl,Be.isObjectLike=el,Be.isPlainObject=il,Be.isRegExp=al,Be.isSafeInteger=function(t){return Za(t)&&t>=-9007199254740991&&t<=s},Be.isSet=ll,Be.isString=sl,Be.isSymbol=ul,Be.isTypedArray=cl,Be.isUndefined=function(n){return n===t},Be.isWeakMap=function(t){return el(t)&&pi(t)==z},Be.isWeakSet=function(t){return el(t)&&"[object WeakSet]"==kr(t)},Be.join=function(t,n){return null==t?"":ve.call(t,n)},Be.kebabCase=Ul,Be.last=Xi,Be.lastIndexOf=function(n,e,r){var o=null==n?0:n.length;if(!o)return-1;var i=o;return r!==t&&(i=(i=hl(r))<0?ge(o+i,0):be(i,o-1)),e==e?function(t,n,e){for(var r=e+1;r--;)if(t[r]===n)return r;return r}(n,e,i):Fn(n,On,i,!0)},Be.lowerCase=Vl,Be.lowerFirst=Gl,Be.lt=fl,Be.lte=dl,Be.max=function(n){return n&&n.length?pr(n,os,Cr):t},Be.maxBy=function(n,e){return n&&n.length?pr(n,li(e,2),Cr):t},Be.mean=function(t){return Wn(t,os)},Be.meanBy=function(t,n){return Wn(t,li(n,2))},Be.min=function(n){return n&&n.length?pr(n,os,Tr):t},Be.minBy=function(n,e){return n&&n.length?pr(n,li(e,2),Tr):t},Be.stubArray=gs,Be.stubFalse=bs,Be.stubObject=function(){return{}},Be.stubString=function(){return""},Be.stubTrue=function(){return!0},Be.multiply=ks,Be.nth=function(n,e){return n&&n.length?Wr(n,hl(e)):t},Be.noConflict=function(){return cn._===this&&(cn._=Rt),this},Be.noop=us,Be.now=za,Be.pad=function(t,n,e){t=yl(t);var r=(n=hl(n))?le(t):0;if(!n||r>=n)return t;var o=(n-r)/2;return Do(Ln(o),e)+t+Do(hn(o),e)},Be.padEnd=function(t,n,e){t=yl(t);var r=(n=hl(n))?le(t):0;return n&&r<n?t+Do(n-r,e):t},Be.padStart=function(t,n,e){t=yl(t);var r=(n=hl(n))?le(t):0;return n&&r<n?Do(n-r,e)+t:t},Be.parseInt=function(t,n,e){return e||null==n?n=0:n&&(n=+n),ye(yl(t).replace(tt,""),n||0)},Be.random=function(n,e,r){if(r&&"boolean"!=typeof r&&mi(n,e,r)&&(e=r=t),r===t&&("boolean"==typeof e?(r=e,e=t):"boolean"==typeof n&&(r=n,n=t)),n===t&&e===t?(n=0,e=1):(n=vl(n),e===t?(e=n,n=0):e=vl(e)),n>e){var o=n;n=e,e=o}if(r||n%1||e%1){var i=we();return be(n+i*(e-n+an("1e-"+((i+"").length-1))),e)}return Vr(n,e)},Be.reduce=function(t,n,e){var r=Ua(t)?$n:Hn,o=arguments.length<3;return r(t,li(n,4),e,o,cr)},Be.reduceRight=function(t,n,e){var r=Ua(t)?In:Hn,o=arguments.length<3;return r(t,li(n,4),e,o,fr)},Be.repeat=function(n,e,r){return e=(r?mi(n,e,r):e===t)?1:hl(e),Gr(yl(n),e)},Be.replace=function(){var t=arguments,n=yl(t[0]);return t.length<3?n:n.replace(t[1],t[2])},Be.result=function(n,e,r){var o=-1,i=(e=mo(e,n)).length;for(i||(i=1,n=t);++o<i;){var a=null==n?t:n[Bi(e[o])];a===t&&(o=i,a=r),n=Ja(a)?a.call(n):a}return n},Be.round=Cs,Be.runInContext=nt,Be.sample=function(t){return(Ua(t)?Ke:Kr)(t)},Be.size=function(t){if(null==t)return 0;if(Ga(t))return sl(t)?le(t):t.length;var n=pi(t);return n==y||n==C?t.size:Pr(t).length},Be.snakeCase=Yl,Be.some=function(n,e,r){var o=Ua(n)?Pn:eo;return r&&mi(n,e,r)&&(e=t),o(n,li(e,3))},Be.sortedIndex=function(t,n){return ro(t,n)},Be.sortedIndexBy=function(t,n,e){return oo(t,n,li(e,2))},Be.sortedIndexOf=function(t,n){var e=null==t?0:t.length;if(e){var r=ro(t,n);if(r<e&&Wa(t[r],n))return r}return-1},Be.sortedLastIndex=function(t,n){return ro(t,n,!0)},Be.sortedLastIndexBy=function(t,n,e){return oo(t,n,li(e,2),!0)},Be.sortedLastIndexOf=function(t,n){if(null!=t&&t.length){var e=ro(t,n,!0)-1;if(Wa(t[e],n))return e}return-1},Be.startCase=Kl,Be.startsWith=function(t,n,e){return t=yl(t),e=null==e?0:ir(hl(e),0,t.length),n=lo(n),t.slice(e,e+n.length)==n},Be.subtract=Ss,Be.sum=function(t){return t&&t.length?Un(t,os):0},Be.sumBy=function(t,n){return t&&t.length?Un(t,li(n,2)):0},Be.template=function(n,e,r){var o=Be.templateSettings;r&&mi(n,e,r)&&(e=t),n=yl(n),e=_l({},e,o,Xo);var i,a,l=_l({},e.imports,o.imports,Xo),s=$l(l),u=Kn(l,s),c=0,f=e.interpolate||gt,d="__p += '",p=Et((e.escape||gt).source+"|"+f.source+"|"+(f===Y?st:gt).source+"|"+(e.evaluate||gt).source+"|$","g"),v="//# sourceURL="+(Pt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++nn+"]")+"\n";n.replace(p,function(t,e,r,o,l,s){return r||(r=o),d+=n.slice(c,s).replace(bt,ne),e&&(i=!0,d+="' +\n__e("+e+") +\n'"),l&&(a=!0,d+="';\n"+l+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=s+t.length,t}),d+="';\n";var h=Pt.call(e,"variable")&&e.variable;if(h){if(at.test(h))throw new _t("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(R,""):d).replace(O,"$1").replace(W,"$1;"),d="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=Zl(function(){return kt(s,v+"return "+d).apply(t,u)});if(g.source=d,Xa(g))throw g;return g},Be.times=function(t,n){if((t=hl(t))<1||t>s)return[];var e=c,r=be(t,c);n=li(n),t-=c;for(var o=Vn(r,n);++e<t;)n(e);return o},Be.toFinite=vl,Be.toInteger=hl,Be.toLength=gl,Be.toLower=function(t){return yl(t).toLowerCase()},Be.toNumber=bl,Be.toSafeInteger=function(t){return t?ir(hl(t),-9007199254740991,s):0===t?t:0},Be.toString=yl,Be.toUpper=function(t){return yl(t).toUpperCase()},Be.trim=function(n,e,r){if((n=yl(n))&&(r||e===t))return Gn(n);if(!n||!(e=lo(e)))return n;var o=se(n),i=se(e);return wo(o,Xn(o,i),Jn(o,i)+1).join("")},Be.trimEnd=function(n,e,r){if((n=yl(n))&&(r||e===t))return n.slice(0,ue(n)+1);if(!n||!(e=lo(e)))return n;var o=se(n);return wo(o,0,Jn(o,se(e))+1).join("")},Be.trimStart=function(n,e,r){if((n=yl(n))&&(r||e===t))return n.replace(tt,"");if(!n||!(e=lo(e)))return n;var o=se(n);return wo(o,Xn(o,se(e))).join("")},Be.truncate=function(n,e){var r=30,o="...";if(nl(e)){var i="separator"in e?e.separator:i;r="length"in e?hl(e.length):r,o="omission"in e?lo(e.omission):o}var a=(n=yl(n)).length;if(ee(n)){var l=se(n);a=l.length}if(r>=a)return n;var s=r-le(o);if(s<1)return o;var u=l?wo(l,0,s).join(""):n.slice(0,s);if(i===t)return u+o;if(l&&(s+=u.length-s),al(i)){if(n.slice(s).search(i)){var c,f=u;for(i.global||(i=Et(i.source,yl(ut.exec(i))+"g")),i.lastIndex=0;c=i.exec(f);)var d=c.index;u=u.slice(0,d===t?s:d)}}else if(n.indexOf(lo(i),s)!=s){var p=u.lastIndexOf(i);p>-1&&(u=u.slice(0,p))}return u+o},Be.unescape=function(t){return(t=yl(t))&&H.test(t)?t.replace(q,ce):t},Be.uniqueId=function(t){var n=++Lt;return yl(t)+n},Be.upperCase=Ql,Be.upperFirst=Xl,Be.each=ya,Be.eachRight=wa,Be.first=Gi,ss(Be,(ms={},mr(Be,function(t,n){Pt.call(Be.prototype,n)||(ms[n]=t)}),ms),{chain:!1}),Be.VERSION="4.17.21",Cn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Be[t].placeholder=Be}),Cn(["drop","take"],function(n,e){qe.prototype[n]=function(r){r=r===t?1:ge(hl(r),0);var o=this.__filtered__&&!e?new qe(this):this.clone();return o.__filtered__?o.__takeCount__=be(r,o.__takeCount__):o.__views__.push({size:be(r,c),type:n+(o.__dir__<0?"Right":"")}),o},qe.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),Cn(["filter","map","takeWhile"],function(t,n){var e=n+1,r=1==e||3==e;qe.prototype[t]=function(t){var n=this.clone();return n.__iteratees__.push({iteratee:li(t,3),type:e}),n.__filtered__=n.__filtered__||r,n}}),Cn(["head","last"],function(t,n){var e="take"+(n?"Right":"");qe.prototype[t]=function(){return this[e](1).value()[0]}}),Cn(["initial","tail"],function(t,n){var e="drop"+(n?"":"Right");qe.prototype[t]=function(){return this.__filtered__?new qe(this):this[e](1)}}),qe.prototype.compact=function(){return this.filter(os)},qe.prototype.find=function(t){return this.filter(t).head()},qe.prototype.findLast=function(t){return this.reverse().find(t)},qe.prototype.invokeMap=Yr(function(t,n){return"function"==typeof t?new qe(this):this.map(function(e){return jr(e,t,n)})}),qe.prototype.reject=function(t){return this.filter(Ta(li(t)))},qe.prototype.slice=function(n,e){n=hl(n);var r=this;return r.__filtered__&&(n>0||e<0)?new qe(r):(n<0?r=r.takeRight(-n):n&&(r=r.drop(n)),e!==t&&(r=(e=hl(e))<0?r.dropRight(-e):r.take(e-n)),r)},qe.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},qe.prototype.toArray=function(){return this.take(c)},mr(qe.prototype,function(n,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),i=Be[o?"take"+("last"==e?"Right":""):e],a=o||/^find/.test(e);i&&(Be.prototype[e]=function(){var e=this.__wrapped__,l=o?[1]:arguments,s=e instanceof qe,u=l[0],c=s||Ua(e),f=function(t){var n=i.apply(Be,Nn([t],l));return o&&d?n[0]:n};c&&r&&"function"==typeof u&&1!=u.length&&(s=c=!1);var d=this.__chain__,p=!!this.__actions__.length,v=a&&!d,h=s&&!p;if(!a&&c){e=h?e:new qe(this);var g=n.apply(e,l);return g.__actions__.push({func:va,args:[f],thisArg:t}),new We(g,d)}return v&&h?n.apply(this,l):(g=this.thru(f),v?o?g.value()[0]:g.value():g)})}),Cn(["pop","push","shift","sort","splice","unshift"],function(t){var n=At[t],e=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Be.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var o=this.value();return n.apply(Ua(o)?o:[],t)}return this[e](function(e){return n.apply(Ua(e)?e:[],t)})}}),mr(qe.prototype,function(t,n){var e=Be[n];if(e){var r=e.name+"";Pt.call(Ae,r)||(Ae[r]=[]),Ae[r].push({name:n,func:e})}}),Ae[Ro(t,2).name]=[{name:"wrapper",func:t}],qe.prototype.clone=function(){var t=new qe(this.__wrapped__);return t.__actions__=jo(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=jo(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=jo(this.__views__),t},qe.prototype.reverse=function(){if(this.__filtered__){var t=new qe(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},qe.prototype.value=function(){var t=this.__wrapped__.value(),n=this.__dir__,e=Ua(t),r=n<0,o=e?t.length:0,i=function(t,n,e){for(var r=-1,o=e.length;++r<o;){var i=e[r],a=i.size;switch(i.type){case"drop":t+=a;break;case"dropRight":n-=a;break;case"take":n=be(n,t+a);break;case"takeRight":t=ge(t,n-a)}}return{start:t,end:n}}(0,o,this.__views__),a=i.start,l=i.end,s=l-a,u=r?l:a-1,c=this.__iteratees__,f=c.length,d=0,p=be(s,this.__takeCount__);if(!e||!r&&o==s&&p==s)return po(t,this.__actions__);var v=[];t:for(;s--&&d<p;){for(var h=-1,g=t[u+=n];++h<f;){var b=c[h],m=b.iteratee,y=b.type,w=m(g);if(2==y)g=w;else if(!w){if(1==y)continue t;break t}}v[d++]=g}return v},Be.prototype.at=ha,Be.prototype.chain=function(){return pa(this)},Be.prototype.commit=function(){return new We(this.value(),this.__chain__)},Be.prototype.next=function(){this.__values__===t&&(this.__values__=pl(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?t:this.__values__[this.__index__++]}},Be.prototype.plant=function(n){for(var e,r=this;r instanceof Oe;){var o=Oi(r);o.__index__=0,o.__values__=t,e?i.__wrapped__=o:e=o;var i=o;r=r.__wrapped__}return i.__wrapped__=n,e},Be.prototype.reverse=function(){var n=this.__wrapped__;if(n instanceof qe){var e=n;return this.__actions__.length&&(e=new qe(this)),(e=e.reverse()).__actions__.push({func:va,args:[na],thisArg:t}),new We(e,this.__chain__)}return this.thru(na)},Be.prototype.toJSON=Be.prototype.valueOf=Be.prototype.value=function(){return po(this.__wrapped__,this.__actions__)},Be.prototype.first=Be.prototype.head,on&&(Be.prototype[on]=function(){return this}),Be}();dn?((dn.exports=fe)._=fe,fn._=fe):cn._=fe}.call(ui.exports)),ui.exports);const pi={chatScreen:{root:{cssClass:["div.default-chat-screen"],className:"default-chat-screen"},displayContainer:{cssClass:["div.default-chat-screen > div.flex.flex-col-reverse"],className:`${Lo}-display-container`},inputContainer:{cssClass:["div.default-chat-screen > div.mt-2.mb-2.flex.items-stretch.w-full","div.default-chat-screen > div.sticky.pt-2.pb-2.right-0.bottom-0.bg-bgcolor.flex.items-stretch.w-full"],className:`${Lo}-input-container`},textarea:{cssClass:["div.default-chat-screen > div.mt-2.mb-2.flex.items-stretch.w-full > textarea"],className:`${Lo}-input-textarea`},sendButton:{cssClass:["div.default-chat-screen > button.button-icon-send",".button-icon-send"],className:`${Lo}-send-button`},burgerButton:{cssClass:["div.default-chat-screen > button.peer-focus:border-textcolor.mr-2.flex.border-y.border-r.border-darkborderc.justify-center.items-center.text-gray-100.p-3.rounded-r-md.hover:bg-blue-500.transition-colors",`${Lo}-burger-button`]},burgerMenu:{cssClass:["div.default-chat-screen > div.right-2.bottom-16.p-5.bg-darkbg.flex.flex-col.gap-3.text-textcolor.rounded-md"],className:"burger-menu"}},chatMessage:{root:{cssClass:["div.risu-chat"],className:`${Lo}-chat-message-root`},thumbnail:{cssClass:["div.shadow-lg.bg-textcolor2.rounded-md"],className:`${Lo}-chat-message-thumbnail`},botName:{cssClass:["span.chat-width.text-xl.unmargin.text-textcolor"],className:`${Lo}-chat-message-bot-name`},botButtonDiv:{cssClass:["div.flex-grow.flex.items-center.justify-end.text-textcolor2"],className:`${Lo}-chat-message-bot-buttons`},copyButton:{cssClass:["button-icon-copy"],className:"button-icon-copy"},ttsButton:{cssClass:["button-icon-tts"],className:"button-icon-tts"},removeButton:{cssClass:["button-icon-remove"],className:"button-icon-remove"},translateButton:{cssClass:["button-icon-translate"],className:"button-icon-translate"},unrerollButton:{cssClass:["button-icon-unreroll"],className:"button-icon-unreroll"},rerollButton:{cssClass:["button-icon-reroll"],className:"button-icon-reroll"},lightboardButtons:{cssClass:["x-risu-lb-module-root","x-risu-lb-nai-btn"],className:"x-risu-lb-module-root"},lightboardNewsButton:{dataId:"lightboard-news",cssClass:["div.x-risu-lb-module-root"],className:`${Lo}-lightboard-news`},lightboardCommentButton:{dataId:"lightboard-comment",cssClass:["div.x-risu-lb-module-root"],className:`${Lo}-lightboard-comment`},lightboardMiniboardButton:{dataId:"lightboard-miniboard",cssClass:["div.x-risu-lb-module-root"],className:`${Lo}-lightboard-miniboard`},lightboardSNSButton:{dataId:"SNS-Forme",cssClass:["div.x-risu-lb-module-root"],className:`${Lo}-lightboard-sns`},lightboardNAIButton:{cssClass:["x-risu-lb-nai-btn"],className:"x-risu-lb-nai-btn"}}};function vi(t,n){const e=n??document;if(!t)return null;if(t.dataId){const n=e.querySelector(`[data-id="${t.dataId}"]`);if(n)return n.classList.contains(t.className)||(n.className=`${t.className} ${n.className}`.trim()),n}for(const r of[null==t?void 0:t.className,...(null==t?void 0:t.cssClass)??[]])if(r)try{const n=e.querySelector(r.startsWith(".")?r:`.${r}`);if(n)return n.classList.contains(t.className)||(n.className=`${t.className} ${n.className}`.trim()),n}catch{}for(const r of(null==t?void 0:t.cssClass)??[])try{const n=e.querySelector(r);if(n)return n.classList.contains(t.className)||(n.className=`${t.className} ${n.className}`.trim()),n}catch{}return null}function hi(t,n){const e=document;if(!t)return[];const r=new Set;if(t.dataId)try{e.querySelectorAll(`[data-id="${t.dataId}"]`).forEach(t=>r.add(t))}catch{}for(const i of(null==t?void 0:t.cssClass)??[])try{e.querySelectorAll(i).forEach(t=>r.add(t))}catch{}if(null==t?void 0:t.className)try{e.querySelectorAll(`.${t.className}`).forEach(t=>r.add(t))}catch{}const o=[...r];return o.forEach(n=>{t.className&&!n.classList.contains(t.className)&&(n.className=`${t.className} ${n.className}`.trim())}),o}function gi(t){if(null==t)return null;const n=hi(pi.chatMessage.root);if(!n.length)return null;const e="string"==typeof t?parseInt(t,10):t;if(!Number.isFinite(e))return null;const r=String(e);return n.find(t=>{var n;return(null==(n=t.dataset)?void 0:n.chatIndex)===r})??null}function bi(){const t=hi(pi.chatMessage.root);if(!t.length)return[];const n=t.filter(t=>!t.classList.contains("book-viewer-root")).map(t=>{var n;const e=null==(n=t.dataset)?void 0:n.chatIndex;if(null==e)return null;const r=parseInt(e,10);return Number.isFinite(r)?r:null}).filter(t=>null!==t);return[...new Set(n)].sort((t,n)=>t-n)}function mi(t,n){const e=bi();if(0===e.length)return{index:null,isFirst:!0,isLast:!0};let r=e.indexOf(t);if(-1===r){if(r=e.findIndex(n=>n>t),-1===r&&(r=e.length),"prev"===n){const t=r>0?e[r-1]:null;return{index:t,isFirst:null===t,isLast:r>=e.length}}{const t=r<e.length?e[r]:null;return{index:t,isFirst:r<=0,isLast:null===t}}}const o=0===r,i=r===e.length-1;return"prev"===n?{index:o?null:e[r-1],isFirst:o,isLast:i}:{index:i?null:e[r+1],isFirst:o,isLast:i}}function yi(t){const n=bi();if(0===n.length)return{position:0,total:0,isFirst:!0,isLast:!0};const e=n.indexOf(t);if(-1===e){const e=n.findIndex(n=>n>t),r=-1===e?n.length:e;return{position:0,total:n.length,isFirst:0===r,isLast:r>=n.length}}return{position:e+1,total:n.length,isFirst:0===e,isLast:e===n.length-1}}Wt=!0;const wi={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var xi=xr("<svg><!><!></svg>");function _i(t,n){const e=Ao(n,["children","$$slots","$$events","$$legacy"]),r=Ao(e,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);Ht(n,!1);let o=$o(n,"name",8,void 0),i=$o(n,"color",8,"currentColor"),a=$o(n,"size",8,24),l=$o(n,"strokeWidth",8,2),s=$o(n,"absoluteStrokeWidth",8,!1),u=$o(n,"iconNode",24,()=>[]);So();var c=xi();go(c,(t,n)=>({...wi,...r,width:a(),height:a(),stroke:i(),"stroke-width":t,class:n}),[()=>(nr(s()),nr(l()),nr(a()),Je(()=>s()?24*Number(l())/Number(a()):l())),()=>(nr(o()),nr(e),Je(()=>((...t)=>t.filter((t,n,e)=>Boolean(t)&&e.indexOf(t)===n).join(" "))("lucide-icon","lucide",o()?`lucide-${o()}`:"",e.class)))]);var f=Yn(c);Tr(f,1,u,Ir,(t,n)=>{var e=xn(()=>function(t,n){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const e=[];for(const r of t)if(e.push(r),e.length===n)break;return e}(Ke(n),2));var r=_r();!function(t,n,e,r){var o=null,i=new Nr(t,!1);ce(()=>{const t=n()||null;return null===t?(i.ensure(null,null),void Sr(!0)):(i.ensure(t,n=>{if(t){if(mr(o=document.createElementNS("http://www.w3.org/2000/svg",t),o),r){var e=o.appendChild(Un());r(o,e)}Me.nodes.end=o,n.before(o)}}),Sr(!0),()=>{t&&Sr(!1)})},St),oe(()=>{Sr(!0)})}(Kn(r),()=>Ke(e)[0],0,(t,n)=>{go(t,()=>({...Ke(e)[1]}))}),kr(t,r)}),Or(Qn(f),n,"default",{}),kr(t,c),Ut()}function ki(t,n){const e=Ao(n,["children","$$slots","$$events","$$legacy"]),r=[["path",{d:"m15 18-6-6 6-6"}]];_i(t,No({name:"chevron-left"},()=>e,{get iconNode(){return r},children:(t,e)=>{var r=_r();Or(Kn(r),n,"default",{}),kr(t,r)},$$slots:{default:!0}}))}function Ci(t,n){const e=Ao(n,["children","$$slots","$$events","$$legacy"]),r=[["path",{d:"m9 18 6-6-6-6"}]];_i(t,No({name:"chevron-right"},()=>e,{get iconNode(){return r},children:(t,e)=>{var r=_r();Or(Kn(r),n,"default",{}),kr(t,r)},$$slots:{default:!0}}))}function Si(t,n,e={}){const{clearContainer:r=!0,additionalClasses:o=[]}=e;if(!n||!(null==t?void 0:t.length))return[];r&&(n.innerHTML="");const i=[];return t.forEach(t=>{const e=t.cloneNode(!0);o.forEach(t=>e.classList.add(t)),e.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();const e=new MouseEvent("click",{bubbles:!0,cancelable:!0});t.dispatchEvent(e)}),n.appendChild(e),i.push(e)}),i}function Ei(t,n,e={}){const{buttonSelector:r='button, [role="button"], .risu-btn, [risu-btn]',matcher:o}=e;if(!t||!(null==n?void 0:n.length))return;t.querySelectorAll(r).forEach(t=>{const e=n.find(n=>{var e,r;if(o)return o(n,t);const i=(null==(e=n.dataset)?void 0:e.id)||n.getAttribute("risu-btn"),a=(null==(r=t.dataset)?void 0:r.id)||t.getAttribute("risu-btn");return!(!i||!a||i!==a)||!(!n.className||!t.className||n.className!==t.className)});e&&t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const n=new MouseEvent("click",{bubbles:!0,cancelable:!0});e.dispatchEvent(n)})})}var zi=yr('<span class="chat-index-total"> </span>'),ji=yr('<header class="book-header"><div class="header-left"><div class="header-thumbnail"></div> <div class="header-info"><span class="header-name"> </span> <div class="header-buttons"></div></div></div> <div class="header-right"><div class="chat-index-nav"><button class="chat-nav-btn" title="ì´ì „ ì±„íŒ…"><!></button> <span class="header-chat-index"> <!></span> <button class="chat-nav-btn" title="ë‹¤ìŒ ì±„íŒ…"><!></button></div> <button class="close-btn" title="ë‹«ê¸°"><!></button></div></header>');function Ai(t,n){Ht(n,!0);const e=Bo.getInstance();let r=$o(n,"thumbnailUrl",3,""),o=$o(n,"name",3,""),i=$o(n,"chatIndex",3,0),a=$o(n,"buttons",19,()=>[]),l=$o(n,"chatIndexPosition",19,()=>({position:0,total:0,isFirst:!0,isLast:!0})),s=Mn(null);ie(()=>{Ke(s)&&a().length>0&&Si(a(),Ke(s))});let u=xn(()=>i()+1);var c=ji(),f=Yn(c),d=Yn(f);let p;var v=Yn(Qn(d,2)),h=Yn(v);Co(Qn(v,2),t=>$n(s,t),()=>Ke(s));var g=Yn(Qn(f,2)),b=Yn(g);b.__click=function(...t){var e;null==(e=n.onPrevChat)||e.apply(this,t)},ki(Yn(b),{size:16});var m=Qn(b,2),y=Yn(m),w=Qn(y),x=t=>{var n=zi(),e=Yn(n);ue(()=>Er(e,`(${l().position??""}/${l().total??""})`)),kr(t,n)};$r(w,t=>{l().total>0&&t(x)});var _=Qn(m,2);_.__click=function(...t){var e;null==(e=n.onNextChat)||e.apply(this,t)},Ci(Yn(_),{size:16});var k=Qn(g,2);k.__click=function(...t){var e;null==(e=n.onClose)||e.apply(this,t)},function(t,n){const e=Ao(n,["children","$$slots","$$events","$$legacy"]),r=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];_i(t,No({name:"x"},()=>e,{get iconNode(){return r},children:(t,e)=>{var r=_r();Or(Kn(r),n,"default",{}),kr(t,r)},$$slots:{default:!0}}))}(Yn(k),{size:20}),ue(t=>{p=oo(d,"",p,{"background-image":r()?`url('${r()}')`:"none"}),Er(h,t),b.disabled=l().isFirst,Er(y,`#${Ke(u)??""} `),_.disabled=l().isLast},[()=>{var t;return o()||(null==(t=e.getChar())?void 0:t.name)||"Unknown"}]),kr(t,c),Ut()}vr(["click"]);const Mi=t=>t;function Ni(t,{delay:n=0,duration:e=400,easing:r=Mi}={}){const o=+getComputedStyle(t).opacity;return{delay:n,duration:e,easing:r,css:t=>"opacity: "+t*o}}function $i(t){const n=t-1;return n*n*n+1}var Ii=yr('<span class="loading-message svelte-1lzy2gy"> </span>'),Pi=yr('<div class="loading-overlay svelte-1lzy2gy"><div class="loading-content svelte-1lzy2gy"><div class="loading-spinner svelte-1lzy2gy"><div class="spinner-ring svelte-1lzy2gy"></div> <div class="spinner-ring svelte-1lzy2gy"></div> <div class="spinner-ring svelte-1lzy2gy"></div></div> <!></div></div>');const Li={hash:"svelte-1lzy2gy",code:".loading-overlay.svelte-1lzy2gy {position:absolute;top:0;left:0;right:0;bottom:0;z-index:50;display:flex;align-items:center;justify-content:center;background:color-mix(in srgb, var(--bv-page-color) 85%, transparent);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);pointer-events:all;border-radius:inherit;}.loading-content.svelte-1lzy2gy {display:flex;flex-direction:column;align-items:center;gap:16px;\n    animation: svelte-1lzy2gy-contentFadeIn 0.3s ease-out;}\n\n  @keyframes svelte-1lzy2gy-contentFadeIn {\n    from {\n      opacity: 0;\n      transform: scale(0.95);\n    }\n    to {\n      opacity: 1;\n      transform: scale(1);\n    }\n  }.loading-spinner.svelte-1lzy2gy {position:relative;width:44px;height:44px;}.spinner-ring.svelte-1lzy2gy {position:absolute;width:100%;height:100%;border:2.5px solid transparent;border-top-color:var(--bv-accent-color, #6366f1);border-radius:50%;\n    animation: svelte-1lzy2gy-spin 1s cubic-bezier(0.5, 0, 0.5, 1) infinite;}.spinner-ring.svelte-1lzy2gy:nth-child(1) {animation-delay:-0.4s;}.spinner-ring.svelte-1lzy2gy:nth-child(2) {animation-delay:-0.25s;width:75%;height:75%;top:12.5%;left:12.5%;}.spinner-ring.svelte-1lzy2gy:nth-child(3) {animation-delay:-0.1s;width:50%;height:50%;top:25%;left:25%;}\n\n  @keyframes svelte-1lzy2gy-spin {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }.loading-message.svelte-1lzy2gy {font-size:13px;font-weight:500;color:var(--bv-text-secondary, #666);}.book-viewer-root[data-theme='dark'] .loading-message.svelte-1lzy2gy {color:var(--bv-text-secondary, #aaa);}"};function Ti(t,n){Kr(t,Li);let e=$o(n,"visible",3,!1),r=$o(n,"message",3,"ë¡œë”© ì¤‘...");var o=_r(),i=Kn(o),a=t=>{var n=Pi(),e=Yn(n),o=Qn(Yn(e),2),i=t=>{var n=Ii(),e=Yn(n);ue(()=>Er(e,r())),kr(t,n)};$r(o,t=>{r()&&t(i)}),Gr(1,n,()=>Ni,()=>({duration:200,easing:$i})),Gr(2,n,()=>Ni,()=>({duration:300,easing:$i})),kr(t,n)};$r(i,t=>{e()&&t(a)}),kr(t,o)}var Fi=yr('<div class="page-number left-page-num"> </div>'),Bi=yr('<div class="page-number right-page-num"> </div>'),Ri=yr('<div class="book-pages"><div class="click-area click-left"></div>  <div class="click-area click-right"></div> <div class="page page-left"><div class="page-content"><div class="text-content chattext"></div> <!></div></div> <div class="book-spine"></div> <div class="page page-right"><div class="page-content"><div class="text-content chattext"></div> <!></div></div> <!></div>');vr(["click"]);var Oi=yr("<option> </option>"),Wi=yr('<div class="dropdown-container"><div><div class="dropdown-header">ì„¤ì •</div> <div class="setting-item"><label for="fontFamily">í°íŠ¸</label> <select id="fontFamily"></select></div> <div class="setting-item"><label for="fontSize">í°íŠ¸ í¬ê¸°</label> <input type="range" id="fontSize" min="12" max="24" step="1"/> <span> </span></div> <div class="setting-item"><label for="lineHeight">ì¤„ ê°„ê²©</label> <input type="range" id="lineHeight" min="1.5" max="2.2" step="0.1"/> <span> </span></div> <div class="setting-item"><label for="theme">í…Œë§ˆ</label> <select id="theme"><option>ë¼ì´íŠ¸ í…Œë§ˆ</option><option>ì„¸í”¼ì•„</option><option>ë‹¤í¬ í…Œë§ˆ</option></select></div> <div class="setting-item"><button class="custom-css-btn">ì‚¬ìš©ìž CSS íŽ¸ì§‘</button></div></div></div>');vr(["change","input","click"]);var qi=yr('<div class="lb-module-item" style="cursor: default; opacity: 0.6;">ëª¨ë“ˆì´ ì—†ìŠµë‹ˆë‹¤</div>'),Di=yr('<div class="lb-module-item" role="button" tabindex="0"><span class="lb-module-label"> </span></div>'),Hi=yr('<div class="dropdown-container"><div><div class="dropdown-header">LB ëª¨ë“ˆ</div> <div class="lb-modules-list"><!></div></div></div>');vr(["click","keydown"]);var Ui=yr('<div class="lb-menu-container"><button class="nav-icon-btn lb-btn" title="LB ëª¨ë“ˆ"><!> <span>LB</span></button> <!></div>'),Vi=yr('<nav class="nav-controls"><button class="nav-btn prev-btn" title="ì´ì „ íŽ˜ì´ì§€"><!></button> <span class="page-indicator"> </span> <button class="nav-btn next-btn" title="ë‹¤ìŒ íŽ˜ì´ì§€"><!></button> <div class="nav-right-buttons"><!> <div class="settings-menu-container"><button class="nav-icon-btn settings-btn" title="ì„¤ì •"><!></button> <!></div></div></nav>');function Gi(t,n){Ht(n,!0);let e=$o(n,"currentSpread",3,0),r=$o(n,"totalSpreads",3,1),o=$o(n,"prevDisabled",3,!1),i=$o(n,"nextDisabled",3,!1),a=$o(n,"settings",19,()=>({fontSize:17,lineHeight:1.9,theme:"light"})),l=$o(n,"lbModules",19,()=>[]),s=Mn(!1),u=Mn(!1);function c(){$n(s,!1),$n(u,!1)}function f(t){var e;c(),null==(e=n.onLBModuleClick)||e.call(n,t)}var d=Vi();pr("click",On,function(t){const n=t.target.closest(".settings-menu-container"),e=t.target.closest(".lb-menu-container");!n&&Ke(s)&&$n(s,!1),!e&&Ke(u)&&$n(u,!1)});var p=Yn(d);p.__click=function(...t){var e;null==(e=n.onPrev)||e.apply(this,t)},ki(Yn(p),{size:28});var v=Qn(p,2),h=Yn(v),g=Qn(v,2);g.__click=function(...t){var e;null==(e=n.onNext)||e.apply(this,t)},Ci(Yn(g),{size:28});var b=Yn(Qn(g,2)),m=t=>{var n=Ui(),e=Yn(n);e.__click=t=>{t.stopPropagation(),$n(u,!Ke(u)),Ke(u)&&$n(s,!1)},function(t,n){const e=Ao(n,["children","$$slots","$$events","$$legacy"]),r=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"}]];_i(t,No({name:"layers"},()=>e,{get iconNode(){return r},children:(t,e)=>{var r=_r();Or(Kn(r),n,"default",{}),kr(t,r)},$$slots:{default:!0}}))}(Yn(e),{size:18}),function(t,n){Ht(n,!0);let e=$o(n,"isOpen",3,!1),r=$o(n,"modules",19,()=>[]);function o(t){var e;null==(e=n.onModuleClick)||e.call(n,t)}var i=Hi(),a=Yn(i);let l;var s=Qn(Yn(a),2),u=Yn(s),c=t=>{kr(t,qi())},f=t=>{var n=_r();Tr(Kn(n),17,r,Ir,(t,n)=>{var e=Di();e.__click=()=>o(Ke(n)),e.__keydown=t=>"Enter"===t.key&&o(Ke(n));var r=Yn(e),i=Yn(r);ue(t=>Er(i,t),[()=>function(t,n=30){const e=t.replace(/\s+/g," ").trim();return e.length<=n?e:e.substring(0,n)+"..."}(Ke(n).label)]),kr(t,e)}),kr(t,n)};$r(u,t=>{0===r().length?t(c):t(f,!1)}),ue(()=>l=eo(a,1,"dropdown-menu",null,l,{active:e()})),kr(t,i),Ut()}(Qn(e,2),{get isOpen(){return Ke(u)},get modules(){return l()},onModuleClick:f,onClose:()=>$n(u,!1)}),kr(t,n)};$r(b,t=>{l().length>0&&t(m)});var y=Yn(Qn(b,2));y.__click=t=>{t.stopPropagation(),$n(s,!Ke(s)),Ke(s)&&$n(u,!1)},function(t,n){const e=Ao(n,["children","$$slots","$$events","$$legacy"]),r=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]];_i(t,No({name:"settings"},()=>e,{get iconNode(){return r},children:(t,e)=>{var r=_r();Or(Kn(r),n,"default",{}),kr(t,r)},$$slots:{default:!0}}))}(Yn(y),{size:18}),function(t,n){Ht(n,!0);let e=$o(n,"isOpen",3,!1),r=$o(n,"settings",19,()=>({fontSize:17,lineHeight:1.5,theme:"dark",fontFamily:"ë‚˜ëˆ”ìŠ¤í€˜ì–´ë„¤ì˜¤"}));const o=["Pretendard","ë‚˜ëˆ”ìŠ¤í€˜ì–´ë„¤ì˜¤","ì—ìŠ¤ì½”ì–´ë“œë¦¼","ë ˆíŽ˜ë¦¬í¬ì¸íŠ¸","í”Œë ‰ìŠ¤","ìŠ¤ìœ„íŠ¸","ì˜¤ë¥´ë¹—","ìŠ¤ì¿¨ì˜¤ë¥´ë¹—","í”„ë¦¬í‹°ë‚˜ìž‡","ì„œë¼ìš´ë“œì—ì–´","ê³ ìš´ë‹ì›€","ê³ ìš´ë°”íƒ•","ë¦¬ë””ë°”íƒ•","ë§ˆë£¨ë¶€ë¦¬","ë„ìŠ¤ê³ ë”•","ìŠ¤íƒ€ë”ìŠ¤íŠ¸","í”½ì‹œë“œì‹œìŠ¤","ë„¤ì˜¤ë‘¥ê·¼ëª¨"];var i=Wi(),a=Yn(i);let l;var s,u=Qn(Yn(a),2),c=Qn(Yn(u),2);c.__change=function(t){var e;const o={...r(),fontFamily:t.target.value};null==(e=n.onSettingsChange)||e.call(n,o)},Tr(c,21,()=>o,Ir,(t,n)=>{var e=Oi();let r;var o=Yn(e),i={};ue(()=>{r=oo(e,"",r,{"font-family":Ke(n)}),Er(o,Ke(n)),i!==(i=Ke(n))&&(e.value=(e.__value=Ke(n))??"")}),kr(t,e)}),ao(c);var f=Qn(u,2),d=Qn(Yn(f),2);d.__input=function(t){var e;const o={...r(),fontSize:Number(t.target.value)};null==(e=n.onSettingsChange)||e.call(n,o)};var p=Yn(Qn(d,2)),v=Qn(f,2),h=Qn(Yn(v),2);h.__input=function(t){var e;const o={...r(),lineHeight:Number(t.target.value)};null==(e=n.onSettingsChange)||e.call(n,o)};var g=Yn(Qn(h,2)),b=Qn(v,2),m=Qn(Yn(b),2);m.__change=function(t){var e;const o={...r(),theme:t.target.value};null==(e=n.onSettingsChange)||e.call(n,o)};var y=Yn(m);y.value=y.__value="light";var w=Qn(y);w.value=w.__value="sepia";var x,_=Qn(w);_.value=_.__value="dark",ao(m),Yn(Qn(b,2)).__click=function(...t){var e;null==(e=n.onOpenCustomCss)||e.apply(this,t)},ue(t=>{l=eo(a,1,"dropdown-menu",null,l,{active:e()}),s!==(s=r().fontFamily)&&(c.value=(c.__value=r().fontFamily)??"",io(c,r().fontFamily)),po(d,r().fontSize),Er(p,`${r().fontSize??""}px`),po(h,r().lineHeight),Er(g,t),x!==(x=r().theme)&&(m.value=(m.__value=r().theme)??"",io(m,r().theme))},[()=>r().lineHeight.toFixed(1)]),kr(t,i),Ut()}(Qn(y,2),{get isOpen(){return Ke(s)},get settings(){return a()},onSettingsChange:function(t){var e;null==(e=n.onSettingsChange)||e.call(n,t)},onOpenCustomCss:function(){var t;c(),null==(t=n.onOpenCustomCss)||t.call(n)},onClose:()=>$n(s,!1)}),ue(()=>{p.disabled=o(),Er(h,`${e()+1} / ${r()??""}`),g.disabled=i()}),kr(t,d),Ut()}vr(["click"]);const Yi="@font-face {\n  font-family: 'ë‚˜ëˆ”ìŠ¤í€˜ì–´ë„¤ì˜¤';\n  src: url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-bRg.eot);\n  src:\n    url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-bRg.eot?#iefix)\n      format('embedded-opentype'),\n    url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-bRg.woff)\n      format('woff'),\n    url(https://hangeul.pstatic.net/hangeul_static/webfont/NanumSquareNeo/NanumSquareNeoTTF-bRg.ttf)\n      format('truetype');\n  font-weight: normal;\n  font-style: normal;\n}\n@font-face {\n  font-family: 'ì—ìŠ¤ì½”ì–´ë“œë¦¼';\n  src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/S-CoreDream-3Light.woff')\n    format('woff');\n}\n@font-face {\n  font-family: 'ë ˆíŽ˜ë¦¬í¬ì¸íŠ¸';\n  src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2201-2@1.0/LeferiPoint-WhiteObliqueA.woff')\n    format('woff');\n}\n@font-face {\n  font-family: 'í”Œë ‰ìŠ¤';\n  src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_20-07@1.0/IBMPlexSansKR-Regular.woff')\n    format('woff');\n}\n@font-face {\n  font-family: 'ìŠ¤ìœ„íŠ¸';\n  src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2304-2@1.0/SUITE-Regular.woff2')\n    format('woff2');\n}\n@font-face {\n  font-family: 'ì˜¤ë¥´ë¹—';\n  src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2310@1.0/Orbit-Regular.woff2')\n    format('woff2');\n}\n@font-face {\n  font-family: 'ìŠ¤ì¿¨ì˜¤ë¥´ë¹—';\n  src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2307-2@1.0/HakgyoansimWoojuR.woff2')\n    format('woff2');\n}\n@font-face {\n  font-family: 'í”„ë¦¬í‹°ë‚˜ìž‡';\n  src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_twelve@1.1/Cafe24Oneprettynight.woff')\n    format('woff');\n}\n@font-face {\n  font-family: 'ì„œë¼ìš´ë“œì—ì–´';\n  src: url('https://gcore.jsdelivr.net/gh/projectnoonnu/noonfonts_2105_2@1.0/Cafe24SsurroundAir.woff')\n    format('woff');\n}\n@font-face {\n  font-family: 'ê³ ìš´ë‹ì›€';\n  src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2108@1.1/GowunDodum-Regular.woff')\n    format('woff');\n}\n@font-face {\n  font-family: 'ê³ ìš´ë°”íƒ•';\n  src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2108@1.1/GowunBatang-Regular.woff')\n    format('woff');\n}\n@font-face {\n  font-family: 'ë¦¬ë””ë°”íƒ•';\n  src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_twelve@1.0/RIDIBatang.woff')\n    format('woff');\n}\n@font-face {\n  font-family: 'ë§ˆë£¨ë¶€ë¦¬';\n  src: url(https://hangeul.pstatic.net/hangeul_static/webfont/MaruBuri/MaruBuri-Regular.eot);\n  src:\n    url(https://hangeul.pstatic.net/hangeul_static/webfont/MaruBuri/MaruBuri-Regular.eot?#iefix)\n      format('embedded-opentype'),\n    url(https://hangeul.pstatic.net/hangeul_static/webfont/MaruBuri/MaruBuri-Regular.woff2)\n      format('woff2'),\n    url(https://hangeul.pstatic.net/hangeul_static/webfont/MaruBuri/MaruBuri-Regular.woff)\n      format('woff'),\n    url(https://hangeul.pstatic.net/hangeul_static/webfont/MaruBuri/MaruBuri-Regular.ttf)\n      format('truetype');\n}\n@font-face {\n  font-family: 'ë„ìŠ¤ê³ ë”•';\n  src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_eight@1.0/DOSGothic.woff')\n    format('woff');\n}\n@font-face {\n  font-family: 'ìŠ¤íƒ€ë”ìŠ¤íŠ¸';\n  src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/PFStardust.woff')\n    format('woff');\n}\n@font-face {\n  font-family: 'í”½ì‹œë“œì‹œìŠ¤';\n  src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/DungGeunMo.woff')\n    format('woff');\n}\n@font-face {\n  font-family: 'ë„¤ì˜¤ë‘¥ê·¼ëª¨';\n  src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.3/NeoDunggeunmo.woff')\n    format('woff');\n}\n\n/* ===== PC Book Viewer Styles ===== */\n.risu-chat > div {\n  padding: unset !important;\n  margin: unset !important;\n  justify-content: unset !important;\n  align-items: unset !important;\n}\n.risu-chat > div > div {\n  margin: unset !important;\n  justify-content: unset !important;\n}\n\n/* CSS ë³€ìˆ˜ ì •ì˜ */\n.book-viewer-root {\n  /* í”„ë¦¬ë¯¸ì—„ ì»¬ëŸ¬ íŒ”ë ˆíŠ¸ */\n  --bv-bg-gradient-start: #1a1f35;\n  --bv-bg-gradient-end: #2d3654;\n  --bv-page-color: #fdfbf7;\n  --bv-page-shadow: #f5f0e8;\n  --bv-text-color: #2c2c2c;\n  --bv-text-secondary: #6b6b6b;\n  --bv-accent-color: #c9a66b;\n  --bv-accent-hover: #b8935a;\n  --bv-divider-color: #e8e4dc;\n  --bv-spine-gradient: linear-gradient(\n    90deg,\n    #d4cfc4 0%,\n    hsl(41, 13%, 76%) 50%,\n    #d4cfc4 100%\n  );\n\n  /* ê·¸ë¦¼ìž ì‹œìŠ¤í…œ */\n  --bv-shadow-soft: 0 4px 20px rgba(0, 0, 0, 0.08);\n  --bv-shadow-medium: 0 8px 40px rgba(0, 0, 0, 0.12);\n  --bv-shadow-strong: 0 20px 60px rgba(0, 0, 0, 0.2);\n  --bv-shadow-inner: inset 0 0 30px rgba(0, 0, 0, 0.03);\n\n  /* íƒ€ì´í¬ê·¸ëž˜í”¼ */\n  --bv-font-size: 17px;\n  --bv-line-height: 1.9;\n  --bv-font-family:\n    'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;\n  --bv-font-serif: 'Noto Serif KR', 'Crimson Text', 'Georgia', serif;\n\n  /* ì• ë‹ˆë©”ì´ì…˜ */\n  --bv-transition-fast: 0.15s cubic-bezier(0.4, 0, 0.2, 1);\n  --bv-transition-smooth: 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  --bv-transition-slow: 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n\n  /* í°íŠ¸ ì»¬ëŸ¬ (Light) */\n  --FontColorStandard: #2c2c2c;\n  --FontColorItalic: #5a5a5a;\n  --FontColorBold: #1a1a1a;\n  --FontColorItalicBold: #5a5a5a;\n  --FontColorQuote1: #0e7490;\n  --FontColorQuote2: #c2410c;\n\n  --bv-font-color: var(--FontColorStandard);\n  --bv-mark1-color: var(--FontColorQuote1);\n  --bv-mark2-color: var(--FontColorQuote2);\n  --bv-em-color: var(--FontColorItalic);\n}\n\n/* í…Œë§ˆ: Sepia */\n.book-viewer-root[data-theme='sepia'] {\n  --bv-bg-gradient-start: #3d3830;\n  --bv-bg-gradient-end: #4a4238;\n  --bv-page-color: #f7f0e3;\n  --bv-page-shadow: #ebe4d7;\n  --bv-text-color: #3d2e1c;\n  --bv-text-secondary: #7a6b5a;\n  --bv-accent-color: #8b7355;\n  --bv-divider-color: #d4c9b8;\n  --bv-spine-gradient: linear-gradient(\n    90deg,\n    #c4b9a8 0%,\n    #b8ad9c 50%,\n    #c4b9a8 100%\n  );\n\n  /* í°íŠ¸ ì»¬ëŸ¬ (Sepia) */\n  --FontColorBold: #2a1f10;\n  --FontColorItalicBold: #6b5a48;\n\n  --FontColorStandard: #3d2e1c;\n  --FontColorQuote1: #1a6b6b;\n  --FontColorQuote2: #a85d20;\n  --FontColorItalic: #6b5a48;\n  --bv-font-color: var(--FontColorStandard);\n  --bv-mark1-color: var(--FontColorQuote1);\n  --bv-mark2-color: var(--FontColorQuote2);\n  --bv-em-color: var(--FontColorItalic);\n}\n\n/* í…Œë§ˆ: Dark */\n.book-viewer-root[data-theme='dark'] {\n  --bv-bg-gradient-start: #0d1117;\n  --bv-bg-gradient-end: #161b22;\n  --bv-page-color: var(--risu-theme-bgcolor);\n  --bv-page-shadow: #151a20;\n  --bv-text-color: #c9d1d9;\n  --bv-text-secondary: #8b949e;\n  --bv-accent-color: #d4a574;\n  --bv-accent-hover: #e0b584;\n  --bv-divider-color: #30363d;\n  --bv-spine-gradient: linear-gradient(\n    90deg,\n    #21262d 0%,\n    #30363d 50%,\n    #21262d 100%\n  );\n  --FontColorStandard: #fafafa;\n  --FontColorItalic: #8c8d93;\n  --FontColorBold: #fafafa;\n  --FontColorItalicBold: #8c8d93;\n  --FontColorQuote1: #8be9fd;\n  --FontColorQuote2: #ffb86c;\n\n  --bv-font-color: var(--FontColorStandard);\n  --bv-mark1-color: var(--FontColorQuote1);\n  --bv-mark2-color: var(--FontColorQuote2);\n  --bv-em-color: var(--FontColorItalic);\n}\n\n/* í…ìŠ¤íŠ¸ ìƒ‰ìƒ */\n.text-content p {\n  margin-top: 1em;\n  /* color: var(--bv-font-color); */\n}\n\n.text-content h1 {\n  font-weight: 800;\n  font-size: 2.25em;\n  line-height: 1.1111111;\n}\n\n.text-content h2 {\n  font-weight: 700;\n  font-size: 1.5em;\n  line-height: 1.3333333;\n}\n\n.text-content h3 {\n  font-weight: 600;\n  font-size: 1.25em;\n  line-height: 1.6;\n}\n\n/* ===== ì±… ëž˜í¼ (ì „ì²´ í™”ë©´) ===== */\n.book-viewer-root {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 93.5%;\n  display: flex !important;\n  flex-direction: column;\n  overflow: hidden;\n  z-index: 5;\n  font-family: var(--bv-font-family);\n  background: linear-gradient(\n    135deg,\n    var(--bv-bg-gradient-start) 0%,\n    var(--bv-bg-gradient-end) 100%\n  );\n  user-select: none;\n  border-bottom: 1px solid var(--bv-divider-color);\n}\n\n/* ë°°ê²½ íŒ¨í„´ */\n.book-viewer-root::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-image:\n    radial-gradient(\n      circle at 20% 80%,\n      rgba(201, 166, 107, 0.05) 0%,\n      transparent 50%\n    ),\n    radial-gradient(\n      circle at 80% 20%,\n      rgba(201, 166, 107, 0.03) 0%,\n      transparent 50%\n    );\n  pointer-events: none;\n  z-index: 0;\n}\n\n/* ===== í—¤ë” ì˜ì—­ ===== */\n.book-header {\n  display: flex !important;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 24px;\n  background: var(--bv-page-color);\n  border-bottom: 1px solid var(--bv-divider-color);\n  flex-shrink: 0;\n  z-index: 1;\n}\n\n.header-left {\n  display: flex !important;\n  align-items: center;\n  gap: 12px;\n  min-width: 0;\n  flex: 1;\n  margin-left: 30px;\n}\n\n.header-thumbnail {\n  width: 40px;\n  height: 40px;\n  min-width: 40px;\n  border-radius: 8px;\n  background-size: cover;\n  background-position: center;\n  background-color: var(--bv-divider-color);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.header-info {\n  display: flex !important;\n  align-items: center;\n  gap: 12px;\n  min-width: 0;\n  flex: 1;\n}\n\n.header-name {\n  font-size: 15px;\n  font-weight: 600;\n  color: var(--bv-text-color);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.header-buttons {\n  display: flex !important;\n  align-items: center;\n  gap: 4px;\n}\n\n.header-buttons button {\n  background: none;\n  border: none;\n  padding: 6px;\n  cursor: pointer;\n  color: var(--bv-text-secondary);\n  border-radius: 6px;\n  transition: all var(--bv-transition-fast);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.header-buttons button:hover {\n  background: rgba(0, 0, 0, 0.05);\n  color: var(--bv-accent-color);\n}\n\n.book-viewer-root[data-theme='dark'] .header-buttons button:hover {\n  background: rgba(255, 255, 255, 0.08);\n}\n\n.header-buttons button :global(svg) {\n  width: 18px;\n  height: 18px;\n}\n\n.header-right {\n  display: flex !important;\n  align-items: center;\n  gap: 8px;\n  flex-shrink: 0;\n}\n\n.chat-index-nav {\n  display: flex !important;\n  align-items: center;\n  gap: 4px;\n}\n\n.chat-nav-btn {\n  background: none;\n  border: none;\n  padding: 4px;\n  cursor: pointer;\n  color: var(--bv-text-secondary);\n  border-radius: 4px;\n  transition: all var(--bv-transition-fast);\n  display: flex !important;\n  align-items: center;\n  justify-content: center;\n}\n\n.chat-nav-btn:hover:not(:disabled) {\n  background: rgba(0, 0, 0, 0.05);\n  color: var(--bv-accent-color);\n}\n\n.chat-nav-btn:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\n.book-viewer-root[data-theme='dark'] .chat-nav-btn:hover:not(:disabled) {\n  background: rgba(255, 255, 255, 0.08);\n}\n\n.header-chat-index {\n  font-size: 13px;\n  font-weight: 500;\n  color: var(--bv-text-secondary);\n  background: rgba(0, 0, 0, 0.04);\n  padding: 4px 10px;\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n.chat-index-total {\n  font-size: 11px;\n  opacity: 0.7;\n}\n\n.book-viewer-root[data-theme='dark'] .header-chat-index {\n  background: rgba(255, 255, 255, 0.08);\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  padding: 6px;\n  cursor: pointer;\n  color: var(--bv-text-secondary);\n  border-radius: 6px;\n  transition: all var(--bv-transition-fast);\n  display: flex !important;\n  align-items: center;\n  justify-content: center;\n}\n\n.close-btn:hover {\n  background: rgba(0, 0, 0, 0.05);\n  color: var(--bv-accent-color);\n}\n\n/* ===== íŽ˜ì´ì§€ ì˜ì—­ ===== */\n.book-pages {\n  position: relative;\n  display: flex !important;\n  flex: 1;\n  min-height: 0;\n  z-index: 1;\n}\n\n.page {\n  flex: 1;\n  background: var(--bv-page-color);\n  position: relative;\n  overflow: hidden;\n}\n\n/* ì¢…ì´ ì§ˆê° íš¨ê³¼ */\n.page::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background:\n    linear-gradient(\n      90deg,\n      rgba(0, 0, 0, 0.02) 0%,\n      transparent 5%,\n      transparent 95%,\n      rgba(0, 0, 0, 0.02) 100%\n    ),\n    url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E\");\n  pointer-events: none;\n  z-index: 1;\n}\n\n.book-viewer-root[data-theme='dark'] .page::before {\n  opacity: 0.5;\n}\n\n.page-left {\n  border-radius: 4px 0 0 4px;\n  box-shadow: var(--bv-shadow-inner);\n}\n\n.page-left::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 40px;\n  height: 100%;\n  background: linear-gradient(90deg, transparent 0%, rgba(0, 0, 0, 0.03) 100%);\n  pointer-events: none;\n}\n\n.page-right {\n  border-radius: 0 4px 4px 0;\n  box-shadow: var(--bv-shadow-inner);\n}\n\n.page-right::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 40px;\n  height: 100%;\n  background: linear-gradient(90deg, rgba(0, 0, 0, 0.03) 0%, transparent 100%);\n  pointer-events: none;\n}\n\n/* ===== ì±…ë“± (ìŠ¤íŒŒì¸) ===== */\n.book-spine {\n  width: 8px;\n  background: var(--bv-spine-gradient);\n  position: relative;\n  box-shadow:\n    inset 2px 0 4px rgba(0, 0, 0, 0.1),\n    inset -2px 0 4px rgba(0, 0, 0, 0.1);\n}\n\n.book-spine::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 1px;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.1);\n}\n\n/* ===== íŽ˜ì´ì§€ ì½˜í…ì¸  ===== */\n.page-content {\n  padding: 50px 60px 10px;\n  height: 100%;\n  display: flex !important;\n  flex-direction: column;\n  color: var(--bv-text-color);\n  position: relative;\n  z-index: 2;\n}\n\n.page-content > .chattext [class*='-image-wrapper'] {\n  max-height: 100%;\n}\n.page-content > .chattext [class*='-image-container'] {\n  min-height: 98%;\n  max-height: 100%;\n}\n.page-content > .chattext .x-risu-image-container:hover {\n}\n\n.page-content > .x-risu-image-cell {\n  aspect-ratio: auto;\n}\n\n.text-content {\n  flex: 1;\n  overflow-y: auto;\n  font-size: var(--bv-font-size) !important;\n  line-height: var(--bv-line-height) !important;\n  font-family: var(--bv-font-family) !important;\n  text-align: -webkit-auto;\n  word-break: keep-all;\n  letter-spacing: -0.01em;\n  padding-right: 10px;\n  user-select: text;\n  -webkit-user-select: text;\n  cursor: text;\n}\n\n.text-content * {\n  user-select: text;\n  -webkit-user-select: text;\n}\n\n/* í—¤ë”© ìŠ¤íƒ€ì¼ */\n.text-content :global(h1),\n.text-content :global(h2),\n.text-content :global(h3) {\n  margin: 2em 0 1em;\n  text-indent: 0;\n  font-weight: 600;\n  color: #1a1a1a;\n  letter-spacing: -0.02em;\n}\n\n.text-content :global(h1) {\n  font-size: 1.8em;\n  border-bottom: 2px solid var(--bv-accent-color);\n  padding-bottom: 0.5em;\n}\n\n.text-content :global(h2) {\n  font-size: 1.4em;\n}\n\n/* Mark ìŠ¤íƒ€ì¼ */\n.text-content :global(mark),\n.text-content :global(mark[risu-mark]) {\n  display: inline;\n  background: linear-gradient(\n    120deg,\n    rgba(201, 166, 107, 0.2) 0%,\n    rgba(201, 166, 107, 0.3) 100%\n  );\n  color: inherit;\n  padding: 0.1em 0.3em;\n  border-radius: 3px;\n  flex-direction: unset;\n  align-items: unset;\n  gap: unset;\n}\n\n/* ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */\n.text-content:has(img) {\n  position: static;\n}\n\n.text-content :global(img) {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  object-position: center;\n  margin: 0;\n  z-index: 10;\n}\n\n.page-content:has(img) .page-number {\n  display: none;\n}\n\n/* ===== íŽ˜ì´ì§€ ë²ˆí˜¸ ===== */\n.page-number {\n  font-size: 13px;\n  color: var(--bv-text-secondary);\n  font-weight: 500;\n  letter-spacing: 0.05em;\n}\n\n.left-page-num {\n  text-align: left;\n}\n.right-page-num {\n  text-align: right;\n}\n\n/* ===== í´ë¦­ ì˜ì—­ ===== */\n.click-area {\n  position: absolute;\n  top: 0;\n  width: 5%;\n  height: 100%;\n  z-index: 10;\n  cursor: pointer;\n}\n\n.click-left {\n  left: 0;\n  cursor:\n    url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='none' stroke='%23c9a66b' stroke-width='2'%3E%3Cpolyline points='15 18 9 12 15 6'%3E%3C/polyline%3E%3C/svg%3E\")\n      16 16,\n    w-resize;\n}\n\n.click-right {\n  right: 0;\n  cursor:\n    url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='none' stroke='%23c9a66b' stroke-width='2'%3E%3Cpolyline points='9 18 15 12 9 6'%3E%3C/polyline%3E%3C/svg%3E\")\n      16 16,\n    e-resize;\n}\n\n.click-area::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 50px;\n  height: 100px;\n  opacity: 0;\n  transition: opacity var(--bv-transition-smooth);\n  pointer-events: none;\n}\n\n.click-left::after {\n  left: 30px;\n  background: radial-gradient(\n    ellipse at left,\n    rgba(201, 166, 107, 0.15),\n    transparent 70%\n  );\n}\n\n.click-right::after {\n  right: 30px;\n  background: radial-gradient(\n    ellipse at right,\n    rgba(201, 166, 107, 0.15),\n    transparent 70%\n  );\n}\n\n.click-area:hover::after {\n  opacity: 1;\n}\n\n/* ===== ë„¤ë¹„ê²Œì´ì…˜ ì»¨íŠ¸ë¡¤ ===== */\n.nav-controls {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 32px;\n  background: var(--bv-page-color);\n  padding: 14px 40px;\n  border-top: 1px solid rgba(201, 166, 107, 0.12);\n  flex-shrink: 0;\n  z-index: 1;\n}\n\n.nav-btn {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 10px;\n  border-radius: 50%;\n  transition: all var(--bv-transition-fast);\n  color: var(--bv-accent-color);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.nav-btn :global(svg) {\n  transition: transform var(--bv-transition-fast);\n}\n\n.nav-btn:hover:not(:disabled) {\n  background: rgba(201, 166, 107, 0.12);\n}\n.nav-btn:hover:not(:disabled) :global(svg) {\n  transform: scale(1.1);\n}\n.nav-btn:active:not(:disabled) :global(svg) {\n  transform: scale(0.95);\n}\n.nav-btn:disabled {\n  opacity: 0.25;\n  cursor: not-allowed;\n}\n\n.page-indicator {\n  font-size: 14px;\n  color: var(--bv-text-color);\n  min-width: 90px;\n  text-align: center;\n  font-weight: 600;\n  letter-spacing: 0.02em;\n}\n\n/* ===== ë„¤ë¹„ê²Œì´ì…˜ ìš°ì¸¡ ë²„íŠ¼ ê·¸ë£¹ ===== */\n.nav-right-buttons {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-left: auto;\n  padding-left: 20px;\n}\n\n.nav-icon-btn {\n  background: none;\n  border: 2px solid var(--bv-accent-color);\n  color: var(--bv-accent-color);\n  padding: 8px 12px;\n  cursor: pointer;\n  border-radius: 8px;\n  transition: all var(--bv-transition-fast);\n  font-size: 13px !important;\n  font-weight: 600 !important;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n}\n\n.nav-icon-btn:hover {\n  background: var(--bv-accent-color);\n  color: white;\n}\n\n.nav-icon-btn :global(svg) {\n  width: 18px;\n  height: 18px;\n}\n\n/* ===== ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ===== */\n.dropdown-container {\n  position: relative;\n}\n\n.dropdown-menu {\n  display: none;\n  position: absolute;\n  bottom: calc(100% + 40px);\n  right: 0;\n  background: rgba(255, 255, 255, 0.98);\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  padding: 16px;\n  border-radius: 16px;\n  box-shadow: var(--bv-shadow-strong);\n  min-width: 280px;\n  max-width: 320px;\n  border: 1px solid rgba(201, 166, 107, 0.15);\n  z-index: 200;\n}\n\n.dropdown-menu.active {\n  display: block;\n  animation: dropdownFadeIn 0.25s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n@keyframes dropdownFadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(10px) scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n}\n\n.book-viewer-root[data-theme='dark'] .dropdown-menu {\n  background: rgba(28, 33, 40, 0.98);\n}\n\n.dropdown-header {\n  font-size: 14px;\n  font-weight: 700;\n  color: var(--bv-text-color);\n  padding-bottom: 12px;\n  margin-bottom: 12px;\n  border-bottom: 1px solid var(--bv-divider-color);\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n\n/* ===== ì„¤ì • ì•„ì´í…œ ===== */\n.setting-item {\n  margin-bottom: 16px;\n}\n.setting-item:last-child {\n  margin-bottom: 0;\n}\n\n.setting-item label {\n  display: block;\n  margin-bottom: 8px;\n  font-size: 12px;\n  font-weight: 600;\n  color: var(--bv-font-color);\n  text-transform: uppercase;\n  letter-spacing: 0.06em;\n}\n\n.setting-item input[type='range'] {\n  width: 100%;\n  height: 5px;\n  -webkit-appearance: none;\n  appearance: none;\n  background: #e8e4dc;\n  border-radius: 3px;\n  outline: none;\n  margin-bottom: 6px;\n}\n\n.book-viewer-root[data-theme='dark'] .setting-item input[type='range'] {\n  background: #30363d;\n}\n\n.setting-item input[type='range']::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 18px;\n  height: 18px;\n  background: var(--bv-accent-color);\n  border-radius: 50%;\n  cursor: pointer;\n  box-shadow: 0 2px 6px rgba(201, 166, 107, 0.4);\n  transition: all var(--bv-transition-fast);\n}\n\n.setting-item input[type='range']::-webkit-slider-thumb:hover {\n  transform: scale(1.1);\n}\n\n.setting-item input[type='range']::-moz-range-thumb {\n  width: 18px;\n  height: 18px;\n  background: var(--bv-accent-color);\n  border-radius: 50%;\n  cursor: pointer;\n  border: none;\n}\n\n.setting-item select {\n  width: 100%;\n  padding: 10px 14px;\n  border: 2px solid #e8e4dc;\n  border-radius: 10px;\n  font-size: 13px;\n  background: #fff;\n  cursor: pointer;\n  transition: all var(--bv-transition-fast);\n  appearance: none;\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23c9a66b' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\");\n  background-repeat: no-repeat;\n  background-position: right 10px center;\n  background-size: 16px;\n}\n\n.book-viewer-root[data-theme='dark'] .setting-item select {\n  background-color: #21262d;\n  border-color: #30363d;\n  color: var(--bv-font-color);\n}\n\n.book-viewer-root[data-theme='light'] .setting-item select {\n  color: var(--bv-font-color);\n}\n\n.book-viewer-root[data-theme='sepia'] .setting-item select {\n  color: var(--bv-font-color);\n}\n\n.setting-item select:hover {\n  border-color: var(--bv-accent-color);\n}\n.setting-item select:focus {\n  outline: none;\n  border-color: var(--bv-accent-color);\n  box-shadow: 0 0 0 3px rgba(201, 166, 107, 0.15);\n}\n\n.setting-item span {\n  font-size: 11px;\n  color: var(--bv-text-secondary);\n  font-weight: 500;\n}\n\n.custom-css-btn {\n  width: 100%;\n  padding: 10px 16px;\n  background: var(--bv-accent-color);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-size: 13px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all var(--bv-transition-fast);\n}\n\n.custom-css-btn:hover {\n  background: var(--bv-accent-hover);\n  transform: translateY(-1px);\n}\n\n/* ===== LB ëª¨ë“ˆ ë¦¬ìŠ¤íŠ¸ ===== */\n.lb-modules-list {\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.lb-module-item {\n  padding: 10px 12px;\n  margin-bottom: 6px;\n  background: rgba(201, 166, 107, 0.08);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all var(--bv-transition-fast);\n  font-size: 13px;\n  color: var(--bv-text-color);\n}\n\n.lb-module-item:hover {\n  background: rgba(201, 166, 107, 0.2);\n}\n.lb-module-item:last-child {\n  margin-bottom: 0;\n}\n\n.book-viewer-root[data-theme='dark'] .lb-module-item {\n  background: rgba(212, 165, 116, 0.1);\n}\n\n.book-viewer-root[data-theme='dark'] .lb-module-item:hover {\n  background: rgba(212, 165, 116, 0.2);\n}\n\n/* ===== ëª¨ë‹¬ ===== */\n.modal-overlay {\n  display: none !important;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0, 0, 0, 0.6);\n  backdrop-filter: blur(4px);\n  z-index: 1100;\n  justify-content: center;\n  align-items: center;\n}\n\n.modal-overlay.active {\n  display: flex;\n  animation: modalFadeIn 0.3s ease;\n}\n\n@keyframes modalFadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n.modal-content {\n  background: var(--bv-page-color);\n  border-radius: 16px;\n  width: 90%;\n  max-width: 600px;\n  max-height: 80vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: var(--bv-shadow-strong);\n  animation: modalSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.book-viewer-root[data-theme='dark'] .modal-content {\n  background: #1c2128;\n}\n\n@keyframes modalSlideIn {\n  from {\n    opacity: 0;\n    transform: translateY(-20px) scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n  }\n}\n\n.modal-header {\n  display: flex !important;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 24px;\n  border-bottom: 1px solid var(--bv-divider-color);\n}\n\n.modal-header h3 {\n  font-size: 18px;\n  font-weight: 700;\n  color: var(--bv-text-color);\n  margin: 0;\n}\n\n.modal-close {\n  background: none;\n  border: none;\n  font-size: 24px;\n  color: var(--bv-text-secondary);\n  cursor: pointer;\n  padding: 4px 8px;\n  border-radius: 6px;\n  transition: all var(--bv-transition-fast);\n}\n\n.modal-close:hover {\n  background: rgba(0, 0, 0, 0.05);\n  color: var(--bv-text-color);\n}\n\n.book-viewer-root[data-theme='dark'] .modal-close:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.modal-body {\n  flex: 1;\n  padding: 20px 24px;\n  overflow: auto;\n}\n\n.modal-body textarea {\n  width: 100%;\n  height: 300px;\n  padding: 16px;\n  border: 2px solid var(--bv-divider-color);\n  border-radius: 12px;\n  font-family: 'Consolas', 'Monaco', monospace;\n  font-size: 14px;\n  line-height: 1.6;\n  resize: vertical;\n  background: #fafafa;\n  color: var(--bv-text-color);\n}\n\n.book-viewer-root[data-theme='dark'] .modal-body textarea {\n  background: #0d1117;\n  border-color: #30363d;\n}\n\n.modal-body textarea:focus {\n  outline: none;\n  border-color: var(--bv-accent-color);\n  box-shadow: 0 0 0 3px rgba(201, 166, 107, 0.15);\n}\n\n.modal-footer {\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n  padding: 16px 24px;\n  border-top: 1px solid var(--bv-divider-color);\n}\n\n.modal-btn {\n  padding: 10px 20px;\n  border-radius: 8px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all var(--bv-transition-fast);\n}\n\n.modal-btn.primary {\n  background: var(--bv-accent-color);\n  color: white;\n  border: none;\n}\n\n.modal-btn.primary:hover {\n  background: var(--bv-accent-hover);\n}\n\n.modal-btn.secondary {\n  background: transparent;\n  color: var(--bv-text-secondary);\n  border: 2px solid var(--bv-divider-color);\n}\n\n.modal-btn.secondary:hover {\n  border-color: var(--bv-text-secondary);\n  color: var(--bv-text-color);\n}\n\n/* ===== ë°˜ì‘í˜• ===== */\n@media (max-width: 1200px) {\n  .page-content {\n    padding: 50px 40px 40px;\n  }\n  .text-content {\n    font-size: 16px;\n  }\n}\n\n@media (max-width: 900px) {\n  .book-header {\n    padding: 10px 16px;\n  }\n  .header-thumbnail {\n    width: 32px;\n    height: 32px;\n    min-width: 32px;\n    border-radius: 6px;\n  }\n  .header-name {\n    font-size: 14px;\n  }\n  .header-buttons button {\n    padding: 4px;\n  }\n  .header-buttons button :global(svg) {\n    width: 16px;\n    height: 16px;\n  }\n  .page-content {\n    padding: 40px 30px 35px;\n  }\n  .book-spine {\n    width: 4px;\n  }\n  .nav-controls {\n    padding: 12px 20px;\n    gap: 20px;\n  }\n}\n";var Ki=yr('<div><div class="modal-content"><div class="modal-header"><h3>ì‚¬ìš©ìž CSS</h3> <button class="modal-close">&times;</button></div> <div class="modal-body"><textarea placeholder="/* ì‚¬ìš©ìž ì •ì˜ CSSë¥¼ ìž…ë ¥í•˜ì„¸ìš” */"></textarea></div> <div class="modal-footer"><button class="modal-btn secondary">ì´ˆê¸°í™”</button> <button class="modal-btn primary">ì ìš©</button></div></div></div>');vr(["click"]);var Qi=yr('<div><div class="toast-content"> </div></div>');function Xi(t,n){Ht(n,!0);let e=$o(n,"message",3,""),r=$o(n,"duration",3,2e3),o=$o(n,"visible",3,!1),i=$o(n,"onHide",3,()=>{}),a=Mn(!1),l=null;ie(()=>{o()&&($n(a,!0),l&&clearTimeout(l),l=setTimeout(()=>{$n(a,!1),setTimeout(()=>{i()()},300)},r()))}),Io(()=>()=>{l&&clearTimeout(l)});var s=_r(),u=Kn(s),c=t=>{var n=Qi();let r;var o=Yn(n),i=Yn(o);ue(()=>{r=eo(n,1,"viewer-toast",null,r,{showing:Ke(a)}),Er(i,e())}),kr(t,n)};$r(u,t=>{o()&&t(c)}),kr(t,s),Ut()}class Ji{constructor(t={}){this.splittableTags=t.splittableTags||["p"],this.minHeightRatio=t.minHeightRatio||.9}isSplittable(t){var n;const e=null==(n=t.tagName)?void 0:n.toLowerCase();if(!this.splittableTags.includes(e))return!1;return!t.querySelector("mark, strong, em, a, span[class], code")}splitElement(t,n,e){if(!this.isSplittable(t))return[t.cloneNode(!0)];const r=t.cloneNode(!0);n.innerHTML="",n.appendChild(r);return n.scrollHeight<=e?[t.cloneNode(!0)]:this._splitBySentence(t,n,e)}_splitBySentence(t,n,e){const r=t.tagName.toLowerCase(),o=t.innerText||t.textContent||"",i=this._splitIntoSentences(o);if(i.length<=1)return this._splitByWords(t,n,e);const a=[];let l=[];for(const s of i){const o=[...l,s].join(""),i=document.createElement(r);if(Array.from(t.attributes).forEach(t=>{i.setAttribute(t.name,t.value)}),i.textContent=o,n.innerHTML="",n.appendChild(i),n.scrollHeight<=e)l.push(s);else{if(l.length>0){const n=document.createElement(r);Array.from(t.attributes).forEach(t=>{n.setAttribute(t.name,t.value)}),n.textContent=l.join(""),a.push(n)}l=[s]}}if(l.length>0){const n=document.createElement(r);Array.from(t.attributes).forEach(t=>{n.setAttribute(t.name,t.value)}),n.textContent=l.join(""),a.push(n)}return a.length>0?a:[t.cloneNode(!0)]}_splitIntoSentences(t){return t.split(new RegExp("(?<=[.!?ã€‚ï¼ï¼Ÿ])\\s*")).filter(t=>t.length>0)}_splitByWords(t,n,e){const r=t.tagName.toLowerCase(),o=(t.innerText||t.textContent||"").split(/(\s+)/).filter(t=>t.length>0);if(0===o.length)return[t.cloneNode(!0)];const i=[];let a=0;for(;a<o.length;){let l=a+1,s=a+1;for(;l<=o.length;){const i=o.slice(a,l).join(""),u=document.createElement(r);if(Array.from(t.attributes).forEach(t=>{u.setAttribute(t.name,t.value)}),u.textContent=i,n.innerHTML="",n.appendChild(u),!(n.scrollHeight<=e))break;s=l,l++}const u=document.createElement(r);Array.from(t.attributes).forEach(t=>{u.setAttribute(t.name,t.value)}),u.textContent=o.slice(a,s).join(""),i.push(u),a=s}return i}static createMeasureContainer(t){const n=document.createElement("div"),e=getComputedStyle(t);return n.style.cssText=`\n      position: absolute;\n      visibility: hidden;\n      pointer-events: none;\n      width: ${t.clientWidth}px;\n      padding: ${e.padding};\n      font-size: ${e.fontSize};\n      line-height: ${e.lineHeight};\n      font-family: ${e.fontFamily};\n      overflow: hidden;\n    `,n}}function Zi(t){const n=document.createElement("div");if(n.className="text-content chattext",n.style.position="absolute",n.style.visibility="hidden",n.style.pointerEvents="none",n.style.overflow="hidden",t){const e=t.getBoundingClientRect(),r=window.getComputedStyle(t);n.style.width=e.width+"px",n.style.height=e.height+"px",n.style.padding=r.padding,n.style.fontSize=r.fontSize,n.style.lineHeight=r.lineHeight,n.style.fontFamily=r.fontFamily}return n}function ta(t){const n=Array.from(t.childNodes);let e=[];const r=()=>{if(0===e.length)return;const n=e.map(t=>t.nodeType===Node.TEXT_NODE?t.textContent:t.outerHTML).join("");if(""===n.trim())return e.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),void(e=[]);const r=document.createElement("p");r.innerHTML=n;const o=e[0];t.insertBefore(r,o),e.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),e=[]},o=["p","div","ul","ol","li","h1","h2","h3","h4","h5","h6","table","blockquote","pre","hr","details","figure","section","article","header","footer","nav","aside","title"];n.forEach(t=>{if(t.nodeType===Node.TEXT_NODE)(""!==t.textContent.trim()||e.length>0)&&e.push(t);else if(t.nodeType===Node.ELEMENT_NODE){const n=t.tagName.toLowerCase();o.includes(n)?r():e.push(t)}}),r()}function na(t,n,e){const r=[],o=Array.from(t.children),i=n.clientHeight;let a=[];return o.forEach(t=>{const o=t.cloneNode(!0);if(n.innerHTML="",n.appendChild(o),t.querySelector("img")||"IMG"===t.tagName||"DIV"===t.tagName&&t.classList.contains("x-risu-image-container"))return a.length>0&&(r.push(ea(a)),a=[]),r.push(ea([t.cloneNode(!0)])),void(n.innerHTML="");n.innerHTML="",a.forEach(t=>{n.appendChild(t.cloneNode(!0))}),n.appendChild(o);const l=n.scrollHeight>n.clientHeight;if(l&&e.isSplittable(t)){a.length>0&&(r.push(ea(a)),a=[]),n.innerHTML="";return void e.splitElement(t,n,i).forEach(t=>{(t=>{const e=t.cloneNode(!0);n.appendChild(e),n.scrollHeight>n.clientHeight&&a.length>0&&(r.push(ea(a)),a=[],n.innerHTML="",n.appendChild(e)),a.push(t)})(t)})}l&&a.length>0&&(r.push(ea(a)),a=[],n.innerHTML="",n.appendChild(o)),a.push(t.cloneNode(!0))}),a.length>0&&r.push(ea(a)),r}function ea(t){const n=document.createElement("div");return t.forEach(t=>n.appendChild(t)),n.innerHTML}function ra(t){const n={thumbnailUrl:"",name:"",chatIndex:0,buttons:[]},e=t.querySelector(".shadow-lg.bg-textcolor2.rounded-md");if(e){const t=e.getAttribute("style");if(t){const e=t.match(/background:\s*url\(['"]?([^'")\s]+)['"]?\)/);e&&e[1]&&(n.thumbnailUrl=e[1])}}const r=t.querySelector(".flexium.items-center.chat-width");if(r){const t=r.querySelector("span.chat-width");t&&(n.name=t.textContent.trim())}const o=t.querySelector(".risu-ebooklike-viewer-chat-message-bot-buttons");if(o){[".button-icon-copy",".button-icon-tts",".button-icon-edit",".button-icon-translate"].forEach(t=>{const e=o.querySelector(t);e&&n.buttons.push(e.cloneNode(!0))})}const i=t.querySelector(".risu-chat");if(i){const t=i.getAttribute("data-chat-index");t&&(n.chatIndex=parseInt(t,10))}return n}function oa(t){if(!t)return[];const n=[],e=vi(pi.chatMessage.botButtonDiv,t);if(e){[".button-icon-copy",".button-icon-edit",".button-icon-translate",".button-icon-reroll"].forEach(t=>{const r=e.querySelector(t);r&&n.push(r)})}return n}function ia(t){if(!t)return[];const n=t.querySelector(".chattext");if(!n)return[];const e=["button",'[role="button"]',".risu-btn","[risu-btn]",".x-risu-lb-opener",".x-risu-lb-nai-btn",".x-risu-lb-nai-opener"].join(", ");return Array.from(n.querySelectorAll(e))}function aa(t){const n=new Map;if(!t)return n;const e=t.querySelector(".chattext");if(!e)return n;e.querySelectorAll(".x-risu-lb-module-root").forEach(t=>{const e=t.getAttribute("data-id");if(e){const r=t.querySelector(".x-risu-lb-opener")||t.querySelector(".x-risu-lb-nai-opener");r&&n.set(e,r)}});return e.querySelectorAll(".x-risu-lb-nai-btn").forEach(t=>{if(!t.closest(".x-risu-lb-module-root")){const e=t.getAttribute("risu-btn");e&&n.set(e,t)}}),n}function la(t){const n=[];t.querySelectorAll(".x-risu-lb-module-root").forEach(t=>{var e,r;const o=t.getAttribute("data-id")||"",i=t.querySelector(".x-risu-lb-opener span"),a=t.querySelector(".x-risu-lb-nai-opener span"),l=(null==(e=null==i?void 0:i.textContent)?void 0:e.trim())||(null==(r=null==a?void 0:a.textContent)?void 0:r.trim())||o||"LB Module";n.push({type:"module-root",dataId:o,label:l,element:t.cloneNode(!0)})});return t.querySelectorAll(".x-risu-lb-nai-btn").forEach(t=>{var e;if(!t.closest(".x-risu-lb-module-root")){const r=t.getAttribute("risu-btn")||"",o=(null==(e=t.textContent)?void 0:e.trim())||r||"NAI Button";n.push({type:"nai-btn",dataId:r,label:o,element:t.cloneNode(!0)})}}),n}function sa(){return new Promise(t=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{t()})})})}const ua="bookViewerSettings",ca="bookViewerCustomCss",fa={fontSize:17,lineHeight:1.9,theme:"light",fontFamily:"ë‚˜ëˆ”ìŠ¤í€˜ì–´ë„¤ì˜¤"};function da(){try{const t=localStorage.getItem(ua);if(t){const n=JSON.parse(t);return{fontSize:n.fontSize??fa.fontSize,lineHeight:n.lineHeight??fa.lineHeight,theme:n.theme??fa.theme,fontFamily:n.fontFamily??fa.fontFamily}}}catch(t){console.error("[SettingsManager] Failed to load settings:",t)}return{...fa}}function pa(t){try{const n={...da(),...t};localStorage.setItem(ua,JSON.stringify(n))}catch(n){console.error("[SettingsManager] Failed to save settings:",n)}}function va(){try{return localStorage.getItem(ca)||""}catch(t){return console.error("[SettingsManager] Failed to load custom CSS:",t),""}}function ha(t){try{t?localStorage.setItem(ca,t):localStorage.removeItem(ca)}catch(n){console.error("[SettingsManager] Failed to save custom CSS:",n)}}function ga(t){const n=document.getElementById("book-viewer-custom-css");if(n&&n.remove(),!t||""===t.trim())return null;const e=document.createElement("style");return e.id="book-viewer-custom-css",e.textContent=t,document.head.appendChild(e),e}function ba(){const t=document.getElementById("book-viewer-custom-css");t&&t.remove(),localStorage.removeItem(ca)}var ma=yr('<div class="risu-chat"><div class="book-viewer-root chat-message-container"><!> <!> <!> <!> <!></div></div>');function ya(t,n){Ht(n,!0);let e=$o(n,"chatHtml",7,""),r=$o(n,"chatIndex",3,0),o=$o(n,"chatPage",3,0),i=$o(n,"chaId",3,null),a=$o(n,"initialLoading",3,!1),l=Mn(Fn([])),s=Mn(0),u=Mn(Fn({fontSize:17,lineHeight:1.5,theme:"dark",fontFamily:"ë‚˜ëˆ”ìŠ¤í€˜ì–´ë„¤ì˜¤"})),c=Mn(Fn({thumbnailUrl:"",name:"",chatIndex:0,buttons:[]})),f=Mn(Fn([])),d=Mn(Fn(new Map)),p=Mn(Fn([])),v=Mn(!1),h=Mn(""),g=Mn(null),b=Mn(""),m=Mn(Fn({position:0,total:0,isFirst:!0,isLast:!0})),y=Mn(Fn([])),w=Mn(!1),x=Mn(""),_=Mn(!1),k=Mn("");ie(()=>{$n(w,a()),$n(x,a()?"Loading...":"",!0)});let C=new Ji({splittableTags:["p"]}),S=Mn(null),E=Mn(null),z=null,j=null,A=null,M=null,N=xn(()=>Math.ceil(Ke(l).length/2)),$=xn(()=>2*Ke(s)),I=xn(()=>2*Ke(s)+1),P=xn(()=>Ke(l)[Ke($)]||""),L=xn(()=>Ke(l)[Ke(I)]||""),T=xn(()=>Ke(l)[Ke($)]?Ke($)+1:0),F=xn(()=>Ke(l)[Ke(I)]?Ke(I)+1:0),B=xn(()=>0===Ke(s)),R=xn(()=>Ke(I)>=Ke(l).length-1);function O(){$n(y,bi(),!0),$n(m,yi(r()),!0)}async function W(){if(!e())return;$n(b,e(),!0);const t=(new DOMParser).parseFromString(e(),"text/html");$n(c,ra(t),!0),Ke(c).chatIndex=r();const n=gi(r());n&&(Ke(c).buttons=oa(n),$n(p,ia(n),!0),$n(d,aa(n),!0)),$n(f,la(t),!0);const o=t.querySelector(".chattext");o&&(ta(o),$n(g,o.cloneNode(!0),!0),await sa(),await q(),Ke(w)&&setTimeout(()=>{$n(w,!1),$n(x,"")},100))}async function q(){if(!Ke(g))return;const t=document.querySelector(".book-viewer-root .text-content");if(!t){await sa();if(!document.querySelector(".book-viewer-root .text-content"))return}const n=Zi(t||document.body);document.body.appendChild(n);try{$n(l,na(Ke(g).cloneNode(!0),n,C),!0)}finally{document.body.removeChild(n)}}function D(){z&&clearTimeout(z),z=setTimeout(()=>{!async function(){if(!Ke(g))return;const t=2*Ke(s);$n(l,[],!0),$n(s,0),await sa(),await q();const n=Math.max(0,Math.ceil(Ke(l).length/2)-1);$n(s,Math.min(Math.floor(t/2),n),!0)}()},300)}function H(){const t=gi(r());if(t){const n=t.outerHTML;n!==Ke(b)&&($n(b,n,!0),e(n),W())}}function U(t){$n(k,t,!0),$n(_,!0)}function V(){Ke(I)>=Ke(l).length-1?K():Pn(s)}function G(){0!==Ke(s)?Pn(s,-1):Y()}function Y(){const{index:t,isFirst:n}=mi(r(),"prev");null!==t?Ca(t,!1,!0):n&&U("í˜„ìž¬ ì±„íŒ…ì˜ ì²« ë²ˆì§¸ íŽ˜ì´ì§€ìž…ë‹ˆë‹¤")}function K(){const{index:t,isLast:n}=mi(r(),"next");null!==t?Ca(t,!1,!0):n&&U("í˜„ìž¬ ì±„íŒ…ì˜ ë§ˆì§€ë§‰ íŽ˜ì´ì§€ìž…ë‹ˆë‹¤")}ie(()=>{Ke(E)&&(Ke(E).style.setProperty("--bv-font-size",`${Ke(u).fontSize}px`),Ke(E).style.setProperty("--bv-line-height",String(Ke(u).lineHeight)),Ke(E).style.setProperty("--bv-font-family",Ke(u).fontFamily),Ke(E).style.setProperty("--risu-font-family",Ke(u).fontFamily),Ke(E).setAttribute("data-theme",Ke(u).theme))}),Io(async()=>{$n(u,da(),!0),$n(h,va(),!0),Ke(h)&&ga(Ke(h)),O(),await sa(),await W(),j=setInterval(H,1e3);const t=Bo.getInstance();A=t.subscribeToChar(t=>({chatPage:null==t?void 0:t.chatPage,chaId:null==t?void 0:t.chaId}),t=>{t.chatPage===o()&&t.chaId===i()||(console.log("[PCBookViewer] Chat page or character changed, reloading..."),Ca(null,!1))},500),M=t.subscribeToChar(t=>{var n,e,r;return null==(r=null==(e=null==(n=null==t?void 0:t.chats)?void 0:n[t.chatPage])?void 0:e.message)?void 0:r.length},t=>{const n=bi();if(n.length!==Ke(y).length){const t=n.filter(t=>!Ke(y).includes(t));t.length>0&&console.log("[PCBookViewer] New chat indices detected:",t),$n(y,n,!0),O()}},1e3)}),Po(()=>{z&&clearTimeout(z),j&&clearInterval(j),A&&A(),M&&M();const t=document.getElementById("book-viewer-custom-css");t&&t.remove()});var Q=ma();pr("keydown",On,function(t){var e;if(Ke(v))"Escape"===t.key&&$n(v,!1);else{if("Escape"!==t.key){const t=document.activeElement;if(t&&("TEXTAREA"===t.tagName||"INPUT"===t.tagName||t.isContentEditable))return;const n=window.getSelection();if(n&&n.toString().length>0)return}"ArrowRight"===t.key||"PageDown"===t.key||" "===t.key?(t.preventDefault(),V()):"ArrowLeft"===t.key||"PageUp"===t.key?(t.preventDefault(),G()):"Escape"===t.key&&(null==(e=n.onClose)||e.call(n))}}),pr("resize",On,function(){D()});var X=Yn(Q),J=Yn(X);Ai(J,{get thumbnailUrl(){return Ke(c).thumbnailUrl},get name(){return Ke(c).name},get chatIndex(){return Ke(c).chatIndex},get buttons(){return Ke(c).buttons},get chatIndexPosition(){return Ke(m)},onPrevChat:Y,onNextChat:K,get onClose(){return n.onClose}});var Z=Qn(J,2);!function(t,n){Ht(n,!0);let e=$o(n,"leftContent",3,""),r=$o(n,"rightContent",3,""),o=$o(n,"leftPageNum",3,0),i=$o(n,"rightPageNum",3,0),a=$o(n,"leftContentRef",7,null);$o(n,"rightContentRef",3,null);let l=$o(n,"isLoading",3,!1),s=$o(n,"loadingMessage",3,""),u=$o(n,"liveContentButtons",19,()=>[]),c=Mn(null),f=Mn(null);ie(()=>{Ke(c)&&(Ke(c).innerHTML=e(),u().length>0&&Ei(Ke(c),u()))}),ie(()=>{Ke(f)&&(Ke(f).innerHTML=r(),u().length>0&&Ei(Ke(f),u()))}),ie(()=>{Ke(c)&&a()!==Ke(c)&&a(Ke(c))});var d=Ri(),p=Yn(d);p.__click=function(...t){var e;null==(e=n.onPrevPage)||e.apply(this,t)};var v=Qn(p,2);v.__click=function(...t){var e;null==(e=n.onNextPage)||e.apply(this,t)};var h=Qn(v,2),g=Yn(h),b=Yn(g);Co(b,t=>$n(c,t),()=>Ke(c));var m=Qn(b,2),y=t=>{var n=Fi(),e=Yn(n);ue(()=>Er(e,o())),kr(t,n)};$r(m,t=>{o()>0&&t(y)});var w=Qn(h,4),x=Yn(w),_=Yn(x);Co(_,t=>$n(f,t),()=>Ke(f));var k=Qn(_,2),C=t=>{var n=Bi(),e=Yn(n);ue(()=>Er(e,i())),kr(t,n)};$r(k,t=>{i()>0&&t(C)}),Ti(Qn(w,2),{get visible(){return l()},get message(){return s()}}),kr(t,d),Ut()}(Z,{get leftContent(){return Ke(P)},get rightContent(){return Ke(L)},get leftPageNum(){return Ke(T)},get rightPageNum(){return Ke(F)},onPrevPage:G,onNextPage:V,get isLoading(){return Ke(w)},get loadingMessage(){return Ke(x)},get liveContentButtons(){return Ke(p)},get leftContentRef(){return Ke(S)},set leftContentRef(t){$n(S,t,!0)}});var tt=Qn(Z,2);Gi(tt,{get currentSpread(){return Ke(s)},get totalSpreads(){return Ke(N)},onPrev:G,onNext:V,get prevDisabled(){return Ke(B)},get nextDisabled(){return Ke(R)},get settings(){return Ke(u)},onSettingsChange:function(t){$n(u,t,!0),pa(Ke(u)),D()},onOpenCustomCss:function(){$n(v,!0)},get lbModules(){return Ke(f)},onLBModuleClick:function(t){const n=t.dataId||t.risuBtn;if(n&&Ke(d).has(n)){const t=Ke(d).get(n),e=new MouseEvent("click",{bubbles:!0,cancelable:!0});t.dispatchEvent(e)}}});var nt=Qn(tt,2);!function(t,n){Ht(n,!0);let e=$o(n,"isOpen",3,!1),r=$o(n,"initialCss",3,""),o=Mn("");ie(()=>{e()&&$n(o,r()||Yi,!0)});var i=Ki();let a;pr("keydown",On,function(t){var e;"Escape"===t.key&&(null==(e=n.onClose)||e.call(n))}),i.__click=function(t){var e;t.target===t.currentTarget&&(null==(e=n.onClose)||e.call(n))};var l=Yn(i),s=Yn(l);Qn(Yn(s),2).__click=function(...t){var e;null==(e=n.onClose)||e.apply(this,t)};var u=Qn(s,2),c=Yn(u),f=Yn(Qn(u,2));f.__click=function(){var t;$n(o,Yi,!0),null==(t=n.onReset)||t.call(n)},Qn(f,2).__click=function(){var t;null==(t=n.onApply)||t.call(n,Ke(o))},ue(()=>a=eo(i,1,"modal-overlay",null,a,{active:e()})),wo(c,()=>Ke(o),t=>$n(o,t)),kr(t,i),Ut()}(nt,{get isOpen(){return Ke(v)},get initialCss(){return Ke(h)},onApply:function(t){$n(h,t,!0),ha(t),ga(t),$n(v,!1),D()},onReset:function(){$n(h,""),ba(),D()},onClose:()=>$n(v,!1)}),Xi(Qn(nt,2),{get message(){return Ke(k)},get visible(){return Ke(_)},duration:2e3,onHide:function(){$n(_,!1),$n(k,"")}}),Co(X,t=>$n(E,t),()=>Ke(E)),ue(()=>{ho(Q,"data-chat-index",r()),ho(Q,"data-chat-page",o()),ho(Q,"data-char-id",i()),ho(X,"data-theme",Ke(u).theme)}),kr(t,Q),Ut()}let wa=null;const xa="pc-book-viewer",_a="pc-viewer";let ka=null;function Ca(t=null,n=!0,e=!1){if(Ho(xa)&&(Sa(),n))return!0;const r=Bo.getInstance();let o=r.getDatabase(),i=di.cloneDeep(o.theme),a=di.cloneDeep(o.customCSS);o.theme="",o.customCSS="";try{const n=null!=t?Number(t):r.getLastChatIndex()-1,l=gi(n);if(!l)return console.warn("[PCViewer] Chat element not found for index:",n),!1;const s=vi(pi.chatScreen.displayContainer);if(!s)return console.warn("[PCViewer] Display container not found"),!1;ka=s,Uo(s,{overflow:"hidden"},_a);Uo(vi(pi.chatScreen.root),{overflow:"hidden"},_a);const u=qo({id:xa,component:ya,target:s,props:{chatHtml:l.outerHTML,chatIndex:n,chatPage:r.getCurrentChatPage(),chaId:r.getChaId(),onClose:Sa,initialLoading:e},useContents:!1});return o.theme=i,o.customCSS=a,!!u}catch(l){return o.theme=i,o.customCSS=a,console.error("[PCViewer] Failed to open:",l),!1}}function Sa(){if(ka){Vo(ka,_a);Vo(vi(pi.chatScreen.root),_a),ka=null}return Do(xa)}async function Ea(t=null,n=!0,e=!1){if(function(){const t=window.innerWidth<=768,n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),e="ontouchstart"in window||navigator.maxTouchPoints>0;return t||n&&e}()){return(await async function(){return wa||(wa=await Promise.resolve().then(()=>fl)),wa}()).openMobileViewer(t,n,e)}return Ca(t,n,e)}var za=yr('<button class="flex justify-center border-y border-darkborderc items-center text-gray-100 p-3 peer-focus:border-textcolor hover:bg-blue-500 transition-colors button-icon-ebook" title="ì´ë¶ ë¦¬ìˆ˜ ê¸°ë¦½í•˜ì‹œì˜¤"><!></button>');function ja(t,n){Ht(n,!0);let e=Mn("44px");Io(()=>{const t=vi(pi.chatScreen.textarea);t&&$n(e,`${t.scrollHeight}px`)});var r=za();let o;r.__click=async function(t){t.stopPropagation(),await Ea()},function(t,n){const e=Ao(n,["children","$$slots","$$events","$$legacy"]),r=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}]];_i(t,No({name:"book"},()=>e,{get iconNode(){return r},children:(t,e)=>{var r=_r();Or(Kn(r),n,"default",{}),kr(t,r)},$$slots:{default:!0}}))}(Yn(r),{}),ue(()=>o=oo(r,"",o,{height:Ke(e)})),kr(t,r),Ut()}vr(["click"]);var Aa=yr('<button class="ml-2 hover:text-blue-500 transition-colors button-small-book" title="ì´ë¶ ë·°ì–´ë¡œ ë³´ê¸°"><!></button>');function Ma(t,n){Ht(n,!0);var e=Aa();e.__click=async function(t){t.stopPropagation(),await Ea(n.chatIndex)},function(t,n){const e=Ao(n,["children","$$slots","$$events","$$legacy"]),r=[["path",{d:"M12 7v14"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"}]];_i(t,No({name:"book-open"},()=>e,{get iconNode(){return r},children:(t,e)=>{var r=_r();Or(Kn(r),n,"default",{}),kr(t,r)},$$slots:{default:!0}}))}(Yn(e),{size:20}),kr(t,e),Ut()}function Na(t,n){Ht(n,!0);let e=Mn(null),r=Mn(null);const o=di.debounce(function(){const t=vi(pi.chatScreen.inputContainer),n=vi(pi.chatScreen.sendButton);di.isNil(t)||qo({id:"book-button",component:ja,target:t,anchor:n});const e=hi(pi.chatMessage.botButtonDiv);di.isNil(e)||e.forEach(t=>{qo({id:"small-book-button",component:Ma,target:t,anchor:vi(pi.chatMessage.copyButton,t),props:{chatIndex:function({node:t,maxDepth:n=10}){var e;return t&&t instanceof Node?(t instanceof Element||t.parentElement,null==(e=t.closest(".risu-chat").dataset)?void 0:e.chatIndex):null}({node:t})}})});vi(pi.chatScreen.burgerMenu)},100);Io(()=>{$n(e,Bo.getInstance(),!0),di.isNil(Ke(e))?console.log(`[${Lo}] RisuAPI is not initialized`):(!function(){di.isNil(Ke(r))||Ke(r).disconnect();$n(r,new MutationObserver(()=>{o()}),!0),Ke(r).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]}),o()}(),console.log(`[${Lo}] plugin loaded`))}),Po(()=>{di.isNil(Ke(r))||Ke(r).disconnect(),Do("book-button"),o.cancel(),console.log(`${Lo} ì–¸ë¡œë“œ`)}),Ut()}vr(["click"]),(async()=>{try{const t=Bo.getInstance(globalThis.__pluginApis__);if(!(await t.initialize()))return void console.error(`[${Lo}] Failed to initialize RisuAPI`);ai({silent:!0}).catch(t=>{console.warn("[App] Update check failed:",t)});const n=document.createElement("div");n.id=`${Lo}-root`,document.body.appendChild(n);const e=zr(Na,{target:n});console.log(`${Lo} v${To} loaded`),t.onUnload(()=>{Mr(e),n.remove()})}catch(t){console.error(`[${Lo}] Initialization failed:`,t)}})();var $a=yr('<div class="header-thumbnail svelte-1p1awwn"></div>'),Ia=yr('<div class="header-thumbnail svelte-1p1awwn"></div>'),Pa=yr('<span class="chat-position svelte-1p1awwn"> </span>'),La=xr('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1p1awwn"><path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"></path></svg>'),Ta=xr('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1p1awwn"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path></svg>'),Fa=yr('<button class="header-toggle-btn lb-btn svelte-1p1awwn" title="LB ëª¨ë“ˆ">LB</button>'),Ba=yr('<header class="reader-header svelte-1p1awwn"><div class="header-row header-row-top svelte-1p1awwn"><button class="header-btn back-btn svelte-1p1awwn" title="ë’¤ë¡œ"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1p1awwn"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg></button> <div class="header-bot-info svelte-1p1awwn"><!> <span class="header-bot-name svelte-1p1awwn"> </span></div> <div class="header-chat-nav svelte-1p1awwn"><button class="nav-chat-btn svelte-1p1awwn" title="ì´ì „ ì±„íŒ…"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="15 18 9 12 15 6"></polyline></svg></button> <span class="header-chat-index svelte-1p1awwn"> <!></span> <button class="nav-chat-btn svelte-1p1awwn" title="ë‹¤ìŒ ì±„íŒ…"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="9 18 15 12 9 6"></polyline></svg></button></div></div> <div class="header-row header-row-bottom svelte-1p1awwn"><div class="header-action-buttons svelte-1p1awwn"></div> <div class="header-right-group svelte-1p1awwn"><button><!></button> <!> <button class="header-toggle-btn settings-btn svelte-1p1awwn" title="ì„¤ì •">ì„¤ì •</button></div></div></header>');const Ra={hash:"svelte-1p1awwn",code:".reader-header.svelte-1p1awwn {display:flex;flex-direction:column;background:var(--mv-header-bg, rgba(26, 31, 53, 0.97));backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-bottom:1px solid var(--mv-border-color, rgba(201, 166, 107, 0.2));z-index:100;flex-shrink:0;}.header-row.svelte-1p1awwn {display:flex;align-items:center;padding:0 12px;}.header-row-top.svelte-1p1awwn {justify-content:space-between;padding-top:10px;padding-bottom:6px;}.header-row-bottom.svelte-1p1awwn {justify-content:space-between;padding-top:4px;padding-bottom:10px;border-top:1px solid rgba(255, 255, 255, 0.06);}.header-btn.svelte-1p1awwn {background:none;border:none;color:rgba(255, 255, 255, 0.85);padding:8px;cursor:pointer;border-radius:10px;transition:all\n      var(--mv-transition-fast, 0.15s cubic-bezier(0.4, 0, 0.2, 1));display:flex;align-items:center;justify-content:center;flex-shrink:0;min-width:44px;min-height:44px;}.header-btn.svelte-1p1awwn:active {background:rgba(201, 166, 107, 0.2);color:var(--mv-accent-color, #c9a66b);transform:scale(0.95);}.header-btn.svelte-1p1awwn svg:where(.svelte-1p1awwn) {width:20px;height:20px;}\n\n  /* ë´‡ ì •ë³´ */.header-bot-info.svelte-1p1awwn {display:flex;align-items:center;gap:10px;flex:1;min-width:0;justify-content:center;}.header-thumbnail.svelte-1p1awwn {width:32px;height:32px;min-width:32px;border-radius:8px;background-size:cover;background-position:center;background-color:rgba(255, 255, 255, 0.1);box-shadow:0 2px 6px rgba(0, 0, 0, 0.2);}.header-bot-name.svelte-1p1awwn {font-size:14px;font-weight:600;color:var(--mv-accent-color, #c9a66b);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:150px;}\n\n  /* ì±„íŒ… ë„¤ë¹„ê²Œì´ì…˜ */.header-chat-nav.svelte-1p1awwn {display:flex;align-items:center;gap:4px;}.nav-chat-btn.svelte-1p1awwn {background:none;border:none;color:rgba(255, 255, 255, 0.6);padding:6px;cursor:pointer;border-radius:6px;transition:all\n      var(--mv-transition-fast, 0.15s cubic-bezier(0.4, 0, 0.2, 1));display:flex;align-items:center;justify-content:center;min-width:28px;min-height:28px;}.nav-chat-btn.svelte-1p1awwn:active:not(:disabled) {background:rgba(201, 166, 107, 0.2);color:var(--mv-accent-color, #c9a66b);}.nav-chat-btn.svelte-1p1awwn:disabled {opacity:0.3;cursor:not-allowed;}.header-chat-index.svelte-1p1awwn {font-size:12px;font-weight:500;color:rgba(255, 255, 255, 0.6);background:rgba(255, 255, 255, 0.08);padding:4px 8px;border-radius:8px;display:flex;align-items:center;gap:4px;}.chat-position.svelte-1p1awwn {font-size:10px;opacity:0.7;}\n\n  /* ì•¡ì…˜ ë²„íŠ¼ë“¤ */.header-action-buttons.svelte-1p1awwn {display:flex;align-items:center;gap:2px;}.header-action-buttons.svelte-1p1awwn button,\n  .header-action-buttons.svelte-1p1awwn .header-action-btn {background:none;border:none;padding:6px;cursor:pointer;color:rgba(255, 255, 255, 0.6);border-radius:8px;transition:all\n      var(--mv-transition-fast, 0.15s cubic-bezier(0.4, 0, 0.2, 1));display:flex;align-items:center;justify-content:center;min-width:36px;min-height:36px;}.header-action-buttons.svelte-1p1awwn button:active,\n  .header-action-buttons.svelte-1p1awwn .header-action-btn:active {background:rgba(201, 166, 107, 0.2);color:var(--mv-accent-color, #c9a66b);}.header-action-buttons.svelte-1p1awwn button svg,\n  .header-action-buttons.svelte-1p1awwn .header-action-btn svg {width:18px;height:18px;}\n\n  /* ìš°ì¸¡ ê·¸ë£¹ */.header-right-group.svelte-1p1awwn {display:flex;align-items:center;gap:8px;}.header-toggle-btn.svelte-1p1awwn {background:rgba(255, 255, 255, 0.1);border:1px solid rgba(255, 255, 255, 0.2);color:var(--mv-accent-color, #c9a66b);padding:4px 10px;font-size:11px;font-weight:700;border-radius:8px;cursor:pointer;transition:all\n      var(--mv-transition-fast, 0.15s cubic-bezier(0.4, 0, 0.2, 1));min-height:32px;}.header-toggle-btn.svelte-1p1awwn:active {background:var(--mv-accent-color, #c9a66b);color:white;transform:scale(0.95);}.header-toggle-btn.active.svelte-1p1awwn {background:var(--mv-accent-color, #c9a66b);color:white;border-color:var(--mv-accent-color, #c9a66b);}.fullscreen-btn.svelte-1p1awwn {display:flex;align-items:center;justify-content:center;padding:4px 8px;}.fullscreen-btn.svelte-1p1awwn svg:where(.svelte-1p1awwn) {flex-shrink:0;}\n\n  /* Safe Area */\n  @supports (padding-top: env(safe-area-inset-top)) {.header-row-top.svelte-1p1awwn {padding-top:max(10px, env(safe-area-inset-top));}\n  }"};vr(["click"]);var Oa=yr('<span class="page-number svelte-1slpgjp"> </span>'),Wa=yr('<div class="page-container svelte-1slpgjp"><div class="page-content svelte-1slpgjp"><div class="text-content chattext svelte-1slpgjp"><!></div> <!></div> <button class="touch-area touch-left svelte-1slpgjp" aria-label="ì´ì „ íŽ˜ì´ì§€"></button> <button class="touch-area touch-right svelte-1slpgjp" aria-label="ë‹¤ìŒ íŽ˜ì´ì§€"></button> <!></div>');const qa={hash:"svelte-1slpgjp",code:".page-container.svelte-1slpgjp {flex:1;overflow:hidden;position:relative;background:var(--mv-page-color, #fdfbf7);margin:10px;border-radius:12px;box-shadow:var(--mv-shadow-medium, 0 4px 24px rgba(0, 0, 0, 0.12)),\n                var(--mv-shadow-glow, 0 0 20px rgba(201, 166, 107, 0.15));touch-action:pan-y;}\n\n  /* ì¢…ì´ ì§ˆê° íš¨ê³¼ */.page-container.svelte-1slpgjp::before {content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.02'/%3E%3C/svg%3E\");pointer-events:none;z-index:1;border-radius:12px;}.page-content.svelte-1slpgjp {width:100%;height:100%;display:flex;flex-direction:column;padding:28px 24px;overflow:hidden;position:relative;z-index:2;}.text-content.svelte-1slpgjp {flex:1;font-size:var(--mv-font-size, 17px);line-height:var(--mv-line-height, 1.85);font-family:var(--mv-font-family, 'Pretendard', sans-serif);color:var(--mv-text-color, #2c2c2c);word-break:keep-all;letter-spacing:-0.01em;overflow:hidden;}\n\n  /* í…ìŠ¤íŠ¸ í¬ë§·íŒ… */.text-content.svelte-1slpgjp p {margin-bottom:1.3em;}.text-content.svelte-1slpgjp p:first-child {text-indent:0;}.text-content.svelte-1slpgjp h1,\n  .text-content.svelte-1slpgjp h2,\n  .text-content.svelte-1slpgjp h3 {margin:1.8em 0 0.8em;text-indent:0;font-weight:600;color:#1a1a1a;letter-spacing:-0.02em;}.text-content.svelte-1slpgjp h1 {font-size:1.6em;border-bottom:2px solid var(--mv-accent-color, #c9a66b);padding-bottom:0.4em;}.text-content.svelte-1slpgjp mark {background:linear-gradient(\n      120deg,\n      rgba(201, 166, 107, 0.2) 0%,\n      rgba(201, 166, 107, 0.3) 100%\n    );color:inherit;padding:0.1em 0.2em;border-radius:3px;}.text-content.svelte-1slpgjp img {max-width:100%;height:auto;margin:1.2em 0;border-radius:8px;box-shadow:var(--mv-shadow-soft, 0 2px 12px rgba(0, 0, 0, 0.08));}\n\n  /* íŽ˜ì´ì§€ ë²ˆí˜¸ */.page-number.svelte-1slpgjp {position:absolute;bottom:12px;right:16px;font-size:11px;color:var(--mv-text-secondary, #6b6b6b);opacity:0.6;z-index:3;}\n\n  /* í„°ì¹˜ ì˜ì—­ */.touch-area.svelte-1slpgjp {position:absolute;top:0;bottom:0;width:28%;z-index:50;background:transparent;border:none;cursor:pointer;-webkit-tap-highlight-color:transparent;}.touch-left.svelte-1slpgjp {left:0;}.touch-right.svelte-1slpgjp {right:0;}\n\n  /* ë°˜ì‘í˜• */\n  @media (min-width: 600px) and (orientation: landscape) {.page-container.svelte-1slpgjp {margin:12px 20px;}.page-content.svelte-1slpgjp {padding:36px 48px;}.text-content.svelte-1slpgjp {max-width:720px;margin:0 auto;font-size:18px;}\n  }\n\n  @media (min-width: 768px) {.page-container.svelte-1slpgjp {margin:16px 24px;border-radius:16px;}.page-content.svelte-1slpgjp {padding:40px 56px;}.text-content.svelte-1slpgjp {max-width:800px;font-size:18px;line-height:1.9;}\n  }"};function Da(t,n){Ht(n,!0),Kr(t,qa);let e=$o(n,"content",3,""),r=$o(n,"pageNum",3,0);$o(n,"totalPages",3,0);let o=$o(n,"onPrevPage",3,()=>{}),i=$o(n,"onNextPage",3,()=>{}),a=$o(n,"isLoading",3,!1),l=$o(n,"loadingMessage",3,""),s=$o(n,"liveContentButtons",19,()=>[]),u=Mn(null);ie(()=>{Ke(u)&&e()&&s().length>0&&requestAnimationFrame(()=>{Ei(Ke(u),s())})});var c=Wa(),f=Yn(c),d=Yn(f);!function(t,n,e=!1,r=!1){var o=t,i="";ue(()=>{var t=Me;if(i!==(i=n()??"")&&(null!==t.nodes&&(ge(t.nodes.start,t.nodes.end),t.nodes=null),""!==i)){var a=i+"";e?a=`<svg>${a}</svg>`:r&&(a=`<math>${a}</math>`);var l=br(a);if((e||r)&&(l=Vn(l)),mr(Vn(l),l.lastChild),e||r)for(;Vn(l);)o.before(Vn(l));else o.before(l)}})}(Yn(d),e),Co(d,t=>$n(u,t),()=>Ke(u));var p=Qn(d,2),v=t=>{var n=Oa(),e=Yn(n);ue(()=>Er(e,r())),kr(t,n)};$r(p,t=>{r()>0&&t(v)});var h=Qn(f,2);h.__click=function(){o()()};var g=Qn(h,2);g.__click=function(){i()()},Ti(Qn(g,2),{get visible(){return a()},get message(){return l()}}),kr(t,c),Ut()}vr(["click"]);var Ha=yr('<footer class="reader-footer svelte-kw5zf1"><button class="nav-btn prev-btn svelte-kw5zf1" title="ì´ì „"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-kw5zf1"><polyline points="15 18 9 12 15 6"></polyline></svg></button> <div class="page-info svelte-kw5zf1"><span class="page-indicator svelte-kw5zf1"> </span> <div class="progress-bar svelte-kw5zf1"><div class="progress-fill svelte-kw5zf1"></div></div></div> <button class="nav-btn next-btn svelte-kw5zf1" title="ë‹¤ìŒ"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-kw5zf1"><polyline points="9 18 15 12 9 6"></polyline></svg></button></footer>');const Ua={hash:"svelte-kw5zf1",code:".reader-footer.svelte-kw5zf1 {display:flex;align-items:center;justify-content:space-between;padding:14px 16px;background:var(--mv-footer-bg, rgba(253, 251, 247, 0.98));backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-top:1px solid rgba(201, 166, 107, 0.15);gap:16px;flex-shrink:0;}.nav-btn.svelte-kw5zf1 {background:none;border:2px solid var(--mv-accent-color, #c9a66b);color:var(--mv-accent-color, #c9a66b);padding:12px;cursor:pointer;border-radius:50%;transition:all var(--mv-transition-fast, 0.15s cubic-bezier(0.4, 0, 0.2, 1));display:flex;align-items:center;justify-content:center;min-width:50px;min-height:50px;}.nav-btn.svelte-kw5zf1 svg:where(.svelte-kw5zf1) {width:22px;height:22px;transition:transform var(--mv-transition-fast, 0.15s cubic-bezier(0.4, 0, 0.2, 1));}.nav-btn.svelte-kw5zf1:active:not(:disabled) {background:var(--mv-accent-color, #c9a66b);color:white;transform:scale(0.95);}.nav-btn.svelte-kw5zf1:active:not(:disabled) svg:where(.svelte-kw5zf1) {transform:scale(0.9);}.nav-btn.svelte-kw5zf1:disabled {opacity:0.25;border-color:#ccc;color:#999;cursor:not-allowed;}.page-info.svelte-kw5zf1 {flex:1;display:flex;flex-direction:column;gap:10px;}.page-indicator.svelte-kw5zf1 {font-size:14px;font-weight:600;color:var(--mv-text-color, #2c2c2c);text-align:center;letter-spacing:0.03em;}.progress-bar.svelte-kw5zf1 {width:100%;height:5px;background:rgba(201, 166, 107, 0.2);border-radius:3px;overflow:hidden;}.progress-fill.svelte-kw5zf1 {height:100%;background:linear-gradient(90deg, var(--mv-accent-color, #c9a66b) 0%, #d4b87a 100%);border-radius:3px;transition:width var(--mv-transition-smooth, 0.3s cubic-bezier(0.4, 0, 0.2, 1));box-shadow:0 0 8px rgba(201, 166, 107, 0.5);}\n\n  /* Safe Area */\n  @supports (padding-bottom: env(safe-area-inset-bottom)) {.reader-footer.svelte-kw5zf1 {padding-bottom:max(14px, env(safe-area-inset-bottom));}\n  }"};vr(["click"]);var Va=yr("<button> </button>"),Ga=yr('<div class="settings-panel active"><div class="panel-overlay"></div>  <div class="panel-content"><div class="panel-header"><h3>ì„¤ì •</h3> <button class="panel-close">âœ•</button></div> <div class="panel-body"><div class="setting-item"><label for="fontSelector">í°íŠ¸</label> <div class="font-selector" id="fontSelector"></div></div> <div class="setting-item"><label for="fontSize">ê¸€ìž í¬ê¸°</label> <div class="range-control"><span class="range-label">ìž‘ê²Œ</span> <input name="fontSize" type="range" min="14" max="20" step="1"/> <span class="range-label">í¬ê²Œ</span></div> <span class="setting-value"> </span></div> <div class="setting-item"><label for="lineHeight">ì¤„ ê°„ê²©</label> <div class="range-control"><span class="range-label">ì¢ê²Œ</span> <input type="range" name="lineHeight" min="1.4" max="2.2" step="0.1"/> <span class="range-label">ë„“ê²Œ</span></div> <span class="setting-value"> </span></div> <div class="setting-item"><label for="themeButtons">í…Œë§ˆ</label> <div class="theme-buttons" id="themeButtons"><button><span class="theme-preview light"></span> ë°ê²Œ</button> <button><span class="theme-preview sepia"></span> ì„¸í”¼ì•„</button> <button><span class="theme-preview dark"></span> ì–´ë‘¡ê²Œ</button></div></div> <div class="setting-item"><button class="custom-css-btn">ì‚¬ìš©ìž CSS íŽ¸ì§‘</button></div></div></div></div>');function Ya(t,n){Ht(n,!0);let e=$o(n,"isOpen",3,!1),r=$o(n,"settings",19,()=>({fontSize:17,lineHeight:1.85,theme:"dark",fontFamily:"Pretendard"})),o=$o(n,"onSettingsChange",3,()=>{}),i=$o(n,"onOpenCustomCss",3,()=>{}),a=$o(n,"onClose",3,()=>{});const l=["Pretendard","ë‚˜ëˆ”ìŠ¤í€˜ì–´ë„¤ì˜¤","ì—ìŠ¤ì½”ì–´ë“œë¦¼","ë ˆíŽ˜ë¦¬í¬ì¸íŠ¸","í”Œë ‰ìŠ¤","ìŠ¤ìœ„íŠ¸","ì˜¤ë¥´ë¹—","ìŠ¤ì¿¨ì˜¤ë¥´ë¹—","í”„ë¦¬í‹°ë‚˜ìž‡","ì„œë¼ìš´ë“œì—ì–´","ê³ ìš´ë‹ì›€","ê³ ìš´ë°”íƒ•","ë¦¬ë””ë°”íƒ•","ë§ˆë£¨ë¶€ë¦¬","ë„ìŠ¤ê³ ë”•","ìŠ¤íƒ€ë”ìŠ¤íŠ¸","í”½ì‹œë“œì‹œìŠ¤","ë„¤ì˜¤ë‘¥ê·¼ëª¨"];function s(t){o()({...r(),fontSize:Number(t.target.value)})}function u(t){o()({...r(),lineHeight:Number(t.target.value)})}function c(t){o()({...r(),theme:t})}function f(){a()()}function d(t){t.stopPropagation()}var p=_r(),v=Kn(p),h=t=>{var n=Ga(),e=Yn(n);e.__click=f;var p=Qn(e,2);p.__click=d;var v=Yn(p);Qn(Yn(v),2).__click=function(...t){var n;null==(n=a())||n.apply(this,t)};var h=Yn(Qn(v,2));Tr(Qn(Yn(h),2),21,()=>l,Ir,(t,n)=>{var e=Va();let i;e.__click=()=>{return t=Ke(n),void o()({...r(),fontFamily:t});var t};var a=Yn(e);ue(()=>{i=eo(e,1,"font-option",null,i,{active:r().fontFamily===Ke(n)}),oo(e,`font-family: '${Ke(n)??""}'`),Er(a,Ke(n))}),kr(t,e)});var g=Qn(h,2),b=Qn(Yn(g),2),m=Qn(Yn(b),2);m.__input=s;var y=Yn(Qn(b,2)),w=Qn(g,2),x=Qn(Yn(w),2),_=Qn(Yn(x),2);_.__input=u;var k=Yn(Qn(x,2)),C=Qn(w,2),S=Qn(Yn(C),2),E=Yn(S);let z;E.__click=()=>c("light");var j=Qn(E,2);let A;j.__click=()=>c("sepia");var M=Qn(j,2);let N;M.__click=()=>c("dark"),Yn(Qn(C,2)).__click=function(...t){var n;null==(n=i())||n.apply(this,t)},ue(t=>{po(m,r().fontSize),Er(y,`${r().fontSize??""}px`),po(_,r().lineHeight),Er(k,t),z=eo(E,1,"theme-btn",null,z,{active:"light"===r().theme}),A=eo(j,1,"theme-btn",null,A,{active:"sepia"===r().theme}),N=eo(M,1,"theme-btn",null,N,{active:"dark"===r().theme})},[()=>r().lineHeight.toFixed(1)]),kr(t,n)};$r(v,t=>{e()&&t(h)}),kr(t,p),Ut()}vr(["click","input"]);var Ka=yr('<button class="lb-module-item svelte-1u46v5n"> </button>'),Qa=yr('<div class="lb-modules-list svelte-1u46v5n"></div>'),Xa=yr('<div class="lb-empty svelte-1u46v5n">ëª¨ë“ˆì´ ì—†ìŠµë‹ˆë‹¤</div>'),Ja=yr('<div class="lb-panel active svelte-1u46v5n"><div class="panel-overlay svelte-1u46v5n"></div> <div class="panel-content svelte-1u46v5n"><div class="panel-header svelte-1u46v5n"><h3 class="svelte-1u46v5n">LB ëª¨ë“ˆ</h3> <button class="panel-close svelte-1u46v5n">âœ•</button></div> <div class="panel-body svelte-1u46v5n"><!></div></div></div>');const Za={hash:"svelte-1u46v5n",code:".lb-panel.svelte-1u46v5n {position:fixed;top:0;left:0;width:100%;height:100%;z-index:200;display:none;}.lb-panel.active.svelte-1u46v5n {display:block;}.panel-overlay.svelte-1u46v5n {position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0, 0, 0, 0.6);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);}.panel-content.svelte-1u46v5n {position:absolute;bottom:0;left:0;width:100%;background:var(--mv-page-color, #fdfbf7);border-radius:24px 24px 0 0;max-height:60%;overflow-y:auto;\n    animation: svelte-1u46v5n-slideUp 0.35s cubic-bezier(0.4, 0, 0.2, 1);box-shadow:0 -8px 32px rgba(0, 0, 0, 0.2);}\n\n  @keyframes svelte-1u46v5n-slideUp {\n    from {\n      transform: translateY(100%);\n    }\n    to {\n      transform: translateY(0);\n    }\n  }.panel-header.svelte-1u46v5n {display:flex;align-items:center;justify-content:space-between;padding:24px 24px 20px;border-bottom:1px solid rgba(201, 166, 107, 0.2);position:sticky;top:0;background:var(--mv-page-color, #fdfbf7);z-index:10;}.panel-header.svelte-1u46v5n h3:where(.svelte-1u46v5n) {font-size:18px;font-weight:700;color:var(--mv-text-color, #2c2c2c);letter-spacing:-0.02em;margin:0;}.panel-close.svelte-1u46v5n {background:none;border:none;font-size:20px;color:var(--mv-text-secondary, #6b6b6b);cursor:pointer;padding:8px 12px;border-radius:8px;transition:all var(--mv-transition-fast, 0.15s);line-height:1;}.panel-close.svelte-1u46v5n:active {background:var(--mv-accent-light, rgba(201, 166, 107, 0.15));color:var(--mv-accent-color, #c9a66b);}.panel-body.svelte-1u46v5n {padding:16px 24px 24px;}.lb-modules-list.svelte-1u46v5n {display:flex;flex-direction:column;gap:10px;}.lb-module-item.svelte-1u46v5n {padding:16px;background:rgba(201, 166, 107, 0.08);border-radius:12px;cursor:pointer;transition:all var(--mv-transition-fast, 0.15s);font-size:15px;font-weight:500;color:var(--mv-text-color, #2c2c2c);border:1px solid transparent;text-align:left;width:100%;}.lb-module-item.svelte-1u46v5n:active {background:rgba(201, 166, 107, 0.2);border-color:var(--mv-accent-color, #c9a66b);transform:scale(0.98);}.lb-empty.svelte-1u46v5n {text-align:center;color:var(--mv-text-secondary, #6b6b6b);font-size:14px;padding:20px;}\n\n  /* Safe Area */\n  @supports (padding-bottom: env(safe-area-inset-bottom)) {.panel-body.svelte-1u46v5n {padding-bottom:max(24px, env(safe-area-inset-bottom));}\n  }\n\n  /* íƒœë¸”ë¦¿ */\n  @media (min-width: 768px) {.panel-content.svelte-1u46v5n {max-width:480px;left:50%;transform:translateX(-50%);}\n\n    @keyframes svelte-1u46v5n-slideUp {\n      from {\n        transform: translateX(-50%) translateY(100%);\n      }\n      to {\n        transform: translateX(-50%) translateY(0);\n      }\n    }\n  }"};function tl(t,n){Ht(n,!0),Kr(t,Za);let e=$o(n,"isOpen",3,!1),r=$o(n,"modules",19,()=>[]),o=$o(n,"onModuleClick",3,()=>{}),i=$o(n,"onClose",3,()=>{});function a(){i()()}function l(t){t.stopPropagation()}var s=_r(),u=Kn(s),c=t=>{var n=Ja(),e=Yn(n);e.__click=a;var s=Qn(e,2);s.__click=l;var u=Yn(s);Qn(Yn(u),2).__click=function(...t){var n;null==(n=i())||n.apply(this,t)};var c=Yn(Qn(u,2)),f=t=>{var n=Qa();Tr(n,21,r,Ir,(t,n)=>{var e=Ka();e.__click=()=>function(t){o()(t),i()()}(Ke(n));var r=Yn(e);ue(t=>Er(r,t),[()=>function(t,n=30){return t?t.length>n?t.slice(0,n)+"...":t:""}(Ke(n).label)]),kr(t,e)}),kr(t,n)},d=t=>{kr(t,Xa())};$r(c,t=>{r().length>0?t(f):t(d,!1)}),kr(t,n)};$r(u,t=>{e()&&t(c)}),kr(t,s),Ut()}vr(["click"]);var nl=yr('<div class="modal-overlay svelte-1q9xlcg"><div class="modal-content svelte-1q9xlcg"><div class="modal-header svelte-1q9xlcg"><h3 class="svelte-1q9xlcg">ì‚¬ìš©ìž CSS íŽ¸ì§‘</h3> <button class="modal-close svelte-1q9xlcg">&times;</button></div> <div class="modal-body svelte-1q9xlcg"><textarea placeholder="ì—¬ê¸°ì— CSSë¥¼ ìž…ë ¥í•˜ì„¸ìš”..." spellcheck="false" class="svelte-1q9xlcg"></textarea></div> <div class="modal-footer svelte-1q9xlcg"><button class="modal-btn secondary svelte-1q9xlcg">ì´ˆê¸°í™”</button> <button class="modal-btn primary svelte-1q9xlcg">ì ìš©</button></div></div></div>');const el={hash:"svelte-1q9xlcg",code:".modal-overlay.svelte-1q9xlcg {position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0, 0, 0, 0.7);backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);z-index:300;display:flex;justify-content:center;align-items:center;padding:20px;\n    animation: svelte-1q9xlcg-fadeIn 0.25s ease;}\n\n  @keyframes svelte-1q9xlcg-fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n  }.modal-content.svelte-1q9xlcg {background:var(--mv-page-color, #fdfbf7);border-radius:16px;width:100%;max-width:500px;max-height:80vh;display:flex;flex-direction:column;box-shadow:0 20px 60px rgba(0, 0, 0, 0.4);\n    animation: svelte-1q9xlcg-modalSlideIn 0.25s ease-out;}\n\n  @keyframes svelte-1q9xlcg-modalSlideIn {\n    from {\n      opacity: 0;\n      transform: translateY(-20px) scale(0.95);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0) scale(1);\n    }\n  }.modal-header.svelte-1q9xlcg {display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid rgba(0, 0, 0, 0.1);}.modal-header.svelte-1q9xlcg h3:where(.svelte-1q9xlcg) {font-size:16px;font-weight:700;color:var(--mv-text-color, #2c2c2c);margin:0;}.modal-close.svelte-1q9xlcg {background:none;border:none;font-size:24px;color:var(--mv-text-secondary, #6b6b6b);cursor:pointer;padding:4px 8px;border-radius:6px;transition:all var(--mv-transition-fast, 0.15s);line-height:1;}.modal-close.svelte-1q9xlcg:active {background:rgba(0, 0, 0, 0.1);}.modal-body.svelte-1q9xlcg {flex:1;padding:16px 20px;overflow:auto;}.modal-body.svelte-1q9xlcg textarea:where(.svelte-1q9xlcg) {width:100%;height:200px;padding:14px;border:2px solid rgba(0, 0, 0, 0.1);border-radius:10px;font-family:'Consolas', 'Monaco', monospace;font-size:13px;line-height:1.5;resize:vertical;background:rgba(0, 0, 0, 0.02);color:var(--mv-text-color, #2c2c2c);}.modal-body.svelte-1q9xlcg textarea:where(.svelte-1q9xlcg):focus {outline:none;border-color:var(--mv-accent-color, #c9a66b);}.modal-footer.svelte-1q9xlcg {display:flex;justify-content:flex-end;gap:10px;padding:14px 20px;border-top:1px solid rgba(0, 0, 0, 0.1);}.modal-btn.svelte-1q9xlcg {padding:10px 18px;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all var(--mv-transition-fast, 0.15s);}.modal-btn.primary.svelte-1q9xlcg {background:var(--mv-accent-color, #c9a66b);color:white;border:none;}.modal-btn.primary.svelte-1q9xlcg:active {opacity:0.9;transform:scale(0.98);}.modal-btn.secondary.svelte-1q9xlcg {background:transparent;color:var(--mv-text-secondary, #6b6b6b);border:2px solid rgba(0, 0, 0, 0.15);}.modal-btn.secondary.svelte-1q9xlcg:active {background:rgba(0, 0, 0, 0.05);}"};vr(["click"]);class rl{constructor(t={}){this.splittableTags=t.splittableTags||["p","div"],this.minHeightRatio=t.minHeightRatio||.85}isSplittable(t){var n;const e=null==(n=t.tagName)?void 0:n.toLowerCase();if(!this.splittableTags.includes(e))return!1;return!t.querySelector("mark, strong, em, a, code")}splitElement(t,n,e){if(!this.isSplittable(t))return[t.cloneNode(!0)];const r=t.cloneNode(!0);n.innerHTML="",n.appendChild(r);return n.scrollHeight<=e?[t.cloneNode(!0)]:this._splitBySentence(t,n,e)}_splitBySentence(t,n,e){const r=t.tagName.toLowerCase(),o=t.innerText||t.textContent||"",i=this._splitIntoSentences(o);if(i.length<=1)return this._splitByWords(t,n,e);const a=[];let l=[];for(const s of i){const o=[...l,s].join(""),i=document.createElement(r);if(Array.from(t.attributes).forEach(t=>{i.setAttribute(t.name,t.value)}),i.textContent=o,n.innerHTML="",n.appendChild(i),n.scrollHeight<=e)l.push(s);else{if(l.length>0){const n=document.createElement(r);Array.from(t.attributes).forEach(t=>{n.setAttribute(t.name,t.value)}),n.textContent=l.join(""),a.push(n)}l=[s]}}if(l.length>0){const n=document.createElement(r);Array.from(t.attributes).forEach(t=>{n.setAttribute(t.name,t.value)}),n.textContent=l.join(""),a.push(n)}return a.length>0?a:[t.cloneNode(!0)]}_splitIntoSentences(t){return t.split(new RegExp("(?<=[.!?ã€‚ï¼ï¼Ÿ])\\s*")).filter(t=>t.length>0)}_splitByWords(t,n,e){const r=t.tagName.toLowerCase(),o=t.innerText||t.textContent||"",i=this._tokenize(o);if(0===i.length)return[t.cloneNode(!0)];const a=[];let l=0;for(;l<i.length;){let o=l+1,s=l+1;for(;o<=i.length;){const a=i.slice(l,o).join(""),u=document.createElement(r);if(Array.from(t.attributes).forEach(t=>{u.setAttribute(t.name,t.value)}),u.textContent=a,n.innerHTML="",n.appendChild(u),!(n.scrollHeight<=e))break;s=o,o++}const u=document.createElement(r);Array.from(t.attributes).forEach(t=>{u.setAttribute(t.name,t.value)}),u.textContent=i.slice(l,s).join(""),a.push(u),l=s}return a}_tokenize(t){const n=[];let e="",r=null;for(const o of t){const t=this._getCharType(o);"space"===t?(e&&(n.push(e),e=""),n.push(o)):"korean"===t?(e&&"korean"!==r&&(n.push(e),e=""),e&&n.push(e),n.push(o),e=""):(r&&r!==t&&"space"!==r&&(n.push(e),e=""),e+=o),r=t}return e&&n.push(e),n}_getCharType(t){return/\s/.test(t)?"space":/[\u3131-\uD79D]/.test(t)?"korean":/[\u3040-\u30FF]/.test(t)?"japanese":/[\u4E00-\u9FFF]/.test(t)?"chinese":/[a-zA-Z]/.test(t)?"english":/[0-9]/.test(t)?"number":"other"}static createMeasureContainer(t){const n=document.createElement("div"),e=getComputedStyle(t);return n.style.cssText=`\n      position: absolute;\n      visibility: hidden;\n      pointer-events: none;\n      width: ${t.clientWidth}px;\n      padding: ${e.padding};\n      font-size: ${e.fontSize};\n      line-height: ${e.lineHeight};\n      font-family: ${e.fontFamily};\n      overflow: hidden;\n    `,n}}var ol=yr('<div class="risu-chat"><div class="mobile-reader"><!> <!> <!> <!> <!> <!> <!></div></div>');function il(t,n){Ht(n,!0);let e=$o(n,"chatHtml",7,""),r=$o(n,"chatIndex",3,0),o=$o(n,"chatPage",3,0),i=$o(n,"chaId",3,null),a=$o(n,"initialLoading",3,!1),l=Mn(Fn([])),s=Mn(0),u=Mn(Fn({fontSize:17,lineHeight:1.85,theme:"dark",fontFamily:"Pretendard"})),c=Mn(Fn({thumbnailUrl:"",name:"",chatIndex:0,buttons:[]})),f=Mn(Fn([])),d=Mn(Fn(new Map)),p=Mn(Fn([])),v=Mn(""),h=Mn(null),g=Mn(""),b=Mn(Fn({position:0,total:0,isFirst:!0,isLast:!0})),m=Mn(Fn([])),y=Mn(!1),w=Mn(!1),x=Mn(!1),_=Mn(!1),k=Mn(!1),C=Mn(""),S=Mn(!1),E=Mn("");ie(()=>{$n(k,a()),$n(C,a()?"Loading...":"",!0)});let z=new rl({splittableTags:["p","div"]}),j=Mn(null),A=null,M=null,N=null,$=null,I=null,P=xn(()=>Ke(l).length),L=xn(()=>Ke(l)[Ke(s)]||""),T=xn(()=>Ke(s)+1);function F(){$n(m,bi(),!0),$n(b,yi(r()),!0)}async function B(){if(!e())return;$n(g,e(),!0);const t=(new DOMParser).parseFromString(e(),"text/html");$n(c,ra(t),!0),Ke(c).chatIndex=r();const n=gi(r());n&&(Ke(c).buttons=oa(n),$n(p,ia(n),!0),$n(d,aa(n),!0)),$n(f,la(t),!0);const o=t.querySelector(".chattext");o&&(ta(o),$n(h,o.cloneNode(!0),!0),await sa(),await R(),Ke(k)&&setTimeout(()=>{$n(k,!1),$n(C,"")},100))}async function R(){if(!Ke(h))return;const t=document.querySelector(".mobile-reader .text-content");if(!t){await sa();if(!document.querySelector(".mobile-reader .text-content"))return}const n=Zi(t||document.body);document.body.appendChild(n);try{$n(l,na(Ke(h).cloneNode(!0),n,z),!0)}finally{document.body.removeChild(n)}}function O(){A&&clearTimeout(A),A=setTimeout(()=>{!async function(){if(!Ke(h))return;const t=Ke(s);$n(l,[],!0),$n(s,0),await sa(),await R();const n=Math.max(0,Ke(l).length-1);$n(s,Math.min(t,n),!0)}()},300)}function W(){const t=gi(r());if(t){const n=t.outerHTML;n!==Ke(g)&&($n(g,n,!0),e(n),B())}}function q(t){$n(E,t,!0),$n(S,!0)}function D(){Ke(s)>=Ke(l).length-1?V():Pn(s)}function H(){0!==Ke(s)?Pn(s,-1):U()}function U(){const{index:t,isFirst:n}=mi(r(),"prev");null!==t?sl(t,!1,!0):n&&q("í˜„ìž¬ ì±„íŒ…ì˜ ì²« ë²ˆì§¸ íŽ˜ì´ì§€ìž…ë‹ˆë‹¤")}function V(){const{index:t,isLast:n}=mi(r(),"next");null!==t?sl(t,!1,!0):n&&q("í˜„ìž¬ ì±„íŒ…ì˜ ë§ˆì§€ë§‰ íŽ˜ì´ì§€ìž…ë‹ˆë‹¤")}ie(()=>{Ke(j)&&(Ke(j).style.setProperty("--mv-font-size",`${Ke(u).fontSize}px`),Ke(j).style.setProperty("--mv-line-height",String(Ke(u).lineHeight)),Ke(j).style.setProperty("--mv-font-family",Ke(u).fontFamily),Ke(j).setAttribute("data-theme",Ke(u).theme))}),Io(async()=>{$n(u,da(),!0),$n(v,va(),!0),Ke(v)&&ga(Ke(v)),F(),await sa(),await B(),M=setInterval(W,1e3),I=function(t={}){const{onSwipeLeft:n=()=>{},onSwipeRight:e=()=>{},threshold:r=50,velocityThreshold:o=.3,maxVerticalRatio:i=.75}=t;let a=0,l=0,s=0,u=!1;return{touchStart:function(t){if(1!==t.touches.length)return;const n=t.touches[0];a=n.clientX,l=n.clientY,s=Date.now(),u=!0},touchMove:function(t){if(!u||1!==t.touches.length)return;const n=t.touches[0];n.clientX,n.clientY},touchEnd:function(t){if(!u)return;u=!1;const c=t.changedTouches[0],f=c.clientX-a,d=c.clientY-l,p=Date.now()-s;if(Math.abs(d)>Math.abs(f)*i)return;const v=Math.abs(f)/p;(Math.abs(f)>r||v>o&&Math.abs(f)>30)&&(f>0?e():n())},touchCancel:function(){u=!1}}}({onSwipeLeft:D,onSwipeRight:H,threshold:50}),Ke(j)&&(Ke(j).addEventListener("touchstart",I.touchStart,{passive:!0}),Ke(j).addEventListener("touchmove",I.touchMove,{passive:!0}),Ke(j).addEventListener("touchend",I.touchEnd,{passive:!0}));const t=Bo.getInstance();N=t.subscribeToChar(t=>({chatPage:null==t?void 0:t.chatPage,chaId:null==t?void 0:t.chaId}),t=>{t.chatPage===o()&&t.chaId===i()||(console.log("[MobileBookViewer] Chat page or character changed, reloading..."),sl(null,!1))},500),$=t.subscribeToChar(t=>{var n,e,r;return null==(r=null==(e=null==(n=null==t?void 0:t.chats)?void 0:n[t.chatPage])?void 0:e.message)?void 0:r.length},t=>{const n=bi();n.length!==Ke(m).length&&($n(m,n,!0),F())},1e3)}),Po(()=>{A&&clearTimeout(A),M&&clearInterval(M),Ke(j)&&I&&(Ke(j).removeEventListener("touchstart",I.touchStart),Ke(j).removeEventListener("touchmove",I.touchMove),Ke(j).removeEventListener("touchend",I.touchEnd)),N&&N(),$&&$();const t=document.getElementById("book-viewer-custom-css");t&&t.remove()});var G=ol();pr("keydown",On,function(t){var e;if(Ke(x))"Escape"===t.key&&$n(x,!1);else if(Ke(y)||Ke(w))"Escape"===t.key&&($n(y,!1),$n(w,!1));else{if("Escape"!==t.key){const t=document.activeElement;if(t&&("TEXTAREA"===t.tagName||"INPUT"===t.tagName||t.isContentEditable))return;const n=window.getSelection();if(n&&n.toString().length>0)return}"ArrowRight"===t.key||"PageDown"===t.key||" "===t.key?(t.preventDefault(),D()):"ArrowLeft"===t.key||"PageUp"===t.key?(t.preventDefault(),H()):"Escape"===t.key&&(null==(e=n.onClose)||e.call(n))}}),pr("resize",On,function(){O()}),pr("fullscreenchange",Wn,function(){$n(_,!!document.fullscreenElement)});var Y=Yn(G),K=Yn(Y);{let t=xn(()=>Ke(f).length>0);!function(t,n){Ht(n,!0),Kr(t,Ra);const e=Bo.getInstance();let r=$o(n,"thumbnailUrl",3,""),o=$o(n,"name",3,""),i=$o(n,"chatIndex",3,0),a=$o(n,"buttons",19,()=>[]),l=$o(n,"chatIndexPosition",19,()=>({position:0,total:0,isFirst:!0,isLast:!0})),s=$o(n,"showLBButton",3,!1),u=$o(n,"isFullscreen",3,!1),c=$o(n,"onBack",3,()=>{}),f=$o(n,"onPrevChat",3,()=>{}),d=$o(n,"onNextChat",3,()=>{}),p=$o(n,"onFullscreenToggle",3,()=>{}),v=$o(n,"onLBToggle",3,()=>{}),h=$o(n,"onSettingsToggle",3,()=>{}),g=Mn(null);ie(()=>{Ke(g)&&a().length>0&&Si(a(),Ke(g),{clearContainer:!0,additionalClasses:["header-action-btn"]})});var b=Ba(),m=Yn(b),y=Yn(m);y.__click=function(...t){var n;null==(n=c())||n.apply(this,t)};var w=Qn(y,2),x=Yn(w),_=t=>{var n=$a();ue(()=>oo(n,`background-image: url('${r()??""}')`)),kr(t,n)},k=t=>{kr(t,Ia())};$r(x,t=>{r()?t(_):t(k,!1)});var C=Yn(Qn(x,2)),S=Yn(Qn(w,2));S.__click=function(...t){var n;null==(n=f())||n.apply(this,t)};var E=Qn(S,2),z=Yn(E),j=Qn(z),A=t=>{var n=Pa(),e=Yn(n);ue(()=>Er(e,`(${l().position??""}/${l().total??""})`)),kr(t,n)};$r(j,t=>{l().total>0&&t(A)});var M=Qn(E,2);M.__click=function(...t){var n;null==(n=d())||n.apply(this,t)};var N=Yn(Qn(m,2));Co(N,t=>$n(g,t),()=>Ke(g));var $=Yn(Qn(N,2));let I;$.__click=function(...t){var n;null==(n=p())||n.apply(this,t)};var P=Yn($),L=t=>{kr(t,La())},T=t=>{kr(t,Ta())};$r(P,t=>{u()?t(L):t(T,!1)});var F=Qn($,2),B=t=>{var n=Fa();n.__click=function(...t){var n;null==(n=v())||n.apply(this,t)},kr(t,n)};$r(F,t=>{s()&&t(B)}),Qn(F,2).__click=function(...t){var n;null==(n=h())||n.apply(this,t)},ue(t=>{Er(C,t),S.disabled=l().isFirst,Er(z,`#${i()+1} `),M.disabled=l().isLast,I=eo($,1,"header-toggle-btn fullscreen-btn svelte-1p1awwn",null,I,{active:u()}),ho($,"title",u()?"ì „ì²´í™”ë©´ í•´ì œ":"ì „ì²´í™”ë©´")},[()=>{var t;return o()||(null==(t=e.getChar())?void 0:t.name)||"Unknown"}]),kr(t,b),Ut()}(K,{get thumbnailUrl(){return Ke(c).thumbnailUrl},get name(){return Ke(c).name},get chatIndex(){return Ke(c).chatIndex},get buttons(){return Ke(c).buttons},get chatIndexPosition(){return Ke(b)},get showLBButton(){return Ke(t)},get isFullscreen(){return Ke(_)},get onBack(){return n.onClose},onPrevChat:U,onNextChat:V,onFullscreenToggle:async function(){var t,n,e;try{document.fullscreenElement?(await(null==(e=document.exitFullscreen)?void 0:e.call(document)),$n(_,!1)):(await(null==(n=null==(t=document.documentElement)?void 0:t.requestFullscreen)?void 0:n.call(t)),$n(_,!0))}catch(r){console.warn("[MobileViewer] Fullscreen error:",r)}},onLBToggle:function(){$n(w,!Ke(w)),Ke(w)&&$n(y,!1)},onSettingsToggle:function(){$n(y,!Ke(y)),Ke(y)&&$n(w,!1)}})}var Q=Qn(K,2);Da(Q,{get content(){return Ke(L)},get pageNum(){return Ke(T)},get totalPages(){return Ke(P)},onPrevPage:H,onNextPage:D,get isLoading(){return Ke(k)},get loadingMessage(){return Ke(C)},get liveContentButtons(){return Ke(p)}});var X=Qn(Q,2);{let t=xn(()=>0===Ke(s)),n=xn(()=>Ke(s)>=Ke(P)-1);!function(t,n){Kr(t,Ua);let e=$o(n,"currentPage",3,0),r=$o(n,"totalPages",3,0),o=$o(n,"onPrev",3,()=>{}),i=$o(n,"onNext",3,()=>{}),a=$o(n,"prevDisabled",3,!1),l=$o(n,"nextDisabled",3,!1),s=xn(()=>r()>0?(e()+1)/r()*100:0);var u=Ha(),c=Yn(u);c.__click=function(...t){var n;null==(n=o())||n.apply(this,t)};var f=Qn(c,2),d=Yn(f),p=Yn(d),v=Yn(Qn(d,2)),h=Qn(f,2);h.__click=function(...t){var n;null==(n=i())||n.apply(this,t)},ue(()=>{c.disabled=a(),Er(p,`${e()+1} / ${r()??""}`),oo(v,`width: ${Ke(s)??""}%`),h.disabled=l()}),kr(t,u)}(X,{get currentPage(){return Ke(s)},get totalPages(){return Ke(P)},onPrev:H,onNext:D,get prevDisabled(){return Ke(t)},get nextDisabled(){return Ke(n)}})}var J=Qn(X,2);Ya(J,{get isOpen(){return Ke(y)},get settings(){return Ke(u)},onSettingsChange:function(t){$n(u,t,!0),pa(Ke(u)),O()},onOpenCustomCss:function(){$n(y,!1),$n(x,!0)},onClose:()=>$n(y,!1)});var Z=Qn(J,2);tl(Z,{get isOpen(){return Ke(w)},get modules(){return Ke(f)},onModuleClick:function(t){const n=t.dataId||t.risuBtn;if(n&&Ke(d).has(n)){const t=Ke(d).get(n),e=new MouseEvent("click",{bubbles:!0,cancelable:!0});t.dispatchEvent(e)}},onClose:()=>$n(w,!1)});var tt=Qn(Z,2);!function(t,n){Ht(n,!0),Kr(t,el);let e=$o(n,"isOpen",3,!1),r=$o(n,"initialCss",3,""),o=$o(n,"onApply",3,()=>{}),i=$o(n,"onReset",3,()=>{}),a=$o(n,"onClose",3,()=>{}),l=Mn("");function s(){o()(Ke(l)),a()()}function u(){$n(l,""),i()()}function c(){a()()}function f(t){t.stopPropagation()}ie(()=>{e()&&$n(l,r())});var d=_r();pr("keydown",On,function(t){"Escape"===t.key&&a()()});var p=Kn(d),v=t=>{var n=nl();n.__click=c;var e=Yn(n);e.__click=f;var r=Yn(e);Qn(Yn(r),2).__click=function(...t){var n;null==(n=a())||n.apply(this,t)};var o=Qn(r,2),i=Yn(o),d=Yn(Qn(o,2));d.__click=u,Qn(d,2).__click=s,wo(i,()=>Ke(l),t=>$n(l,t)),kr(t,n)};$r(p,t=>{e()&&t(v)}),kr(t,d),Ut()}(tt,{get isOpen(){return Ke(x)},get initialCss(){return Ke(v)},onApply:function(t){$n(v,t,!0),ha(t),ga(t),$n(x,!1),O()},onReset:function(){$n(v,""),ba(),O()},onClose:()=>$n(x,!1)}),Xi(Qn(tt,2),{get message(){return Ke(E)},get visible(){return Ke(S)},duration:2e3,onHide:function(){$n(S,!1),$n(E,"")}}),Co(Y,t=>$n(j,t),()=>Ke(j)),ue(()=>{ho(G,"data-chat-index",r()),ho(G,"data-chat-page",o()),ho(G,"data-char-id",i()),ho(Y,"data-theme",Ke(u).theme)}),kr(t,G),Ut()}const al="mobile-book-viewer",ll="mobile-viewer";function sl(t=null,n=!0,e=!1){if(n&&Ho(al))return void ul();Ho(al)&&Do(al);const r=Bo.getInstance(),o=null!=t?Number(t):r.getLastChatIndex()-1,i=gi(o);if(!i)return void console.warn("[MobileViewer] Chat element not found for index:",o);const a=i.outerHTML,l=r.getCurrentChatPage(),s=r.getChaId(),u=vi(pi.chatScreen.displayContainer);u&&Uo(u,{overflow:"hidden"},ll),qo({id:al,component:il,target:document.body,props:{chatHtml:a,chatIndex:o,chatPage:l,chaId:s,onClose:ul,initialLoading:e}})}async function ul(){var t;const n=vi(pi.chatScreen.displayContainer);n&&Vo(n,ll),document.fullscreenElement&&await(null==(t=document.exitFullscreen)?void 0:t.call(document)),Do(al)}function cl(){return Ho(al)}const fl=Object.freeze(Object.defineProperty({__proto__:null,closeMobileViewer:ul,isMobileViewerOpen:cl,openMobileViewer:sl,toggleMobileViewer:function(t=null){cl()?ul():sl(t,!1,!1)}},Symbol.toStringTag,{value:"Module"}))});
