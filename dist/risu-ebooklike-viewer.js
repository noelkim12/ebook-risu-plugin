//@name risu-ebooklike-viewer
//@display-name risu-ebooklike-viewer_v0.0.2
//@version 0.0.2
//@description EBook like viewer for RISU AI
//@arg arg1 string
//@arg arg2 int
//@dev-server-port 13131
//@link https://unpkg.com/risu-ebooklike-viewer@0.0.2/dist/risu-ebooklike-viewer.js
!function(){"use strict";try{if("undefined"!=typeof document){var e=document.createElement("style");e.appendChild(document.createTextNode("@import\"https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css\";@import\"//fonts.googleapis.com/earlyaccess/notosanskr.css\";.update-dialog-module__udRoot--bWc9J{position:fixed;top:0;right:0;bottom:0;left:0;z-index:2147483646;display:grid;place-items:center;background:#0006;padding:16px}.update-dialog-module__udCard---wy8T{width:min(520px,100%);max-height:90vh;border-radius:16px;padding:20px;background:var(--bg, #111);color:var(--fg, #eaeaea);box-shadow:0 10px 30px #00000059;transform:scale(.97);animation:update-dialog-module__udPop--0Vb0B .16s ease-out forwards;overflow-y:auto}.update-dialog-module__udTitle--5imsi{display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap}.update-dialog-module__udTitle--5imsi h3{margin:0;font-size:18px;font-weight:700;word-break:break-word;flex:1 1 auto;min-width:0}.update-dialog-module__udPill--leinK{font:12px/1.8 system-ui;padding:0 8px;border-radius:999px;background:#2a2a2a;color:#cfcfcf;white-space:nowrap;flex-shrink:0}.update-dialog-module__udSub--zfs1y{margin:8px 0 12px;color:#9aa0a6;font:13px/1.5 system-ui;word-break:break-word}.update-dialog-module__udList--jnFg8{margin:10px 0 16px;padding-left:18px;max-height:180px;overflow-y:auto;overflow-x:hidden}.update-dialog-module__udList--jnFg8 li{margin:6px 0;word-break:break-word;overflow-wrap:break-word}.update-dialog-module__udFeat--MSXJY::marker{content:\"âœ¨ \"}.update-dialog-module__udFix--18UZ3::marker{content:\"ðŸ”§ \"}.update-dialog-module__udPerf--bRifN::marker{content:\"âš¡ \"}.update-dialog-module__udBreak--jl-Bf::marker{content:\"âš ï¸ \"}.update-dialog-module__udActions--5tqy2{display:flex;gap:8px;justify-content:flex-end;flex-wrap:wrap}.update-dialog-module__udBtn--IHB-y{border:0;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:600;font-size:14px;white-space:nowrap;flex:0 1 auto}.update-dialog-module__udBtnPrimary--ZlLFd{border:0;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:600;font-size:14px;background:#4f7cff;color:#fff;white-space:nowrap;flex:0 1 auto}.update-dialog-module__udBtnGhost--Ly-cb{border:0;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:600;font-size:14px;background:transparent;color:#cfcfcf;white-space:nowrap;flex:0 1 auto}.update-dialog-module__udBtn--IHB-y:hover,.update-dialog-module__udBtnPrimary--ZlLFd:hover,.update-dialog-module__udBtnGhost--Ly-cb:hover{filter:brightness(1.05)}@media(max-width:480px){.update-dialog-module__udCard---wy8T{padding:16px;border-radius:12px}.update-dialog-module__udTitle--5imsi{gap:8px}.update-dialog-module__udTitle--5imsi h3{font-size:16px}.update-dialog-module__udPill--leinK{font-size:11px;padding:0 6px}.update-dialog-module__udSub--zfs1y{font-size:12px;margin:6px 0 10px}.update-dialog-module__udList--jnFg8{font-size:14px;max-height:150px;padding-left:16px}.update-dialog-module__udList--jnFg8 li{margin:5px 0;line-height:1.5}.update-dialog-module__udActions--5tqy2{flex-direction:column;gap:8px}.update-dialog-module__udBtn--IHB-y,.update-dialog-module__udBtnPrimary--ZlLFd,.update-dialog-module__udBtnGhost--Ly-cb{width:100%;padding:11px 16px;font-size:14px}}@media(min-width:481px)and (max-width:600px){.update-dialog-module__udCard---wy8T{padding:18px}.update-dialog-module__udActions--5tqy2{gap:6px}.update-dialog-module__udBtn--IHB-y,.update-dialog-module__udBtnPrimary--ZlLFd,.update-dialog-module__udBtnGhost--Ly-cb{padding:9px 11px;font-size:13px}}@media(prefers-color-scheme:light){:root{--bg: #fff;--fg: #111}.update-dialog-module__udCard---wy8T{background:#fff;color:#111}.update-dialog-module__udPill--leinK{background:#eef2ff;color:#1f3fb3}.update-dialog-module__udSub--zfs1y{color:#4b5563}}@media(prefers-reduced-motion:reduce){.update-dialog-module__udCard---wy8T{animation:none;transform:none}}@keyframes update-dialog-module__udPop--0Vb0B{to{transform:scale(1)}}.update-dialog-module__udAlert--GJ6WI{max-width:420px;text-align:center}.update-dialog-module__udAlertMessage--nJfX4{margin:16px 0 20px;font-size:16px;line-height:1.6;color:var(--fg, #eaeaea);white-space:pre-line;word-break:break-word}.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udActions--5tqy2{justify-content:center}.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udBtn--IHB-y,.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udBtnPrimary--ZlLFd,.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udBtnGhost--Ly-cb{min-width:120px}@media(max-width:480px){.update-dialog-module__udAlert--GJ6WI{max-width:100%}.update-dialog-module__udAlertMessage--nJfX4{font-size:15px;margin:12px 0 16px}.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udBtn--IHB-y,.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udBtnPrimary--ZlLFd,.update-dialog-module__udAlert--GJ6WI .update-dialog-module__udBtnGhost--Ly-cb{min-width:100px;padding:11px 16px}}@media(prefers-color-scheme:light){.update-dialog-module__udAlertMessage--nJfX4{color:var(--fg, #111)}}.update-dialog-module__udLoading----KQf{max-width:320px;text-align:center;padding:32px 24px}.update-dialog-module__udLoadingSpinner--0OgBH{display:flex;justify-content:center;align-items:center;margin-bottom:20px}.update-dialog-module__udLoadingSvg--k5e0b{width:50px;height:50px;animation:update-dialog-module__udRotate--gve2C 1.4s linear infinite}.update-dialog-module__udLoadingCircle--Q78XG{stroke:#4f7cff;stroke-linecap:round;animation:update-dialog-module__udDash--TGdW5 1.4s ease-in-out infinite}.update-dialog-module__udLoadingMessage---UM99{font-size:15px;line-height:1.6;color:var(--fg, #eaeaea);font-weight:500;word-break:break-word}@media(max-width:480px){.update-dialog-module__udLoading----KQf{max-width:100%;padding:28px 20px}.update-dialog-module__udLoadingSpinner--0OgBH{margin-bottom:16px}.update-dialog-module__udLoadingSvg--k5e0b{width:44px;height:44px}.update-dialog-module__udLoadingMessage---UM99{font-size:14px}}@keyframes update-dialog-module__udRotate--gve2C{to{transform:rotate(360deg)}}@keyframes update-dialog-module__udDash--TGdW5{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}to{stroke-dasharray:90,150;stroke-dashoffset:-124}}@media(prefers-color-scheme:light){.update-dialog-module__udLoadingMessage---UM99{color:var(--fg, #111)}}@media(prefers-reduced-motion:reduce){.update-dialog-module__udLoadingSvg--k5e0b{animation:none}.update-dialog-module__udLoadingCircle--Q78XG{animation:none;stroke-dasharray:90,150}}.book-viewer-root{--bv-bg-gradient-start: #1a1f35;--bv-bg-gradient-end: #2d3654;--bv-page-color: #fdfbf7;--bv-page-shadow: #f5f0e8;--bv-text-color: #2c2c2c;--bv-text-secondary: #6b6b6b;--bv-accent-color: #c9a66b;--bv-accent-hover: #b8935a;--bv-divider-color: #e8e4dc;--bv-spine-gradient: linear-gradient( 90deg, #d4cfc4 0%, #c9c4b9 50%, #d4cfc4 100% );--bv-shadow-soft: 0 4px 20px rgba(0, 0, 0, .08);--bv-shadow-medium: 0 8px 40px rgba(0, 0, 0, .12);--bv-shadow-strong: 0 20px 60px rgba(0, 0, 0, .2);--bv-shadow-inner: inset 0 0 30px rgba(0, 0, 0, .03);--bv-font-size: 17px;--bv-line-height: 1.9;--bv-font-family: \"Pretendard\", -apple-system, BlinkMacSystemFont, system-ui, sans-serif;--bv-font-serif: \"Noto Serif KR\", \"Crimson Text\", \"Georgia\", serif;--bv-transition-fast: .15s cubic-bezier(.4, 0, .2, 1);--bv-transition-smooth: .3s cubic-bezier(.4, 0, .2, 1);--bv-transition-slow: .5s cubic-bezier(.4, 0, .2, 1)}.book-viewer-root[data-theme=sepia]{--bv-bg-gradient-start: #3d3830;--bv-bg-gradient-end: #4a4238;--bv-page-color: #f7f0e3;--bv-page-shadow: #ebe4d7;--bv-text-color: #3d2e1c;--bv-text-secondary: #7a6b5a;--bv-accent-color: #8b7355;--bv-divider-color: #d4c9b8;--bv-spine-gradient: linear-gradient( 90deg, #c4b9a8 0%, #b8ad9c 50%, #c4b9a8 100% )}.book-viewer-root[data-theme=dark]{--bv-bg-gradient-start: #0d1117;--bv-bg-gradient-end: #161b22;--bv-page-color: var(--risu-theme-bgcolor);--bv-page-shadow: #151a20;--bv-text-color: #c9d1d9;--bv-text-secondary: #8b949e;--bv-accent-color: #d4a574;--bv-accent-hover: #e0b584;--bv-divider-color: #30363d;--bv-spine-gradient: linear-gradient( 90deg, #21262d 0%, #30363d 50%, #21262d 100% )}.book-viewer-root{position:absolute;top:0;left:0;width:100%;height:93.5%;display:flex;flex-direction:column;overflow:hidden;z-index:0;font-family:var(--bv-font-family);background:linear-gradient(135deg,var(--bv-bg-gradient-start) 0%,var(--bv-bg-gradient-end) 100%);-webkit-user-select:none;-moz-user-select:none;user-select:none;border-bottom:1px solid var(--bv-divider-color)}.book-viewer-root:before{content:\"\";position:absolute;top:0;left:0;right:0;bottom:0;background-image:radial-gradient(circle at 20% 80%,rgba(201,166,107,.05) 0%,transparent 50%),radial-gradient(circle at 80% 20%,rgba(201,166,107,.03) 0%,transparent 50%);pointer-events:none;z-index:0}.book-header{display:flex;align-items:center;justify-content:space-between;padding:12px 24px;background:var(--bv-page-color);border-bottom:1px solid var(--bv-divider-color);flex-shrink:0;z-index:1}.header-left{display:flex;align-items:center;gap:12px;min-width:0;flex:1;margin-left:30px}.header-thumbnail{width:40px;height:40px;min-width:40px;border-radius:8px;background-size:cover;background-position:center;background-color:var(--bv-divider-color);box-shadow:0 2px 8px #0000001a}.header-info{display:flex;align-items:center;gap:12px;min-width:0;flex:1}.header-name{font-size:15px;font-weight:600;color:var(--bv-text-color);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.header-buttons{display:flex;align-items:center;gap:4px}.header-buttons button{background:none;border:none;padding:6px;cursor:pointer;color:var(--bv-text-secondary);border-radius:6px;transition:all var(--bv-transition-fast);display:flex;align-items:center;justify-content:center}.header-buttons button:hover{background:#0000000d;color:var(--bv-accent-color)}.book-viewer-root[data-theme=dark] .header-buttons button:hover{background:#ffffff14}.header-buttons button :global(svg){width:18px;height:18px}.header-right{display:flex;align-items:center;gap:8px;flex-shrink:0}.header-chat-index{font-size:13px;font-weight:500;color:var(--bv-text-secondary);background:#0000000a;padding:4px 10px;border-radius:12px}.book-viewer-root[data-theme=dark] .header-chat-index{background:#ffffff14}.close-btn{background:none;border:none;padding:6px;cursor:pointer;color:var(--bv-text-secondary);border-radius:6px;transition:all var(--bv-transition-fast);display:flex;align-items:center;justify-content:center}.close-btn:hover{background:#0000000d;color:var(--bv-accent-color)}.book-pages{position:relative;display:flex;flex:1;min-height:0;z-index:1}.page{flex:1;background:var(--bv-page-color);position:relative;overflow:hidden}.page:before{content:\"\";position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(90deg,rgba(0,0,0,.02) 0%,transparent 5%,transparent 95%,rgba(0,0,0,.02) 100%),url(\"data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E\");pointer-events:none;z-index:1}.book-viewer-root[data-theme=dark] .page:before{opacity:.5}.page-left{border-radius:4px 0 0 4px;box-shadow:var(--bv-shadow-inner)}.page-left:after{content:\"\";position:absolute;top:0;right:0;width:40px;height:100%;background:linear-gradient(90deg,transparent 0%,rgba(0,0,0,.03) 100%);pointer-events:none}.page-right{border-radius:0 4px 4px 0;box-shadow:var(--bv-shadow-inner)}.page-right:after{content:\"\";position:absolute;top:0;left:0;width:40px;height:100%;background:linear-gradient(90deg,rgba(0,0,0,.03) 0%,transparent 100%);pointer-events:none}.book-spine{width:8px;background:var(--bv-spine-gradient);position:relative;box-shadow:inset 2px 0 4px #0000001a,inset -2px 0 4px #0000001a}.book-spine:before{content:\"\";position:absolute;top:0;left:50%;transform:translate(-50%);width:1px;height:100%;background:#0000001a}.page-content{padding:50px 60px 40px;height:100%;display:flex;flex-direction:column;color:var(--bv-text-color);position:relative;z-index:2}.page-content>.chattext [class*=-image-wrapper]{max-height:100%!important}.page-content>.chattext [class*=-image-container]{max-height:100%!important}.page-content>.x-risu-image-cell{aspect-ratio:auto!important}.text-content{flex:1;overflow:scroll;font-size:var(--bv-font-size);line-height:var(--bv-line-height);text-align:justify;word-break:keep-all;letter-spacing:-.01em;padding-right:10px}.text-content :global(.flex){display:block}.text-content :global(.flex-col){flex-direction:unset}.text-content :global(.flex-grow){flex-grow:unset}.text-content :global(.items-start),.text-content :global(.items-center),.text-content :global(.items-end){align-items:unset}.text-content :global(.justify-center),.text-content :global(.justify-between),.text-content :global(.justify-end){justify-content:unset}.text-content :global(.gap-1),.text-content :global(.gap-2),.text-content :global(.gap-4),.text-content :global(.gap-8){gap:unset}.text-content :global(h1),.text-content :global(h2),.text-content :global(h3){margin:2em 0 1em;text-indent:0;font-weight:600;color:#1a1a1a;letter-spacing:-.02em}.text-content :global(h1){font-size:1.8em;border-bottom:2px solid var(--bv-accent-color);padding-bottom:.5em}.text-content :global(h2){font-size:1.4em}.text-content :global(mark),.text-content :global(mark[risu-mark]){display:inline!important;background:linear-gradient(120deg,#c9a66b33,#c9a66b4d)!important;color:inherit!important;padding:.1em .3em!important;border-radius:3px!important;flex-direction:unset!important;align-items:unset!important;gap:unset!important}.text-content:has(img){position:static}.text-content :global(img){position:absolute;top:0;left:0;width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center;margin:0;z-index:10}.page-content:has(img) .page-number{display:none}.page-number{font-size:13px;color:var(--bv-text-secondary);font-weight:500;letter-spacing:.05em}.left-page-num{text-align:left}.right-page-num{text-align:right}.click-area{position:absolute;top:0;width:5%;height:100%;z-index:10;cursor:pointer}.click-left{left:0;cursor:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='none' stroke='%23c9a66b' stroke-width='2'%3E%3Cpolyline points='15 18 9 12 15 6'%3E%3C/polyline%3E%3C/svg%3E\") 16 16,w-resize}.click-right{right:0;cursor:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='none' stroke='%23c9a66b' stroke-width='2'%3E%3Cpolyline points='9 18 15 12 9 6'%3E%3C/polyline%3E%3C/svg%3E\") 16 16,e-resize}.click-area:after{content:\"\";position:absolute;top:50%;transform:translateY(-50%);width:50px;height:100px;opacity:0;transition:opacity var(--bv-transition-smooth);pointer-events:none}.click-left:after{left:30px;background:radial-gradient(ellipse at left,rgba(201,166,107,.15),transparent 70%)}.click-right:after{right:30px;background:radial-gradient(ellipse at right,rgba(201,166,107,.15),transparent 70%)}.click-area:hover:after{opacity:1}.nav-controls{display:flex;align-items:center;justify-content:center;gap:32px;background:var(--bv-page-color);padding:14px 40px;border-top:1px solid rgba(201,166,107,.12);flex-shrink:0;z-index:1}.nav-btn{background:none;border:none;cursor:pointer;padding:10px;border-radius:50%;transition:all var(--bv-transition-fast);color:var(--bv-accent-color);display:flex;align-items:center;justify-content:center}.nav-btn :global(svg){transition:transform var(--bv-transition-fast)}.nav-btn:hover:not(:disabled){background:#c9a66b1f}.nav-btn:hover:not(:disabled) :global(svg){transform:scale(1.1)}.nav-btn:active:not(:disabled) :global(svg){transform:scale(.95)}.nav-btn:disabled{opacity:.25;cursor:not-allowed}.page-indicator{font-size:14px;color:var(--bv-text-color);min-width:90px;text-align:center;font-weight:600;letter-spacing:.02em}.nav-right-buttons{display:flex;align-items:center;gap:8px;margin-left:auto;padding-left:20px}.nav-icon-btn{background:none;border:2px solid var(--bv-accent-color);color:var(--bv-accent-color);padding:8px 12px;cursor:pointer;border-radius:8px;transition:all var(--bv-transition-fast);font-size:13px;font-weight:600;display:flex;align-items:center;justify-content:center;gap:4px}.nav-icon-btn:hover{background:var(--bv-accent-color);color:#fff}.nav-icon-btn :global(svg){width:18px;height:18px}.dropdown-container{position:relative}.dropdown-menu{display:none;position:absolute;bottom:calc(100% + 12px);right:0;background:#fffffffa;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);padding:16px;border-radius:16px;box-shadow:var(--bv-shadow-strong);min-width:280px;max-width:320px;border:1px solid rgba(201,166,107,.15);z-index:200}.dropdown-menu.active{display:block;animation:dropdownFadeIn .25s cubic-bezier(.4,0,.2,1)}@keyframes dropdownFadeIn{0%{opacity:0;transform:translateY(10px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.book-viewer-root[data-theme=dark] .dropdown-menu{background:#1c2128fa}.dropdown-header{font-size:14px;font-weight:700;color:var(--bv-text-color);padding-bottom:12px;margin-bottom:12px;border-bottom:1px solid var(--bv-divider-color);text-transform:uppercase;letter-spacing:.05em}.setting-item{margin-bottom:16px}.setting-item:last-child{margin-bottom:0}.setting-item label{display:block;margin-bottom:8px;font-size:12px;font-weight:600;color:var(--bv-text-color);text-transform:uppercase;letter-spacing:.06em}.setting-item input[type=range]{width:100%;height:5px;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#e8e4dc;border-radius:3px;outline:none;margin-bottom:6px}.book-viewer-root[data-theme=dark] .setting-item input[type=range]{background:#30363d}.setting-item input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:18px;height:18px;background:var(--bv-accent-color);border-radius:50%;cursor:pointer;box-shadow:0 2px 6px #c9a66b66;-webkit-transition:all var(--bv-transition-fast);transition:all var(--bv-transition-fast)}.setting-item input[type=range]::-webkit-slider-thumb:hover{transform:scale(1.1)}.setting-item input[type=range]::-moz-range-thumb{width:18px;height:18px;background:var(--bv-accent-color);border-radius:50%;cursor:pointer;border:none}.setting-item select{width:100%;padding:10px 14px;border:2px solid #e8e4dc;border-radius:10px;font-size:13px;background:#fff;cursor:pointer;transition:all var(--bv-transition-fast);-webkit-appearance:none;-moz-appearance:none;appearance:none;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%23c9a66b' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E\");background-repeat:no-repeat;background-position:right 10px center;background-size:16px}.book-viewer-root[data-theme=dark] .setting-item select{background-color:#21262d;border-color:#30363d;color:var(--bv-text-color)}.setting-item select:hover{border-color:var(--bv-accent-color)}.setting-item select:focus{outline:none;border-color:var(--bv-accent-color);box-shadow:0 0 0 3px #c9a66b26}.setting-item span{font-size:11px;color:var(--bv-text-secondary);font-weight:500}.custom-css-btn{width:100%;padding:10px 16px;background:var(--bv-accent-color);color:#fff;border:none;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;transition:all var(--bv-transition-fast)}.custom-css-btn:hover{background:var(--bv-accent-hover);transform:translateY(-1px)}.lb-modules-list{max-height:300px;overflow-y:auto}.lb-module-item{padding:10px 12px;margin-bottom:6px;background:#c9a66b14;border-radius:8px;cursor:pointer;transition:all var(--bv-transition-fast);font-size:13px;color:var(--bv-text-color)}.lb-module-item:hover{background:#c9a66b33}.lb-module-item:last-child{margin-bottom:0}.book-viewer-root[data-theme=dark] .lb-module-item{background:#d4a5741a}.book-viewer-root[data-theme=dark] .lb-module-item:hover{background:#d4a57433}.modal-overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:1100;justify-content:center;align-items:center}.modal-overlay.active{display:flex;animation:modalFadeIn .3s ease}@keyframes modalFadeIn{0%{opacity:0}to{opacity:1}}.modal-content{background:var(--bv-page-color);border-radius:16px;width:90%;max-width:600px;max-height:80vh;display:flex;flex-direction:column;box-shadow:var(--bv-shadow-strong);animation:modalSlideIn .3s cubic-bezier(.4,0,.2,1)}.book-viewer-root[data-theme=dark] .modal-content{background:#1c2128}@keyframes modalSlideIn{0%{opacity:0;transform:translateY(-20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}.modal-header{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid var(--bv-divider-color)}.modal-header h3{font-size:18px;font-weight:700;color:var(--bv-text-color);margin:0}.modal-close{background:none;border:none;font-size:24px;color:var(--bv-text-secondary);cursor:pointer;padding:4px 8px;border-radius:6px;transition:all var(--bv-transition-fast)}.modal-close:hover{background:#0000000d;color:var(--bv-text-color)}.book-viewer-root[data-theme=dark] .modal-close:hover{background:#ffffff1a}.modal-body{flex:1;padding:20px 24px;overflow:auto}.modal-body textarea{width:100%;height:300px;padding:16px;border:2px solid var(--bv-divider-color);border-radius:12px;font-family:Consolas,Monaco,monospace;font-size:14px;line-height:1.6;resize:vertical;background:#fafafa;color:var(--bv-text-color)}.book-viewer-root[data-theme=dark] .modal-body textarea{background:#0d1117;border-color:#30363d}.modal-body textarea:focus{outline:none;border-color:var(--bv-accent-color);box-shadow:0 0 0 3px #c9a66b26}.modal-footer{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid var(--bv-divider-color)}.modal-btn{padding:10px 20px;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all var(--bv-transition-fast)}.modal-btn.primary{background:var(--bv-accent-color);color:#fff;border:none}.modal-btn.primary:hover{background:var(--bv-accent-hover)}.modal-btn.secondary{background:transparent;color:var(--bv-text-secondary);border:2px solid var(--bv-divider-color)}.modal-btn.secondary:hover{border-color:var(--bv-text-secondary);color:var(--bv-text-color)}@media(max-width:1200px){.page-content{padding:50px 40px 40px}.text-content{font-size:16px}}@media(max-width:900px){.book-header{padding:10px 16px}.header-thumbnail{width:32px;height:32px;min-width:32px;border-radius:6px}.header-name{font-size:14px}.header-buttons button{padding:4px}.header-buttons button :global(svg){width:16px;height:16px}.page-content{padding:40px 30px 35px}.book-spine{width:4px}.nav-controls{padding:12px 20px;gap:20px}}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}}();
!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";var t,e,n,r,o,i,u,a,l,s,c,f,d,h,v,p,g,m,_,y,b,w,x,k,$,C,S,A,E,M,N,R,I,P,T,L,j,O,B,z,W,H,D=Object.defineProperty,U=t=>{throw TypeError(t)},F=(t,e,n)=>((t,e,n)=>e in t?D(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n)(t,"symbol"!=typeof e?e+"":e,n),q=(t,e,n)=>e.has(t)||U("Cannot "+n),V=(t,e,n)=>(q(t,e,"read from private field"),n?n.call(t):e.get(t)),K=(t,e,n)=>e.has(t)?U("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),G=(t,e,n,r)=>(q(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Z=(t,e,n)=>(q(t,e,"access private method"),n);const J={udRoot:"update-dialog-module__udRoot--bWc9J",udCard:"update-dialog-module__udCard---wy8T",udPop:"update-dialog-module__udPop--0Vb0B",udTitle:"update-dialog-module__udTitle--5imsi",udPill:"update-dialog-module__udPill--leinK",udSub:"update-dialog-module__udSub--zfs1y",udList:"update-dialog-module__udList--jnFg8",udFeat:"update-dialog-module__udFeat--MSXJY",udFix:"update-dialog-module__udFix--18UZ3",udPerf:"update-dialog-module__udPerf--bRifN",udBreak:"update-dialog-module__udBreak--jl-Bf",udActions:"update-dialog-module__udActions--5tqy2",udBtn:"update-dialog-module__udBtn--IHB-y",udBtnPrimary:"update-dialog-module__udBtnPrimary--ZlLFd",udBtnGhost:"update-dialog-module__udBtnGhost--Ly-cb",udAlert:"update-dialog-module__udAlert--GJ6WI",udAlertMessage:"update-dialog-module__udAlertMessage--nJfX4",udLoading:"update-dialog-module__udLoading----KQf",udLoadingSpinner:"update-dialog-module__udLoadingSpinner--0OgBH",udLoadingSvg:"update-dialog-module__udLoadingSvg--k5e0b",udRotate:"update-dialog-module__udRotate--gve2C",udLoadingCircle:"update-dialog-module__udLoadingCircle--Q78XG",udDash:"update-dialog-module__udDash--TGdW5",udLoadingMessage:"update-dialog-module__udLoadingMessage---UM99"};var X=Array.isArray,Y=Array.prototype.indexOf,Q=Array.from,tt=Object.defineProperty,et=Object.getOwnPropertyDescriptor,nt=Object.getOwnPropertyDescriptors,rt=Object.prototype,ot=Array.prototype,it=Object.getPrototypeOf,ut=Object.isExtensible;function at(t){return"function"==typeof t}function lt(t){return t()}function st(t){for(var e=0;e<t.length;e++)t[e]()}function ct(){var t,e;return{promise:new Promise((n,r)=>{t=n,e=r}),resolve:t,reject:e}}const ft=1<<24,dt=16,ht=32,vt=64,pt=128,gt=512,mt=1024,_t=2048,yt=4096,bt=8192,wt=16384,xt=32768,kt=65536,$t=1<<17,Ct=1<<18,St=1<<19,At=1<<25,Et=32768,Mt=1<<21,Nt=1<<22,Rt=1<<23,It=Symbol("$state"),Pt=Symbol("legacy props"),Tt=Symbol(""),Lt=Symbol("proxy path"),jt=new class extends Error{constructor(){super(...arguments),F(this,"name","StaleReactionError"),F(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Ot(t){{const e=new Error(`lifecycle_outside_component\n\`${t}(...)\` can only be used during component initialisation\nhttps://svelte.dev/e/lifecycle_outside_component`);throw e.name="Svelte error",e}}function Bt(){{const t=new Error("bind_invalid_checkbox_value\nUsing `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\nhttps://svelte.dev/e/bind_invalid_checkbox_value");throw t.name="Svelte error",t}}const zt=Symbol(),Wt=Symbol("filename");var Ht="font-weight: bold",Dt="font-weight: normal";function Ut(t){console.warn(`%c[svelte] state_proxy_equality_mismatch\n%cReactive \`$state(...)\` proxies and the values they proxy have different identities. Because of this, comparisons with \`${t}\` will produce unexpected results\nhttps://svelte.dev/e/state_proxy_equality_mismatch`,Ht,Dt)}function Ft(t){return t===this.v}function qt(t){return e=t,n=this.v,!(e!=e?n==n:e!==n||null!==e&&"object"==typeof e||"function"==typeof e);var e,n}let Vt=!1;function Kt(t,e){return t.label=e,Gt(t.v,e),t}function Gt(t,e){var n;return null==(n=null==t?void 0:t[Lt])||n.call(t,e),t}function Zt(t){const e=new Error,n=function(){const t=Error.stackTraceLimit;Error.stackTraceLimit=1/0;const e=(new Error).stack;if(Error.stackTraceLimit=t,!e)return[];const n=e.split("\n"),r=[];for(let o=0;o<n.length;o++){const t=n[o],e=t.replaceAll("\\","/");if("Error"!==t.trim()){if(t.includes("validate_each_keys"))return[];e.includes("svelte/src/internal")||e.includes("node_modules/.vite")||r.push(t)}}return r}();return 0===n.length?null:(n.unshift("\n"),tt(e,"stack",{value:n.join("\n")}),tt(e,"name",{value:t}),e)}let Jt=null;function Xt(t){Jt=t}let Yt=null;function Qt(t){Yt=t}function te(t,e,n,r,o,i){const u=Yt;Yt={type:e,file:n[Wt],line:r,column:o,parent:u,...i};try{return t()}finally{Yt=u}}let ee=null;function ne(t){ee=t}function re(t,e=!1,n){Jt={p:Jt,i:!1,c:null,e:null,s:t,x:null,l:Vt&&!e?{s:null,u:null,$:[]}:null},Jt.function=n,ee=n}function oe(t){var e=Jt,n=e.e;if(null!==n)for(var r of(e.e=null,n))Nn(r);return void 0!==t&&(e.x=t),e.i=!0,Jt=e.p,ee=(null==Jt?void 0:Jt.function)??null,t??{}}function ie(){return!Vt||null!==Jt&&null===Jt.l}let ue=[];function ae(){var t=ue;ue=[],st(t)}function le(t){if(0===ue.length&&!we){var e=ue;queueMicrotask(()=>{e===ue&&ae()})}ue.push(t)}function se(){for(;ue.length>0;)ae()}const ce=new WeakMap;function fe(t){var e=Qn;if(null===e)return Jn.f|=Rt,t;if(t instanceof Error&&!ce.has(t)&&ce.set(t,function(t,e){var n,r,o;const i=et(t,"message");if(i&&!i.configurable)return;var u=fn?"  ":"\t",a=`\n${u}in ${(null==(n=e.fn)?void 0:n.name)||"<unknown>"}`,l=e.ctx;for(;null!==l;)a+=`\n${u}in ${null==(r=l.function)?void 0:r[Wt].split("/").pop()}`,l=l.p;return{message:t.message+`\n${a}\n`,stack:null==(o=t.stack)?void 0:o.split("\n").filter(t=>!t.includes("svelte/src/internal")).join("\n")}}(t,e)),0===(e.f&xt)){if(0===(e.f&pt))throw!e.parent&&t instanceof Error&&he(t),t;e.b.error(t)}else de(t,e)}function de(t,e){for(;null!==e;){if(0!==(e.f&pt))try{return void e.b.error(t)}catch(n){t=n}e=e.parent}throw t instanceof Error&&he(t),t}function he(t){const e=ce.get(t);e&&(tt(t,"message",{value:e.message}),tt(t,"stack",{value:e.stack}))}const ve=new Set;let pe=null,ge=null,me=null,_e=[],ye=null,be=!1,we=!1;t=new WeakMap,e=new WeakMap,n=new WeakMap,r=new WeakMap,o=new WeakMap,i=new WeakMap,u=new WeakMap,a=new WeakSet,l=function(t,e){var n;t.f^=mt;for(var r=t.first;null!==r;){var o=r.f,u=!!(96&o),l=u&&0!==(o&mt)||0!==(o&bt)||this.skipped_effects.has(r);if(0!==(r.f&pt)&&(null==(n=r.b)?void 0:n.is_pending())&&(e={parent:e,effect:r,effects:[],render_effects:[]}),!l&&null!==r.fn){u?r.f^=mt:4&o?e.effects.push(r):fr(r)&&(0!==(r.f&dt)&&V(this,i).add(r),gr(r));var c=r.first;if(null!==c){r=c;continue}}var f=r.parent;for(r=r.next;null===r&&null!==f;)f===e.effect&&(Z(this,a,s).call(this,e.effects),Z(this,a,s).call(this,e.render_effects),e=e.parent),r=f.next,f=f.parent}},s=function(t){for(const e of t)0!==(e.f&_t)?V(this,i).add(e):0!==(e.f&yt)&&V(this,u).add(e),Z(this,a,c).call(this,e.deps),kr(e,mt)},c=function(t){if(null!==t)for(const e of t)2&e.f&&0!==(e.f&Et)&&(e.f^=Et,Z(this,a,c).call(this,e.deps))},f=function(){if(0===V(this,r)){for(const e of V(this,t))e();V(this,t).clear()}0===V(this,n)&&Z(this,a,d).call(this)},d=function(){var t;if(ve.size>1){this.previous.clear();var e=me,n=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const e of ve){if(e===this){n=!1;continue}const i=[];for(const[t,r]of this.current){if(e.current.has(t)){if(!n||r===e.current.get(t))continue;e.current.set(t,r)}i.push(t)}if(0===i.length)continue;const u=[...e.current.keys()].filter(t=>!this.current.has(t));if(u.length>0){var o=_e;_e=[];const n=new Set,s=new Map;for(const t of i)Ae(t,u,n,s);if(_e.length>0){pe=e,e.apply();for(const n of _e)Z(t=e,a,l).call(t,n,r);e.deactivate()}_e=o}}pe=null,me=e}this.committed=!0,ve.delete(this)};let xe=class c{constructor(){K(this,a),F(this,"committed",!1),F(this,"current",new Map),F(this,"previous",new Map),K(this,t,new Set),K(this,e,new Set),K(this,n,0),K(this,r,0),K(this,o,null),K(this,i,new Set),K(this,u,new Set),F(this,"skipped_effects",new Set),F(this,"is_fork",!1)}is_deferred(){return this.is_fork||V(this,r)>0}process(t){var e;_e=[],ge=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const r of t)Z(this,a,l).call(this,r,n);this.is_fork||Z(this,a,f).call(this),this.is_deferred()?(Z(this,a,s).call(this,n.effects),Z(this,a,s).call(this,n.render_effects)):(ge=this,pe=null,Se(n.render_effects),Se(n.effects),ge=null,null==(e=V(this,o))||e.resolve()),me=null}capture(t,e){this.previous.has(t)||this.previous.set(t,e),0===(t.f&Rt)&&(this.current.set(t,t.v),null==me||me.set(t,t.v))}activate(){pe=this,this.apply()}deactivate(){pe===this&&(pe=null,me=null)}flush(){if(this.activate(),_e.length>0){if(ke(),null!==pe&&pe!==this)return}else 0===V(this,n)&&this.process([]);this.deactivate()}discard(){for(const t of V(this,e))t(this);V(this,e).clear()}increment(t){G(this,n,V(this,n)+1),t&&G(this,r,V(this,r)+1)}decrement(t){G(this,n,V(this,n)-1),t&&G(this,r,V(this,r)-1),this.revive()}revive(){for(const t of V(this,i))V(this,u).delete(t),kr(t,_t),Me(t);for(const t of V(this,u))kr(t,yt),Me(t);this.flush()}oncommit(e){V(this,t).add(e)}ondiscard(t){V(this,e).add(t)}settled(){return(V(this,o)??G(this,o,ct())).promise}static ensure(){if(null===pe){const t=pe=new c;ve.add(pe),we||c.enqueue(()=>{pe===t&&t.flush()})}return pe}static enqueue(t){le(t)}apply(){}};function ke(){var t=Vn;be=!0;var e=new Set;try{var n=0;for(Kn(!0);_e.length>0;){var r=xe.ensure();if(n++>1e3){var o=new Map;for(const t of r.current.keys())for(const[e,n]of t.updated??[]){var i=o.get(e);i||(i={error:n.error,count:0},o.set(e,i)),i.count+=n.count}for(const t of o.values())t.error&&console.error(t.error);$e()}r.process(_e),Fe.clear();for(const t of r.current.keys())e.add(t)}}finally{be=!1,Kn(t),ye=null;for(const t of e)t.updated=null}}function $e(){try{!function(){{const t=new Error("effect_update_depth_exceeded\nMaximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state\nhttps://svelte.dev/e/effect_update_depth_exceeded");throw t.name="Svelte error",t}}()}catch(t){tt(t,"stack",{value:""}),de(t,ye)}}let Ce=null;function Se(t){var e=t.length;if(0!==e){for(var n=0;n<e;){var r=t[n++];if(!(24576&r.f)&&fr(r)&&(Ce=new Set,gr(r),null===r.deps&&null===r.first&&null===r.nodes&&(null===r.teardown&&null===r.ac?Wn(r):r.fn=null),(null==Ce?void 0:Ce.size)>0)){Fe.clear();for(const t of Ce){if(24576&t.f)continue;const e=[t];let n=t.parent;for(;null!==n;)Ce.has(n)&&(Ce.delete(n),e.push(n)),n=n.parent;for(let t=e.length-1;t>=0;t--){const n=e[t];24576&n.f||gr(n)}}Ce.clear()}}Ce=null}}function Ae(t,e,n,r){if(!n.has(t)&&(n.add(t),null!==t.reactions))for(const o of t.reactions){const t=o.f;2&t?Ae(o,e,n,r):4194320&t&&0===(t&_t)&&Ee(o,e,r)&&(kr(o,_t),Me(o))}}function Ee(t,e,n){const r=n.get(t);if(void 0!==r)return r;if(null!==t.deps)for(const o of t.deps){if(e.includes(o))return!0;if(2&o.f&&Ee(o,e,n))return n.set(o,!0),!0}return n.set(t,!1),!1}function Me(t){for(var e=ye=t;null!==e.parent;){var n=(e=e.parent).f;if(be&&e===Qn&&0!==(n&dt)&&0===(n&Ct))return;if(96&n){if(0===(n&mt))return;e.f^=mt}}_e.push(e)}class Ne{constructor(t,e,n){K(this,M),F(this,"parent"),K(this,h,!1),K(this,v),K(this,p,null),K(this,g),K(this,m),K(this,_),K(this,y,null),K(this,b,null),K(this,w,null),K(this,x,null),K(this,k,null),K(this,$,0),K(this,C,0),K(this,S,!1),K(this,A,null),K(this,E,function(t){let e,n=0,r=Ke(0);return Kt(r,"createSubscriber version"),()=>{An()&&(_r(r),In(()=>(0===n&&(e=wr(()=>t(()=>tn(r)))),n+=1,()=>{le(()=>{n-=1,0===n&&(null==e||e(),e=void 0,tn(r))})})))}}(()=>(G(this,A,Ke(V(this,$))),Kt(V(this,A),"$effect.pending()"),()=>{G(this,A,null)}))),G(this,v,t),G(this,g,e),G(this,m,n),this.parent=Qn.b,G(this,h,!!V(this,g).pending),G(this,_,Tn(()=>{Qn.b=this;var t=Z(this,M,N).call(this);try{G(this,y,jn(()=>n(t)))}catch(e){this.error(e)}return V(this,C)>0?Z(this,M,I).call(this):G(this,h,!1),()=>{var t;null==(t=V(this,k))||t.remove()}},589952))}is_pending(){return V(this,h)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!V(this,g).pending}update_pending_count(t){Z(this,M,P).call(this,t),G(this,$,V(this,$)+t),V(this,A)&&Xe(V(this,A),V(this,$))}get_effect_pending(){return V(this,E).call(this),_r(V(this,A))}error(t){var e=V(this,g).onerror;let n=V(this,g).failed;if(V(this,S)||!e&&!n)throw t;V(this,y)&&(zn(V(this,y)),G(this,y,null)),V(this,b)&&(zn(V(this,b)),G(this,b,null)),V(this,w)&&(zn(V(this,w)),G(this,w,null));var r=!1,o=!1;const i=()=>{r?console.warn("%c[svelte] svelte_boundary_reset_noop\n%cA `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\nhttps://svelte.dev/e/svelte_boundary_reset_noop",Ht,Dt):(r=!0,o&&function(){{const t=new Error("svelte_boundary_reset_onerror\nA `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\nhttps://svelte.dev/e/svelte_boundary_reset_onerror");throw t.name="Svelte error",t}}(),xe.ensure(),G(this,$,0),null!==V(this,w)&&Hn(V(this,w),()=>{G(this,w,null)}),G(this,h,this.has_pending_snippet()),G(this,y,Z(this,M,R).call(this,()=>(G(this,S,!1),jn(()=>V(this,m).call(this,V(this,v)))))),V(this,C)>0?Z(this,M,I).call(this):G(this,h,!1))};var u=Jn;try{Yn(null),o=!0,null==e||e(t,i),o=!1}catch(a){de(a,V(this,_)&&V(this,_).parent)}finally{Yn(u)}n&&le(()=>{G(this,w,Z(this,M,R).call(this,()=>{xe.ensure(),G(this,S,!0);try{return jn(()=>{n(V(this,v),()=>t,()=>i)})}catch(a){return de(a,V(this,_).parent),null}finally{G(this,S,!1)}}))})}}function Re(t,e,n,r){const o=ie()?Le:Be;if(0!==n.length||0!==t.length){var i,u,a,l,s,c=pe,f=Qn,d=(i=Qn,u=Jn,a=Jt,l=pe,s=Yt,function(t=!0){tr(i),Yn(u),Xt(a),t&&(null==l||l.activate()),Qt(s)});t.length>0?Promise.all(t).then(()=>{d();try{return h()}finally{null==c||c.deactivate(),Pe()}}):h()}else r(e.map(o));function h(){Promise.all(n.map(t=>je(t))).then(t=>{d();try{r([...e.map(o),...t])}catch(n){0===(f.f&wt)&&de(n,f)}null==c||c.deactivate(),Pe()}).catch(t=>{de(t,f)})}}async function Ie(t){var e=await t;return()=>e}function Pe(){tr(null),Yn(null),Xt(null),Qt(null)}h=new WeakMap,v=new WeakMap,p=new WeakMap,g=new WeakMap,m=new WeakMap,_=new WeakMap,y=new WeakMap,b=new WeakMap,w=new WeakMap,x=new WeakMap,k=new WeakMap,$=new WeakMap,C=new WeakMap,S=new WeakMap,A=new WeakMap,E=new WeakMap,M=new WeakSet,N=function(){var t=V(this,v);return V(this,h)&&(G(this,k,pn()),V(this,v).before(V(this,k)),t=V(this,k)),t},R=function(t){var e=Qn,n=Jn,r=Jt;tr(V(this,_)),Yn(V(this,_)),Xt(V(this,_).ctx);try{return t()}catch(o){return fe(o),null}finally{tr(e),Yn(n),Xt(r)}},I=function(){const t=V(this,g).pending;null!==V(this,y)&&(G(this,x,document.createDocumentFragment()),V(this,x).append(V(this,k)),qn(V(this,y),V(this,x))),null===V(this,b)&&G(this,b,jn(()=>t(V(this,v))))},P=function(t){var e;this.has_pending_snippet()?(G(this,C,V(this,C)+t),0===V(this,C)&&(G(this,h,!1),V(this,b)&&Hn(V(this,b),()=>{G(this,b,null)}),V(this,x)&&(V(this,v).before(V(this,x)),G(this,x,null)))):this.parent&&Z(e=this.parent,M,P).call(e,t)};const Te=new Set;function Le(t){var e=null!==Jn&&2&Jn.f?Jn:null;null!==Qn&&(Qn.f|=St);return{ctx:Jt,deps:null,effects:null,equals:Ft,f:2050,fn:t,reactions:null,rv:0,v:zt,wv:0,parent:e??Qn,ac:null}}function je(t,e){let n=Qn;null===n&&function(){{const t=new Error("async_derived_orphan\nCannot create a `$derived(...)` with an `await` expression outside of an effect tree\nhttps://svelte.dev/e/async_derived_orphan");throw t.name="Svelte error",t}}();var r=n.b,o=void 0,i=Ke(zt),u=!Jn,a=new Map;return function(t){Sn(4718592,t,!0)}(()=>{var e,n=ct();o=n.promise;try{Promise.resolve(t()).then(n.resolve,n.reject).then(()=>{l===pe&&l.committed&&l.deactivate(),Pe()})}catch(f){n.reject(f),Pe()}var l=pe;if(u){var s=!r.is_pending();r.update_pending_count(1),l.increment(s),null==(e=a.get(l))||e.reject(jt),a.delete(l),a.set(l,n)}const c=(t,e=void 0)=>{if(l.activate(),e)e!==jt&&(i.f|=Rt,Xe(i,e));else{0!==(i.f&Rt)&&(i.f^=Rt),Xe(i,t);for(const[t,e]of a){if(a.delete(t),t===l)break;e.reject(jt)}}u&&(r.update_pending_count(-1),l.decrement(s))};n.promise.then(c,t=>c(null,t||"unknown"))}),En(()=>{for(const t of a.values())t.reject(jt)}),i.f|=Nt,new Promise(t=>{!function e(n){function r(){n===o?t(i):e(o)}n.then(r,r)}(o)})}function Oe(t){const e=Le(t);return nr(e),e}function Be(t){const e=Le(t);return e.equals=qt,e}function ze(t){var e=t.effects;if(null!==e){t.effects=null;for(var n=0;n<e.length;n+=1)zn(e[n])}}let We=[];function He(t){var e,n=Qn;tr(function(t){for(var e=t.parent;null!==e;){if(!(2&e.f))return 0===(e.f&wt)?e:null;e=e.parent}return null}(t));{let r=Ue;qe(new Set);try{We.includes(t)&&function(){{const t=new Error("derived_references_self\nA derived value cannot reference itself recursively\nhttps://svelte.dev/e/derived_references_self");throw t.name="Svelte error",t}}(),We.push(t),t.f&=-32769,ze(t),e=hr(t)}finally{tr(n),qe(r),We.pop()}}return e}function De(t){var e=He(t);(t.equals(e)||((null==pe?void 0:pe.is_fork)||(t.v=e),t.wv=cr()),Gn)||(null!==me?(An()||(null==pe?void 0:pe.is_fork))&&me.set(t,e):kr(t,0===(t.f&gt)?yt:mt))}let Ue=new Set;const Fe=new Map;function qe(t){Ue=t}let Ve=!1;function Ke(t,e){return{f:0,v:t,reactions:null,equals:Ft,rv:0,wv:0}}function Ge(t,e){const n=Ke(t);return nr(n),n}function Ze(t,e=!1,n=!0){var r;const o=Ke(t);return e||(o.equals=qt),Vt&&n&&null!==Jt&&null!==Jt.l&&((r=Jt.l).s??(r.s=[])).push(o),o}function Je(t,e,n=!1){null!==Jn&&(!Xn||0!==(Jn.f&$t))&&ie()&&4325394&Jn.f&&!(null==er?void 0:er.includes(t))&&function(){{const t=new Error("state_unsafe_mutation\nUpdating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\nhttps://svelte.dev/e/state_unsafe_mutation");throw t.name="Svelte error",t}}();let r=n?rn(e):e;return Gt(r,t.label),Xe(t,r)}function Xe(t,e){var n;if(!t.equals(e)){var r=t.v;Gn?Fe.set(t,e):Fe.set(t,r),t.v=e;var o=xe.ensure();if(o.capture(t,r),null!==Qn){t.updated??(t.updated=new Map);const e=((null==(n=t.updated.get(""))?void 0:n.count)??0)+1;if(t.updated.set("",{error:null,count:e}),e>5){const e=Zt("updated at");if(null!==e){let n=t.updated.get(e.stack);n||(n={error:e,count:0},t.updated.set(e.stack,n)),n.count++}}}null!==Qn&&(t.set_during_effect=!0),2&t.f&&(0!==(t.f&_t)&&He(t),kr(t,0!==(t.f&gt)?mt:yt)),t.wv=cr(),en(t,_t),!ie()||null===Qn||0===(Qn.f&mt)||96&Qn.f||(null===ir?function(t){ir=t}([t]):ir.push(t)),!o.is_fork&&Ue.size>0&&!Ve&&Ye()}return e}function Ye(){Ve=!1;var t=Vn;Kn(!0);const e=Array.from(Ue);try{for(const t of e)0!==(t.f&mt)&&kr(t,yt),fr(t)&&gr(t)}finally{Kn(t)}Ue.clear()}function Qe(t,e=1){var n=_r(t),r=1===e?n++:n--;return Je(t,n),r}function tn(t){Je(t,t.v+1)}function en(t,e){var n=t.reactions;if(null!==n)for(var r=ie(),o=n.length,i=0;i<o;i++){var u=n[i],a=u.f;if(r||u!==Qn)if(0===(a&$t)){var l=0===(a&_t);if(l&&kr(u,e),2&a){var s=u;null==me||me.delete(s),0===(a&Et)&&(a&gt&&(u.f|=Et),en(s,yt))}else l&&(0!==(a&dt)&&null!==Ce&&Ce.add(u),Me(u))}else Ue.add(u)}}const nn=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function rn(t){if("object"!=typeof t||null===t||It in t)return t;const e=it(t);if(e!==rt&&e!==ot)return t;var n=new Map,r=X(t),o=Ge(0),i=lr,u=t=>{if(lr===i)return t();var e=Jn,n=lr;Yn(null),sr(i);var r=t();return Yn(e),sr(n),r};r&&(n.set("length",Ge(t.length)),t=new Proxy(t,{get(t,e,n){var r=Reflect.get(t,e,n);return ln.has(e)?function(...t){Ve=!0;var e=r.apply(this,t);return Ye(),e}:r}}));var a="";let l=!1;function s(t){if(!l){l=!0,Kt(o,`${a=t} version`);for(const[t,e]of n)Kt(e,on(a,t));l=!1}}return new Proxy(t,{defineProperty(t,e,r){"value"in r&&!1!==r.configurable&&!1!==r.enumerable&&!1!==r.writable||function(){{const t=new Error("state_descriptors_fixed\nProperty descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\nhttps://svelte.dev/e/state_descriptors_fixed");throw t.name="Svelte error",t}}();var o=n.get(e);return void 0===o?o=u(()=>{var t=Ge(r.value);return n.set(e,t),"string"==typeof e&&Kt(t,on(a,e)),t}):Je(o,r.value,!0),!0},deleteProperty(t,e){var r=n.get(e);if(void 0===r){if(e in t){const t=u(()=>Ge(zt));n.set(e,t),tn(o),Kt(t,on(a,e))}}else Je(r,zt),tn(o);return!0},get(e,r,o){var i;if(r===It)return t;if(r===Lt)return s;var l=n.get(r),c=r in e;if(void 0!==l||c&&!(null==(i=et(e,r))?void 0:i.writable)||(l=u(()=>{var t=Ge(rn(c?e[r]:zt));return Kt(t,on(a,r)),t}),n.set(r,l)),void 0!==l){var f=_r(l);return f===zt?void 0:f}return Reflect.get(e,r,o)},getOwnPropertyDescriptor(t,e){var r=Reflect.getOwnPropertyDescriptor(t,e);if(r&&"value"in r){var o=n.get(e);o&&(r.value=_r(o))}else if(void 0===r){var i=n.get(e),u=null==i?void 0:i.v;if(void 0!==i&&u!==zt)return{enumerable:!0,configurable:!0,value:u,writable:!0}}return r},has(t,e){var r;if(e===It)return!0;var o=n.get(e),i=void 0!==o&&o.v!==zt||Reflect.has(t,e);if((void 0!==o||null!==Qn&&(!i||(null==(r=et(t,e))?void 0:r.writable)))&&(void 0===o&&(o=u(()=>{var n=Ge(i?rn(t[e]):zt);return Kt(n,on(a,e)),n}),n.set(e,o)),_r(o)===zt))return!1;return i},set(t,e,i,l){var s,c=n.get(e),f=e in t;if(r&&"length"===e)for(var d=i;d<c.v;d+=1){var h=n.get(d+"");void 0!==h?Je(h,zt):d in t&&(h=u(()=>Ge(zt)),n.set(d+"",h),Kt(h,on(a,d)))}void 0===c?f&&!(null==(s=et(t,e))?void 0:s.writable)||(Kt(c=u(()=>Ge(void 0)),on(a,e)),Je(c,rn(i)),n.set(e,c)):(f=c.v!==zt,Je(c,u(()=>rn(i))));var v=Reflect.getOwnPropertyDescriptor(t,e);if((null==v?void 0:v.set)&&v.set.call(l,i),!f){if(r&&"string"==typeof e){var p=n.get("length"),g=Number(e);Number.isInteger(g)&&g>=p.v&&Je(p,g+1)}tn(o)}return!0},ownKeys(t){_r(o);var e=Reflect.ownKeys(t).filter(t=>{var e=n.get(t);return void 0===e||e.v!==zt});for(var[r,i]of n)i.v===zt||r in t||e.push(r);return e},setPrototypeOf(){!function(){{const t=new Error("state_prototype_fixed\nCannot set prototype of `$state` object\nhttps://svelte.dev/e/state_prototype_fixed");throw t.name="Svelte error",t}}()}})}function on(t,e){return"symbol"==typeof e?`${t}[Symbol(${e.description??""})]`:nn.test(e)?`${t}.${e}`:/^\d+$/.test(e)?`${t}[${e}]`:`${t}['${e}']`}function un(t){try{if(null!==t&&"object"==typeof t&&It in t)return t[It]}catch{}return t}function an(t,e){return Object.is(un(t),un(e))}const ln=new Set(["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"]);function sn(t,e,n=!0){try{t===e!=(un(t)===un(e))&&Ut(n?"===":"!==")}catch{}return t===e===n}var cn,fn,dn,hn;function vn(){if(void 0===cn){cn=window,fn=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;dn=et(e,"firstChild").get,hn=et(e,"nextSibling").get,ut(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),ut(n)&&(n.__t=void 0),t.__svelte_meta=null,function(){const t=Array.prototype,e=Array.__svelte_cleanup;e&&e();const{indexOf:n,lastIndexOf:r,includes:o}=t;t.indexOf=function(t,e){const r=n.call(this,t,e);if(-1===r)for(let n=e??0;n<this.length;n+=1)if(un(this[n])===t){Ut("array.indexOf(...)");break}return r},t.lastIndexOf=function(t,e){const n=r.call(this,t,e??this.length-1);if(-1===n)for(let r=0;r<=(e??this.length-1);r+=1)if(un(this[r])===t){Ut("array.lastIndexOf(...)");break}return n},t.includes=function(t,e){const n=o.call(this,t,e);if(!n)for(let r=0;r<this.length;r+=1)if(un(this[r])===t){Ut("array.includes(...)");break}return n},Array.__svelte_cleanup=()=>{t.indexOf=n,t.lastIndexOf=r,t.includes=o}}()}}function pn(t=""){return document.createTextNode(t)}function gn(t){return dn.call(t)}function mn(t){return hn.call(t)}function _n(t,e){return gn(t)}function yn(t,e=!1){var n=gn(t);return n instanceof Comment&&""===n.data?mn(n):n}function bn(t,e=1,n=!1){let r=t;for(;e--;)r=mn(r);return r}function wn(t,e){if(e){const e=document.body;t.autofocus=!0,le(()=>{document.activeElement===e&&t.focus()})}}let xn=!1;function kn(t){var e=Jn,n=Qn;Yn(null),tr(null);try{return t()}finally{Yn(e),tr(n)}}function $n(t,e,n,r=n){t.addEventListener(e,()=>kn(n));const o=t.__on_r;t.__on_r=o?()=>{o(),r(!0)}:()=>r(!0),xn||(xn=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const n of t.target.elements)null==(e=n.__on_r)||e.call(n)})},{capture:!0}))}function Cn(t){null===Qn&&(null===Jn&&function(t){{const e=new Error(`effect_orphan\n\`${t}\` can only be used inside an effect (e.g. during component initialisation)\nhttps://svelte.dev/e/effect_orphan`);throw e.name="Svelte error",e}}(t),function(){{const t=new Error("effect_in_unowned_derived\nEffect cannot be created inside a `$derived` value that was not itself created inside an effect\nhttps://svelte.dev/e/effect_in_unowned_derived");throw t.name="Svelte error",t}}()),Gn&&function(t){{const e=new Error(`effect_in_teardown\n\`${t}\` cannot be used inside an effect cleanup function\nhttps://svelte.dev/e/effect_in_teardown`);throw e.name="Svelte error",e}}(t)}function Sn(t,e,n){for(var r=Qn;null!==r&&0!==(r.f&$t);)r=r.parent;null!==r&&0!==(r.f&bt)&&(t|=bt);var o={ctx:Jt,deps:null,nodes:null,f:t|_t|gt,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(o.component_function=ee,n)try{gr(o),o.f|=xt}catch(a){throw zn(o),a}else null!==e&&Me(o);var i=o;if(n&&null===i.deps&&null===i.teardown&&null===i.nodes&&i.first===i.last&&0===(i.f&St)&&(i=i.first,0!==(t&dt)&&0!==(t&kt)&&null!==i&&(i.f|=kt)),null!==i&&(i.parent=r,null!==r&&function(t,e){var n=e.last;null===n?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}(i,r),null!==Jn&&2&Jn.f&&0===(t&vt))){var u=Jn;(u.effects??(u.effects=[])).push(i)}return o}function An(){return null!==Jn&&!Xn}function En(t){const e=Sn(8,null,!1);return kr(e,mt),e.teardown=t,e}function Mn(t){Cn("$effect"),tt(t,"name",{value:"$effect"});var e=Qn.f;if(!(!Jn&&0!==(e&ht)&&0===(e&xt)))return Nn(t);var n=Jt;(n.e??(n.e=[])).push(t)}function Nn(t){return Sn(1048580,t,!1)}function Rn(t){return Sn(4,t,!1)}function In(t,e=0){return Sn(8|e,t,!0)}function Pn(t,e=[],n=[],r=[]){Re(r,e,n,e=>{Sn(8,()=>t(...e.map(_r)),!0)})}function Tn(t,e=0){var n=Sn(dt|e,t,!0);return n.dev_stack=Yt,n}function Ln(t,e=0){var n=Sn(ft|e,t,!0);return n.dev_stack=Yt,n}function jn(t){return Sn(524320,t,!0)}function On(t){var e=t.teardown;if(null!==e){const t=Gn,n=Jn;Zn(!0),Yn(null);try{e.call(null)}finally{Zn(t),Yn(n)}}}function Bn(t,e=!1){var n=t.first;for(t.first=t.last=null;null!==n;){const t=n.ac;null!==t&&kn(()=>{t.abort(jt)});var r=n.next;0!==(n.f&vt)?n.parent=null:zn(n,e),n=r}}function zn(t,e=!0){var n=!1;!e&&0===(t.f&Ct)||null===t.nodes||null===t.nodes.end||(!function(t,e){for(;null!==t;){var n=t===e?null:mn(t);t.remove(),t=n}}(t.nodes.start,t.nodes.end),n=!0),Bn(t,e&&!n),pr(t,0),kr(t,wt);var r=t.nodes&&t.nodes.t;if(null!==r)for(const i of r)i.stop();On(t);var o=t.parent;null!==o&&null!==o.first&&Wn(t),t.component_function=null,t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Wn(t){var e=t.parent,n=t.prev,r=t.next;null!==n&&(n.next=r),null!==r&&(r.prev=n),null!==e&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Hn(t,e,n=!0){var r=[];Dn(t,r,!0);var o=()=>{n&&zn(t),e&&e()},i=r.length;if(i>0){var u=()=>--i||o();for(var a of r)a.out(u)}else o()}function Dn(t,e,n){if(0===(t.f&bt)){t.f^=bt;var r=t.nodes&&t.nodes.t;if(null!==r)for(const t of r)(t.is_global||n)&&e.push(t);for(var o=t.first;null!==o;){var i=o.next;Dn(o,e,!!(0!==(o.f&kt)||0!==(o.f&ht)&&0!==(t.f&dt))&&n),o=i}}}function Un(t){Fn(t,!0)}function Fn(t,e){if(0!==(t.f&bt)){t.f^=bt,0===(t.f&mt)&&(kr(t,_t),Me(t));for(var n=t.first;null!==n;){var r=n.next;Fn(n,!!(0!==(n.f&kt)||0!==(n.f&ht))&&e),n=r}var o=t.nodes&&t.nodes.t;if(null!==o)for(const t of o)(t.is_global||e)&&t.in()}}function qn(t,e){if(t.nodes)for(var n=t.nodes.start,r=t.nodes.end;null!==n;){var o=n===r?null:mn(n);e.append(n),n=o}}let Vn=!1;function Kn(t){Vn=t}let Gn=!1;function Zn(t){Gn=t}let Jn=null,Xn=!1;function Yn(t){Jn=t}let Qn=null;function tr(t){Qn=t}let er=null;function nr(t){null!==Jn&&(null===er?er=[t]:er.push(t))}let rr=null,or=0,ir=null;let ur=1,ar=0,lr=ar;function sr(t){lr=t}function cr(){return++ur}function fr(t){var e=t.f;if(0!==(e&_t))return!0;if(2&e&&(t.f&=-32769),0!==(e&yt)){var n=t.deps;if(null!==n)for(var r=n.length,o=0;o<r;o++){var i=n[o];if(fr(i)&&De(i),i.wv>t.wv)return!0}0!==(e&gt)&&null===me&&kr(t,mt)}return!1}function dr(t,e,n=!0){var r=t.reactions;if(null!==r&&!(null==er?void 0:er.includes(t)))for(var o=0;o<r.length;o++){var i=r[o];2&i.f?dr(i,e,!1):e===i&&(n?kr(i,_t):0!==(i.f&mt)&&kr(i,yt),Me(i))}}function hr(t){var e,n=rr,r=or,o=ir,i=Jn,u=er,a=Jt,l=Xn,s=lr,c=t.f;rr=null,or=0,ir=null,Jn=96&c?null:t,er=null,Xt(t.ctx),Xn=!1,lr=++ar,null!==t.ac&&(kn(()=>{t.ac.abort(jt)}),t.ac=null);try{t.f|=Mt;var f=(0,t.fn)(),d=t.deps;if(null!==rr){var h;if(pr(t,or),null!==d&&or>0)for(d.length=or+rr.length,h=0;h<rr.length;h++)d[or+h]=rr[h];else t.deps=d=rr;if(An()&&0!==(t.f&gt))for(h=or;h<d.length;h++)((e=d[h]).reactions??(e.reactions=[])).push(t)}else null!==d&&or<d.length&&(pr(t,or),d.length=or);if(ie()&&null!==ir&&!Xn&&null!==d&&!(6146&t.f))for(h=0;h<ir.length;h++)dr(ir[h],t);return null!==i&&i!==t&&(ar++,null!==ir&&(null===o?o=ir:o.push(...ir))),0!==(t.f&Rt)&&(t.f^=Rt),f}catch(v){return fe(v)}finally{t.f^=Mt,rr=n,or=r,ir=o,Jn=i,er=u,Xt(a),Xn=l,lr=s}}function vr(t,e){let n=e.reactions;if(null!==n){var r=Y.call(n,t);if(-1!==r){var o=n.length-1;0===o?n=e.reactions=null:(n[r]=n[o],n.pop())}}null===n&&2&e.f&&(null===rr||!rr.includes(e))&&(kr(e,yt),0!==(e.f&gt)&&(e.f^=gt,e.f&=-32769),ze(e),pr(e,0))}function pr(t,e){var n=t.deps;if(null!==n)for(var r=e;r<n.length;r++)vr(t,n[r])}function gr(t){var e=t.f;if(0===(e&wt)){kr(t,mt);var n=Qn,r=Vn;Qn=t,Vn=!0;var o=ee;ne(t.component_function);var i=Yt;Qt(t.dev_stack??Yt);try{16777232&e?function(t){for(var e=t.first;null!==e;){var n=e.next;0===(e.f&ht)&&zn(e),e=n}}(t):Bn(t),On(t);var u=hr(t);t.teardown="function"==typeof u?u:null,t.wv=ur}finally{Vn=r,Qn=n,ne(o),Qt(i)}}}async function mr(){await Promise.resolve(),function(){var t=we;we=!0;try{for(;;){if(se(),0===_e.length&&(null==pe||pe.flush(),0===_e.length))return void(ye=null);ke()}}finally{we=t}}()}function _r(t){var e=!!(2&t.f);if(null!==Jn&&!Xn&&(!(null!==Qn&&0!==(Qn.f&wt))&&!(null==er?void 0:er.includes(t)))){var n=Jn.deps;if(0!==(Jn.f&Mt))t.rv<ar&&(t.rv=ar,null===rr&&null!==n&&n[or]===t?or++:null===rr?rr=[t]:rr.includes(t)||rr.push(t));else{(Jn.deps??(Jn.deps=[])).push(t);var r=t.reactions;null===r?t.reactions=[Jn]:r.includes(Jn)||r.push(Jn)}}if(Te.delete(t),Gn){if(Fe.has(t))return Fe.get(t);if(e){var o=t,i=o.v;return(0===(o.f&mt)&&null!==o.reactions||br(o))&&(i=He(o)),Fe.set(o,i),i}}else e&&(!(null==me?void 0:me.has(t))||(null==pe?void 0:pe.is_fork)&&!An())&&(fr(o=t)&&De(o),Vn&&An()&&0===(o.f&gt)&&yr(o));if(null==me?void 0:me.has(t))return me.get(t);if(0!==(t.f&Rt))throw t.v;return t.v}function yr(t){if(null!==t.deps){t.f^=gt;for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),2&e.f&&0===(e.f&gt)&&yr(e)}}function br(t){if(t.v===zt)return!0;if(null===t.deps)return!1;for(const e of t.deps){if(Fe.has(e))return!0;if(2&e.f&&br(e))return!0}return!1}function wr(t){var e=Xn;try{return Xn=!0,t()}finally{Xn=e}}const xr=-7169;function kr(t,e){t.f=t.f&xr|e}function $r(t){if("object"==typeof t&&t&&!(t instanceof EventTarget))if(It in t)Cr(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];"object"==typeof n&&n&&It in n&&Cr(n)}}function Cr(t,e=new Set){if(!("object"!=typeof t||null===t||t instanceof EventTarget||e.has(t))){e.add(t),t instanceof Date&&t.getTime();for(let o in t)try{Cr(t[o],e)}catch(n){}const r=it(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const e=nt(r);for(let r in e){const o=e[r].get;if(o)try{o.call(t)}catch(n){}}}}}function Sr(t){return t.endsWith("capture")&&"gotpointercapture"!==t&&"lostpointercapture"!==t}const Ar=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Er(t){return Ar.includes(t)}const Mr={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Nr(t){return t=t.toLowerCase(),Mr[t]??t}const Rr=["touchstart","touchmove"];function Ir(t){return Rr.includes(t)}function Pr(t,e,n){return(...r)=>{const o=t(...r);return Lr(11===o.nodeType?o.firstChild:o,e,n),o}}function Tr(t,e,n){t.__svelte_meta={parent:Yt,loc:{file:e,line:n[0],column:n[1]}},n[2]&&Lr(t.firstChild,e,n[2])}function Lr(t,e,n){for(var r=0;t&&r<n.length;)1===t.nodeType&&Tr(t,e,n[r++]),t=t.nextSibling}const jr=new Set,Or=new Set;function Br(t,e,n,r={}){function o(t){if(r.capture||Dr.call(e,t),!t.cancelBubble)return kn(()=>null==n?void 0:n.call(this,t))}return t.startsWith("pointer")||t.startsWith("touch")||"wheel"===t?le(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function zr(t,e,n,r,o){var i={capture:r,passive:o},u=Br(t,e,n,i);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&En(()=>{e.removeEventListener(t,u,i)})}function Wr(t){for(var e=0;e<t.length;e++)jr.add(t[e]);for(var n of Or)n(t)}let Hr=null;function Dr(t){var e,n=this,r=n.ownerDocument,o=t.type,i=(null==(e=t.composedPath)?void 0:e.call(t))||[],u=i[0]||t.target;Hr=t;var a=0,l=Hr===t&&t.__root;if(l){var s=i.indexOf(l);if(-1!==s&&(n===document||n===window))return void(t.__root=n);var c=i.indexOf(n);if(-1===c)return;s<=c&&(a=s)}if((u=i[a]||t.target)!==n){tt(t,"currentTarget",{configurable:!0,get:()=>u||r});var f=Jn,d=Qn;Yn(null),tr(null);try{for(var h,v=[];null!==u;){var p=u.assignedSlot||u.parentNode||u.host||null;try{var g=u["__"+o];null==g||u.disabled&&t.target!==u||g.call(u,t)}catch(m){h?v.push(m):h=m}if(t.cancelBubble||p===n||null===p)break;u=p}if(h){for(let t of v)queueMicrotask(()=>{throw t});throw h}}finally{t.__root=n,delete t.currentTarget,Yn(f),tr(d)}}}function Ur(t,e,n,r,o,i=!1,u=!1){var a,l;let s,c;try{s=t()}catch(f){c=f}if("function"!=typeof s&&(i||null!=s||c)){const t=null==r?void 0:r[Wt],e=o?` at ${t}:${o[0]}:${o[1]}`:` in ${t}`,i=(null==(a=n[0])?void 0:a.eventPhase)<Event.BUBBLING_PHASE?"capture":"";if(function(t,e){console.warn(`%c[svelte] event_handler_invalid\n%c${t} should be a function. Did you mean to ${e}?\nhttps://svelte.dev/e/event_handler_invalid`,Ht,Dt)}(`\`${(null==(l=n[0])?void 0:l.type)+i}\` handler${e}`,u?"remove the trailing `()`":"add a leading `() =>`"),c)throw c}null==s||s.apply(e,n)}function Fr(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","\x3c!----\x3e"),e.content}function qr(t,e){var n=Qn;null===n.nodes&&(n.nodes={start:t,end:e,a:null,t:null})}function Vr(t,e){var n,r=!!(1&e),o=!!(2&e),i=!t.startsWith("<!>");return()=>{void 0===n&&(n=Fr(i?t:"<!>"+t),r||(n=gn(n)));var e=o||fn?document.importNode(n,!0):n.cloneNode(!0);r?qr(gn(e),e.lastChild):qr(e,e);return e}}function Kr(t,e,n="svg"){var r,o=`<${n}>${!t.startsWith("<!>")?t:"<!>"+t}</${n}>`;return()=>{if(!r){var t=Fr(o);r=gn(gn(t))}var e=r.cloneNode(!0);return qr(e,e),e}}function Gr(t,e){return Kr(t,0,"svg")}function Zr(){var t=document.createDocumentFragment(),e=document.createComment(""),n=pn();return t.append(e,n),qr(e,n),t}function Jr(t,e){null!==t&&t.before(e)}function Xr(t,e){var n=null==e?"":"object"==typeof e?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function Yr(t,e){return function(t,{target:e,anchor:n,props:r={},events:o,context:i,intro:u=!0}){vn();var a=new Set,l=t=>{for(var n=0;n<t.length;n++){var r=t[n];if(!a.has(r)){a.add(r);var o=Ir(r);e.addEventListener(r,Dr,{passive:o});var i=Qr.get(r);void 0===i?(document.addEventListener(r,Dr,{passive:o}),Qr.set(r,1)):Qr.set(r,i+1)}}};l(Q(jr)),Or.add(l);var s=void 0,c=function(t){xe.ensure();const e=Sn(524352,t,!0);return(t={})=>new Promise(n=>{t.outro?Hn(e,()=>{zn(e),n(void 0)}):(zn(e),n(void 0))})}(()=>{var u=n??e.appendChild(pn());return function(t,e,n){new Ne(t,e,n)}(u,{pending:()=>{}},e=>{i&&(re({}),Jt.c=i);o&&(r.$$events=o),s=t(e,r)||{},i&&oe()}),()=>{var t;for(var r of a){e.removeEventListener(r,Dr);var o=Qr.get(r);0===--o?(document.removeEventListener(r,Dr),Qr.delete(r)):Qr.set(r,o)}Or.delete(l),u!==n&&(null==(t=u.parentNode)||t.removeChild(u))}});return to.set(s,c),s}(t,e)}const Qr=new Map;let to=new WeakMap;function eo(t,e){const n=to.get(t);return n?(to.delete(t),n(e)):(It in t?console.warn("%c[svelte] state_proxy_unmount\n%cTried to unmount a state proxy, rather than a component\nhttps://svelte.dev/e/state_proxy_unmount",Ht,Dt):console.warn("%c[svelte] lifecycle_double_unmount\n%cTried to unmount a component that was not mounted\nhttps://svelte.dev/e/lifecycle_double_unmount",Ht,Dt),Promise.resolve())}function no(t){t&&function(t,e){{const n=new Error(`component_api_invalid_new\nAttempted to instantiate ${t} with \`new ${e}\`, which is no longer valid in Svelte 5. If this component is not under your control, set the \`compatibility.componentApi\` compiler option to \`4\` to keep it working.\nhttps://svelte.dev/e/component_api_invalid_new`);throw n.name="Svelte error",n}}(t[Wt]??"a component",t.name)}function ro(){const t=null==Jt?void 0:Jt.function;function e(e){!function(t,e){{const n=new Error(`component_api_changed\nCalling \`${t}\` on a component instance (of ${e}) is no longer valid in Svelte 5\nhttps://svelte.dev/e/component_api_changed`);throw n.name="Svelte error",n}}(e,t[Wt])}return{$destroy:()=>e("$destroy()"),$on:()=>e("$on(...)"),$set:()=>e("$set(...)")}}class oo{constructor(t,e=!0){F(this,"anchor"),K(this,T,new Map),K(this,L,new Map),K(this,j,new Map),K(this,O,new Set),K(this,B,!0),K(this,z,()=>{var t=pe;if(V(this,T).has(t)){var e=V(this,T).get(t),n=V(this,L).get(e);if(n)Un(n),V(this,O).delete(e);else{var r=V(this,j).get(e);r&&(V(this,L).set(e,r.effect),V(this,j).delete(e),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),n=r.effect)}for(const[e,n]of V(this,T)){if(V(this,T).delete(e),e===t)break;const r=V(this,j).get(n);r&&(zn(r.effect),V(this,j).delete(n))}for(const[t,r]of V(this,L)){if(t===e||V(this,O).has(t))continue;const o=()=>{if(Array.from(V(this,T).values()).includes(t)){var e=document.createDocumentFragment();qn(r,e),e.append(pn()),V(this,j).set(t,{effect:r,fragment:e})}else zn(r);V(this,O).delete(t),V(this,L).delete(t)};V(this,B)||!n?(V(this,O).add(t),Hn(r,o,!1)):o()}}}),K(this,W,t=>{V(this,T).delete(t);const e=Array.from(V(this,T).values());for(const[n,r]of V(this,j))e.includes(n)||(zn(r.effect),V(this,j).delete(n))}),this.anchor=t,G(this,B,e)}ensure(t,e){var n=pe;!e||V(this,L).has(t)||V(this,j).has(t)||V(this,L).set(t,jn(()=>e(this.anchor)));V(this,T).set(n,t),V(this,z).call(this)}}function io(t,e,n=!1){var r=new oo(t);function o(t,e){r.ensure(t,e)}Tn(()=>{var t=!1;e((e,n=!0)=>{t=!0,o(n,e)}),t||o(!1,null)},n?kt:0)}function uo(t,e){return e}function ao(t,e=!0){for(var n=0;n<t.length;n++)zn(t[n],e)}var lo;function so(t,e,n,r,o,i=null){var u=t,a=new Map;!(4&e)||(u=t.appendChild(pn()));var l,s=null,c=Be(()=>{var t=n();return X(t)?t:null==t?[]:Q(t)}),f=!0;function d(){h.fallback=s,function(t,e,n,r,o){var i,u,a,l,s,c,f,d,h,v,p,g,m,_,y=!!(8&r),b=e.length,w=t.items,x=t.effect.first,k=null,$=[],C=[];if(y)for(_=0;_<b;_+=1)g=o(e[_],_),0===((m=w.get(g).e).f&At)&&(null==(u=null==(i=m.nodes)?void 0:i.a)||u.measure(),(p??(p=new Set)).add(m));for(_=0;_<b;_+=1){if(g=o(e[_],_),m=w.get(g).e,null!==t.outrogroups)for(const e of t.outrogroups)e.pending.delete(m),e.done.delete(m);if(0!==(m.f&At)){if(m.f^=At,m!==x){var S=k?k.next:x;m===t.effect.last&&(t.effect.last=m.prev),m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),ho(t,k,m),ho(t,m,S),fo(m,S,n),$=[],C=[],x=(k=m).next;continue}fo(m,null,n)}if(0!==(m.f&bt)&&(Un(m),y&&(null==(l=null==(a=m.nodes)?void 0:a.a)||l.unfix(),(p??(p=new Set)).delete(m))),m!==x){if(void 0!==v&&v.has(m)){if($.length<C.length){var A,E=C[0];k=E.prev;var M=$[0],N=$[$.length-1];for(A=0;A<$.length;A+=1)fo($[A],E,n);for(A=0;A<C.length;A+=1)v.delete(C[A]);ho(t,M.prev,N.next),ho(t,k,M),ho(t,N,E),x=E,k=N,_-=1,$=[],C=[]}else v.delete(m),fo(m,x,n),ho(t,m.prev,m.next),ho(t,m,null===k?t.effect.first:k.next),ho(t,k,m),k=m;continue}for($=[],C=[];null!==x&&x!==m;)(v??(v=new Set)).add(x),C.push(x),x=x.next;if(null===x)continue}0===(m.f&At)&&$.push(m),k=m,x=m.next}if(null!==t.outrogroups){for(const e of t.outrogroups)0===e.pending.size&&(ao(Q(e.done)),null==(s=t.outrogroups)||s.delete(e));0===t.outrogroups.size&&(t.outrogroups=null)}if(null!==x||void 0!==v){var R=[];if(void 0!==v)for(m of v)0===(m.f&bt)&&R.push(m);for(;null!==x;)0===(x.f&bt)&&x!==t.fallback&&R.push(x),x=x.next;var I=R.length;if(I>0){var P=4&r&&0===b?n:null;if(y){for(_=0;_<I;_+=1)null==(f=null==(c=R[_].nodes)?void 0:c.a)||f.measure();for(_=0;_<I;_+=1)null==(h=null==(d=R[_].nodes)?void 0:d.a)||h.fix()}!function(t,e,n){for(var r,o=e.length,i=e.length,u=0;u<o;u++){let n=e[u];Hn(n,()=>{if(r){if(r.pending.delete(n),r.done.add(n),0===r.pending.size){var e=t.outrogroups;ao(Q(r.done)),e.delete(r),0===e.size&&(t.outrogroups=null)}}else i-=1},!1)}if(0===i){var a=null!==n;if(a){var l=n,s=l.parentNode;s.textContent="",s.append(l),t.items.clear()}ao(e,!a)}else r={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(r)}(t,R,P)}}y&&le(()=>{var t,e;if(void 0!==p)for(m of p)null==(e=null==(t=m.nodes)?void 0:t.a)||e.apply()})}(h,l,u,e,r),null!==s&&(0===l.length?0===(s.f&At)?Un(s):(s.f^=At,fo(s,null,u)):Hn(s,()=>{s=null}))}var h={effect:Tn(()=>{for(var t=(l=_r(c)).length,h=new Set,v=0;v<t;v+=1){var p=l[v],g=r(p,v),m=f?null:a.get(g);m?(m.v&&Xe(m.v,p),m.i&&Xe(m.i,v)):(m=co(a,f?u:lo??(lo=pn()),p,g,v,o,e,n),f||(m.e.f|=At),a.set(g,m)),h.add(g)}0===t&&i&&!s&&(f?s=jn(()=>i(u)):(s=jn(()=>i(lo??(lo=pn())))).f|=At),f||d(),_r(c)}),items:a,outrogroups:null,fallback:s};f=!1}function co(t,e,n,r,o,i,u,a){var l=1&u?16&u?Ke(n):Ze(n,!1,!1):null,s=2&u?Ke(o):null;return l&&(l.trace=()=>{a()[(null==s?void 0:s.v)??o]}),{v:l,i:s,e:jn(()=>(i(e,l??n,s??o,a),()=>{t.delete(r)}))}}function fo(t,e,n){if(t.nodes)for(var r=t.nodes.start,o=t.nodes.end,i=e&&0===(e.f&At)?e.nodes.start:n;null!==r;){var u=mn(r);if(i.before(r),r===o)return;r=u}}function ho(t,e,n){null===e?t.effect.first=n:e.next=n,null===n?t.effect.last=e:n.prev=e}function vo(t,e,n,r,o){var i,u=null==(i=e.$$slots)?void 0:i[n],a=!1;!0===u&&(u=e.children,a=!0),void 0===u||u(t,a?()=>r:r)}function po(t){const e=t();e&&!("string"==typeof e)&&function(){{const t=new Error("svelte_element_invalid_this_value\nThe `this` prop on `<svelte:element>` must be a string, if defined\nhttps://svelte.dev/e/svelte_element_invalid_this_value");throw t.name="Svelte error",t}}()}function go(t){return t.toString=()=>(function(){{const t=new Error("snippet_without_render_tag\nAttempted to render a snippet without a `{@render}` block. This would cause the snippet code to be stringified instead of its content being rendered to the DOM. To fix this, change `{snippet}` to `{@render snippet()}`.\nhttps://svelte.dev/e/snippet_without_render_tag");throw t.name="Svelte error",t}}(),""),t}function mo(t,e){const n=(n,...r)=>{var o=ee;ne(t);try{return e(n,...r)}finally{ne(o)}};return go(n),n}function _o(t,e){var n,r=void 0;Ln(()=>{r!==(r=e())&&(n&&(zn(n),n=null),r&&(n=jn(()=>{Rn(()=>r(t))})))})}function yo(t){var e,n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=yo(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function bo(t){return"object"==typeof t?function(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=yo(t))&&(r&&(r+=" "),r+=e);return r}(t):t??""}T=new WeakMap,L=new WeakMap,j=new WeakMap,O=new WeakMap,B=new WeakMap,z=new WeakMap,W=new WeakMap;const wo=[..." \t\n\r\fÂ \v\ufeff"];function xo(t,e=!1){var n=e?" !important;":";",r="";for(var o in t){var i=t[o];null!=i&&""!==i&&(r+=" "+o+": "+i+n)}return r}function ko(t){return"-"!==t[0]||"-"!==t[1]?t.toLowerCase():t}function $o(t,e,n,r,o,i){var u=t.__className;if(u!==n||void 0===u){var a=function(t,e,n){var r=null==t?"":""+t;if(e&&(r=r?r+" "+e:e),n)for(var o in n)if(n[o])r=r?r+" "+o:o;else if(r.length)for(var i=o.length,u=0;(u=r.indexOf(o,u))>=0;){var a=u+i;0!==u&&!wo.includes(r[u-1])||a!==r.length&&!wo.includes(r[a])?u=a:r=(0===u?"":r.substring(0,u))+r.substring(a+1)}return""===r?null:r}(n,r,i);null==a?t.removeAttribute("class"):e?t.className=a:t.setAttribute("class",a),t.__className=n}else if(i&&o!==i)for(var l in i){var s=!!i[l];null!=o&&s===!!o[l]||t.classList.toggle(l,s)}return i}function Co(t,e={},n,r){for(var o in n){var i=n[o];e[o]!==i&&(null==n[o]?t.style.removeProperty(o):t.style.setProperty(o,i,r))}}function So(t,e,n,r){if(t.__style!==e){var o=function(t,e){if(e){var n,r,o="";if(Array.isArray(e)?(n=e[0],r=e[1]):n=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,u=0,a=!1,l=[];n&&l.push(...Object.keys(n).map(ko)),r&&l.push(...Object.keys(r).map(ko));var s=0,c=-1;const e=t.length;for(var f=0;f<e;f++){var d=t[f];if(a?"/"===d&&"*"===t[f-1]&&(a=!1):i?i===d&&(i=!1):"/"===d&&"*"===t[f+1]?a=!0:'"'===d||"'"===d?i=d:"("===d?u++:")"===d&&u--,!a&&!1===i&&0===u)if(":"===d&&-1===c)c=f;else if(";"===d||f===e-1){if(-1!==c){var h=ko(t.substring(s,c).trim());l.includes(h)||(";"!==d&&f++,o+=" "+t.substring(s,f).trim()+";")}s=f+1,c=-1}}}return n&&(o+=xo(n)),r&&(o+=xo(r,!0)),""===(o=o.trim())?null:o}return null==t?null:String(t)}(e,r);null==o?t.removeAttribute("style"):t.style.cssText=o,t.__style=e}else r&&(Array.isArray(r)?(Co(t,null==n?void 0:n[0],r[0]),Co(t,null==n?void 0:n[1],r[1],"important")):Co(t,n,r));return r}function Ao(t,e,n=!1){if(t.multiple){if(null==e)return;if(!X(e))return void console.warn("%c[svelte] select_multiple_invalid_value\n%cThe `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\nhttps://svelte.dev/e/select_multiple_invalid_value",Ht,Dt);for(var r of t.options)r.selected=e.includes(Mo(r))}else{for(r of t.options){if(an(Mo(r),e))return void(r.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}}function Eo(t){var e=new MutationObserver(()=>{Ao(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),En(()=>{e.disconnect()})}function Mo(t){return"__value"in t?t.__value:t.value}const No=Symbol("class"),Ro=Symbol("style"),Io=Symbol("is custom element"),Po=Symbol("is html");function To(t,e){var n=Bo(t);n.value!==(n.value=e??void 0)&&(t.value!==e||0===e&&"PROGRESS"===t.nodeName)&&(t.value=e??"")}function Lo(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function jo(t,e,n,r){var o=Bo(t);o[e]!==(o[e]=n)&&("loading"===e&&(t[Tt]=n),null==n?t.removeAttribute(e):"string"!=typeof n&&Wo(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Oo(t,e,n=[],r=[],o=[],i,u=!1,a=!1){Re(o,n,r,n=>{var r=void 0,o={},l="SELECT"===t.nodeName,s=!1;if(Ln(()=>{var c=e(...n.map(_r)),f=function(t,e,n,r){var o=Bo(t),i=o[Io],u=!o[Po],a=e||{},l="OPTION"===t.tagName;for(var s in e)s in n||(n[s]=null);n.class?n.class=bo(n.class):n[No]&&(n.class=null),n[Ro]&&(n.style??(n.style=null));var c=Wo(t);for(const g in n){let s=n[g];if(l&&"value"===g&&null==s)t.value=t.__value="",a[g]=s;else if("class"!==g)if("style"!==g){var f=a[g];if(s!==f||void 0===s&&t.hasAttribute(g)){a[g]=s;var d=g[0]+g[1];if("$$"!==d)if("on"===d){const e={},n="$$"+g;let r=g.slice(2);var h=Er(r);if(Sr(r)&&(r=r.slice(0,-7),e.capture=!0),!h&&f){if(null!=s)continue;t.removeEventListener(r,a[n],e),a[n]=null}if(null!=s)if(h)t[`__${r}`]=s,Wr([r]);else{let o=function(t){a[g].call(this,t)};a[n]=Br(r,t,o,e)}else h&&(t[`__${r}`]=void 0)}else if("style"===g)jo(t,g,s);else if("autofocus"===g)wn(t,Boolean(s));else if(i||"__value"!==g&&("value"!==g||null==s))if("selected"===g&&l)Lo(t,s);else{var v=g;u||(v=Nr(v));var p="defaultValue"===v||"defaultChecked"===v;if(null!=s||i||p)p||c.includes(v)&&(i||"string"!=typeof s)?(t[v]=s,v in o&&(o[v]=zt)):"function"!=typeof s&&jo(t,v,s);else if(o[g]=null,"value"===v||"checked"===v){let n=t;const r=void 0===e;if("value"===v){let t=n.defaultValue;n.removeAttribute(v),n.defaultValue=t,n.value=n.__value=r?t:null}else{let t=n.defaultChecked;n.removeAttribute(v),n.defaultChecked=t,n.checked=!!r&&t}}else t.removeAttribute(g)}else t.value=t.__value=s}}else So(t,s,null==e?void 0:e[Ro],n[Ro]),a[g]=s,a[Ro]=n[Ro];else $o(t,"http://www.w3.org/1999/xhtml"===t.namespaceURI,s,r,null==e?void 0:e[No],n[No]),a[g]=s,a[No]=n[No]}return a}(t,r,c,i,u,a);s&&l&&"value"in c&&Ao(t,c.value);for(let t of Object.getOwnPropertySymbols(o))c[t]||zn(o[t]);for(let e of Object.getOwnPropertySymbols(c)){var d=c[e];"@attach"!==e.description||r&&d===r[e]||(o[e]&&zn(o[e]),o[e]=jn(()=>_o(t,()=>d))),f[e]=d}r=f}),l){var c=t;Rn(()=>{Ao(c,r.value,!0),Eo(c)})}s=!0})}function Bo(t){return t.__attributes??(t.__attributes={[Io]:t.nodeName.includes("-"),[Po]:"http://www.w3.org/1999/xhtml"===t.namespaceURI})}var zo=new Map;function Wo(t){var e,n=t.getAttribute("is")||t.nodeName,r=zo.get(n);if(r)return r;zo.set(n,r=[]);for(var o=t,i=Element.prototype;i!==o;){for(var u in e=nt(o))e[u].set&&r.push(u);o=it(o)}return r}function Ho(t){var e=t.type;return"number"===e||"range"===e}function Do(t){return""===t?null:+t}function Uo(t,e){return t===e||(null==t?void 0:t[It])===e}function Fo(t={},e,n,r){return Rn(()=>{var r,o;return In(()=>{r=o,o=[],wr(()=>{t!==n(...o)&&(e(t,...o),r&&Uo(n(...r),t)&&e(null,...r))})}),()=>{le(()=>{o&&Uo(n(...o),t)&&e(null,...o)})}}),t}function qo(t=!1){const e=Jt,n=e.l.u;if(!n)return;let r=()=>$r(e.s);if(t){let t=0,n={};const o=Le(()=>{let r=!1;const o=e.s;for(const t in o)o[t]!==n[t]&&(n[t]=o[t],r=!0);return r&&t++,t});r=()=>_r(o)}var o;n.b.length&&(o=()=>{Vo(e,r),st(n.b)},Cn("$effect.pre"),tt(o,"name",{value:"$effect.pre"}),Sn(1048584,o,!0)),Mn(()=>{const t=wr(()=>n.m.map(lt));return()=>{for(const e of t)"function"==typeof e&&e()}}),n.a.length&&Mn(()=>{Vo(e,r),st(n.a)})}function Vo(t,e){if(t.l.s)for(const n of t.l.s)_r(n);e()}let Ko=!1;const Go={get(t,e){if(!t.exclude.includes(e))return _r(t.version),e in t.special?t.special[e]():t.props[e]},set(t,e,n){if(!(e in t.special)){var r=Qn;try{tr(t.parent_effect),t.special[e]=Yo({get[e](){return t.props[e]}},e,4)}finally{tr(r)}}return t.special[e](n),Qe(t.version),!0},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e))return e in t.props?{enumerable:!0,configurable:!0,value:t.props[e]}:void 0},deleteProperty:(t,e)=>(t.exclude.includes(e)||(t.exclude.push(e),Qe(t.version)),!0),has:(t,e)=>!t.exclude.includes(e)&&e in t.props,ownKeys:t=>Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))};function Zo(t,e){return new Proxy({props:t,exclude:e,special:{},version:Ke(0),parent_effect:Qn},Go)}const Jo={get(t,e){let n=t.props.length;for(;n--;){let r=t.props[n];if(at(r)&&(r=r()),"object"==typeof r&&null!==r&&e in r)return r[e]}},set(t,e,n){let r=t.props.length;for(;r--;){let o=t.props[r];at(o)&&(o=o());const i=et(o,e);if(i&&i.set)return i.set(n),!0}return!1},getOwnPropertyDescriptor(t,e){let n=t.props.length;for(;n--;){let r=t.props[n];if(at(r)&&(r=r()),"object"==typeof r&&null!==r&&e in r){const t=et(r,e);return t&&!t.configurable&&(t.configurable=!0),t}}},has(t,e){if(e===It||e===Pt)return!1;for(let n of t.props)if(at(n)&&(n=n()),null!=n&&e in n)return!0;return!1},ownKeys(t){const e=[];for(let n of t.props)if(at(n)&&(n=n()),n){for(const t in n)e.includes(t)||e.push(t);for(const t of Object.getOwnPropertySymbols(n))e.includes(t)||e.push(t)}return e}};function Xo(...t){return new Proxy({props:t},Jo)}function Yo(t,e,n,r){var o,i,u,a=!Vt||!!(2&n),l=!!(8&n),s=!!(16&n),c=r,f=!0,d=()=>(f&&(f=!1,c=s?wr(r):r),c);if(l){var h=It in t||Pt in t;i=(null==(o=et(t,e))?void 0:o.set)??(h&&e in t?n=>t[e]=n:void 0)}var v,p=!1;if(l?[u,p]=function(t){var e=Ko;try{return Ko=!1,[t(),Ko]}finally{Ko=e}}(()=>t[e]):u=t[e],void 0===u&&void 0!==r&&(u=d(),i&&(a&&function(t){{const e=new Error(`props_invalid_value\nCannot do \`bind:${t}={undefined}\` when \`${t}\` has a fallback value\nhttps://svelte.dev/e/props_invalid_value`);throw e.name="Svelte error",e}}(e),i(u))),v=a?()=>{var n=t[e];return void 0===n?d():(f=!0,n)}:()=>{var n=t[e];return void 0!==n&&(c=void 0),void 0===n?c:n},a&&!(4&n))return v;if(i){var g=t.$$legacy;return function(t,e){return arguments.length>0?(a&&e&&!g&&!p||i(e?v():t),t):v()}}var m=!1,_=(1&n?Le:Be)(()=>(m=!1,v()));_.label=e,l&&_r(_);var y=Qn;return function(t,e){if(arguments.length>0){const n=e?_r(_):a&&l?rn(t):t;return Je(_,n),m=!0,void 0!==c&&(c=n),t}return Gn&&m||0!==(y.f&wt)?_.v:_r(_)}}{let t=function(t){if(!(t in globalThis)){let e;Object.defineProperty(globalThis,t,{configurable:!0,get:()=>{if(void 0!==e)return e;!function(t){{const e=new Error(`rune_outside_svelte\nThe \`${t}\` rune is only available inside \`.svelte\` and \`.svelte.js/ts\` files\nhttps://svelte.dev/e/rune_outside_svelte`);throw e.name="Svelte error",e}}(t)},set:t=>{e=t}})}};t("$state"),t("$effect"),t("$derived"),t("$inspect"),t("$props"),t("$bindable")}function Qo(t){var e,n;null===Jt&&Ot("onMount"),Vt&&null!==Jt.l?(e=Jt,n=e.l,n.u??(n.u={a:[],b:[],m:[]})).m.push(t):Mn(()=>{const e=wr(t);if("function"==typeof e)return e})}function ti(t){null===Jt&&Ot("onDestroy"),Qo(()=>()=>wr(t))}const ei="risu-ebooklike-viewer",ni="0.0.2",ri=class t{constructor(e){if(t._instance)return console.log(`[${ei}] Returning existing RisuAPI instance`),t._instance;this._risuFetch=e.risuFetch,this._nativeFetch=e.nativeFetch,this._getArg=e.getArg,this._setArg=e.setArg,this._getChar=e.getChar,this._setChar=e.setChar,this._addProvider=e.addProvider,this._addRisuScriptHandler=e.addRisuScriptHandler,this._removeRisuScriptHandler=e.removeRisuScriptHandler,this._addRisuReplacer=e.addRisuReplacer,this._removeRisuReplacer=e.removeRisuReplacer,this._onUnload=e.onUnload,this._getDatabase=null,this._setDatabaseLite=null,t._instance=this}async initialize(){try{return this._getDatabase=getDatabase,this._setDatabaseLite=setDatabaseLite,console.log(`[${ei}] RisuAPI initialized successfully`),!0}catch(t){return console.log(`[${ei}] Failed to initialize RisuAPI:`,t),!1}}static getInstance(e=null){if(!t._instance){if(!e)throw new Error("RisuAPI instance does not exist. Provide pluginApis on first call.");t._instance=new t(e)}return t._instance}static resetInstance(){t._instance=null}risuFetch(t,e={}){return this._risuFetch(t,e)}nativeFetch(t,e={}){return this._nativeFetch(t,e)}getArg(t){return this._getArg(t)}setArg(t,e){return this._setArg(t,e)}getChar(){return this._getChar()}setChar(t){return this._setChar(t)}addProvider(t,e,n){return this._addProvider(t,e,n)}addRisuScriptHandler(t,e){return this._addRisuScriptHandler(t,e)}removeRisuScriptHandler(t,e){return this._removeRisuScriptHandler(t,e)}addRisuReplacer(t,e){return this._addRisuReplacer(t,e)}removeRisuReplacer(t,e){return this._removeRisuReplacer(t,e)}onUnload(t){return this._onUnload(t)}getDatabase(){if(!this._getDatabase)throw new Error("RisuAPI is not initialized. Call initialize() first.");return this._getDatabase()}setDatabaseLite(t){if(!this._setDatabaseLite)throw new Error("RisuAPI is not initialized. Call initialize() first.");return this._setDatabaseLite(t)}getCurrentChatPage(){const t=this._getChar();return null==t?null:t.chatPage}getAllCurrentChatMessages(){const t=this._getChar();return null==t?null:t.chats[this.getCurrentChatPage()].message}getLastChatIndex(){const t=this._getChar();return null==t?null:t.chats[this.getCurrentChatPage()].message.length}getLastChatMessage(){const t=this._getChar();return null==t?null:t.chats[this.getCurrentChatPage()].message[this.getLastChatIndex()]}};F(ri,"_instance",null);let oi=ri;const ii="data-svelte-helper",ui=new WeakMap,ai=new Map;function li({id:t,component:e,target:n,anchor:r=null,props:o={},wrapperTag:i="div",useContents:u=!0}){if(!t||!e||!n)return console.warn("[safeMount] id, component, targetì€ í•„ìˆ˜ìž…ë‹ˆë‹¤."),null;if(ai.has(t))return ai.get(t);const a=`data-mounted-${t}`;if(n.hasAttribute(a))return console.warn(`[safeMount] ${t}ëŠ” ì´ë¯¸ ë§ˆìš´íŠ¸ë˜ì–´ ìžˆìŠµë‹ˆë‹¤.`),null;try{const l=document.createElement(i);l.setAttribute("data-svelte-wrapper",t),u&&(l.style.display="contents");const s=Yr(e,{target:l,props:o}),c=Array.from(l.childNodes);r&&r.parentElement===n?c.forEach(t=>{n.insertBefore(t,r)}):c.forEach(t=>{n.appendChild(t)}),n.setAttribute(a,"true");const f={instance:s,wrapper:l,target:n,cleanup:()=>si(t),flagKey:a};return ai.set(t,f),f}catch(l){return console.log(l),console.error(`[safeMount] ${t} ë§ˆìš´íŠ¸ ì‹¤íŒ¨:`,l),null}}function si(t){const e=ai.get(t);if(!e)return!1;try{const{instance:n,wrapper:r,target:o,flagKey:i}=e;return n&&eo(n),o&&i&&o.removeAttribute(i),ai.delete(t),!0}catch(n){return console.error(`[safeUnmount] ${t} ì–¸ë§ˆìš´íŠ¸ ì‹¤íŒ¨:`,n),!1}}function ci(t){const e=t.split("\n");let n,r="",o={},i={},u=[];for(const a of e){if(a.startsWith("//@risu-name")||a.startsWith("//@risu-display-name"))throw new Error("V1 plugin is not supported. Please use V2 plugin.");if(a.startsWith("//@name")){const t=a.slice(7).trim();if(""===t)throw new Error("Plugin name must be longer than 0");r=t}if(a.startsWith("//@display-name")){const t=a.slice(16).trim();if(""===t)throw new Error("Plugin display name must be longer than 0");n=t}if(a.startsWith("//@link")){const t=a.split(" ")[1];if(!t||""===t)throw new Error("Plugin link is empty");if(!t.startsWith("https"))throw new Error("Plugin link must start with https");const e=a.split(" ").slice(2).join(" ").trim();u.push({link:t,hoverText:e||void 0})}if(a.startsWith("//@risu-arg")||a.startsWith("//@arg")){const t=a.trim().split(" "),e=t[1];if("int"!==t[2]&&"string"!==t[2])throw new Error(`Unknown argument type: ${t[2]}`);"int"===t[2]?(o[e]="int",i[e]=0):"string"===t[2]&&(o[e]="string",i[e]="")}}if(0===r.length)throw new Error("Plugin name not found");return{name:r,script:t,realArg:i,arguments:o,displayName:n,version:2,customLink:u}}function fi(t){const e=oi.getInstance();if(!e)throw new Error("RisuAPI is not initialized. Please ensure the plugin is loaded.");const n=e.getDatabase(),r=n.plugins.findIndex(t=>t.name===ei),o=r>=0?{...n.plugins[r]}:null;console.log("[UpdateManager] Old plugin found:",r>=0,null==o?void 0:o.name);const i=function(t,e){const n={};for(const[r,o]of Object.entries(e))n[r]=t&&r in t?t[r]:"int"===o?0:"";return n}(null==o?void 0:o.realArg,t.arguments),u={...t,realArg:i};console.log("[UpdateManager] New plugin data prepared:",u.name,u.displayName),r>=0?(n.plugins[r]=u,console.log("[UpdateManager] Replaced existing plugin at index",r)):(n.plugins.push(u),console.log("[UpdateManager] Added new plugin"));try{return e.setDatabaseLite(n),console.log("[UpdateManager] Database saved successfully"),{success:!0}}catch(a){return console.error("[UpdateManager] Database save failed:",a),o&&r>=0?(n.plugins[r]=o,console.log("[UpdateManager] Rolled back to previous plugin")):-1===r&&(n.plugins.pop(),console.log("[UpdateManager] Removed newly added plugin")),{success:!1,error:a}}}"undefined"!=typeof window&&((H=window.__svelte??(window.__svelte={})).v??(H.v=new Set)).add("5"),hi[Wt]="src/ui/components/AlertDialog.svelte";var di=Pr(Vr('<div role="dialog" aria-modal="true" tabindex="-1"><div><div> </div> <div><button> </button></div></div></div>'),hi[Wt],[[34,0,[[35,2,[[36,4],[39,4,[[40,6]]]]]]]]);function hi(t,e){no(new.target),re(e,!0,hi);let n=Yo(e,"message",3,""),r=Yo(e,"confirmText",3,"í™•ì¸"),o=Kt(Ge(null),"confirmBtn");function i(t){(sn(t.key,"Enter")||sn(t.key,"Escape"))&&u()}function u(){var t;null==(t=_r(o))||t.dispatchEvent(new CustomEvent("confirm",{bubbles:!0,composed:!0}))}Qo(()=>{document.addEventListener("keydown",i),setTimeout(()=>{var t;return null==(t=_r(o))?void 0:t.focus()},0)}),ti(()=>{document.removeEventListener("keydown",i)});var a={...ro()},l=di(),s=_n(l),c=_n(s),f=_n(c),d=bn(c,2),h=_n(d);h.__click=u;var v=_n(h);return Fo(h,t=>Je(o,t),()=>_r(o)),Pn(()=>{$o(l,1,bo(J.udRoot)),$o(s,1,`${J.udCard} ${J.udAlert}`),$o(c,1,bo(J.udAlertMessage)),Xr(f,n()),$o(d,1,bo(J.udActions)),$o(h,1,bo(J.udBtnPrimary)),Xr(v,r())}),Jr(t,l),oe(a)}Wr(["click"]),pi[Wt]="src/ui/components/LoadingDialog.svelte";var vi=Pr(Vr('<div role="dialog" aria-modal="true" aria-busy="true" tabindex="-1"><div><div><svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4"></circle></svg></div> <div> </div></div></div>'),pi[Wt],[[7,0,[[8,2,[[9,4,[[10,6,[[11,8]]]]],[21,4]]]]]]);function pi(t,e){no(new.target),re(e,!0,pi);let n=Yo(e,"message",3,"ì—…ë°ì´íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê³  ìžˆìŠµë‹ˆë‹¤...");var r={...ro()},o=vi(),i=_n(o),u=_n(i),a=_n(u),l=_n(a),s=bn(u,2),c=_n(s);return Pn(()=>{$o(o,1,bo(J.udRoot)),$o(i,1,`${J.udCard} ${J.udLoading}`),$o(u,1,bo(J.udLoadingSpinner)),$o(a,0,bo(J.udLoadingSvg)),$o(l,0,bo(J.udLoadingCircle)),$o(s,1,bo(J.udLoadingMessage)),Xr(c,n())}),Jr(t,o),oe(r)}bi[Wt]="src/ui/components/UpdateDialog.svelte";var gi=Pr(Vr("<li> </li>"),bi[Wt],[[96,10]]),mi=Pr(Vr("<li>ì„¸ë¶€ ë³€ê²½ì‚¬í•­ì€ ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”</li>"),bi[Wt],[[99,8]]),_i=Pr(Vr("<button> </button> <button> </button>",1),bi[Wt],[[104,8],[107,8]]),yi=Pr(Vr('<div role="dialog" aria-modal="true" tabindex="-1"><div><div><h3> </h3> <span> </span></div> <div> </div> <ul aria-label="ë³€ê²½ì‚¬í•­"><!></ul> <div><!> <button> </button></div></div></div>'),bi[Wt],[[77,0,[[85,2,[[86,4,[[87,6],[88,6]]],[90,4],[93,4],[102,4,[[111,6]]]]]]]]);function bi(t,e){no(new.target),re(e,!0,bi);let n=Yo(e,"name",3,""),r=Yo(e,"currentVersion",3,"0.0.0"),o=Yo(e,"version",3,"0.0.0"),i=Yo(e,"releasedAt",19,()=>(new Date).toISOString()),u=Yo(e,"mandatory",3,!1),a=Yo(e,"notes",19,()=>[]),l=Yo(e,"i18n",19,()=>({title:"í”ŒëŸ¬ê·¸ì¸ ì—…ë°ì´íŠ¸ ì¤€ë¹„ ì™„ë£Œ",primary:"ì§€ê¸ˆ ì—…ë°ì´íŠ¸",later:"ë‚˜ì¤‘ì—",skip:"ì´ë²ˆ ë²„ì „ ê±´ë„ˆë›°ê¸°"})),s=Kt(Ge(null),"updateBtn"),c=Kt(Oe(()=>new Date(i()).toLocaleDateString()),"releasedDate"),f=Kt(Oe(()=>u()?"í•„ìˆ˜ ì—…ë°ì´íŠ¸":"ì„ íƒ ì—…ë°ì´íŠ¸"),"updateType");function d(t){sn(t.key,"Escape")&&!u()&&h("later"),sn(t.key,"Enter")&&h("update")}function h(t){var e;const n={action:t};sn(t,"skip")&&(n.skipVersion=o()),null==(e=_r(s))||e.dispatchEvent(new CustomEvent("update-action",{detail:n,bubbles:!0,composed:!0}))}Qo(()=>{document.addEventListener("keydown",d),setTimeout(()=>{var t;return null==(t=_r(s))?void 0:t.focus()},0)}),ti(()=>{document.removeEventListener("keydown",d)});var v={...ro()},p=yi();p.__click=function(t){!u()&&sn(t.target,t.currentTarget)&&h("later")},p.__keydown=function(t){u()||!sn(t.key,"Escape")&&!sn(t.key,"Enter")||sn(t.target,t.currentTarget)&&h("later")};var g=_n(p),m=_n(g),_=_n(m),y=_n(_),b=bn(_,2),w=_n(b),x=bn(m,2),k=_n(x),$=bn(x,2),C=_n($),S=t=>{var e=Zr(),n=yn(e);te(()=>so(n,17,()=>a().slice(0,8),uo,(t,e)=>{var n=gi(),r=_n(n);Pn(t=>{$o(n,1,t),Xr(r,_r(e).text||"")},[()=>bo(function(t){const e=(t||"").trim(),n=e.charAt(0).toUpperCase()+e.slice(1);return J[`ud${n}`]||""}(_r(e).type))]),Jr(t,n)}),"each",bi,95,8),Jr(t,e)},A=t=>{Jr(t,mi())};te(()=>io(C,t=>{a().length>0?t(S):t(A,!1)}),"if",bi,94,6);var E=bn($,2),M=_n(E),N=t=>{var e=_i(),n=yn(e);n.__click=()=>h("later");var r=_n(n),o=bn(n,2);o.__click=()=>h("skip");var i=_n(o);Pn(()=>{$o(n,1,bo(J.udBtnGhost)),Xr(r,l().later),$o(o,1,bo(J.udBtnGhost)),Xr(i,l().skip)}),Jr(t,e)};te(()=>io(M,t=>{u()||t(N)}),"if",bi,103,6);var R=bn(M,2);R.__click=()=>h("update");var I=_n(R);return Fo(R,t=>Je(s,t),()=>_r(s)),Pn(()=>{$o(p,1,bo(J.udRoot)),$o(g,1,bo(J.udCard)),$o(m,1,bo(J.udTitle)),Xr(y,`${l().title??""}${n()?` Â· ${n()}`:""}`),$o(b,1,bo(J.udPill)),Xr(w,`v${r()??""} â†’ v${o()??""}`),$o(x,1,bo(J.udSub)),Xr(k,`${_r(c)??""} Â· ${_r(f)??""}`),$o($,1,bo(J.udList)),$o(E,1,bo(J.udActions)),$o(R,1,bo(J.udBtnPrimary)),Xr(I,l().primary)}),Jr(t,p),oe(v)}function wi(t,e,n){return function(t,e){const n=t.split(".").map(Number),r=e.split(".").map(Number);for(let o=0;o<Math.max(n.length,r.length);o++){const t=n[o]||0,e=r[o]||0;if(t>e)return 1;if(t<e)return-1}return 0}(t,e)<=0?(n||console.log(`[UpdateManager] Already up to date (${e})`),{available:!1,current:e,latest:t}):null}async function xi(t,e){var n;console.log("[UpdateManager] Updating to version",e);const r=await async function(t){try{console.log("[UpdateManager] Fetching latest script from unpkg:",t.url);const e=await fetch(t.url).then(t=>t.text());return console.log("[UpdateManager] Parsing plugin script..."),fi(ci(e))}catch(e){return console.error("[UpdateManager] Plugin update failed:",e),{success:!1,error:e}}}(t);return r.success?(console.log("[UpdateManager] Plugin script updated successfully"),await function(t="ì—…ë°ì´íŠ¸ë¥¼ ì²˜ë¦¬í•˜ê³  ìžˆìŠµë‹ˆë‹¤...",e=3e3){return new Promise(n=>{const r=document.createElement("div");document.body.appendChild(r);const o=Yr(pi,{target:r,props:{message:t}});setTimeout(()=>{eo(o),r.remove(),n()},e)})}("ì—…ë°ì´íŠ¸ë¥¼ ì ìš©í•˜ê³  ìžˆìŠµë‹ˆë‹¤...",4e3),await function(t,e="í™•ì¸"){return new Promise(n=>{const r=document.createElement("div");document.body.appendChild(r);const o=Yr(hi,{target:r,props:{message:t,confirmText:e}});r.addEventListener("confirm",()=>{eo(o),r.remove(),n()})})}("ì—…ë°ì´íŠ¸ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\n\nì—…ë°ì´íŠ¸ëœ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì ìš©í•˜ê¸° ìœ„í•´\níŽ˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•©ë‹ˆë‹¤."),window.location.reload(),{available:!0,action:"updated",version:e}):(console.error("[UpdateManager] Plugin update failed:",r.error),alert(`ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: ${(null==(n=r.error)?void 0:n.message)||"ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"}\n\níŽ˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì—¬ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.`),{available:!0,action:"update_failed",error:r.error})}async function ki(t={}){const{silent:e=!1,force:n=!1,i18n:r={}}=t;try{const t=await async function(){var t,e,n;try{const o=`https://unpkg.com/${ei}@latest/dist/${ei}.js`,i=(await fetch(o,{method:"HEAD",redirect:"follow"})).url,u=i.match(/@([\d.]+)\//);if(!u)throw new Error("Version not found in resolved URL");const a=u[1],l=await fetch(i).then(t=>t.text()),s=/\/\/@name (.+?)\n\/\/@display-name (.+?)\n\/\/@version (.+?)\n\/\/@description (.+?)(?:\n|$)/,c=l.match(s),f=`https://unpkg.com/${ei}@${a}/dist/release-notes.json`;let d={};try{const t=await fetch(f);t.ok&&(d=(await t.json())[a]||{})}catch(r){console.warn("[UpdateManager] Failed to fetch release notes:",r)}return{version:a,url:i,name:(null==(t=null==c?void 0:c[1])?void 0:t.trim())||ei,displayName:(null==(e=null==c?void 0:c[2])?void 0:e.trim())||`${ei}_v${a}`,description:(null==(n=null==c?void 0:c[4])?void 0:n.trim())||"",mandatory:d.mandatory||!1,notes:d.notes||[],released_at:d.released_at||(new Date).toISOString()}}catch(r){return console.log(`[${ei}] Update check skipped: Plugin not published to npm yet`),null}}();if(!t)return{available:!1,skipped:!0};const o=ni,i=t.version,u=function(t,e,n){if(e)return null;const r=`${ei}_skip_version`;return localStorage.getItem(r)===t?(n||console.log(`[UpdateManager] Version ${t} is skipped by user`),{available:!1,skipped:!0,version:t}):null}(i,n,e);if(u)return u;const a=wi(i,o,e);if(a)return a;console.log(`[UpdateManager] New version available: ${o} â†’ ${i}`);const l=await function(t){const{name:e,currentVersion:n,manifest:r,i18n:o={},mandatory:i=!0===r.mandatory}=t,u=Object.assign({title:"í”ŒëŸ¬ê·¸ì¸ ì—…ë°ì´íŠ¸ ì¤€ë¹„ ì™„ë£Œ",primary:"ì§€ê¸ˆ ì—…ë°ì´íŠ¸",later:"ë‚˜ì¤‘ì—",skip:"ì´ë²ˆ ë²„ì „ ê±´ë„ˆë›°ê¸°"},o);return new Promise(t=>{const o=document.createElement("div");document.body.appendChild(o);const a=Yr(bi,{target:o,props:{name:e||"",currentVersion:n,version:r.version,releasedAt:r.released_at||(new Date).toISOString(),mandatory:i,notes:r.notes||[],i18n:u}});o.addEventListener("update-action",e=>{const{action:n,skipVersion:i}=e.detail,u={action:n};"update"===n?u.url=r.url:"skip"===n&&(u.skipVersion=i),eo(a),o.remove(),t(u)})})}({name:ei,currentVersion:o,manifest:t,i18n:r});return await async function(t,e,n){if("update"===t.action)return await xi(e,n);if("skip"===t.action){const e=`${ei}_skip_version`;return localStorage.setItem(e,t.skipVersion),console.log("[UpdateManager] Skipped version",t.skipVersion),{available:!0,action:"skipped",version:t.skipVersion}}return console.log("[UpdateManager] Update postponed"),{available:!0,action:"later",version:n}}(l,t,i)}catch(o){return console.error("[UpdateManager] Check failed:",o),{available:!1,error:o.message}}}Wr(["click","keydown"]);var $i,Ci="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Si={exports:{}};var Ai,Ei,Mi=($i||($i=1,Ai=Si,Ei=Si.exports,function(){var t,e="Expected a function",n="__lodash_hash_undefined__",r="__lodash_placeholder__",o=32,i=128,u=256,a=1/0,l=9007199254740991,s=NaN,c=4294967295,f=[["ary",i],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",o],["partialRight",64],["rearg",u]],d="[object Arguments]",h="[object Array]",v="[object Boolean]",p="[object Date]",g="[object Error]",m="[object Function]",_="[object GeneratorFunction]",y="[object Map]",b="[object Number]",w="[object Object]",x="[object Promise]",k="[object RegExp]",$="[object Set]",C="[object String]",S="[object Symbol]",A="[object WeakMap]",E="[object ArrayBuffer]",M="[object DataView]",N="[object Float32Array]",R="[object Float64Array]",I="[object Int8Array]",P="[object Int16Array]",T="[object Int32Array]",L="[object Uint8Array]",j="[object Uint8ClampedArray]",O="[object Uint16Array]",B="[object Uint32Array]",z=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,D=/&(?:amp|lt|gt|quot|#39);/g,U=/[&<>"']/g,F=RegExp(D.source),q=RegExp(U.source),V=/<%-([\s\S]+?)%>/g,K=/<%([\s\S]+?)%>/g,G=/<%=([\s\S]+?)%>/g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,X=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y=/[\\^$.*+?()[\]{}|]/g,Q=RegExp(Y.source),tt=/^\s+/,et=/\s/,nt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,rt=/\{\n\/\* \[wrapped with (.+)\] \*/,ot=/,? & /,it=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ut=/[()=,{}\[\]\/\s]/,at=/\\(\\)?/g,lt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,st=/\w*$/,ct=/^[-+]0x[0-9a-f]+$/i,ft=/^0b[01]+$/i,dt=/^\[object .+?Constructor\]$/,ht=/^0o[0-7]+$/i,vt=/^(?:0|[1-9]\d*)$/,pt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gt=/($^)/,mt=/['\n\r\u2028\u2029\\]/g,_t="\\ud800-\\udfff",yt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",bt="\\u2700-\\u27bf",wt="a-z\\xdf-\\xf6\\xf8-\\xff",xt="A-Z\\xc0-\\xd6\\xd8-\\xde",kt="\\ufe0e\\ufe0f",$t="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ct="['â€™]",St="["+_t+"]",At="["+$t+"]",Et="["+yt+"]",Mt="\\d+",Nt="["+bt+"]",Rt="["+wt+"]",It="[^"+_t+$t+Mt+bt+wt+xt+"]",Pt="\\ud83c[\\udffb-\\udfff]",Tt="[^"+_t+"]",Lt="(?:\\ud83c[\\udde6-\\uddff]){2}",jt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ot="["+xt+"]",Bt="\\u200d",zt="(?:"+Rt+"|"+It+")",Wt="(?:"+Ot+"|"+It+")",Ht="(?:['â€™](?:d|ll|m|re|s|t|ve))?",Dt="(?:['â€™](?:D|LL|M|RE|S|T|VE))?",Ut="(?:"+Et+"|"+Pt+")?",Ft="["+kt+"]?",qt=Ft+Ut+"(?:"+Bt+"(?:"+[Tt,Lt,jt].join("|")+")"+Ft+Ut+")*",Vt="(?:"+[Nt,Lt,jt].join("|")+")"+qt,Kt="(?:"+[Tt+Et+"?",Et,Lt,jt,St].join("|")+")",Gt=RegExp(Ct,"g"),Zt=RegExp(Et,"g"),Jt=RegExp(Pt+"(?="+Pt+")|"+Kt+qt,"g"),Xt=RegExp([Ot+"?"+Rt+"+"+Ht+"(?="+[At,Ot,"$"].join("|")+")",Wt+"+"+Dt+"(?="+[At,Ot+zt,"$"].join("|")+")",Ot+"?"+zt+"+"+Ht,Ot+"+"+Dt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mt,Vt].join("|"),"g"),Yt=RegExp("["+Bt+_t+yt+kt+"]"),Qt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,te=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ee=-1,ne={};ne[N]=ne[R]=ne[I]=ne[P]=ne[T]=ne[L]=ne[j]=ne[O]=ne[B]=!0,ne[d]=ne[h]=ne[E]=ne[v]=ne[M]=ne[p]=ne[g]=ne[m]=ne[y]=ne[b]=ne[w]=ne[k]=ne[$]=ne[C]=ne[A]=!1;var re={};re[d]=re[h]=re[E]=re[M]=re[v]=re[p]=re[N]=re[R]=re[I]=re[P]=re[T]=re[y]=re[b]=re[w]=re[k]=re[$]=re[C]=re[S]=re[L]=re[j]=re[O]=re[B]=!0,re[g]=re[m]=re[A]=!1;var oe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ie=parseFloat,ue=parseInt,ae="object"==typeof Ci&&Ci&&Ci.Object===Object&&Ci,le="object"==typeof self&&self&&self.Object===Object&&self,se=ae||le||Function("return this")(),ce=Ei&&!Ei.nodeType&&Ei,fe=ce&&Ai&&!Ai.nodeType&&Ai,de=fe&&fe.exports===ce,he=de&&ae.process,ve=function(){try{var t=fe&&fe.require&&fe.require("util").types;return t||he&&he.binding&&he.binding("util")}catch(e){}}(),pe=ve&&ve.isArrayBuffer,ge=ve&&ve.isDate,me=ve&&ve.isMap,_e=ve&&ve.isRegExp,ye=ve&&ve.isSet,be=ve&&ve.isTypedArray;function we(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function xe(t,e,n,r){for(var o=-1,i=null==t?0:t.length;++o<i;){var u=t[o];e(r,u,n(u),t)}return r}function ke(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function $e(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ce(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Se(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var u=t[n];e(u,n,t)&&(i[o++]=u)}return i}function Ae(t,e){return!(null==t||!t.length)&&Oe(t,e,0)>-1}function Ee(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}function Me(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function Ne(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}function Re(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function Ie(t,e,n,r){var o=null==t?0:t.length;for(r&&o&&(n=t[--o]);o--;)n=e(n,t[o],o,t);return n}function Pe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Te=He("length");function Le(t,e,n){var r;return n(t,function(t,n,o){if(e(t,n,o))return r=n,!1}),r}function je(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function Oe(t,e,n){return e==e?function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}(t,e,n):je(t,ze,n)}function Be(t,e,n,r){for(var o=n-1,i=t.length;++o<i;)if(r(t[o],e))return o;return-1}function ze(t){return t!=t}function We(t,e){var n=null==t?0:t.length;return n?Fe(t,e)/n:s}function He(e){return function(n){return null==n?t:n[e]}}function De(e){return function(n){return null==e?t:e[n]}}function Ue(t,e,n,r,o){return o(t,function(t,o,i){n=r?(r=!1,t):e(n,t,o,i)}),n}function Fe(e,n){for(var r,o=-1,i=e.length;++o<i;){var u=n(e[o]);u!==t&&(r=r===t?u:r+u)}return r}function qe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ve(t){return t?t.slice(0,sn(t)+1).replace(tt,""):t}function Ke(t){return function(e){return t(e)}}function Ge(t,e){return Me(e,function(e){return t[e]})}function Ze(t,e){return t.has(e)}function Je(t,e){for(var n=-1,r=t.length;++n<r&&Oe(e,t[n],0)>-1;);return n}function Xe(t,e){for(var n=t.length;n--&&Oe(e,t[n],0)>-1;);return n}var Ye=De({"Ã€":"A","Ã":"A","Ã‚":"A","Ãƒ":"A","Ã„":"A","Ã…":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã‡":"C","Ã§":"c","Ã":"D","Ã°":"d","Ãˆ":"E","Ã‰":"E","ÃŠ":"E","Ã‹":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","ÃŒ":"I","Ã":"I","ÃŽ":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã‘":"N","Ã±":"n","Ã’":"O","Ã“":"O","Ã”":"O","Ã•":"O","Ã–":"O","Ã˜":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã™":"U","Ãš":"U","Ã›":"U","Ãœ":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã†":"Ae","Ã¦":"ae","Ãž":"Th","Ã¾":"th","ÃŸ":"ss","Ä€":"A","Ä‚":"A","Ä„":"A","Ä":"a","Äƒ":"a","Ä…":"a","Ä†":"C","Äˆ":"C","ÄŠ":"C","ÄŒ":"C","Ä‡":"c","Ä‰":"c","Ä‹":"c","Ä":"c","ÄŽ":"D","Ä":"D","Ä":"d","Ä‘":"d","Ä’":"E","Ä”":"E","Ä–":"E","Ä˜":"E","Äš":"E","Ä“":"e","Ä•":"e","Ä—":"e","Ä™":"e","Ä›":"e","Äœ":"G","Äž":"G","Ä ":"G","Ä¢":"G","Ä":"g","ÄŸ":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å€":"l","Å‚":"l","Åƒ":"N","Å…":"N","Å‡":"N","ÅŠ":"N","Å„":"n","Å†":"n","Åˆ":"n","Å‹":"n","ÅŒ":"O","ÅŽ":"O","Å":"O","Å":"o","Å":"o","Å‘":"o","Å”":"R","Å–":"R","Å˜":"R","Å•":"r","Å—":"r","Å™":"r","Åš":"S","Åœ":"S","Åž":"S","Å ":"S","Å›":"s","Å":"s","ÅŸ":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å’":"Oe","Å“":"oe","Å‰":"'n","Å¿":"s"}),Qe=De({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function tn(t){return"\\"+oe[t]}function en(t){return Yt.test(t)}function nn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function rn(t,e){return function(n){return t(e(n))}}function on(t,e){for(var n=-1,o=t.length,i=0,u=[];++n<o;){var a=t[n];a!==e&&a!==r||(t[n]=r,u[i++]=n)}return u}function un(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function an(t){return en(t)?function(t){for(var e=Jt.lastIndex=0;Jt.test(t);)++e;return e}(t):Te(t)}function ln(t){return en(t)?function(t){return t.match(Jt)||[]}(t):function(t){return t.split("")}(t)}function sn(t){for(var e=t.length;e--&&et.test(t.charAt(e)););return e}var cn=De({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),fn=function et(_t){var yt,bt=(_t=null==_t?se:fn.defaults(se.Object(),_t,fn.pick(se,te))).Array,wt=_t.Date,xt=_t.Error,kt=_t.Function,$t=_t.Math,Ct=_t.Object,St=_t.RegExp,At=_t.String,Et=_t.TypeError,Mt=bt.prototype,Nt=kt.prototype,Rt=Ct.prototype,It=_t["__core-js_shared__"],Pt=Nt.toString,Tt=Rt.hasOwnProperty,Lt=0,jt=(yt=/[^.]+$/.exec(It&&It.keys&&It.keys.IE_PROTO||""))?"Symbol(src)_1."+yt:"",Ot=Rt.toString,Bt=Pt.call(Ct),zt=se._,Wt=St("^"+Pt.call(Tt).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ht=de?_t.Buffer:t,Dt=_t.Symbol,Ut=_t.Uint8Array,Ft=Ht?Ht.allocUnsafe:t,qt=rn(Ct.getPrototypeOf,Ct),Vt=Ct.create,Kt=Rt.propertyIsEnumerable,Jt=Mt.splice,Yt=Dt?Dt.isConcatSpreadable:t,oe=Dt?Dt.iterator:t,ae=Dt?Dt.toStringTag:t,le=function(){try{var t=ci(Ct,"defineProperty");return t({},"",{}),t}catch(e){}}(),ce=_t.clearTimeout!==se.clearTimeout&&_t.clearTimeout,fe=wt&&wt.now!==se.Date.now&&wt.now,he=_t.setTimeout!==se.setTimeout&&_t.setTimeout,ve=$t.ceil,Te=$t.floor,De=Ct.getOwnPropertySymbols,dn=Ht?Ht.isBuffer:t,hn=_t.isFinite,vn=Mt.join,pn=rn(Ct.keys,Ct),gn=$t.max,mn=$t.min,_n=wt.now,yn=_t.parseInt,bn=$t.random,wn=Mt.reverse,xn=ci(_t,"DataView"),kn=ci(_t,"Map"),$n=ci(_t,"Promise"),Cn=ci(_t,"Set"),Sn=ci(_t,"WeakMap"),An=ci(Ct,"create"),En=Sn&&new Sn,Mn={},Nn=zi(xn),Rn=zi(kn),In=zi($n),Pn=zi(Cn),Tn=zi(Sn),Ln=Dt?Dt.prototype:t,jn=Ln?Ln.valueOf:t,On=Ln?Ln.toString:t;function Bn(t){if(na(t)&&!qu(t)&&!(t instanceof Dn)){if(t instanceof Hn)return t;if(Tt.call(t,"__wrapped__"))return Wi(t)}return new Hn(t)}var zn=function(){function e(){}return function(n){if(!ea(n))return{};if(Vt)return Vt(n);e.prototype=n;var r=new e;return e.prototype=t,r}}();function Wn(){}function Hn(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}function Dn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=c,this.__views__=[]}function Un(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Fn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Vn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new qn;++e<n;)this.add(t[e])}function Kn(t){var e=this.__data__=new Fn(t);this.size=e.size}function Gn(t,e){var n=qu(t),r=!n&&Fu(t),o=!n&&!r&&Zu(t),i=!n&&!r&&!o&&ca(t),u=n||r||o||i,a=u?qe(t.length,At):[],l=a.length;for(var s in t)!e&&!Tt.call(t,s)||u&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||mi(s,l))||a.push(s);return a}function Zn(e){var n=e.length;return n?e[Vr(0,n-1)]:t}function Jn(t,e){return Pi(Eo(t),ir(e,0,t.length))}function Xn(t){return Pi(Eo(t))}function Yn(e,n,r){(r!==t&&!Hu(e[n],r)||r===t&&!(n in e))&&rr(e,n,r)}function Qn(e,n,r){var o=e[n];Tt.call(e,n)&&Hu(o,r)&&(r!==t||n in e)||rr(e,n,r)}function tr(t,e){for(var n=t.length;n--;)if(Hu(t[n][0],e))return n;return-1}function er(t,e,n,r){return cr(t,function(t,o,i){e(r,t,n(t),i)}),r}function nr(t,e){return t&&Mo(e,Ia(e),t)}function rr(t,e,n){"__proto__"==e&&le?le(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function or(e,n){for(var r=-1,o=n.length,i=bt(o),u=null==e;++r<o;)i[r]=u?t:Aa(e,n[r]);return i}function ir(e,n,r){return e==e&&(r!==t&&(e=e<=r?e:r),n!==t&&(e=e>=n?e:n)),e}function ur(e,n,r,o,i,u){var a,l=1&n,s=2&n,c=4&n;if(r&&(a=i?r(e,o,i,u):r(e)),a!==t)return a;if(!ea(e))return e;var f=qu(e);if(f){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Tt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!l)return Eo(e,a)}else{var h=hi(e),g=h==m||h==_;if(Zu(e))return xo(e,l);if(h==w||h==d||g&&!i){if(a=s||g?{}:pi(e),!l)return s?function(t,e){return Mo(t,di(t),e)}(e,function(t,e){return t&&Mo(e,Pa(e),t)}(a,e)):function(t,e){return Mo(t,fi(t),e)}(e,nr(a,e))}else{if(!re[h])return i?e:{};a=function(t,e,n){var r,o=t.constructor;switch(e){case E:return ko(t);case v:case p:return new o(+t);case M:return function(t,e){var n=e?ko(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case N:case R:case I:case P:case T:case L:case j:case O:case B:return $o(t,n);case y:return new o;case b:case C:return new o(t);case k:return function(t){var e=new t.constructor(t.source,st.exec(t));return e.lastIndex=t.lastIndex,e}(t);case $:return new o;case S:return r=t,jn?Ct(jn.call(r)):{}}}(e,h,l)}}u||(u=new Kn);var x=u.get(e);if(x)return x;u.set(e,a),aa(e)?e.forEach(function(t){a.add(ur(t,n,r,t,e,u))}):ra(e)&&e.forEach(function(t,o){a.set(o,ur(t,n,r,o,e,u))});var A=f?t:(c?s?ri:ni:s?Pa:Ia)(e);return ke(A||e,function(t,o){A&&(t=e[o=t]),Qn(a,o,ur(t,n,r,o,e,u))}),a}function ar(e,n,r){var o=r.length;if(null==e)return!o;for(e=Ct(e);o--;){var i=r[o],u=n[i],a=e[i];if(a===t&&!(i in e)||!u(a))return!1}return!0}function lr(n,r,o){if("function"!=typeof n)throw new Et(e);return Mi(function(){n.apply(t,o)},r)}function sr(t,e,n,r){var o=-1,i=Ae,u=!0,a=t.length,l=[],s=e.length;if(!a)return l;n&&(e=Me(e,Ke(n))),r?(i=Ee,u=!1):e.length>=200&&(i=Ze,u=!1,e=new Vn(e));t:for(;++o<a;){var c=t[o],f=null==n?c:n(c);if(c=r||0!==c?c:0,u&&f==f){for(var d=s;d--;)if(e[d]===f)continue t;l.push(c)}else i(e,f,r)||l.push(c)}return l}Bn.templateSettings={escape:V,evaluate:K,interpolate:G,variable:"",imports:{_:Bn}},Bn.prototype=Wn.prototype,Bn.prototype.constructor=Bn,Hn.prototype=zn(Wn.prototype),Hn.prototype.constructor=Hn,Dn.prototype=zn(Wn.prototype),Dn.prototype.constructor=Dn,Un.prototype.clear=function(){this.__data__=An?An(null):{},this.size=0},Un.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Un.prototype.get=function(e){var r=this.__data__;if(An){var o=r[e];return o===n?t:o}return Tt.call(r,e)?r[e]:t},Un.prototype.has=function(e){var n=this.__data__;return An?n[e]!==t:Tt.call(n,e)},Un.prototype.set=function(e,r){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=An&&r===t?n:r,this},Fn.prototype.clear=function(){this.__data__=[],this.size=0},Fn.prototype.delete=function(t){var e=this.__data__,n=tr(e,t);return!(n<0||(n==e.length-1?e.pop():Jt.call(e,n,1),--this.size,0))},Fn.prototype.get=function(e){var n=this.__data__,r=tr(n,e);return r<0?t:n[r][1]},Fn.prototype.has=function(t){return tr(this.__data__,t)>-1},Fn.prototype.set=function(t,e){var n=this.__data__,r=tr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Un,map:new(kn||Fn),string:new Un}},qn.prototype.delete=function(t){var e=li(this,t).delete(t);return this.size-=e?1:0,e},qn.prototype.get=function(t){return li(this,t).get(t)},qn.prototype.has=function(t){return li(this,t).has(t)},qn.prototype.set=function(t,e){var n=li(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Vn.prototype.add=Vn.prototype.push=function(t){return this.__data__.set(t,n),this},Vn.prototype.has=function(t){return this.__data__.has(t)},Kn.prototype.clear=function(){this.__data__=new Fn,this.size=0},Kn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Kn.prototype.get=function(t){return this.__data__.get(t)},Kn.prototype.has=function(t){return this.__data__.has(t)},Kn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Fn){var r=n.__data__;if(!kn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(t,e),this.size=n.size,this};var cr=Io(_r),fr=Io(yr,!0);function dr(t,e){var n=!0;return cr(t,function(t,r,o){return n=!!e(t,r,o)}),n}function hr(e,n,r){for(var o=-1,i=e.length;++o<i;){var u=e[o],a=n(u);if(null!=a&&(l===t?a==a&&!sa(a):r(a,l)))var l=a,s=u}return s}function vr(t,e){var n=[];return cr(t,function(t,r,o){e(t,r,o)&&n.push(t)}),n}function pr(t,e,n,r,o){var i=-1,u=t.length;for(n||(n=gi),o||(o=[]);++i<u;){var a=t[i];e>0&&n(a)?e>1?pr(a,e-1,n,r,o):Ne(o,a):r||(o[o.length]=a)}return o}var gr=Po(),mr=Po(!0);function _r(t,e){return t&&gr(t,e,Ia)}function yr(t,e){return t&&mr(t,e,Ia)}function br(t,e){return Se(e,function(e){return Yu(t[e])})}function wr(e,n){for(var r=0,o=(n=_o(n,e)).length;null!=e&&r<o;)e=e[Bi(n[r++])];return r&&r==o?e:t}function xr(t,e,n){var r=e(t);return qu(t)?r:Ne(r,n(t))}function kr(e){return null==e?e===t?"[object Undefined]":"[object Null]":ae&&ae in Ct(e)?function(e){var n=Tt.call(e,ae),r=e[ae];try{e[ae]=t;var o=!0}catch(u){}var i=Ot.call(e);return o&&(n?e[ae]=r:delete e[ae]),i}(e):function(t){return Ot.call(t)}(e)}function $r(t,e){return t>e}function Cr(t,e){return null!=t&&Tt.call(t,e)}function Sr(t,e){return null!=t&&e in Ct(t)}function Ar(e,n,r){for(var o=r?Ee:Ae,i=e[0].length,u=e.length,a=u,l=bt(u),s=1/0,c=[];a--;){var f=e[a];a&&n&&(f=Me(f,Ke(n))),s=mn(f.length,s),l[a]=!r&&(n||i>=120&&f.length>=120)?new Vn(a&&f):t}f=e[0];var d=-1,h=l[0];t:for(;++d<i&&c.length<s;){var v=f[d],p=n?n(v):v;if(v=r||0!==v?v:0,!(h?Ze(h,p):o(c,p,r))){for(a=u;--a;){var g=l[a];if(!(g?Ze(g,p):o(e[a],p,r)))continue t}h&&h.push(p),c.push(v)}}return c}function Er(e,n,r){var o=null==(e=Si(e,n=_o(n,e)))?e:e[Bi(Xi(n))];return null==o?t:we(o,e,r)}function Mr(t){return na(t)&&kr(t)==d}function Nr(e,n,r,o,i){return e===n||(null==e||null==n||!na(e)&&!na(n)?e!=e&&n!=n:function(e,n,r,o,i,u){var a=qu(e),l=qu(n),s=a?h:hi(e),c=l?h:hi(n),f=(s=s==d?w:s)==w,m=(c=c==d?w:c)==w,_=s==c;if(_&&Zu(e)){if(!Zu(n))return!1;a=!0,f=!1}if(_&&!f)return u||(u=new Kn),a||ca(e)?ti(e,n,r,o,i,u):function(t,e,n,r,o,i,u){switch(n){case M:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case E:return!(t.byteLength!=e.byteLength||!i(new Ut(t),new Ut(e)));case v:case p:case b:return Hu(+t,+e);case g:return t.name==e.name&&t.message==e.message;case k:case C:return t==e+"";case y:var a=nn;case $:var l=1&r;if(a||(a=un),t.size!=e.size&&!l)return!1;var s=u.get(t);if(s)return s==e;r|=2,u.set(t,e);var c=ti(a(t),a(e),r,o,i,u);return u.delete(t),c;case S:if(jn)return jn.call(t)==jn.call(e)}return!1}(e,n,s,r,o,i,u);if(!(1&r)){var x=f&&Tt.call(e,"__wrapped__"),A=m&&Tt.call(n,"__wrapped__");if(x||A){var N=x?e.value():e,R=A?n.value():n;return u||(u=new Kn),i(N,R,r,o,u)}}return!!_&&(u||(u=new Kn),function(e,n,r,o,i,u){var a=1&r,l=ni(e),s=l.length,c=ni(n),f=c.length;if(s!=f&&!a)return!1;for(var d=s;d--;){var h=l[d];if(!(a?h in n:Tt.call(n,h)))return!1}var v=u.get(e),p=u.get(n);if(v&&p)return v==n&&p==e;var g=!0;u.set(e,n),u.set(n,e);for(var m=a;++d<s;){var _=e[h=l[d]],y=n[h];if(o)var b=a?o(y,_,h,n,e,u):o(_,y,h,e,n,u);if(!(b===t?_===y||i(_,y,r,o,u):b)){g=!1;break}m||(m="constructor"==h)}if(g&&!m){var w=e.constructor,x=n.constructor;w==x||!("constructor"in e)||!("constructor"in n)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(g=!1)}return u.delete(e),u.delete(n),g}(e,n,r,o,i,u))}(e,n,r,o,Nr,i))}function Rr(e,n,r,o){var i=r.length,u=i,a=!o;if(null==e)return!u;for(e=Ct(e);i--;){var l=r[i];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<u;){var s=(l=r[i])[0],c=e[s],f=l[1];if(a&&l[2]){if(c===t&&!(s in e))return!1}else{var d=new Kn;if(o)var h=o(c,f,s,e,n,d);if(!(h===t?Nr(f,c,3,o,d):h))return!1}}return!0}function Ir(t){return!(!ea(t)||(e=t,jt&&jt in e))&&(Yu(t)?Wt:dt).test(zi(t));var e}function Pr(t){return"function"==typeof t?t:null==t?ol:"object"==typeof t?qu(t)?zr(t[0],t[1]):Br(t):hl(t)}function Tr(t){if(!xi(t))return pn(t);var e=[];for(var n in Ct(t))Tt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Lr(t){if(!ea(t))return function(t){var e=[];if(null!=t)for(var n in Ct(t))e.push(n);return e}(t);var e=xi(t),n=[];for(var r in t)("constructor"!=r||!e&&Tt.call(t,r))&&n.push(r);return n}function jr(t,e){return t<e}function Or(t,e){var n=-1,r=Ku(t)?bt(t.length):[];return cr(t,function(t,o,i){r[++n]=e(t,o,i)}),r}function Br(t){var e=si(t);return 1==e.length&&e[0][2]?$i(e[0][0],e[0][1]):function(n){return n===t||Rr(n,t,e)}}function zr(e,n){return yi(e)&&ki(n)?$i(Bi(e),n):function(r){var o=Aa(r,e);return o===t&&o===n?Ea(r,e):Nr(n,o,3)}}function Wr(e,n,r,o,i){e!==n&&gr(n,function(u,a){if(i||(i=new Kn),ea(u))!function(e,n,r,o,i,u,a){var l=Ai(e,r),s=Ai(n,r),c=a.get(s);if(c)Yn(e,r,c);else{var f=u?u(l,s,r+"",e,n,a):t,d=f===t;if(d){var h=qu(s),v=!h&&Zu(s),p=!h&&!v&&ca(s);f=s,h||v||p?qu(l)?f=l:Gu(l)?f=Eo(l):v?(d=!1,f=xo(s,!0)):p?(d=!1,f=$o(s,!0)):f=[]:ia(s)||Fu(s)?(f=l,Fu(l)?f=_a(l):ea(l)&&!Yu(l)||(f=pi(s))):d=!1}d&&(a.set(s,f),i(f,s,o,u,a),a.delete(s)),Yn(e,r,f)}}(e,n,a,r,Wr,o,i);else{var l=o?o(Ai(e,a),u,a+"",e,n,i):t;l===t&&(l=u),Yn(e,a,l)}},Pa)}function Hr(e,n){var r=e.length;if(r)return mi(n+=n<0?r:0,r)?e[n]:t}function Dr(t,e,n){e=e.length?Me(e,function(t){return qu(t)?function(e){return wr(e,1===t.length?t[0]:t)}:t}):[ol];var r=-1;return e=Me(e,Ke(ai())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Or(t,function(t,n,o){return{criteria:Me(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,o=t.criteria,i=e.criteria,u=o.length,a=n.length;++r<u;){var l=Co(o[r],i[r]);if(l)return r>=a?l:l*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)})}function Ur(t,e,n){for(var r=-1,o=e.length,i={};++r<o;){var u=e[r],a=wr(t,u);n(a,u)&&Xr(i,_o(u,t),a)}return i}function Fr(t,e,n,r){var o=r?Be:Oe,i=-1,u=e.length,a=t;for(t===e&&(e=Eo(e)),n&&(a=Me(t,Ke(n)));++i<u;)for(var l=0,s=e[i],c=n?n(s):s;(l=o(a,c,l,r))>-1;)a!==t&&Jt.call(a,l,1),Jt.call(t,l,1);return t}function qr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var o=e[n];if(n==r||o!==i){var i=o;mi(o)?Jt.call(t,o,1):so(t,o)}}return t}function Vr(t,e){return t+Te(bn()*(e-t+1))}function Kr(t,e){var n="";if(!t||e<1||e>l)return n;do{e%2&&(n+=t),(e=Te(e/2))&&(t+=t)}while(e);return n}function Gr(t,e){return Ni(Ci(t,e,ol),t+"")}function Zr(t){return Zn(Ha(t))}function Jr(t,e){var n=Ha(t);return Pi(n,ir(e,0,n.length))}function Xr(e,n,r,o){if(!ea(e))return e;for(var i=-1,u=(n=_o(n,e)).length,a=u-1,l=e;null!=l&&++i<u;){var s=Bi(n[i]),c=r;if("__proto__"===s||"constructor"===s||"prototype"===s)return e;if(i!=a){var f=l[s];(c=o?o(f,s,l):t)===t&&(c=ea(f)?f:mi(n[i+1])?[]:{})}Qn(l,s,c),l=l[s]}return e}var Yr=En?function(t,e){return En.set(t,e),t}:ol,Qr=le?function(t,e){return le(t,"toString",{configurable:!0,enumerable:!1,value:el(e),writable:!0})}:ol;function to(t){return Pi(Ha(t))}function eo(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=bt(o);++r<o;)i[r]=t[r+e];return i}function no(t,e){var n;return cr(t,function(t,r,o){return!(n=e(t,r,o))}),!!n}function ro(t,e,n){var r=0,o=null==t?r:t.length;if("number"==typeof e&&e==e&&o<=2147483647){for(;r<o;){var i=r+o>>>1,u=t[i];null!==u&&!sa(u)&&(n?u<=e:u<e)?r=i+1:o=i}return o}return oo(t,e,ol,n)}function oo(e,n,r,o){var i=0,u=null==e?0:e.length;if(0===u)return 0;for(var a=(n=r(n))!=n,l=null===n,s=sa(n),c=n===t;i<u;){var f=Te((i+u)/2),d=r(e[f]),h=d!==t,v=null===d,p=d==d,g=sa(d);if(a)var m=o||p;else m=c?p&&(o||h):l?p&&h&&(o||!v):s?p&&h&&!v&&(o||!g):!v&&!g&&(o?d<=n:d<n);m?i=f+1:u=f}return mn(u,4294967294)}function io(t,e){for(var n=-1,r=t.length,o=0,i=[];++n<r;){var u=t[n],a=e?e(u):u;if(!n||!Hu(a,l)){var l=a;i[o++]=0===u?0:u}}return i}function uo(t){return"number"==typeof t?t:sa(t)?s:+t}function ao(t){if("string"==typeof t)return t;if(qu(t))return Me(t,ao)+"";if(sa(t))return On?On.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function lo(t,e,n){var r=-1,o=Ae,i=t.length,u=!0,a=[],l=a;if(n)u=!1,o=Ee;else if(i>=200){var s=e?null:Go(t);if(s)return un(s);u=!1,o=Ze,l=new Vn}else l=e?[]:a;t:for(;++r<i;){var c=t[r],f=e?e(c):c;if(c=n||0!==c?c:0,u&&f==f){for(var d=l.length;d--;)if(l[d]===f)continue t;e&&l.push(f),a.push(c)}else o(l,f,n)||(l!==a&&l.push(f),a.push(c))}return a}function so(t,e){return null==(t=Si(t,e=_o(e,t)))||delete t[Bi(Xi(e))]}function co(t,e,n,r){return Xr(t,e,n(wr(t,e)),r)}function fo(t,e,n,r){for(var o=t.length,i=r?o:-1;(r?i--:++i<o)&&e(t[i],i,t););return n?eo(t,r?0:i,r?i+1:o):eo(t,r?i+1:0,r?o:i)}function ho(t,e){var n=t;return n instanceof Dn&&(n=n.value()),Re(e,function(t,e){return e.func.apply(e.thisArg,Ne([t],e.args))},n)}function vo(t,e,n){var r=t.length;if(r<2)return r?lo(t[0]):[];for(var o=-1,i=bt(r);++o<r;)for(var u=t[o],a=-1;++a<r;)a!=o&&(i[o]=sr(i[o]||u,t[a],e,n));return lo(pr(i,1),e,n)}function po(e,n,r){for(var o=-1,i=e.length,u=n.length,a={};++o<i;){var l=o<u?n[o]:t;r(a,e[o],l)}return a}function go(t){return Gu(t)?t:[]}function mo(t){return"function"==typeof t?t:ol}function _o(t,e){return qu(t)?t:yi(t,e)?[t]:Oi(ya(t))}var yo=Gr;function bo(e,n,r){var o=e.length;return r=r===t?o:r,!n&&r>=o?e:eo(e,n,r)}var wo=ce||function(t){return se.clearTimeout(t)};function xo(t,e){if(e)return t.slice();var n=t.length,r=Ft?Ft(n):new t.constructor(n);return t.copy(r),r}function ko(t){var e=new t.constructor(t.byteLength);return new Ut(e).set(new Ut(t)),e}function $o(t,e){var n=e?ko(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Co(e,n){if(e!==n){var r=e!==t,o=null===e,i=e==e,u=sa(e),a=n!==t,l=null===n,s=n==n,c=sa(n);if(!l&&!c&&!u&&e>n||u&&a&&s&&!l&&!c||o&&a&&s||!r&&s||!i)return 1;if(!o&&!u&&!c&&e<n||c&&r&&i&&!o&&!u||l&&r&&i||!a&&i||!s)return-1}return 0}function So(t,e,n,r){for(var o=-1,i=t.length,u=n.length,a=-1,l=e.length,s=gn(i-u,0),c=bt(l+s),f=!r;++a<l;)c[a]=e[a];for(;++o<u;)(f||o<i)&&(c[n[o]]=t[o]);for(;s--;)c[a++]=t[o++];return c}function Ao(t,e,n,r){for(var o=-1,i=t.length,u=-1,a=n.length,l=-1,s=e.length,c=gn(i-a,0),f=bt(c+s),d=!r;++o<c;)f[o]=t[o];for(var h=o;++l<s;)f[h+l]=e[l];for(;++u<a;)(d||o<i)&&(f[h+n[u]]=t[o++]);return f}function Eo(t,e){var n=-1,r=t.length;for(e||(e=bt(r));++n<r;)e[n]=t[n];return e}function Mo(e,n,r,o){var i=!r;r||(r={});for(var u=-1,a=n.length;++u<a;){var l=n[u],s=o?o(r[l],e[l],l,r,e):t;s===t&&(s=e[l]),i?rr(r,l,s):Qn(r,l,s)}return r}function No(t,e){return function(n,r){var o=qu(n)?xe:er,i=e?e():{};return o(n,t,ai(r,2),i)}}function Ro(e){return Gr(function(n,r){var o=-1,i=r.length,u=i>1?r[i-1]:t,a=i>2?r[2]:t;for(u=e.length>3&&"function"==typeof u?(i--,u):t,a&&_i(r[0],r[1],a)&&(u=i<3?t:u,i=1),n=Ct(n);++o<i;){var l=r[o];l&&e(n,l,o,u)}return n})}function Io(t,e){return function(n,r){if(null==n)return n;if(!Ku(n))return t(n,r);for(var o=n.length,i=e?o:-1,u=Ct(n);(e?i--:++i<o)&&!1!==r(u[i],i,u););return n}}function Po(t){return function(e,n,r){for(var o=-1,i=Ct(e),u=r(e),a=u.length;a--;){var l=u[t?a:++o];if(!1===n(i[l],l,i))break}return e}}function To(e){return function(n){var r=en(n=ya(n))?ln(n):t,o=r?r[0]:n.charAt(0),i=r?bo(r,1).join(""):n.slice(1);return o[e]()+i}}function Lo(t){return function(e){return Re(Ya(Fa(e).replace(Gt,"")),t,"")}}function jo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=zn(t.prototype),r=t.apply(n,e);return ea(r)?r:n}}function Oo(e){return function(n,r,o){var i=Ct(n);if(!Ku(n)){var u=ai(r,3);n=Ia(n),r=function(t){return u(i[t],t,i)}}var a=e(n,r,o);return a>-1?i[u?n[a]:a]:t}}function Bo(n){return ei(function(r){var o=r.length,i=o,u=Hn.prototype.thru;for(n&&r.reverse();i--;){var a=r[i];if("function"!=typeof a)throw new Et(e);if(u&&!l&&"wrapper"==ii(a))var l=new Hn([],!0)}for(i=l?i:o;++i<o;){var s=ii(a=r[i]),c="wrapper"==s?oi(a):t;l=c&&bi(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[ii(c[0])].apply(l,c[3]):1==a.length&&bi(a)?l[s]():l.thru(a)}return function(){var t=arguments,e=t[0];if(l&&1==t.length&&qu(e))return l.plant(e).value();for(var n=0,i=o?r[n].apply(this,t):e;++n<o;)i=r[n].call(this,i);return i}})}function zo(e,n,r,o,u,a,l,s,c,f){var d=n&i,h=1&n,v=2&n,p=24&n,g=512&n,m=v?t:jo(e);return function i(){for(var _=arguments.length,y=bt(_),b=_;b--;)y[b]=arguments[b];if(p)var w=ui(i),x=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(y,w);if(o&&(y=So(y,o,u,p)),a&&(y=Ao(y,a,l,p)),_-=x,p&&_<f){var k=on(y,w);return Vo(e,n,zo,i.placeholder,r,y,k,s,c,f-_)}var $=h?r:this,C=v?$[e]:e;return _=y.length,s?y=function(e,n){for(var r=e.length,o=mn(n.length,r),i=Eo(e);o--;){var u=n[o];e[o]=mi(u,r)?i[u]:t}return e}(y,s):g&&_>1&&y.reverse(),d&&c<_&&(y.length=c),this&&this!==se&&this instanceof i&&(C=m||jo(C)),C.apply($,y)}}function Wo(t,e){return function(n,r){return function(t,e,n,r){return _r(t,function(t,o,i){e(r,n(t),o,i)}),r}(n,t,e(r),{})}}function Ho(e,n){return function(r,o){var i;if(r===t&&o===t)return n;if(r!==t&&(i=r),o!==t){if(i===t)return o;"string"==typeof r||"string"==typeof o?(r=ao(r),o=ao(o)):(r=uo(r),o=uo(o)),i=e(r,o)}return i}}function Do(t){return ei(function(e){return e=Me(e,Ke(ai())),Gr(function(n){var r=this;return t(e,function(t){return we(t,r,n)})})})}function Uo(e,n){var r=(n=n===t?" ":ao(n)).length;if(r<2)return r?Kr(n,e):n;var o=Kr(n,ve(e/an(n)));return en(n)?bo(ln(o),0,e).join(""):o.slice(0,e)}function Fo(e){return function(n,r,o){return o&&"number"!=typeof o&&_i(n,r,o)&&(r=o=t),n=va(n),r===t?(r=n,n=0):r=va(r),function(t,e,n,r){for(var o=-1,i=gn(ve((e-t)/(n||1)),0),u=bt(i);i--;)u[r?i:++o]=t,t+=n;return u}(n,r,o=o===t?n<r?1:-1:va(o),e)}}function qo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=ma(e),n=ma(n)),t(e,n)}}function Vo(e,n,r,i,u,a,l,s,c,f){var d=8&n;n|=d?o:64,4&(n&=~(d?64:o))||(n&=-4);var h=[e,n,u,d?a:t,d?l:t,d?t:a,d?t:l,s,c,f],v=r.apply(t,h);return bi(e)&&Ei(v,h),v.placeholder=i,Ri(v,e,n)}function Ko(t){var e=$t[t];return function(t,n){if(t=ma(t),(n=null==n?0:mn(pa(n),292))&&hn(t)){var r=(ya(t)+"e").split("e");return+((r=(ya(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Go=Cn&&1/un(new Cn([,-0]))[1]==a?function(t){return new Cn(t)}:sl;function Zo(t){return function(e){var n=hi(e);return n==y?nn(e):n==$?function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}(e):function(t,e){return Me(e,function(e){return[e,t[e]]})}(e,t(e))}}function Jo(n,a,l,s,c,f,d,h){var v=2&a;if(!v&&"function"!=typeof n)throw new Et(e);var p=s?s.length:0;if(p||(a&=-97,s=c=t),d=d===t?d:gn(pa(d),0),h=h===t?h:pa(h),p-=c?c.length:0,64&a){var g=s,m=c;s=c=t}var _=v?t:oi(n),y=[n,a,l,s,c,g,m,f,d,h];if(_&&function(t,e){var n=t[1],o=e[1],a=n|o,l=a<131,s=o==i&&8==n||o==i&&n==u&&t[7].length<=e[8]||384==o&&e[7].length<=e[8]&&8==n;if(!l&&!s)return t;1&o&&(t[2]=e[2],a|=1&n?0:4);var c=e[3];if(c){var f=t[3];t[3]=f?So(f,c,e[4]):c,t[4]=f?on(t[3],r):e[4]}(c=e[5])&&(f=t[5],t[5]=f?Ao(f,c,e[6]):c,t[6]=f?on(t[5],r):e[6]),(c=e[7])&&(t[7]=c),o&i&&(t[8]=null==t[8]?e[8]:mn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=a}(y,_),n=y[0],a=y[1],l=y[2],s=y[3],c=y[4],!(h=y[9]=y[9]===t?v?0:n.length:gn(y[9]-p,0))&&24&a&&(a&=-25),a&&1!=a)b=8==a||16==a?function(e,n,r){var o=jo(e);return function i(){for(var u=arguments.length,a=bt(u),l=u,s=ui(i);l--;)a[l]=arguments[l];var c=u<3&&a[0]!==s&&a[u-1]!==s?[]:on(a,s);return(u-=c.length)<r?Vo(e,n,zo,i.placeholder,t,a,c,t,t,r-u):we(this&&this!==se&&this instanceof i?o:e,this,a)}}(n,a,h):a!=o&&33!=a||c.length?zo.apply(t,y):function(t,e,n,r){var o=1&e,i=jo(t);return function e(){for(var u=-1,a=arguments.length,l=-1,s=r.length,c=bt(s+a),f=this&&this!==se&&this instanceof e?i:t;++l<s;)c[l]=r[l];for(;a--;)c[l++]=arguments[++u];return we(f,o?n:this,c)}}(n,a,l,s);else var b=function(t,e,n){var r=1&e,o=jo(t);return function e(){return(this&&this!==se&&this instanceof e?o:t).apply(r?n:this,arguments)}}(n,a,l);return Ri((_?Yr:Ei)(b,y),n,a)}function Xo(e,n,r,o){return e===t||Hu(e,Rt[r])&&!Tt.call(o,r)?n:e}function Yo(e,n,r,o,i,u){return ea(e)&&ea(n)&&(u.set(n,e),Wr(e,n,t,Yo,u),u.delete(n)),e}function Qo(e){return ia(e)?t:e}function ti(e,n,r,o,i,u){var a=1&r,l=e.length,s=n.length;if(l!=s&&!(a&&s>l))return!1;var c=u.get(e),f=u.get(n);if(c&&f)return c==n&&f==e;var d=-1,h=!0,v=2&r?new Vn:t;for(u.set(e,n),u.set(n,e);++d<l;){var p=e[d],g=n[d];if(o)var m=a?o(g,p,d,n,e,u):o(p,g,d,e,n,u);if(m!==t){if(m)continue;h=!1;break}if(v){if(!Pe(n,function(t,e){if(!Ze(v,e)&&(p===t||i(p,t,r,o,u)))return v.push(e)})){h=!1;break}}else if(p!==g&&!i(p,g,r,o,u)){h=!1;break}}return u.delete(e),u.delete(n),h}function ei(e){return Ni(Ci(e,t,Vi),e+"")}function ni(t){return xr(t,Ia,fi)}function ri(t){return xr(t,Pa,di)}var oi=En?function(t){return En.get(t)}:sl;function ii(t){for(var e=t.name+"",n=Mn[e],r=Tt.call(Mn,e)?n.length:0;r--;){var o=n[r],i=o.func;if(null==i||i==t)return o.name}return e}function ui(t){return(Tt.call(Bn,"placeholder")?Bn:t).placeholder}function ai(){var t=Bn.iteratee||il;return t=t===il?Pr:t,arguments.length?t(arguments[0],arguments[1]):t}function li(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function si(t){for(var e=Ia(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,ki(o)]}return e}function ci(e,n){var r=function(e,n){return null==e?t:e[n]}(e,n);return Ir(r)?r:t}var fi=De?function(t){return null==t?[]:(t=Ct(t),Se(De(t),function(e){return Kt.call(t,e)}))}:gl,di=De?function(t){for(var e=[];t;)Ne(e,fi(t)),t=qt(t);return e}:gl,hi=kr;function vi(t,e,n){for(var r=-1,o=(e=_o(e,t)).length,i=!1;++r<o;){var u=Bi(e[r]);if(!(i=null!=t&&n(t,u)))break;t=t[u]}return i||++r!=o?i:!!(o=null==t?0:t.length)&&ta(o)&&mi(u,o)&&(qu(t)||Fu(t))}function pi(t){return"function"!=typeof t.constructor||xi(t)?{}:zn(qt(t))}function gi(t){return qu(t)||Fu(t)||!!(Yt&&t&&t[Yt])}function mi(t,e){var n=typeof t;return!!(e=null==e?l:e)&&("number"==n||"symbol"!=n&&vt.test(t))&&t>-1&&t%1==0&&t<e}function _i(t,e,n){if(!ea(n))return!1;var r=typeof e;return!!("number"==r?Ku(n)&&mi(e,n.length):"string"==r&&e in n)&&Hu(n[e],t)}function yi(t,e){if(qu(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!sa(t))||J.test(t)||!Z.test(t)||null!=e&&t in Ct(e)}function bi(t){var e=ii(t),n=Bn[e];if("function"!=typeof n||!(e in Dn.prototype))return!1;if(t===n)return!0;var r=oi(n);return!!r&&t===r[0]}(xn&&hi(new xn(new ArrayBuffer(1)))!=M||kn&&hi(new kn)!=y||$n&&hi($n.resolve())!=x||Cn&&hi(new Cn)!=$||Sn&&hi(new Sn)!=A)&&(hi=function(e){var n=kr(e),r=n==w?e.constructor:t,o=r?zi(r):"";if(o)switch(o){case Nn:return M;case Rn:return y;case In:return x;case Pn:return $;case Tn:return A}return n});var wi=It?Yu:ml;function xi(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Rt)}function ki(t){return t==t&&!ea(t)}function $i(e,n){return function(r){return null!=r&&r[e]===n&&(n!==t||e in Ct(r))}}function Ci(e,n,r){return n=gn(n===t?e.length-1:n,0),function(){for(var t=arguments,o=-1,i=gn(t.length-n,0),u=bt(i);++o<i;)u[o]=t[n+o];o=-1;for(var a=bt(n+1);++o<n;)a[o]=t[o];return a[n]=r(u),we(e,this,a)}}function Si(t,e){return e.length<2?t:wr(t,eo(e,0,-1))}function Ai(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Ei=Ii(Yr),Mi=he||function(t,e){return se.setTimeout(t,e)},Ni=Ii(Qr);function Ri(t,e,n){var r=e+"";return Ni(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(nt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return ke(f,function(n){var r="_."+n[0];e&n[1]&&!Ae(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(rt);return e?e[1].split(ot):[]}(r),n)))}function Ii(e){var n=0,r=0;return function(){var o=_n(),i=16-(o-r);if(r=o,i>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(t,arguments)}}function Pi(e,n){var r=-1,o=e.length,i=o-1;for(n=n===t?o:n;++r<n;){var u=Vr(r,i),a=e[u];e[u]=e[r],e[r]=a}return e.length=n,e}var Ti,Li,ji,Oi=(Ti=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(X,function(t,n,r,o){e.push(r?o.replace(at,"$1"):n||t)}),e},Li=Lu(Ti,function(t){return 500===ji.size&&ji.clear(),t}),ji=Li.cache,Li);function Bi(t){if("string"==typeof t||sa(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function zi(t){if(null!=t){try{return Pt.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Wi(t){if(t instanceof Dn)return t.clone();var e=new Hn(t.__wrapped__,t.__chain__);return e.__actions__=Eo(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Hi=Gr(function(t,e){return Gu(t)?sr(t,pr(e,1,Gu,!0)):[]}),Di=Gr(function(e,n){var r=Xi(n);return Gu(r)&&(r=t),Gu(e)?sr(e,pr(n,1,Gu,!0),ai(r,2)):[]}),Ui=Gr(function(e,n){var r=Xi(n);return Gu(r)&&(r=t),Gu(e)?sr(e,pr(n,1,Gu,!0),t,r):[]});function Fi(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:pa(n);return o<0&&(o=gn(r+o,0)),je(t,ai(e,3),o)}function qi(e,n,r){var o=null==e?0:e.length;if(!o)return-1;var i=o-1;return r!==t&&(i=pa(r),i=r<0?gn(o+i,0):mn(i,o-1)),je(e,ai(n,3),i,!0)}function Vi(t){return null!=t&&t.length?pr(t,1):[]}function Ki(e){return e&&e.length?e[0]:t}var Gi=Gr(function(t){var e=Me(t,go);return e.length&&e[0]===t[0]?Ar(e):[]}),Zi=Gr(function(e){var n=Xi(e),r=Me(e,go);return n===Xi(r)?n=t:r.pop(),r.length&&r[0]===e[0]?Ar(r,ai(n,2)):[]}),Ji=Gr(function(e){var n=Xi(e),r=Me(e,go);return(n="function"==typeof n?n:t)&&r.pop(),r.length&&r[0]===e[0]?Ar(r,t,n):[]});function Xi(e){var n=null==e?0:e.length;return n?e[n-1]:t}var Yi=Gr(Qi);function Qi(t,e){return t&&t.length&&e&&e.length?Fr(t,e):t}var tu=ei(function(t,e){var n=null==t?0:t.length,r=or(t,e);return qr(t,Me(e,function(t){return mi(t,n)?+t:t}).sort(Co)),r});function eu(t){return null==t?t:wn.call(t)}var nu=Gr(function(t){return lo(pr(t,1,Gu,!0))}),ru=Gr(function(e){var n=Xi(e);return Gu(n)&&(n=t),lo(pr(e,1,Gu,!0),ai(n,2))}),ou=Gr(function(e){var n=Xi(e);return n="function"==typeof n?n:t,lo(pr(e,1,Gu,!0),t,n)});function iu(t){if(!t||!t.length)return[];var e=0;return t=Se(t,function(t){if(Gu(t))return e=gn(t.length,e),!0}),qe(e,function(e){return Me(t,He(e))})}function uu(e,n){if(!e||!e.length)return[];var r=iu(e);return null==n?r:Me(r,function(e){return we(n,t,e)})}var au=Gr(function(t,e){return Gu(t)?sr(t,e):[]}),lu=Gr(function(t){return vo(Se(t,Gu))}),su=Gr(function(e){var n=Xi(e);return Gu(n)&&(n=t),vo(Se(e,Gu),ai(n,2))}),cu=Gr(function(e){var n=Xi(e);return n="function"==typeof n?n:t,vo(Se(e,Gu),t,n)}),fu=Gr(iu),du=Gr(function(e){var n=e.length,r=n>1?e[n-1]:t;return r="function"==typeof r?(e.pop(),r):t,uu(e,r)});function hu(t){var e=Bn(t);return e.__chain__=!0,e}function vu(t,e){return e(t)}var pu=ei(function(e){var n=e.length,r=n?e[0]:0,o=this.__wrapped__,i=function(t){return or(t,e)};return!(n>1||this.__actions__.length)&&o instanceof Dn&&mi(r)?((o=o.slice(r,+r+(n?1:0))).__actions__.push({func:vu,args:[i],thisArg:t}),new Hn(o,this.__chain__).thru(function(e){return n&&!e.length&&e.push(t),e})):this.thru(i)}),gu=No(function(t,e,n){Tt.call(t,n)?++t[n]:rr(t,n,1)}),mu=Oo(Fi),_u=Oo(qi);function yu(t,e){return(qu(t)?ke:cr)(t,ai(e,3))}function bu(t,e){return(qu(t)?$e:fr)(t,ai(e,3))}var wu=No(function(t,e,n){Tt.call(t,n)?t[n].push(e):rr(t,n,[e])}),xu=Gr(function(t,e,n){var r=-1,o="function"==typeof e,i=Ku(t)?bt(t.length):[];return cr(t,function(t){i[++r]=o?we(e,t,n):Er(t,e,n)}),i}),ku=No(function(t,e,n){rr(t,n,e)});function $u(t,e){return(qu(t)?Me:Or)(t,ai(e,3))}var Cu=No(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Su=Gr(function(t,e){if(null==t)return[];var n=e.length;return n>1&&_i(t,e[0],e[1])?e=[]:n>2&&_i(e[0],e[1],e[2])&&(e=[e[0]]),Dr(t,pr(e,1),[])}),Au=fe||function(){return se.Date.now()};function Eu(e,n,r){return n=r?t:n,n=e&&null==n?e.length:n,Jo(e,i,t,t,t,t,n)}function Mu(n,r){var o;if("function"!=typeof r)throw new Et(e);return n=pa(n),function(){return--n>0&&(o=r.apply(this,arguments)),n<=1&&(r=t),o}}var Nu=Gr(function(t,e,n){var r=1;if(n.length){var i=on(n,ui(Nu));r|=o}return Jo(t,r,e,n,i)}),Ru=Gr(function(t,e,n){var r=3;if(n.length){var i=on(n,ui(Ru));r|=o}return Jo(e,r,t,n,i)});function Iu(n,r,o){var i,u,a,l,s,c,f=0,d=!1,h=!1,v=!0;if("function"!=typeof n)throw new Et(e);function p(e){var r=i,o=u;return i=u=t,f=e,l=n.apply(o,r)}function g(e){var n=e-c;return c===t||n>=r||n<0||h&&e-f>=a}function m(){var t=Au();if(g(t))return _(t);s=Mi(m,function(t){var e=r-(t-c);return h?mn(e,a-(t-f)):e}(t))}function _(e){return s=t,v&&i?p(e):(i=u=t,l)}function y(){var e=Au(),n=g(e);if(i=arguments,u=this,c=e,n){if(s===t)return function(t){return f=t,s=Mi(m,r),d?p(t):l}(c);if(h)return wo(s),s=Mi(m,r),p(c)}return s===t&&(s=Mi(m,r)),l}return r=ma(r)||0,ea(o)&&(d=!!o.leading,a=(h="maxWait"in o)?gn(ma(o.maxWait)||0,r):a,v="trailing"in o?!!o.trailing:v),y.cancel=function(){s!==t&&wo(s),f=0,i=c=u=s=t},y.flush=function(){return s===t?l:_(Au())},y}var Pu=Gr(function(t,e){return lr(t,1,e)}),Tu=Gr(function(t,e,n){return lr(t,ma(e)||0,n)});function Lu(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new Et(e);var r=function(){var e=arguments,o=n?n.apply(this,e):e[0],i=r.cache;if(i.has(o))return i.get(o);var u=t.apply(this,e);return r.cache=i.set(o,u)||i,u};return r.cache=new(Lu.Cache||qn),r}function ju(t){if("function"!=typeof t)throw new Et(e);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Lu.Cache=qn;var Ou=yo(function(t,e){var n=(e=1==e.length&&qu(e[0])?Me(e[0],Ke(ai())):Me(pr(e,1),Ke(ai()))).length;return Gr(function(r){for(var o=-1,i=mn(r.length,n);++o<i;)r[o]=e[o].call(this,r[o]);return we(t,this,r)})}),Bu=Gr(function(e,n){var r=on(n,ui(Bu));return Jo(e,o,t,n,r)}),zu=Gr(function(e,n){var r=on(n,ui(zu));return Jo(e,64,t,n,r)}),Wu=ei(function(e,n){return Jo(e,u,t,t,t,n)});function Hu(t,e){return t===e||t!=t&&e!=e}var Du=qo($r),Uu=qo(function(t,e){return t>=e}),Fu=Mr(function(){return arguments}())?Mr:function(t){return na(t)&&Tt.call(t,"callee")&&!Kt.call(t,"callee")},qu=bt.isArray,Vu=pe?Ke(pe):function(t){return na(t)&&kr(t)==E};function Ku(t){return null!=t&&ta(t.length)&&!Yu(t)}function Gu(t){return na(t)&&Ku(t)}var Zu=dn||ml,Ju=ge?Ke(ge):function(t){return na(t)&&kr(t)==p};function Xu(t){if(!na(t))return!1;var e=kr(t);return e==g||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ia(t)}function Yu(t){if(!ea(t))return!1;var e=kr(t);return e==m||e==_||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Qu(t){return"number"==typeof t&&t==pa(t)}function ta(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=l}function ea(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function na(t){return null!=t&&"object"==typeof t}var ra=me?Ke(me):function(t){return na(t)&&hi(t)==y};function oa(t){return"number"==typeof t||na(t)&&kr(t)==b}function ia(t){if(!na(t)||kr(t)!=w)return!1;var e=qt(t);if(null===e)return!0;var n=Tt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Pt.call(n)==Bt}var ua=_e?Ke(_e):function(t){return na(t)&&kr(t)==k},aa=ye?Ke(ye):function(t){return na(t)&&hi(t)==$};function la(t){return"string"==typeof t||!qu(t)&&na(t)&&kr(t)==C}function sa(t){return"symbol"==typeof t||na(t)&&kr(t)==S}var ca=be?Ke(be):function(t){return na(t)&&ta(t.length)&&!!ne[kr(t)]},fa=qo(jr),da=qo(function(t,e){return t<=e});function ha(t){if(!t)return[];if(Ku(t))return la(t)?ln(t):Eo(t);if(oe&&t[oe])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[oe]());var e=hi(t);return(e==y?nn:e==$?un:Ha)(t)}function va(t){return t?(t=ma(t))===a||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function pa(t){var e=va(t),n=e%1;return e==e?n?e-n:e:0}function ga(t){return t?ir(pa(t),0,c):0}function ma(t){if("number"==typeof t)return t;if(sa(t))return s;if(ea(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ea(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ve(t);var n=ft.test(t);return n||ht.test(t)?ue(t.slice(2),n?2:8):ct.test(t)?s:+t}function _a(t){return Mo(t,Pa(t))}function ya(t){return null==t?"":ao(t)}var ba=Ro(function(t,e){if(xi(e)||Ku(e))Mo(e,Ia(e),t);else for(var n in e)Tt.call(e,n)&&Qn(t,n,e[n])}),wa=Ro(function(t,e){Mo(e,Pa(e),t)}),xa=Ro(function(t,e,n,r){Mo(e,Pa(e),t,r)}),ka=Ro(function(t,e,n,r){Mo(e,Ia(e),t,r)}),$a=ei(or),Ca=Gr(function(e,n){e=Ct(e);var r=-1,o=n.length,i=o>2?n[2]:t;for(i&&_i(n[0],n[1],i)&&(o=1);++r<o;)for(var u=n[r],a=Pa(u),l=-1,s=a.length;++l<s;){var c=a[l],f=e[c];(f===t||Hu(f,Rt[c])&&!Tt.call(e,c))&&(e[c]=u[c])}return e}),Sa=Gr(function(e){return e.push(t,Yo),we(La,t,e)});function Aa(e,n,r){var o=null==e?t:wr(e,n);return o===t?r:o}function Ea(t,e){return null!=t&&vi(t,e,Sr)}var Ma=Wo(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ot.call(e)),t[e]=n},el(ol)),Na=Wo(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ot.call(e)),Tt.call(t,e)?t[e].push(n):t[e]=[n]},ai),Ra=Gr(Er);function Ia(t){return Ku(t)?Gn(t):Tr(t)}function Pa(t){return Ku(t)?Gn(t,!0):Lr(t)}var Ta=Ro(function(t,e,n){Wr(t,e,n)}),La=Ro(function(t,e,n,r){Wr(t,e,n,r)}),ja=ei(function(t,e){var n={};if(null==t)return n;var r=!1;e=Me(e,function(e){return e=_o(e,t),r||(r=e.length>1),e}),Mo(t,ri(t),n),r&&(n=ur(n,7,Qo));for(var o=e.length;o--;)so(n,e[o]);return n}),Oa=ei(function(t,e){return null==t?{}:function(t,e){return Ur(t,e,function(e,n){return Ea(t,n)})}(t,e)});function Ba(t,e){if(null==t)return{};var n=Me(ri(t),function(t){return[t]});return e=ai(e),Ur(t,n,function(t,n){return e(t,n[0])})}var za=Zo(Ia),Wa=Zo(Pa);function Ha(t){return null==t?[]:Ge(t,Ia(t))}var Da=Lo(function(t,e,n){return e=e.toLowerCase(),t+(n?Ua(e):e)});function Ua(t){return Xa(ya(t).toLowerCase())}function Fa(t){return(t=ya(t))&&t.replace(pt,Ye).replace(Zt,"")}var qa=Lo(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Va=Lo(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Ka=To("toLowerCase"),Ga=Lo(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Za=Lo(function(t,e,n){return t+(n?" ":"")+Xa(e)}),Ja=Lo(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Xa=To("toUpperCase");function Ya(e,n,r){return e=ya(e),(n=r?t:n)===t?function(t){return Qt.test(t)}(e)?function(t){return t.match(Xt)||[]}(e):function(t){return t.match(it)||[]}(e):e.match(n)||[]}var Qa=Gr(function(e,n){try{return we(e,t,n)}catch(r){return Xu(r)?r:new xt(r)}}),tl=ei(function(t,e){return ke(e,function(e){e=Bi(e),rr(t,e,Nu(t[e],t))}),t});function el(t){return function(){return t}}var nl=Bo(),rl=Bo(!0);function ol(t){return t}function il(t){return Pr("function"==typeof t?t:ur(t,1))}var ul=Gr(function(t,e){return function(n){return Er(n,t,e)}}),al=Gr(function(t,e){return function(n){return Er(t,n,e)}});function ll(t,e,n){var r=Ia(e),o=br(e,r);null!=n||ea(e)&&(o.length||!r.length)||(n=e,e=t,t=this,o=br(e,Ia(e)));var i=!(ea(n)&&"chain"in n&&!n.chain),u=Yu(t);return ke(o,function(n){var r=e[n];t[n]=r,u&&(t.prototype[n]=function(){var e=this.__chain__;if(i||e){var n=t(this.__wrapped__);return(n.__actions__=Eo(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ne([this.value()],arguments))})}),t}function sl(){}var cl=Do(Me),fl=Do(Ce),dl=Do(Pe);function hl(t){return yi(t)?He(Bi(t)):function(t){return function(e){return wr(e,t)}}(t)}var vl=Fo(),pl=Fo(!0);function gl(){return[]}function ml(){return!1}var _l,yl=Ho(function(t,e){return t+e},0),bl=Ko("ceil"),wl=Ho(function(t,e){return t/e},1),xl=Ko("floor"),kl=Ho(function(t,e){return t*e},1),$l=Ko("round"),Cl=Ho(function(t,e){return t-e},0);return Bn.after=function(t,n){if("function"!=typeof n)throw new Et(e);return t=pa(t),function(){if(--t<1)return n.apply(this,arguments)}},Bn.ary=Eu,Bn.assign=ba,Bn.assignIn=wa,Bn.assignInWith=xa,Bn.assignWith=ka,Bn.at=$a,Bn.before=Mu,Bn.bind=Nu,Bn.bindAll=tl,Bn.bindKey=Ru,Bn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return qu(t)?t:[t]},Bn.chain=hu,Bn.chunk=function(e,n,r){n=(r?_i(e,n,r):n===t)?1:gn(pa(n),0);var o=null==e?0:e.length;if(!o||n<1)return[];for(var i=0,u=0,a=bt(ve(o/n));i<o;)a[u++]=eo(e,i,i+=n);return a},Bn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,o=[];++e<n;){var i=t[e];i&&(o[r++]=i)}return o},Bn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=bt(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Ne(qu(n)?Eo(n):[n],pr(e,1))},Bn.cond=function(t){var n=null==t?0:t.length,r=ai();return t=n?Me(t,function(t){if("function"!=typeof t[1])throw new Et(e);return[r(t[0]),t[1]]}):[],Gr(function(e){for(var r=-1;++r<n;){var o=t[r];if(we(o[0],this,e))return we(o[1],this,e)}})},Bn.conforms=function(t){return function(t){var e=Ia(t);return function(n){return ar(n,t,e)}}(ur(t,1))},Bn.constant=el,Bn.countBy=gu,Bn.create=function(t,e){var n=zn(t);return null==e?n:nr(n,e)},Bn.curry=function e(n,r,o){var i=Jo(n,8,t,t,t,t,t,r=o?t:r);return i.placeholder=e.placeholder,i},Bn.curryRight=function e(n,r,o){var i=Jo(n,16,t,t,t,t,t,r=o?t:r);return i.placeholder=e.placeholder,i},Bn.debounce=Iu,Bn.defaults=Ca,Bn.defaultsDeep=Sa,Bn.defer=Pu,Bn.delay=Tu,Bn.difference=Hi,Bn.differenceBy=Di,Bn.differenceWith=Ui,Bn.drop=function(e,n,r){var o=null==e?0:e.length;return o?eo(e,(n=r||n===t?1:pa(n))<0?0:n,o):[]},Bn.dropRight=function(e,n,r){var o=null==e?0:e.length;return o?eo(e,0,(n=o-(n=r||n===t?1:pa(n)))<0?0:n):[]},Bn.dropRightWhile=function(t,e){return t&&t.length?fo(t,ai(e,3),!0,!0):[]},Bn.dropWhile=function(t,e){return t&&t.length?fo(t,ai(e,3),!0):[]},Bn.fill=function(e,n,r,o){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&_i(e,n,r)&&(r=0,o=i),function(e,n,r,o){var i=e.length;for((r=pa(r))<0&&(r=-r>i?0:i+r),(o=o===t||o>i?i:pa(o))<0&&(o+=i),o=r>o?0:ga(o);r<o;)e[r++]=n;return e}(e,n,r,o)):[]},Bn.filter=function(t,e){return(qu(t)?Se:vr)(t,ai(e,3))},Bn.flatMap=function(t,e){return pr($u(t,e),1)},Bn.flatMapDeep=function(t,e){return pr($u(t,e),a)},Bn.flatMapDepth=function(e,n,r){return r=r===t?1:pa(r),pr($u(e,n),r)},Bn.flatten=Vi,Bn.flattenDeep=function(t){return null!=t&&t.length?pr(t,a):[]},Bn.flattenDepth=function(e,n){return null!=e&&e.length?pr(e,n=n===t?1:pa(n)):[]},Bn.flip=function(t){return Jo(t,512)},Bn.flow=nl,Bn.flowRight=rl,Bn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var o=t[e];r[o[0]]=o[1]}return r},Bn.functions=function(t){return null==t?[]:br(t,Ia(t))},Bn.functionsIn=function(t){return null==t?[]:br(t,Pa(t))},Bn.groupBy=wu,Bn.initial=function(t){return null!=t&&t.length?eo(t,0,-1):[]},Bn.intersection=Gi,Bn.intersectionBy=Zi,Bn.intersectionWith=Ji,Bn.invert=Ma,Bn.invertBy=Na,Bn.invokeMap=xu,Bn.iteratee=il,Bn.keyBy=ku,Bn.keys=Ia,Bn.keysIn=Pa,Bn.map=$u,Bn.mapKeys=function(t,e){var n={};return e=ai(e,3),_r(t,function(t,r,o){rr(n,e(t,r,o),t)}),n},Bn.mapValues=function(t,e){var n={};return e=ai(e,3),_r(t,function(t,r,o){rr(n,r,e(t,r,o))}),n},Bn.matches=function(t){return Br(ur(t,1))},Bn.matchesProperty=function(t,e){return zr(t,ur(e,1))},Bn.memoize=Lu,Bn.merge=Ta,Bn.mergeWith=La,Bn.method=ul,Bn.methodOf=al,Bn.mixin=ll,Bn.negate=ju,Bn.nthArg=function(t){return t=pa(t),Gr(function(e){return Hr(e,t)})},Bn.omit=ja,Bn.omitBy=function(t,e){return Ba(t,ju(ai(e)))},Bn.once=function(t){return Mu(2,t)},Bn.orderBy=function(e,n,r,o){return null==e?[]:(qu(n)||(n=null==n?[]:[n]),qu(r=o?t:r)||(r=null==r?[]:[r]),Dr(e,n,r))},Bn.over=cl,Bn.overArgs=Ou,Bn.overEvery=fl,Bn.overSome=dl,Bn.partial=Bu,Bn.partialRight=zu,Bn.partition=Cu,Bn.pick=Oa,Bn.pickBy=Ba,Bn.property=hl,Bn.propertyOf=function(e){return function(n){return null==e?t:wr(e,n)}},Bn.pull=Yi,Bn.pullAll=Qi,Bn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Fr(t,e,ai(n,2)):t},Bn.pullAllWith=function(e,n,r){return e&&e.length&&n&&n.length?Fr(e,n,t,r):e},Bn.pullAt=tu,Bn.range=vl,Bn.rangeRight=pl,Bn.rearg=Wu,Bn.reject=function(t,e){return(qu(t)?Se:vr)(t,ju(ai(e,3)))},Bn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,o=[],i=t.length;for(e=ai(e,3);++r<i;){var u=t[r];e(u,r,t)&&(n.push(u),o.push(r))}return qr(t,o),n},Bn.rest=function(n,r){if("function"!=typeof n)throw new Et(e);return Gr(n,r=r===t?r:pa(r))},Bn.reverse=eu,Bn.sampleSize=function(e,n,r){return n=(r?_i(e,n,r):n===t)?1:pa(n),(qu(e)?Jn:Jr)(e,n)},Bn.set=function(t,e,n){return null==t?t:Xr(t,e,n)},Bn.setWith=function(e,n,r,o){return o="function"==typeof o?o:t,null==e?e:Xr(e,n,r,o)},Bn.shuffle=function(t){return(qu(t)?Xn:to)(t)},Bn.slice=function(e,n,r){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&_i(e,n,r)?(n=0,r=o):(n=null==n?0:pa(n),r=r===t?o:pa(r)),eo(e,n,r)):[]},Bn.sortBy=Su,Bn.sortedUniq=function(t){return t&&t.length?io(t):[]},Bn.sortedUniqBy=function(t,e){return t&&t.length?io(t,ai(e,2)):[]},Bn.split=function(e,n,r){return r&&"number"!=typeof r&&_i(e,n,r)&&(n=r=t),(r=r===t?c:r>>>0)?(e=ya(e))&&("string"==typeof n||null!=n&&!ua(n))&&!(n=ao(n))&&en(e)?bo(ln(e),0,r):e.split(n,r):[]},Bn.spread=function(t,n){if("function"!=typeof t)throw new Et(e);return n=null==n?0:gn(pa(n),0),Gr(function(e){var r=e[n],o=bo(e,0,n);return r&&Ne(o,r),we(t,this,o)})},Bn.tail=function(t){var e=null==t?0:t.length;return e?eo(t,1,e):[]},Bn.take=function(e,n,r){return e&&e.length?eo(e,0,(n=r||n===t?1:pa(n))<0?0:n):[]},Bn.takeRight=function(e,n,r){var o=null==e?0:e.length;return o?eo(e,(n=o-(n=r||n===t?1:pa(n)))<0?0:n,o):[]},Bn.takeRightWhile=function(t,e){return t&&t.length?fo(t,ai(e,3),!1,!0):[]},Bn.takeWhile=function(t,e){return t&&t.length?fo(t,ai(e,3)):[]},Bn.tap=function(t,e){return e(t),t},Bn.throttle=function(t,n,r){var o=!0,i=!0;if("function"!=typeof t)throw new Et(e);return ea(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),Iu(t,n,{leading:o,maxWait:n,trailing:i})},Bn.thru=vu,Bn.toArray=ha,Bn.toPairs=za,Bn.toPairsIn=Wa,Bn.toPath=function(t){return qu(t)?Me(t,Bi):sa(t)?[t]:Eo(Oi(ya(t)))},Bn.toPlainObject=_a,Bn.transform=function(t,e,n){var r=qu(t),o=r||Zu(t)||ca(t);if(e=ai(e,4),null==n){var i=t&&t.constructor;n=o?r?new i:[]:ea(t)&&Yu(i)?zn(qt(t)):{}}return(o?ke:_r)(t,function(t,r,o){return e(n,t,r,o)}),n},Bn.unary=function(t){return Eu(t,1)},Bn.union=nu,Bn.unionBy=ru,Bn.unionWith=ou,Bn.uniq=function(t){return t&&t.length?lo(t):[]},Bn.uniqBy=function(t,e){return t&&t.length?lo(t,ai(e,2)):[]},Bn.uniqWith=function(e,n){return n="function"==typeof n?n:t,e&&e.length?lo(e,t,n):[]},Bn.unset=function(t,e){return null==t||so(t,e)},Bn.unzip=iu,Bn.unzipWith=uu,Bn.update=function(t,e,n){return null==t?t:co(t,e,mo(n))},Bn.updateWith=function(e,n,r,o){return o="function"==typeof o?o:t,null==e?e:co(e,n,mo(r),o)},Bn.values=Ha,Bn.valuesIn=function(t){return null==t?[]:Ge(t,Pa(t))},Bn.without=au,Bn.words=Ya,Bn.wrap=function(t,e){return Bu(mo(e),t)},Bn.xor=lu,Bn.xorBy=su,Bn.xorWith=cu,Bn.zip=fu,Bn.zipObject=function(t,e){return po(t||[],e||[],Qn)},Bn.zipObjectDeep=function(t,e){return po(t||[],e||[],Xr)},Bn.zipWith=du,Bn.entries=za,Bn.entriesIn=Wa,Bn.extend=wa,Bn.extendWith=xa,ll(Bn,Bn),Bn.add=yl,Bn.attempt=Qa,Bn.camelCase=Da,Bn.capitalize=Ua,Bn.ceil=bl,Bn.clamp=function(e,n,r){return r===t&&(r=n,n=t),r!==t&&(r=(r=ma(r))==r?r:0),n!==t&&(n=(n=ma(n))==n?n:0),ir(ma(e),n,r)},Bn.clone=function(t){return ur(t,4)},Bn.cloneDeep=function(t){return ur(t,5)},Bn.cloneDeepWith=function(e,n){return ur(e,5,n="function"==typeof n?n:t)},Bn.cloneWith=function(e,n){return ur(e,4,n="function"==typeof n?n:t)},Bn.conformsTo=function(t,e){return null==e||ar(t,e,Ia(e))},Bn.deburr=Fa,Bn.defaultTo=function(t,e){return null==t||t!=t?e:t},Bn.divide=wl,Bn.endsWith=function(e,n,r){e=ya(e),n=ao(n);var o=e.length,i=r=r===t?o:ir(pa(r),0,o);return(r-=n.length)>=0&&e.slice(r,i)==n},Bn.eq=Hu,Bn.escape=function(t){return(t=ya(t))&&q.test(t)?t.replace(U,Qe):t},Bn.escapeRegExp=function(t){return(t=ya(t))&&Q.test(t)?t.replace(Y,"\\$&"):t},Bn.every=function(e,n,r){var o=qu(e)?Ce:dr;return r&&_i(e,n,r)&&(n=t),o(e,ai(n,3))},Bn.find=mu,Bn.findIndex=Fi,Bn.findKey=function(t,e){return Le(t,ai(e,3),_r)},Bn.findLast=_u,Bn.findLastIndex=qi,Bn.findLastKey=function(t,e){return Le(t,ai(e,3),yr)},Bn.floor=xl,Bn.forEach=yu,Bn.forEachRight=bu,Bn.forIn=function(t,e){return null==t?t:gr(t,ai(e,3),Pa)},Bn.forInRight=function(t,e){return null==t?t:mr(t,ai(e,3),Pa)},Bn.forOwn=function(t,e){return t&&_r(t,ai(e,3))},Bn.forOwnRight=function(t,e){return t&&yr(t,ai(e,3))},Bn.get=Aa,Bn.gt=Du,Bn.gte=Uu,Bn.has=function(t,e){return null!=t&&vi(t,e,Cr)},Bn.hasIn=Ea,Bn.head=Ki,Bn.identity=ol,Bn.includes=function(t,e,n,r){t=Ku(t)?t:Ha(t),n=n&&!r?pa(n):0;var o=t.length;return n<0&&(n=gn(o+n,0)),la(t)?n<=o&&t.indexOf(e,n)>-1:!!o&&Oe(t,e,n)>-1},Bn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=null==n?0:pa(n);return o<0&&(o=gn(r+o,0)),Oe(t,e,o)},Bn.inRange=function(e,n,r){return n=va(n),r===t?(r=n,n=0):r=va(r),function(t,e,n){return t>=mn(e,n)&&t<gn(e,n)}(e=ma(e),n,r)},Bn.invoke=Ra,Bn.isArguments=Fu,Bn.isArray=qu,Bn.isArrayBuffer=Vu,Bn.isArrayLike=Ku,Bn.isArrayLikeObject=Gu,Bn.isBoolean=function(t){return!0===t||!1===t||na(t)&&kr(t)==v},Bn.isBuffer=Zu,Bn.isDate=Ju,Bn.isElement=function(t){return na(t)&&1===t.nodeType&&!ia(t)},Bn.isEmpty=function(t){if(null==t)return!0;if(Ku(t)&&(qu(t)||"string"==typeof t||"function"==typeof t.splice||Zu(t)||ca(t)||Fu(t)))return!t.length;var e=hi(t);if(e==y||e==$)return!t.size;if(xi(t))return!Tr(t).length;for(var n in t)if(Tt.call(t,n))return!1;return!0},Bn.isEqual=function(t,e){return Nr(t,e)},Bn.isEqualWith=function(e,n,r){var o=(r="function"==typeof r?r:t)?r(e,n):t;return o===t?Nr(e,n,t,r):!!o},Bn.isError=Xu,Bn.isFinite=function(t){return"number"==typeof t&&hn(t)},Bn.isFunction=Yu,Bn.isInteger=Qu,Bn.isLength=ta,Bn.isMap=ra,Bn.isMatch=function(t,e){return t===e||Rr(t,e,si(e))},Bn.isMatchWith=function(e,n,r){return r="function"==typeof r?r:t,Rr(e,n,si(n),r)},Bn.isNaN=function(t){return oa(t)&&t!=+t},Bn.isNative=function(t){if(wi(t))throw new xt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ir(t)},Bn.isNil=function(t){return null==t},Bn.isNull=function(t){return null===t},Bn.isNumber=oa,Bn.isObject=ea,Bn.isObjectLike=na,Bn.isPlainObject=ia,Bn.isRegExp=ua,Bn.isSafeInteger=function(t){return Qu(t)&&t>=-9007199254740991&&t<=l},Bn.isSet=aa,Bn.isString=la,Bn.isSymbol=sa,Bn.isTypedArray=ca,Bn.isUndefined=function(e){return e===t},Bn.isWeakMap=function(t){return na(t)&&hi(t)==A},Bn.isWeakSet=function(t){return na(t)&&"[object WeakSet]"==kr(t)},Bn.join=function(t,e){return null==t?"":vn.call(t,e)},Bn.kebabCase=qa,Bn.last=Xi,Bn.lastIndexOf=function(e,n,r){var o=null==e?0:e.length;if(!o)return-1;var i=o;return r!==t&&(i=(i=pa(r))<0?gn(o+i,0):mn(i,o-1)),n==n?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(e,n,i):je(e,ze,i,!0)},Bn.lowerCase=Va,Bn.lowerFirst=Ka,Bn.lt=fa,Bn.lte=da,Bn.max=function(e){return e&&e.length?hr(e,ol,$r):t},Bn.maxBy=function(e,n){return e&&e.length?hr(e,ai(n,2),$r):t},Bn.mean=function(t){return We(t,ol)},Bn.meanBy=function(t,e){return We(t,ai(e,2))},Bn.min=function(e){return e&&e.length?hr(e,ol,jr):t},Bn.minBy=function(e,n){return e&&e.length?hr(e,ai(n,2),jr):t},Bn.stubArray=gl,Bn.stubFalse=ml,Bn.stubObject=function(){return{}},Bn.stubString=function(){return""},Bn.stubTrue=function(){return!0},Bn.multiply=kl,Bn.nth=function(e,n){return e&&e.length?Hr(e,pa(n)):t},Bn.noConflict=function(){return se._===this&&(se._=zt),this},Bn.noop=sl,Bn.now=Au,Bn.pad=function(t,e,n){t=ya(t);var r=(e=pa(e))?an(t):0;if(!e||r>=e)return t;var o=(e-r)/2;return Uo(Te(o),n)+t+Uo(ve(o),n)},Bn.padEnd=function(t,e,n){t=ya(t);var r=(e=pa(e))?an(t):0;return e&&r<e?t+Uo(e-r,n):t},Bn.padStart=function(t,e,n){t=ya(t);var r=(e=pa(e))?an(t):0;return e&&r<e?Uo(e-r,n)+t:t},Bn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),yn(ya(t).replace(tt,""),e||0)},Bn.random=function(e,n,r){if(r&&"boolean"!=typeof r&&_i(e,n,r)&&(n=r=t),r===t&&("boolean"==typeof n?(r=n,n=t):"boolean"==typeof e&&(r=e,e=t)),e===t&&n===t?(e=0,n=1):(e=va(e),n===t?(n=e,e=0):n=va(n)),e>n){var o=e;e=n,n=o}if(r||e%1||n%1){var i=bn();return mn(e+i*(n-e+ie("1e-"+((i+"").length-1))),n)}return Vr(e,n)},Bn.reduce=function(t,e,n){var r=qu(t)?Re:Ue,o=arguments.length<3;return r(t,ai(e,4),n,o,cr)},Bn.reduceRight=function(t,e,n){var r=qu(t)?Ie:Ue,o=arguments.length<3;return r(t,ai(e,4),n,o,fr)},Bn.repeat=function(e,n,r){return n=(r?_i(e,n,r):n===t)?1:pa(n),Kr(ya(e),n)},Bn.replace=function(){var t=arguments,e=ya(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Bn.result=function(e,n,r){var o=-1,i=(n=_o(n,e)).length;for(i||(i=1,e=t);++o<i;){var u=null==e?t:e[Bi(n[o])];u===t&&(o=i,u=r),e=Yu(u)?u.call(e):u}return e},Bn.round=$l,Bn.runInContext=et,Bn.sample=function(t){return(qu(t)?Zn:Zr)(t)},Bn.size=function(t){if(null==t)return 0;if(Ku(t))return la(t)?an(t):t.length;var e=hi(t);return e==y||e==$?t.size:Tr(t).length},Bn.snakeCase=Ga,Bn.some=function(e,n,r){var o=qu(e)?Pe:no;return r&&_i(e,n,r)&&(n=t),o(e,ai(n,3))},Bn.sortedIndex=function(t,e){return ro(t,e)},Bn.sortedIndexBy=function(t,e,n){return oo(t,e,ai(n,2))},Bn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ro(t,e);if(r<n&&Hu(t[r],e))return r}return-1},Bn.sortedLastIndex=function(t,e){return ro(t,e,!0)},Bn.sortedLastIndexBy=function(t,e,n){return oo(t,e,ai(n,2),!0)},Bn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ro(t,e,!0)-1;if(Hu(t[n],e))return n}return-1},Bn.startCase=Za,Bn.startsWith=function(t,e,n){return t=ya(t),n=null==n?0:ir(pa(n),0,t.length),e=ao(e),t.slice(n,n+e.length)==e},Bn.subtract=Cl,Bn.sum=function(t){return t&&t.length?Fe(t,ol):0},Bn.sumBy=function(t,e){return t&&t.length?Fe(t,ai(e,2)):0},Bn.template=function(e,n,r){var o=Bn.templateSettings;r&&_i(e,n,r)&&(n=t),e=ya(e),n=xa({},n,o,Xo);var i,u,a=xa({},n.imports,o.imports,Xo),l=Ia(a),s=Ge(a,l),c=0,f=n.interpolate||gt,d="__p += '",h=St((n.escape||gt).source+"|"+f.source+"|"+(f===G?lt:gt).source+"|"+(n.evaluate||gt).source+"|$","g"),v="//# sourceURL="+(Tt.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ee+"]")+"\n";e.replace(h,function(t,n,r,o,a,l){return r||(r=o),d+=e.slice(c,l).replace(mt,tn),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),a&&(u=!0,d+="';\n"+a+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),d+="';\n";var p=Tt.call(n,"variable")&&n.variable;if(p){if(ut.test(p))throw new xt("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(u?d.replace(z,""):d).replace(W,"$1").replace(H,"$1;"),d="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=Qa(function(){return kt(l,v+"return "+d).apply(t,s)});if(g.source=d,Xu(g))throw g;return g},Bn.times=function(t,e){if((t=pa(t))<1||t>l)return[];var n=c,r=mn(t,c);e=ai(e),t-=c;for(var o=qe(r,e);++n<t;)e(n);return o},Bn.toFinite=va,Bn.toInteger=pa,Bn.toLength=ga,Bn.toLower=function(t){return ya(t).toLowerCase()},Bn.toNumber=ma,Bn.toSafeInteger=function(t){return t?ir(pa(t),-9007199254740991,l):0===t?t:0},Bn.toString=ya,Bn.toUpper=function(t){return ya(t).toUpperCase()},Bn.trim=function(e,n,r){if((e=ya(e))&&(r||n===t))return Ve(e);if(!e||!(n=ao(n)))return e;var o=ln(e),i=ln(n);return bo(o,Je(o,i),Xe(o,i)+1).join("")},Bn.trimEnd=function(e,n,r){if((e=ya(e))&&(r||n===t))return e.slice(0,sn(e)+1);if(!e||!(n=ao(n)))return e;var o=ln(e);return bo(o,0,Xe(o,ln(n))+1).join("")},Bn.trimStart=function(e,n,r){if((e=ya(e))&&(r||n===t))return e.replace(tt,"");if(!e||!(n=ao(n)))return e;var o=ln(e);return bo(o,Je(o,ln(n))).join("")},Bn.truncate=function(e,n){var r=30,o="...";if(ea(n)){var i="separator"in n?n.separator:i;r="length"in n?pa(n.length):r,o="omission"in n?ao(n.omission):o}var u=(e=ya(e)).length;if(en(e)){var a=ln(e);u=a.length}if(r>=u)return e;var l=r-an(o);if(l<1)return o;var s=a?bo(a,0,l).join(""):e.slice(0,l);if(i===t)return s+o;if(a&&(l+=s.length-l),ua(i)){if(e.slice(l).search(i)){var c,f=s;for(i.global||(i=St(i.source,ya(st.exec(i))+"g")),i.lastIndex=0;c=i.exec(f);)var d=c.index;s=s.slice(0,d===t?l:d)}}else if(e.indexOf(ao(i),l)!=l){var h=s.lastIndexOf(i);h>-1&&(s=s.slice(0,h))}return s+o},Bn.unescape=function(t){return(t=ya(t))&&F.test(t)?t.replace(D,cn):t},Bn.uniqueId=function(t){var e=++Lt;return ya(t)+e},Bn.upperCase=Ja,Bn.upperFirst=Xa,Bn.each=yu,Bn.eachRight=bu,Bn.first=Ki,ll(Bn,(_l={},_r(Bn,function(t,e){Tt.call(Bn.prototype,e)||(_l[e]=t)}),_l),{chain:!1}),Bn.VERSION="4.17.21",ke(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Bn[t].placeholder=Bn}),ke(["drop","take"],function(e,n){Dn.prototype[e]=function(r){r=r===t?1:gn(pa(r),0);var o=this.__filtered__&&!n?new Dn(this):this.clone();return o.__filtered__?o.__takeCount__=mn(r,o.__takeCount__):o.__views__.push({size:mn(r,c),type:e+(o.__dir__<0?"Right":"")}),o},Dn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),ke(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;Dn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ai(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),ke(["head","last"],function(t,e){var n="take"+(e?"Right":"");Dn.prototype[t]=function(){return this[n](1).value()[0]}}),ke(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Dn.prototype[t]=function(){return this.__filtered__?new Dn(this):this[n](1)}}),Dn.prototype.compact=function(){return this.filter(ol)},Dn.prototype.find=function(t){return this.filter(t).head()},Dn.prototype.findLast=function(t){return this.reverse().find(t)},Dn.prototype.invokeMap=Gr(function(t,e){return"function"==typeof t?new Dn(this):this.map(function(n){return Er(n,t,e)})}),Dn.prototype.reject=function(t){return this.filter(ju(ai(t)))},Dn.prototype.slice=function(e,n){e=pa(e);var r=this;return r.__filtered__&&(e>0||n<0)?new Dn(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),n!==t&&(r=(n=pa(n))<0?r.dropRight(-n):r.take(n-e)),r)},Dn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Dn.prototype.toArray=function(){return this.take(c)},_r(Dn.prototype,function(e,n){var r=/^(?:filter|find|map|reject)|While$/.test(n),o=/^(?:head|last)$/.test(n),i=Bn[o?"take"+("last"==n?"Right":""):n],u=o||/^find/.test(n);i&&(Bn.prototype[n]=function(){var n=this.__wrapped__,a=o?[1]:arguments,l=n instanceof Dn,s=a[0],c=l||qu(n),f=function(t){var e=i.apply(Bn,Ne([t],a));return o&&d?e[0]:e};c&&r&&"function"==typeof s&&1!=s.length&&(l=c=!1);var d=this.__chain__,h=!!this.__actions__.length,v=u&&!d,p=l&&!h;if(!u&&c){n=p?n:new Dn(this);var g=e.apply(n,a);return g.__actions__.push({func:vu,args:[f],thisArg:t}),new Hn(g,d)}return v&&p?e.apply(this,a):(g=this.thru(f),v?o?g.value()[0]:g.value():g)})}),ke(["pop","push","shift","sort","splice","unshift"],function(t){var e=Mt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Bn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var o=this.value();return e.apply(qu(o)?o:[],t)}return this[n](function(n){return e.apply(qu(n)?n:[],t)})}}),_r(Dn.prototype,function(t,e){var n=Bn[e];if(n){var r=n.name+"";Tt.call(Mn,r)||(Mn[r]=[]),Mn[r].push({name:e,func:n})}}),Mn[zo(t,2).name]=[{name:"wrapper",func:t}],Dn.prototype.clone=function(){var t=new Dn(this.__wrapped__);return t.__actions__=Eo(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Eo(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Eo(this.__views__),t},Dn.prototype.reverse=function(){if(this.__filtered__){var t=new Dn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Dn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=qu(t),r=e<0,o=n?t.length:0,i=function(t,e,n){for(var r=-1,o=n.length;++r<o;){var i=n[r],u=i.size;switch(i.type){case"drop":t+=u;break;case"dropRight":e-=u;break;case"take":e=mn(e,t+u);break;case"takeRight":t=gn(t,e-u)}}return{start:t,end:e}}(0,o,this.__views__),u=i.start,a=i.end,l=a-u,s=r?a:u-1,c=this.__iteratees__,f=c.length,d=0,h=mn(l,this.__takeCount__);if(!n||!r&&o==l&&h==l)return ho(t,this.__actions__);var v=[];t:for(;l--&&d<h;){for(var p=-1,g=t[s+=e];++p<f;){var m=c[p],_=m.iteratee,y=m.type,b=_(g);if(2==y)g=b;else if(!b){if(1==y)continue t;break t}}v[d++]=g}return v},Bn.prototype.at=pu,Bn.prototype.chain=function(){return hu(this)},Bn.prototype.commit=function(){return new Hn(this.value(),this.__chain__)},Bn.prototype.next=function(){this.__values__===t&&(this.__values__=ha(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?t:this.__values__[this.__index__++]}},Bn.prototype.plant=function(e){for(var n,r=this;r instanceof Wn;){var o=Wi(r);o.__index__=0,o.__values__=t,n?i.__wrapped__=o:n=o;var i=o;r=r.__wrapped__}return i.__wrapped__=e,n},Bn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Dn){var n=e;return this.__actions__.length&&(n=new Dn(this)),(n=n.reverse()).__actions__.push({func:vu,args:[eu],thisArg:t}),new Hn(n,this.__chain__)}return this.thru(eu)},Bn.prototype.toJSON=Bn.prototype.valueOf=Bn.prototype.value=function(){return ho(this.__wrapped__,this.__actions__)},Bn.prototype.first=Bn.prototype.head,oe&&(Bn.prototype[oe]=function(){return this}),Bn}();fe?((fe.exports=fn)._=fn,ce._=fn):se._=fn}.call(Si.exports)),Si.exports);const Ni={chatScreen:{root:{cssClass:["div.default-chat-screen"],className:"default-chat-screen"},displayContainer:{cssClass:["div.default-chat-screen > div.flex.flex-col-reverse"],className:`${ei}-display-container`},inputContainer:{cssClass:["div.default-chat-screen > div.mt-2.mb-2.flex.items-stretch.w-full"],className:`${ei}-input-container`},textarea:{cssClass:["div.default-chat-screen > div.mt-2.mb-2.flex.items-stretch.w-full > textarea"],className:`${ei}-input-textarea`},sendButton:{cssClass:["div.default-chat-screen > button.button-icon-send",".button-icon-send"],className:`${ei}-send-button`},burgerButton:{cssClass:["div.default-chat-screen > button.peer-focus:border-textcolor.mr-2.flex.border-y.border-r.border-darkborderc.justify-center.items-center.text-gray-100.p-3.rounded-r-md.hover:bg-blue-500.transition-colors",`${ei}-burger-button`]},burgerMenu:{cssClass:["div.default-chat-screen > div.right-2.bottom-16.p-5.bg-darkbg.flex.flex-col.gap-3.text-textcolor.rounded-md"],className:`${ei}-burger-menu`}},chatMessage:{root:{cssClass:["div.flex.max-w-full.justify-center.risu-chat"],className:`${ei}-chat-message-root`},thumbnail:{cssClass:["div.shadow-lg.bg-textcolor2.rounded-md"],className:`${ei}-chat-message-thumbnail`},botName:{cssClass:["span.chat-width.text-xl.unmargin.text-textcolor"],className:`${ei}-chat-message-bot-name`},botButtonDiv:{cssClass:["div.flex-grow.flex.items-center.justify-end.text-textcolor2"],className:`${ei}-chat-message-bot-buttons`},copyButton:{cssClass:["button-icon-copy"],className:"button-icon-copy"},ttsButton:{cssClass:["button-icon-tts"],className:"button-icon-tts"},removeButton:{cssClass:["button-icon-remove"],className:"button-icon-remove"},translateButton:{cssClass:["button-icon-translate"],className:"button-icon-translate"},unrerollButton:{cssClass:["button-icon-unreroll"],className:"button-icon-unreroll"},rerollButton:{cssClass:["button-icon-reroll"],className:"button-icon-reroll"},lightboardButtons:{cssClass:["x-risu-lb-module-root","x-risu-lb-nai-btn"],className:"x-risu-lb-module-root"},lightboardNewsButton:{dataId:"lightboard-news",cssClass:["div.x-risu-lb-module-root"],className:`${ei}-lightboard-news`},lightboardCommentButton:{dataId:"lightboard-comment",cssClass:["div.x-risu-lb-module-root"],className:`${ei}-lightboard-comment`},lightboardMiniboardButton:{dataId:"lightboard-miniboard",cssClass:["div.x-risu-lb-module-root"],className:`${ei}-lightboard-miniboard`},lightboardSNSButton:{dataId:"SNS-Forme",cssClass:["div.x-risu-lb-module-root"],className:`${ei}-lightboard-sns`},lightboardNAIButton:{cssClass:["x-risu-lb-nai-btn"],className:"x-risu-lb-nai-btn"}}};function Ri(t,e){const n=e??document;if(!t)return null;if(t.dataId){const e=n.querySelector(`[data-id="${t.dataId}"]`);if(e)return e.classList.contains(t.className)||(e.className=`${t.className} ${e.className}`.trim()),e}for(const r of[null==t?void 0:t.className,...(null==t?void 0:t.cssClass)??[]])if(r)try{const e=n.querySelector(r.startsWith(".")?r:`.${r}`);if(e)return e.classList.contains(t.className)||(e.className=`${t.className} ${e.className}`.trim()),e}catch{}for(const r of(null==t?void 0:t.cssClass)??[])try{const e=n.querySelector(r);if(e)return e.classList.contains(t.className)||(e.className=`${t.className} ${e.className}`.trim()),e}catch{}return null}function Ii(t,e){const n=document;if(!t)return[];const r=new Set;if(t.dataId)try{n.querySelectorAll(`[data-id="${t.dataId}"]`).forEach(t=>r.add(t))}catch{}for(const i of(null==t?void 0:t.cssClass)??[])try{n.querySelectorAll(i).forEach(t=>r.add(t))}catch{}if(null==t?void 0:t.className)try{n.querySelectorAll(`.${t.className}`).forEach(t=>r.add(t))}catch{}const o=[...r];return o.forEach(e=>{t.className&&!e.classList.contains(t.className)&&(e.className=`${t.className} ${e.className}`.trim())}),o}function Pi(t){if(null==t)return null;const e=Ii(Ni.chatMessage.root);if(!e.length)return null;const n="string"==typeof t?parseInt(t,10):t;if(!Number.isFinite(n)||n<0)return null;const r=String(n);return e.find(t=>{var e;return(null==(e=t.dataset)?void 0:e.chatIndex)===r})??null}Vt=!0;const Ti={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};ji[Wt]="node_modules/lucide-svelte/dist/Icon.svelte";var Li=Pr(Gr("<svg><!><!></svg>"),ji[Wt],[[14,0]]);function ji(t,e){no(new.target);const n=Zo(e,["children","$$slots","$$events","$$legacy"]),r=Zo(n,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);re(e,!1,ji);let o=Yo(e,"name",8,void 0),i=Yo(e,"color",8,"currentColor"),u=Yo(e,"size",8,24),a=Yo(e,"strokeWidth",8,2),l=Yo(e,"absoluteStrokeWidth",8,!1),s=Yo(e,"iconNode",24,()=>[]);var c={...ro()};qo();var f=Li();Oo(f,(t,e)=>({...Ti,...r,width:u(),height:u(),stroke:i(),"stroke-width":t,class:e}),[()=>($r(l()),$r(a()),$r(u()),wr(()=>l()?24*Number(a())/Number(u()):a())),()=>($r(o()),$r(n),wr(()=>((...t)=>t.filter((t,e,n)=>Boolean(t)&&sn(n.indexOf(t),e)).join(" "))("lucide-icon","lucide",o()?`lucide-${o()}`:"",n.class)))]);var d=_n(f);return te(()=>so(d,1,s,uo,(t,e)=>{var n=Oe(()=>function(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const n=[];for(const r of t)if(n.push(r),n.length===e)break;return n}(_r(e),2));let r=()=>_r(n)[0];r();let o=()=>_r(n)[1];o();var i=Zr(),u=yn(i);po(r),function(t,e,n,r,o,i){var u=i&&(null==Jt?void 0:Jt.function[Wt]),a=null,l=new oo(t,!1);Tn(()=>{const t=e()||null;if(null!==t)return l.ensure(t,e=>{if(t){if(a=document.createElementNS("http://www.w3.org/2000/svg",t),i&&(a.__svelte_meta={parent:Yt,loc:{file:u,line:i[0],column:i[1]}}),qr(a,a),r){var n=a.appendChild(pn());r(a,n)}Qn.nodes.end=a,e.before(a)}}),()=>{};l.ensure(null,null)},kt),En(()=>{})}(u,r,0,(t,e)=>{Oo(t,()=>({...o()}))},0,[35,4]),Jr(t,i)}),"each",ji,34,2),vo(bn(d),e,"default",{}),Jr(t,f),oe(c)}function Oi(t,e){no(new.target);const n=Zo(e,["children","$$slots","$$events","$$legacy"]);re(e,!1,Oi);const r=[["path",{d:"M12 7v14"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"}]];var o={...ro()};return te(()=>ji(t,Xo({name:"book-open"},()=>n,{get iconNode(){return r},children:mo(Oi,(t,n)=>{var r=Zr();vo(yn(r),e,"default",{}),Jr(t,r)}),$$slots:{default:!0}})),"component",Oi,22,0,{componentTag:"Icon"}),oe(o)}function Bi(t,e){no(new.target);const n=Zo(e,["children","$$slots","$$events","$$legacy"]);re(e,!1,Bi);const r=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}]];var o={...ro()};return te(()=>ji(t,Xo({name:"book"},()=>n,{get iconNode(){return r},children:mo(Bi,(t,n)=>{var r=Zr();vo(yn(r),e,"default",{}),Jr(t,r)}),$$slots:{default:!0}})),"component",Bi,22,0,{componentTag:"Icon"}),oe(o)}function zi(t,e){no(new.target);const n=Zo(e,["children","$$slots","$$events","$$legacy"]);re(e,!1,zi);const r=[["path",{d:"m15 18-6-6 6-6"}]];var o={...ro()};return te(()=>ji(t,Xo({name:"chevron-left"},()=>n,{get iconNode(){return r},children:mo(zi,(t,n)=>{var r=Zr();vo(yn(r),e,"default",{}),Jr(t,r)}),$$slots:{default:!0}})),"component",zi,22,0,{componentTag:"Icon"}),oe(o)}function Wi(t,e){no(new.target);const n=Zo(e,["children","$$slots","$$events","$$legacy"]);re(e,!1,Wi);const r=[["path",{d:"m9 18 6-6-6-6"}]];var o={...ro()};return te(()=>ji(t,Xo({name:"chevron-right"},()=>n,{get iconNode(){return r},children:mo(Wi,(t,n)=>{var r=Zr();vo(yn(r),e,"default",{}),Jr(t,r)}),$$slots:{default:!0}})),"component",Wi,22,0,{componentTag:"Icon"}),oe(o)}function Hi(t,e){no(new.target);const n=Zo(e,["children","$$slots","$$events","$$legacy"]);re(e,!1,Hi);const r=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17"}]];var o={...ro()};return te(()=>ji(t,Xo({name:"layers"},()=>n,{get iconNode(){return r},children:mo(Hi,(t,n)=>{var r=Zr();vo(yn(r),e,"default",{}),Jr(t,r)}),$$slots:{default:!0}})),"component",Hi,22,0,{componentTag:"Icon"}),oe(o)}function Di(t,e){no(new.target);const n=Zo(e,["children","$$slots","$$events","$$legacy"]);re(e,!1,Di);const r=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]];var o={...ro()};return te(()=>ji(t,Xo({name:"settings"},()=>n,{get iconNode(){return r},children:mo(Di,(t,n)=>{var r=Zr();vo(yn(r),e,"default",{}),Jr(t,r)}),$$slots:{default:!0}})),"component",Di,22,0,{componentTag:"Icon"}),oe(o)}function Ui(t,e){no(new.target);const n=Zo(e,["children","$$slots","$$events","$$legacy"]);re(e,!1,Ui);const r=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];var o={...ro()};return te(()=>ji(t,Xo({name:"x"},()=>n,{get iconNode(){return r},children:mo(Ui,(t,n)=>{var r=Zr();vo(yn(r),e,"default",{}),Jr(t,r)}),$$slots:{default:!0}})),"component",Ui,22,0,{componentTag:"Icon"}),oe(o)}Oi[Wt]="node_modules/lucide-svelte/dist/icons/book-open.svelte",Bi[Wt]="node_modules/lucide-svelte/dist/icons/book.svelte",zi[Wt]="node_modules/lucide-svelte/dist/icons/chevron-left.svelte",Wi[Wt]="node_modules/lucide-svelte/dist/icons/chevron-right.svelte",Hi[Wt]="node_modules/lucide-svelte/dist/icons/layers.svelte",Di[Wt]="node_modules/lucide-svelte/dist/icons/settings.svelte",Ui[Wt]="node_modules/lucide-svelte/dist/icons/x.svelte",qi[Wt]="src/ui/components/viewer/pc/BookHeader.svelte";var Fi=Pr(Vr('<header class="book-header"><div class="header-left"><div class="header-thumbnail"></div> <div class="header-info"><span class="header-name"> </span> <div class="header-buttons"></div></div></div> <div class="header-right"><span class="header-chat-index"> </span> <button class="close-btn" title="ë‹«ê¸°"><!></button></div></header>'),qi[Wt],[[31,0,[[32,2,[[33,4],[38,4,[[39,6],[40,6]]]]],[44,2,[[45,4],[46,4]]]]]]);function qi(t,e){no(new.target),re(e,!0,qi);let n=Yo(e,"thumbnailUrl",3,""),r=Yo(e,"name",3,""),o=Yo(e,"chatIndex",3,0),i=Yo(e,"buttons",19,()=>[]),u=Kt(Ge(null),"buttonsContainer");Mn(()=>{_r(u)&&i().length>0&&(_r(u).innerHTML="",i().forEach(t=>{const e=t.cloneNode(!0);_r(u).appendChild(e)}))});let a=Kt(Oe(()=>o()+1),"displayIndex");var l={...ro()},s=Fi(),c=_n(s),f=_n(c);let d;var h=_n(bn(f,2)),v=_n(h);Fo(bn(h,2),t=>Je(u,t),()=>_r(u));var p=_n(bn(c,2)),g=_n(p),m=bn(p,2);m.__click=function(...t){Ur(()=>e.onClose,this,t,qi,[46,39])};var _=_n(m);return te(()=>Ui(_,{size:20}),"component",qi,47,6,{componentTag:"X"}),Pn(()=>{d=So(f,"",d,{"background-image":n()?`url('${n()}')`:"none"}),Xr(v,r()||"Unknown"),Xr(g,`#${_r(a)??""}`)}),Jr(t,s),oe(l)}Wr(["click"]),Zi[Wt]="src/ui/components/viewer/pc/BookPages.svelte";var Vi=Pr(Vr('<div class="page-number left-page-num"> </div>'),Zi[Wt],[[56,8]]),Ki=Pr(Vr('<div class="page-number right-page-num"> </div>'),Zi[Wt],[[69,8]]),Gi=Pr(Vr('<div class="book-pages"><div class="click-area click-left"></div>  <div class="click-area click-right"></div> <div class="page page-left"><div class="page-content"><div class="text-content chattext"></div> <!></div></div> <div class="book-spine"></div> <div class="page page-right"><div class="page-content"><div class="text-content chattext"></div> <!></div></div></div>'),Zi[Wt],[[42,0,[[46,2],[49,2],[52,2,[[53,4,[[54,6]]]]],[62,2],[65,2,[[66,4,[[67,6]]]]]]]]);function Zi(t,e){no(new.target),re(e,!0,Zi);let n=Yo(e,"leftContent",3,""),r=Yo(e,"rightContent",3,""),o=Yo(e,"leftPageNum",3,0),i=Yo(e,"rightPageNum",3,0),u=Yo(e,"leftContentRef",7,null);Yo(e,"rightContentRef",3,null);let a=Kt(Ge(null),"leftTextContent"),l=Kt(Ge(null),"rightTextContent");Mn(()=>{_r(a)&&(_r(a).innerHTML=n())}),Mn(()=>{_r(l)&&(_r(l).innerHTML=r())}),Mn(()=>{_r(a)&&sn(u(),_r(a),!1)&&u(_r(a))});var s={...ro()},c=Gi(),f=_n(c);f.__click=function(...t){Ur(()=>e.onPrevPage,this,t,Zi,[46,46])};var d=bn(f,2);d.__click=function(...t){Ur(()=>e.onNextPage,this,t,Zi,[49,47])};var h=bn(d,2),v=_n(h),p=_n(v);Fo(p,t=>Je(a,t),()=>_r(a));var g=bn(p,2),m=t=>{var e=Vi(),n=_n(e);Pn(()=>Xr(n,o())),Jr(t,e)};te(()=>io(g,t=>{o()>0&&t(m)}),"if",Zi,55,6);var _=_n(bn(h,4)),y=_n(_);Fo(y,t=>Je(l,t),()=>_r(l));var b=bn(y,2),w=t=>{var e=Ki(),n=_n(e);Pn(()=>Xr(n,i())),Jr(t,e)};return te(()=>io(b,t=>{i()>0&&t(w)}),"if",Zi,68,6),Jr(t,c),oe(s)}Wr(["click"]),Xi[Wt]="src/ui/components/viewer/pc/SettingsMenu.svelte";var Ji=Pr(Vr('<div class="dropdown-container"><div><div class="dropdown-header">ì„¤ì •</div> <div class="setting-item"><label for="fontSize">í°íŠ¸ í¬ê¸°</label> <input type="range" id="fontSize" min="12" max="24" step="1"/> <span> </span></div> <div class="setting-item"><label for="lineHeight">ì¤„ ê°„ê²©</label> <input type="range" id="lineHeight" min="1.4" max="2.2" step="0.1"/> <span> </span></div> <div class="setting-item"><label for="theme">í…Œë§ˆ</label> <select id="theme"><option>ë°ì€ í…Œë§ˆ</option><option>ì„¸í”¼ì•„</option><option>ì–´ë‘ìš´ í…Œë§ˆ</option></select></div> <div class="setting-item"><button class="custom-css-btn">ì‚¬ìš©ìž CSS íŽ¸ì§‘</button></div></div></div>'),Xi[Wt],[[34,0,[[35,2,[[36,4],[38,4,[[39,6],[40,6],[49,6]]],[52,4,[[53,6],[54,6],[63,6]]],[66,4,[[67,6],[68,6,[[69,8],[70,8],[71,8]]]]],[75,4,[[76,6]]]]]]]]);function Xi(t,e){no(new.target),re(e,!0,Xi);let n=Yo(e,"isOpen",3,!1),r=Yo(e,"settings",19,()=>({fontSize:17,lineHeight:1.9,theme:"light"}));var o={...ro()},i=Ji(),u=_n(i);let a;var l=bn(_n(u),2),s=bn(_n(l),2);s.__input=function(t){var n;const o={...r(),fontSize:Number(t.target.value)};null==(n=e.onSettingsChange)||n.call(e,o)};var c=_n(bn(s,2)),f=bn(l,2),d=bn(_n(f),2);d.__input=function(t){var n;const o={...r(),lineHeight:Number(t.target.value)};null==(n=e.onSettingsChange)||n.call(e,o)};var h=_n(bn(d,2)),v=bn(f,2),p=bn(_n(v),2);p.__change=function(t){var n;const o={...r(),theme:t.target.value};null==(n=e.onSettingsChange)||n.call(e,o)};var g=_n(p);g.value=g.__value="light";var m=bn(g);m.value=m.__value="sepia";var _,y=bn(m);return y.value=y.__value="dark",Eo(p),_n(bn(v,2)).__click=function(...t){Ur(()=>e.onOpenCustomCss,this,t,Xi,[76,46])},Pn(t=>{a=$o(u,1,"dropdown-menu",null,a,{active:n()}),To(s,r().fontSize),Xr(c,`${r().fontSize??""}px`),To(d,r().lineHeight),Xr(h,t),_!==(_=r().theme)&&(p.value=(p.__value=r().theme)??"",Ao(p,r().theme))},[()=>r().lineHeight.toFixed(1)]),Jr(t,i),oe(o)}Wr(["input","change","click"]),eu[Wt]="src/ui/components/viewer/pc/LBModuleMenu.svelte";var Yi=Pr(Vr('<div class="lb-module-item" style="cursor: default; opacity: 0.6;">ëª¨ë“ˆì´ ì—†ìŠµë‹ˆë‹¤</div>'),eu[Wt],[[30,8]]),Qi=Pr(Vr('<div class="lb-module-item" role="button" tabindex="0"><span class="lb-module-label"> </span></div>'),eu[Wt],[[35,10,[[42,12]]]]),tu=Pr(Vr('<div class="dropdown-container"><div><div class="dropdown-header">LB ëª¨ë“ˆ</div> <div class="lb-modules-list"><!></div></div></div>'),eu[Wt],[[24,0,[[25,2,[[26,4],[28,4]]]]]]);function eu(t,e){no(new.target),re(e,!0,eu);let n=Yo(e,"isOpen",3,!1),r=Yo(e,"modules",19,()=>[]);function o(t){var n;null==(n=e.onModuleClick)||n.call(e,t)}var i={...ro()},u=tu(),a=_n(u);let l;var s=bn(_n(a),2),c=_n(s),f=t=>{Jr(t,Yi())},d=t=>{var e=Zr(),n=yn(e);te(()=>so(n,17,r,uo,(t,e)=>{var n=Qi();n.__click=()=>o(_r(e)),n.__keydown=t=>sn(t.key,"Enter")&&o(_r(e));var r=_n(n),i=_n(r);Pn(t=>Xr(i,t),[()=>function(t,e=30){const n=t.replace(/\s+/g," ").trim();return n.length<=e?n:n.substring(0,e)+"..."}(_r(e).label)]),Jr(t,n)}),"each",eu,34,8),Jr(t,e)};return te(()=>io(c,t=>{sn(r().length,0)?t(f):t(d,!1)}),"if",eu,29,6),Pn(()=>l=$o(a,1,"dropdown-menu",null,l,{active:n()})),Jr(t,u),oe(i)}Wr(["click","keydown"]),ou[Wt]="src/ui/components/viewer/pc/NavControls.svelte";var nu=Pr(Vr('<div class="lb-menu-container"><button class="nav-icon-btn lb-btn" title="LB ëª¨ë“ˆ"><!> <span>LB</span></button> <!></div>'),ou[Wt],[[94,6,[[95,8,[[101,10]]]]]]),ru=Pr(Vr('<nav class="nav-controls"><button class="nav-btn prev-btn" title="ì´ì „ íŽ˜ì´ì§€"><!></button> <span class="page-indicator"> </span> <button class="nav-btn next-btn" title="ë‹¤ìŒ íŽ˜ì´ì§€"><!></button> <div class="nav-right-buttons"><!> <div class="settings-menu-container"><button class="nav-icon-btn settings-btn" title="ì„¤ì •"><!></button> <!></div></div></nav>'),ou[Wt],[[71,0,[[72,2],[81,2],[83,2],[92,2,[[112,4,[[113,6]]]]]]]]);function ou(t,e){no(new.target),re(e,!0,ou);let n=Yo(e,"currentSpread",3,0),r=Yo(e,"totalSpreads",3,1),o=Yo(e,"prevDisabled",3,!1),i=Yo(e,"nextDisabled",3,!1),u=Yo(e,"settings",19,()=>({fontSize:17,lineHeight:1.9,theme:"light"})),a=Yo(e,"lbModules",19,()=>[]),l=Kt(Ge(!1),"isSettingsOpen"),s=Kt(Ge(!1),"isLBMenuOpen");function c(){Je(l,!1),Je(s,!1)}function f(t){var n;null==(n=e.onSettingsChange)||n.call(e,t)}function d(){var t;c(),null==(t=e.onOpenCustomCss)||t.call(e)}function h(t){var n;c(),null==(n=e.onLBModuleClick)||n.call(e,t)}var v={...ro()},p=ru();zr("click",cn,function(t){const e=t.target.closest(".settings-menu-container"),n=t.target.closest(".lb-menu-container");!e&&_r(l)&&Je(l,!1),!n&&_r(s)&&Je(s,!1)});var g=_n(p);g.__click=function(...t){Ur(()=>e.onPrev,this,t,ou,[74,13])};var m=_n(g);te(()=>zi(m,{size:28}),"component",ou,78,4,{componentTag:"ChevronLeft"});var _=bn(g,2),y=_n(_),b=bn(_,2);b.__click=function(...t){Ur(()=>e.onNext,this,t,ou,[85,13])};var w=_n(b);te(()=>Wi(w,{size:28}),"component",ou,89,4,{componentTag:"ChevronRight"});var x=_n(bn(b,2)),k=t=>{var e=nu(),n=_n(e);n.__click=t=>{t.stopPropagation(),Je(s,!_r(s)),_r(s)&&Je(l,!1)};var r=_n(n);te(()=>Hi(r,{size:18}),"component",ou,100,10,{componentTag:"Layers"});var o=bn(n,2);te(()=>eu(o,{get isOpen(){return _r(s)},get modules(){return a()},onModuleClick:h,onClose:()=>Je(s,!1)}),"component",ou,103,8,{componentTag:"LBModuleMenu"}),Jr(t,e)};te(()=>io(x,t=>{a().length>0&&t(k)}),"if",ou,93,4);var $=_n(bn(x,2));$.__click=t=>{t.stopPropagation(),Je(l,!_r(l)),_r(l)&&Je(s,!1)};var C=_n($);te(()=>Di(C,{size:18}),"component",ou,118,8,{componentTag:"Settings"});var S=bn($,2);return te(()=>Xi(S,{get isOpen(){return _r(l)},get settings(){return u()},onSettingsChange:f,onOpenCustomCss:d,onClose:()=>Je(l,!1)}),"component",ou,120,6,{componentTag:"SettingsMenu"}),Pn(()=>{g.disabled=o(),Xr(y,`${n()+1} / ${r()??""}`),b.disabled=i()}),Jr(t,p),oe(v)}Wr(["click"]),uu[Wt]="src/ui/components/viewer/pc/CustomCssModal.svelte";var iu=Pr(Vr('<div><div class="modal-content"><div class="modal-header"><h3>ì‚¬ìš©ìž CSS</h3> <button class="modal-close">&times;</button></div> <div class="modal-body"><textarea placeholder="/* ì‚¬ìš©ìž ì •ì˜ CSSë¥¼ ìž…ë ¥í•˜ì„¸ìš” */"></textarea></div> <div class="modal-footer"><button class="modal-btn secondary">ì´ˆê¸°í™”</button> <button class="modal-btn primary">ì ìš©</button></div></div></div>'),uu[Wt],[[41,0,[[46,2,[[47,4,[[48,6],[49,6]]],[52,4,[[53,6]]],[59,4,[[60,6],[63,6]]]]]]]]);function uu(t,e){no(new.target),re(e,!0,uu);let n=Yo(e,"isOpen",3,!1),r=Yo(e,"initialCss",3,""),o=Kt(Ge(rn(r())),"cssValue");Mn(()=>{Je(o,r())});var i={...ro()},u=iu();let a;zr("keydown",cn,function(t){var n;sn(t.key,"Escape")&&(null==(n=e.onClose)||n.call(e))}),u.__click=function(t){var n;sn(t.target,t.currentTarget)&&(null==(n=e.onClose)||n.call(e))};var l=_n(u),s=_n(l);bn(_n(s),2).__click=function(...t){Ur(()=>e.onClose,this,t,uu,[49,43])};var c=bn(s,2),f=_n(c),d=_n(bn(c,2));return d.__click=function(){var t;Je(o,""),null==(t=e.onReset)||t.call(e)},bn(d,2).__click=function(){var t;null==(t=e.onApply)||t.call(e,_r(o))},Pn(()=>a=$o(u,1,"modal-overlay",null,a,{active:n()})),function(t,e,n=e){var r=new WeakSet;$n(t,"input",async o=>{"checkbox"===t.type&&Bt();var i=o?t.defaultValue:t.value;if(i=Ho(t)?Do(i):i,n(i),null!==pe&&r.add(pe),await mr(),i!==(i=e())){var u=t.selectionStart,a=t.selectionEnd,l=t.value.length;if(t.value=i??"",null!==a){var s=t.value.length;u===a&&a===l&&s>l?(t.selectionStart=s,t.selectionEnd=s):(t.selectionStart=u,t.selectionEnd=Math.min(a,s))}}}),null==wr(e)&&t.value&&(n(Ho(t)?Do(t.value):t.value),null!==pe&&r.add(pe)),In(()=>{"checkbox"===t.type&&Bt();var n=e();if(t===document.activeElement){var o=ge??pe;if(r.has(o))return}Ho(t)&&n===Do(t.value)||("date"!==t.type||n||t.value)&&n!==t.value&&(t.value=n??"")})}(f,function(){return _r(o)},function(t){Je(o,t)}),Jr(t,u),oe(i)}Wr(["click"]);class au{constructor(t={}){this.splittableTags=t.splittableTags||["p"],this.minHeightRatio=t.minHeightRatio||.85}isSplittable(t){var e;const n=null==(e=t.tagName)?void 0:e.toLowerCase();if(!this.splittableTags.includes(n))return!1;return!t.querySelector("mark, strong, em, a, span[class], code")}splitElement(t,e,n){if(!this.isSplittable(t))return[t.cloneNode(!0)];const r=t.cloneNode(!0);e.innerHTML="",e.appendChild(r);return e.scrollHeight<=n?[t.cloneNode(!0)]:this._splitBySentence(t,e,n)}_splitBySentence(t,e,n){const r=t.tagName.toLowerCase(),o=t.innerText||t.textContent||"",i=this._splitIntoSentences(o);if(i.length<=1)return this._splitByWords(t,e,n);const u=[];let a=[];for(const l of i){const o=[...a,l].join(""),i=document.createElement(r);if(Array.from(t.attributes).forEach(t=>{i.setAttribute(t.name,t.value)}),i.textContent=o,e.innerHTML="",e.appendChild(i),e.scrollHeight<=n)a.push(l);else{if(a.length>0){const e=document.createElement(r);Array.from(t.attributes).forEach(t=>{e.setAttribute(t.name,t.value)}),e.textContent=a.join(""),u.push(e)}a=[l]}}if(a.length>0){const e=document.createElement(r);Array.from(t.attributes).forEach(t=>{e.setAttribute(t.name,t.value)}),e.textContent=a.join(""),u.push(e)}return u.length>0?u:[t.cloneNode(!0)]}_splitIntoSentences(t){return t.split(new RegExp("(?<=[.!?ã€‚ï¼ï¼Ÿ])\\s*")).filter(t=>t.length>0)}_splitByWords(t,e,n){const r=t.tagName.toLowerCase(),o=(t.innerText||t.textContent||"").split(/(\s+)/).filter(t=>t.length>0);if(0===o.length)return[t.cloneNode(!0)];const i=[];let u=0;for(;u<o.length;){let a=u+1,l=u+1;for(;a<=o.length;){const i=o.slice(u,a).join(""),s=document.createElement(r);if(Array.from(t.attributes).forEach(t=>{s.setAttribute(t.name,t.value)}),s.textContent=i,e.innerHTML="",e.appendChild(s),!(e.scrollHeight<=n))break;l=a,a++}const s=document.createElement(r);Array.from(t.attributes).forEach(t=>{s.setAttribute(t.name,t.value)}),s.textContent=o.slice(u,l).join(""),i.push(s),u=l}return i}static createMeasureContainer(t){const e=document.createElement("div"),n=getComputedStyle(t);return e.style.cssText=`\n      position: absolute;\n      visibility: hidden;\n      pointer-events: none;\n      width: ${t.clientWidth}px;\n      padding: ${n.padding};\n      font-size: ${n.fontSize};\n      line-height: ${n.lineHeight};\n      font-family: ${n.fontFamily};\n      overflow: hidden;\n    `,e}}function lu(t,e,n){const r=[],o=Array.from(t.children),i=e.clientHeight;let u=[];return o.forEach(t=>{const o=t.cloneNode(!0);if(e.innerHTML="",e.appendChild(o),t.querySelector("img")||"IMG"===t.tagName)return u.length>0&&(r.push(su(u)),u=[]),r.push(su([t.cloneNode(!0)])),void(e.innerHTML="");e.innerHTML="",u.forEach(t=>{e.appendChild(t.cloneNode(!0))}),e.appendChild(o);const a=e.scrollHeight>e.clientHeight;if(a&&n.isSplittable(t)){u.length>0&&(r.push(su(u)),u=[]),e.innerHTML="";return void n.splitElement(t,e,i).forEach(t=>{(t=>{const n=t.cloneNode(!0);e.appendChild(n),e.scrollHeight>e.clientHeight&&u.length>0&&(r.push(su(u)),u=[],e.innerHTML="",e.appendChild(n)),u.push(t)})(t)})}a&&u.length>0&&(r.push(su(u)),u=[],e.innerHTML="",e.appendChild(o)),u.push(t.cloneNode(!0))}),u.length>0&&r.push(su(u)),r}function su(t){const e=document.createElement("div");return t.forEach(t=>e.appendChild(t)),e.innerHTML}function cu(){return new Promise(t=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{t()})})})}const fu="bookViewerSettings",du="bookViewerCustomCss",hu={fontSize:17,lineHeight:1.9,theme:"light"};function vu(){try{const t=localStorage.getItem(fu);if(t){const e=JSON.parse(t);return{fontSize:e.fontSize??hu.fontSize,lineHeight:e.lineHeight??hu.lineHeight,theme:e.theme??hu.theme}}}catch(t){console.error("[SettingsManager] Failed to load settings:",t)}return{...hu}}function pu(t){const e=document.getElementById("book-viewer-custom-css");if(e&&e.remove(),!t||""===t.trim())return null;const n=document.createElement("style");return n.id="book-viewer-custom-css",n.textContent=t,document.head.appendChild(n),n}mu[Wt]="src/ui/components/viewer/pc/PCBookViewer.svelte";var gu=Pr(Vr('<div class="book-viewer-root"><!> <!> <!> <!></div>'),mu[Wt],[[295,0]]);function mu(t,e){no(new.target),re(e,!0,mu);let n=Yo(e,"chatHtml",7,""),r=Yo(e,"chatIndex",3,0),o=Kt(Ge(rn([])),"pages"),i=Kt(Ge(0),"currentPage"),u=Kt(Ge(rn({fontSize:17,lineHeight:1.9,theme:"dark"})),"settings"),a=Kt(Ge(rn({thumbnailUrl:"",name:"",chatIndex:0,buttons:[]})),"headerInfo"),l=Kt(Ge(rn([])),"lbModules"),s=Kt(Ge(!1),"isCssModalOpen"),c=Kt(Ge(""),"customCss"),f=Kt(Ge(null),"originalContent"),d=Kt(Ge(""),"lastKnownHtml"),h=new au({splittableTags:["p"]}),v=Kt(Ge(null),"leftContentRef"),p=Kt(Ge(null),"rootElement"),g=null,m=null,_=Kt(Oe(()=>Math.ceil(_r(o).length/2)),"totalSpreads"),y=Kt(Oe(()=>2*_r(i)),"leftIndex"),b=Kt(Oe(()=>2*_r(i)+1),"rightIndex"),w=Kt(Oe(()=>_r(o)[_r(y)]||""),"leftContent"),x=Kt(Oe(()=>_r(o)[_r(b)]||""),"rightContent"),k=Kt(Oe(()=>_r(o)[_r(y)]?_r(y)+1:0),"leftPageNum"),$=Kt(Oe(()=>_r(o)[_r(b)]?_r(b)+1:0),"rightPageNum"),C=Kt(Oe(()=>sn(_r(i),0)),"prevDisabled"),S=Kt(Oe(()=>_r(b)>=_r(o).length-1),"nextDisabled");async function A(){if(!n())return;Je(d,n(),!0);const t=(new DOMParser).parseFromString(n(),"text/html");Je(a,function(t){const e={thumbnailUrl:"",name:"",chatIndex:0,buttons:[]},n=t.querySelector(".shadow-lg.bg-textcolor2.rounded-md");if(n){const t=n.getAttribute("style");if(t){const n=t.match(/background:\s*url\(['"]?([^'")\s]+)['"]?\)/);n&&n[1]&&(e.thumbnailUrl=n[1])}}const r=t.querySelector(".flexium.items-center.chat-width");if(r){const t=r.querySelector("span.chat-width");t&&(e.name=t.textContent.trim())}const o=t.querySelector(".risu-ebooklike-viewer-chat-message-bot-buttons");o&&[".button-icon-copy",".button-icon-tts",".button-icon-edit",".button-icon-translate"].forEach(t=>{const n=o.querySelector(t);n&&e.buttons.push(n.cloneNode(!0))});const i=t.querySelector(".risu-chat");if(i){const t=i.getAttribute("data-chat-index");t&&(e.chatIndex=parseInt(t,10))}return e}(t),!0),_r(a).chatIndex=r(),Je(l,function(t){const e=[];return t.querySelectorAll(".x-risu-lb-module-root").forEach(t=>{var n,r;const o=t.getAttribute("data-id")||"",i=t.querySelector(".x-risu-lb-opener span"),u=t.querySelector(".x-risu-lb-nai-opener span"),a=(null==(n=null==i?void 0:i.textContent)?void 0:n.trim())||(null==(r=null==u?void 0:u.textContent)?void 0:r.trim())||o||"LB Module";e.push({type:"module-root",dataId:o,label:a,element:t.cloneNode(!0)})}),t.querySelectorAll(".x-risu-lb-nai-btn").forEach(t=>{var n;if(!t.closest(".x-risu-lb-module-root")){const r=t.getAttribute("risu-btn")||"",o=(null==(n=t.textContent)?void 0:n.trim())||r||"NAI Button";e.push({type:"nai-btn",dataId:r,label:o,element:t.cloneNode(!0)})}}),e}(t),!0);const e=t.querySelector(".chattext");e&&(!function(t){const e=Array.from(t.childNodes);let n=[];const r=()=>{if(0===n.length)return;const e=n.map(t=>t.nodeType===Node.TEXT_NODE?t.textContent:t.outerHTML).join("");if(""===e.trim())return n.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),void(n=[]);const r=document.createElement("p");r.innerHTML=e;const o=n[0];t.insertBefore(r,o),n.forEach(t=>{t.parentNode&&t.parentNode.removeChild(t)}),n=[]},o=["p","div","ul","ol","li","h1","h2","h3","h4","h5","h6","table","blockquote","pre","hr","details","figure","section","article","header","footer","nav","aside","title"];e.forEach(t=>{if(t.nodeType===Node.TEXT_NODE)(""!==t.textContent.trim()||n.length>0)&&n.push(t);else if(t.nodeType===Node.ELEMENT_NODE){const e=t.tagName.toLowerCase();o.includes(e)?r():n.push(t)}}),r()}(e),Je(f,e.cloneNode(!0),!0),(await Ie(cu()))(),(await Ie(E()))())}async function E(){if(!_r(f))return;const t=document.querySelector(".book-viewer-root .text-content");if(!t){(await Ie(cu()))();if(!document.querySelector(".book-viewer-root .text-content"))return}const e=function(t){const e=document.createElement("div");if(e.className="text-content chattext",e.style.position="absolute",e.style.visibility="hidden",e.style.pointerEvents="none",t){const n=t.getBoundingClientRect(),r=window.getComputedStyle(t);e.style.width=n.width+"px",e.style.height=n.height+"px",e.style.padding=r.padding,e.style.fontSize=r.fontSize,e.style.lineHeight=r.lineHeight,e.style.fontFamily=r.fontFamily}return e}(t||document.body);document.body.appendChild(e);try{Je(o,lu(_r(f).cloneNode(!0),e,h),!0)}finally{document.body.removeChild(e)}}function M(){g&&clearTimeout(g),g=setTimeout(()=>{!async function(){if(!_r(f))return;const t=2*_r(i);Je(o,[],!0),Je(i,0),(await Ie(cu()))(),(await Ie(E()))();const e=Math.max(0,Math.ceil(_r(o).length/2)-1);Je(i,Math.min(Math.floor(t/2),e),!0)}()},300)}function N(){const t=Pi(r());if(t){const e=t.outerHTML;sn(e,_r(d),!1)&&(Je(d,e,!0),n(e),A())}}function R(){_r(b)>=_r(o).length-1||Qe(i)}function I(){sn(_r(i),0)||Qe(i,-1)}function P(t){Je(u,t,!0),function(t){try{const e={...vu(),...t};localStorage.setItem(fu,JSON.stringify(e))}catch(e){console.error("[SettingsManager] Failed to save settings:",e)}}(_r(u)),M()}function T(){Je(s,!0)}function L(t){Je(c,t,!0),function(t){try{t?localStorage.setItem(du,t):localStorage.removeItem(du)}catch(e){console.error("[SettingsManager] Failed to save custom CSS:",e)}}(t),pu(t),Je(s,!1),M()}function j(){Je(c,""),function(){const t=document.getElementById("book-viewer-custom-css");t&&t.remove(),localStorage.removeItem(du)}(),M()}function O(t){const e=t.dataId||t.risuBtn;for(let n=0;n<_r(o).length;n++){const t=_r(o)[n];if(t.includes(`data-id="${e}"`)||t.includes(`risu-btn="${e}"`)){Je(i,Math.floor(n/2),!0);break}}}Mn(()=>{_r(p)&&(_r(p).style.setProperty("--bv-font-size",`${_r(u).fontSize}px`),_r(p).style.setProperty("--bv-line-height",String(_r(u).lineHeight)),_r(p).setAttribute("data-theme",_r(u).theme))}),Qo(async()=>{Je(u,vu(),!0),Je(c,function(){try{return localStorage.getItem(du)||""}catch(t){return console.error("[SettingsManager] Failed to load custom CSS:",t),""}}(),!0),_r(c)&&pu(_r(c)),(await Ie(cu()))(),(await Ie(A()))(),m=setInterval(N,2e3)}),ti(()=>{g&&clearTimeout(g),m&&clearInterval(m);const t=document.getElementById("book-viewer-custom-css");t&&t.remove()});var B={...ro()},z=gu();zr("keydown",cn,function(t){var n;_r(s)?sn(t.key,"Escape")&&Je(s,!1):sn(t.key,"ArrowRight")||sn(t.key,"PageDown")||sn(t.key," ")?(t.preventDefault(),R()):sn(t.key,"ArrowLeft")||sn(t.key,"PageUp")?(t.preventDefault(),I()):sn(t.key,"Escape")&&(null==(n=e.onClose)||n.call(e))}),zr("resize",cn,function(){M()});var W=_n(z);te(()=>qi(W,{get thumbnailUrl(){return _r(a).thumbnailUrl},get name(){return _r(a).name},get chatIndex(){return _r(a).chatIndex},get buttons(){return _r(a).buttons},get onClose(){return e.onClose}}),"component",mu,300,2,{componentTag:"BookHeader"});var H=bn(W,2);te(()=>Zi(H,{get leftContent(){return _r(w)},get rightContent(){return _r(x)},get leftPageNum(){return _r(k)},get rightPageNum(){return _r($)},onPrevPage:I,onNextPage:R,get leftContentRef(){return _r(v)},set leftContentRef(t){Je(v,t,!0)}}),"component",mu,308,2,{componentTag:"BookPages"});var D=bn(H,2);te(()=>ou(D,{get currentSpread(){return _r(i)},get totalSpreads(){return _r(_)},onPrev:I,onNext:R,get prevDisabled(){return _r(C)},get nextDisabled(){return _r(S)},get settings(){return _r(u)},onSettingsChange:P,onOpenCustomCss:T,get lbModules(){return _r(l)},onLBModuleClick:O}),"component",mu,318,2,{componentTag:"NavControls"});var U=bn(D,2);return te(()=>uu(U,{get isOpen(){return _r(s)},get initialCss(){return _r(c)},onApply:L,onReset:j,onClose:()=>Je(s,!1)}),"component",mu,332,2,{componentTag:"CustomCssModal"}),Fo(z,t=>Je(p,t),()=>_r(p)),Pn(()=>jo(z,"data-theme",_r(u).theme)),Jr(t,z),oe(B)}const _u="pc-book-viewer",yu="pc-viewer";let bu=null;function wu(t=null){var e;e=_u,ai.has(e)&&xu();try{const e=oi.getInstance(),n=t??e.getLastChatIndex()-1,r=Pi(n);if(!r)return console.warn("[PCViewer] Chat element not found for index:",n),!1;const o=Ri(Ni.chatScreen.displayContainer);if(!o)return console.warn("[PCViewer] Display container not found"),!1;bu=o,function(t,e,n="default"){var r;if(!t||!e)return;const o=`${ii}-style-${n}`;let i=(null==(r=ui.get(t))?void 0:r[o])||{};Object.entries(e).forEach(([e,n])=>{e in i||(i[e]=t.style.getPropertyValue(e)),t.style.setProperty(e,n)});const u=ui.get(t)||{};u[o]=i,ui.set(t,u)}(o,{overflow:"hidden"},yu);return!!li({id:_u,component:mu,target:o,props:{chatHtml:r.outerHTML,chatIndex:n,onClose:xu},useContents:!1})&&(console.log("[PCViewer] Opened for chat index:",n),!0)}catch(n){return console.error("[PCViewer] Failed to open:",n),!1}}function xu(){bu&&(!function(t,e="default"){if(!t)return;const n=`${ii}-style-${e}`,r=ui.get(t),o=null==r?void 0:r[n];o&&(Object.entries(o).forEach(([e,n])=>{n?t.style.setProperty(e,n):t.style.removeProperty(e)}),delete r[n])}(bu,yu),bu=null);const t=si(_u);return t&&console.log("[PCViewer] Closed"),t}$u[Wt]="src/ui/components/BookButton.svelte";var ku=Pr(Vr('<button class="flex justify-center border-y border-darkborderc items-center text-gray-100 p-3 peer-focus:border-textcolor hover:bg-blue-500 transition-colors button-icon-ebook" title="ì´ë¶ ë¦¬ìˆ˜ ê¸°ë¦½í•˜ì‹œì˜¤"><!></button>'),$u[Wt],[[22,0]]);function $u(t,e){no(new.target),re(e,!0,$u);let n=Kt(Ge("44px"),"inputHeight");Qo(()=>{const t=Ri(Ni.chatScreen.textarea);t&&Je(n,`${t.scrollHeight}px`)});var r={...ro()},o=ku();let i;o.__click=function(t){t.stopPropagation(),wu()};var u=_n(o);return te(()=>Bi(u,{}),"component",$u,28,2,{componentTag:"Book"}),Pn(()=>i=So(o,"",i,{height:_r(n)})),Jr(t,o),oe(r)}Wr(["click"]),Su[Wt]="src/ui/components/SmallBookButton.svelte";var Cu=Pr(Vr('<button class="ml-2 hover:text-blue-500 transition-colors button-small-book" title="ì´ë¶ ë·°ì–´ë¡œ ë³´ê¸°"><!></button>'),Su[Wt],[[13,0]]);function Su(t,e){no(new.target),re(e,!0,Su);var n={...ro()},r=Cu();r.__click=function(t){t.stopPropagation(),wu(e.chatIndex)};var o=_n(r);return te(()=>Oi(o,{size:20}),"component",Su,18,2,{componentTag:"BookOpen"}),Jr(t,r),oe(n)}function Au(t,e){no(new.target),re(e,!0,Au);let n=Kt(Ge(null),"risuAPI"),r=Kt(Ge(null),"observer");const o=Mi.debounce(function(){const t=Ri(Ni.chatScreen.inputContainer),e=Ri(Ni.chatScreen.sendButton);Mi.isNil(t)||li({id:"book-button",component:$u,target:t,anchor:e});const n=Ii(Ni.chatMessage.botButtonDiv);Mi.isNil(n)||n.forEach(t=>{li({id:"small-book-button",component:Su,target:t,anchor:Ri(Ni.chatMessage.copyButton,t),props:{chatIndex:function({node:t,maxDepth:e=10}){var n;return t&&t instanceof Node?(t instanceof Element||t.parentElement,null==(n=t.closest(".risu-chat").dataset)?void 0:n.chatIndex):null}({node:t})}})})},100);return Qo(()=>{Je(n,oi.getInstance(),!0),Mi.isNil(_r(n))?console.log(`[${ei}] RisuAPI is not initialized`):(!function(){Mi.isNil(_r(r))||_r(r).disconnect();Je(r,new MutationObserver(()=>{o()}),!0),_r(r).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style","class"]}),o()}(),console.log(`[${ei}] plugin loaded`))}),ti(()=>{Mi.isNil(_r(r))||_r(r).disconnect(),si("book-button"),o.cancel(),console.log(`${ei} ì–¸ë¡œë“œ`)}),oe({...ro()})}Wr(["click"]),Au[Wt]="src/App.svelte",(async()=>{Promise.resolve().then(()=>Ru).then(({initHotReload:t})=>{t(),console.log(`[${ei}] ðŸ”¥ Hot Reload enabled`)}).catch(t=>{console.warn("[App] Hot reload initialization failed:",t)});try{const t=oi.getInstance(globalThis.__pluginApis__);if(!(await t.initialize()))return void console.error(`[${ei}] Failed to initialize RisuAPI`);ki({silent:!0}).catch(t=>{console.warn("[App] Update check failed:",t)});const e=document.createElement("div");e.id=`${ei}-root`,document.body.appendChild(e);const n=Yr(Au,{target:e});console.log(`${ei} v${ni} loaded`),t.onUnload(()=>{eo(n),e.remove()})}catch(t){console.error(`[${ei}] Initialization failed:`,t)}})();const Eu="ws://localhost:13131";class Mu{constructor(){this.ws=null,this.reconnectAttempts=0,this.reconnectTimeout=null,this.isIntentionallyClosed=!1,this.errorLogCount=0}connect(){if(this.ws&&this.ws.readyState===WebSocket.OPEN)console.log(`[${ei}:HotReload] Already connected`);else try{this.errorLogCount<3&&console.log(`[${ei}:HotReload] Connecting to dev server:`,Eu),this.ws=new WebSocket(Eu),this.ws.onopen=()=>{console.log(`[${ei}:HotReload] âœ… Connected to dev server`),this.reconnectAttempts=0,this.errorLogCount=0},this.ws.onmessage=t=>{this.handleMessage(t.data)},this.ws.onclose=t=>{this.errorLogCount<3?(console.log(`[${ei}:HotReload] Disconnected (code: ${t.code}, reason: ${t.reason||"unknown"})`),this.errorLogCount++):3===this.errorLogCount&&(console.log(`[${ei}:HotReload] Connection errors suppressed (max logs reached). Retrying silently...`),this.errorLogCount++),this.isIntentionallyClosed||this.scheduleReconnect()},this.ws.onerror=t=>{}}catch(t){this.errorLogCount<3&&this.errorLogCount++,this.scheduleReconnect()}}handleMessage(t){try{const e=JSON.parse(t);switch(e.type){case"connected":console.log(`[${ei}:HotReload] Server message:`,e.message);break;case"reload":console.log(`[${ei}:HotReload] ðŸ“¦ Update received (${e.file}, ${e.size} bytes)`),this.handleReload(e.scriptContent);break;case"pong":break;default:console.warn(`[${ei}:HotReload] Unknown message type:`,e.type)}}catch(e){console.error(`[${ei}:HotReload] Failed to parse message:`,e)}}extractPluginName(t){try{const e=/\/\/@name (.+?)\n/,n=t.match(e);return n?n[1].trim():null}catch(e){return console.error(`[${ei}:HotReload] Failed to extract plugin name:`,e),null}}async handleReload(t){var e;try{console.log(`[${ei}:HotReload] ðŸ”„ Parsing updated script...`);const n=this.extractPluginName(t),r=ei;if(!n)return console.error(`[${ei}:HotReload] âŒ Security Check Failed: No plugin name found in received script`),void this.showToast("âŒ Security Check Failed: Invalid script format","error");if(n!==r)return console.error(`[${ei}:HotReload] âŒ Security Check Failed: Plugin name mismatch\n  Expected: ${r}\n  Received: ${n}`),void this.showToast(`âŒ Security Check Failed: Wrong plugin (${n})`,"error");console.log(`[${ei}:HotReload] âœ… Security Check Passed: Plugin name verified (${r})`);const o=ci(t);console.log(`[${ei}:HotReload] ðŸ”„ Updating plugin...`);const i=await fi(o);i.success?(console.log(`[${ei}:HotReload] âœ… Plugin updated successfully`),this.showToast("ðŸ”¥ Hot Reload Complete!","success")):(console.error(`[${ei}:HotReload] âŒ Plugin update failed:`,i.error),this.showToast(`âŒ Hot Reload Failed: ${(null==(e=i.error)?void 0:e.message)||"Unknown error"}`,"error"))}catch(n){console.error(`[${ei}:HotReload] âŒ Reload failed:`,n),this.showToast(`âŒ Hot Reload Error: ${n.message}`,"error")}}showToast(t,e="success"){const n=document.getElementById("hot-reload-toast");n&&n.remove();const r=document.createElement("div");r.id="hot-reload-toast",r.textContent=t;const o="success"===e?"#10b981":"#ef4444";Object.assign(r.style,{position:"fixed",top:"-100px",left:"50%",transform:"translateX(-50%)",backgroundColor:o,color:"white",padding:"12px 24px",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.06)",fontSize:"14px",fontWeight:"500",zIndex:"999999",transition:"top 0.3s ease-out",fontFamily:"system-ui, -apple-system, sans-serif"}),document.body.appendChild(r),setTimeout(()=>{r.style.top="20px"},10),setTimeout(()=>{r.style.top="-100px",setTimeout(()=>{r.remove()},300)},3e3)}scheduleReconnect(){if(this.reconnectTimeout&&clearTimeout(this.reconnectTimeout),this.reconnectAttempts>=3)return void(this.errorLogCount<3&&console.log(`[${ei}:HotReload] Max reconnection attempts reached. Stopped retrying.`));const t=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);this.errorLogCount<3&&console.log(`[${ei}:HotReload] Reconnecting in ${t/1e3}s... (attempt ${this.reconnectAttempts+1})`),this.reconnectTimeout=setTimeout(()=>{this.reconnectAttempts++,this.connect()},t)}ping(){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({type:"ping",timestamp:Date.now()}))}disconnect(){this.isIntentionallyClosed=!0,this.reconnectTimeout&&clearTimeout(this.reconnectTimeout),this.ws&&(this.ws.close(1e3,"Client closed"),this.ws=null),console.log(`[${ei}:HotReload] Disconnected`)}}let Nu=null;const Ru=Object.freeze(Object.defineProperty({__proto__:null,initHotReload:function(){return Nu?(console.log(`[${ei}:HotReload] Already initialized`),Nu):(console.log(`[${ei}:HotReload] ðŸ”¥ Initializing hot reload client...`),Nu=new Mu,Nu.connect(),setInterval(()=>{Nu.ping()},3e4),Nu)}},Symbol.toStringTag,{value:"Module"}))});
